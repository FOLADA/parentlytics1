"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@react-three";
exports.ids = ["vendor-chunks/@react-three"];
exports.modules = {

/***/ "(ssr)/./node_modules/@react-three/drei/core/OrbitControls.js":
/*!**************************************************************!*\
  !*** ./node_modules/@react-three/drei/core/OrbitControls.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OrbitControls: () => (/* binding */ OrbitControls)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"(ssr)/./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/events-cf57b220.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var three_stdlib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three-stdlib */ \"(ssr)/./node_modules/three-stdlib/controls/OrbitControls.js\");\n\n\n\n\n\nconst OrbitControls = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({\n  makeDefault,\n  camera,\n  regress,\n  domElement,\n  enableDamping = true,\n  keyEvents = false,\n  onChange,\n  onStart,\n  onEnd,\n  ...restProps\n}, ref) => {\n  const invalidate = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.invalidate);\n  const defaultCamera = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.camera);\n  const gl = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.gl);\n  const events = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.events);\n  const setEvents = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.setEvents);\n  const set = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.set);\n  const get = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.get);\n  const performance = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.C)(state => state.performance);\n  const explCamera = camera || defaultCamera;\n  const explDomElement = domElement || events.connected || gl.domElement;\n  const controls = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => new three_stdlib__WEBPACK_IMPORTED_MODULE_3__.OrbitControls(explCamera), [explCamera]);\n  (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.D)(() => {\n    if (controls.enabled) controls.update();\n  }, -1);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (keyEvents) {\n      controls.connect(keyEvents === true ? explDomElement : keyEvents);\n    }\n    controls.connect(explDomElement);\n    return () => void controls.dispose();\n  }, [keyEvents, explDomElement, regress, controls, invalidate]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    const callback = e => {\n      invalidate();\n      if (regress) performance.regress();\n      if (onChange) onChange(e);\n    };\n    const onStartCb = e => {\n      if (onStart) onStart(e);\n    };\n    const onEndCb = e => {\n      if (onEnd) onEnd(e);\n    };\n    controls.addEventListener('change', callback);\n    controls.addEventListener('start', onStartCb);\n    controls.addEventListener('end', onEndCb);\n    return () => {\n      controls.removeEventListener('start', onStartCb);\n      controls.removeEventListener('end', onEndCb);\n      controls.removeEventListener('change', callback);\n    };\n  }, [onChange, onStart, onEnd, controls, invalidate, setEvents]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (makeDefault) {\n      const old = get().controls;\n      // @ts-ignore https://github.com/three-types/three-ts-types/pull/1398\n      set({\n        controls\n      });\n      return () => set({\n        controls: old\n      });\n    }\n  }, [makeDefault, controls]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"primitive\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    ref: ref,\n    object: controls,\n    enableDamping: enableDamping\n  }, restProps));\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvY29yZS9PcmJpdENvbnRyb2xzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwRDtBQUNGO0FBQ3pCO0FBQ2lDOztBQUVoRSxxQ0FBcUMsNkNBQWdCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHFCQUFxQixxREFBUTtBQUM3Qix3QkFBd0IscURBQVE7QUFDaEMsYUFBYSxxREFBUTtBQUNyQixpQkFBaUIscURBQVE7QUFDekIsb0JBQW9CLHFEQUFRO0FBQzVCLGNBQWMscURBQVE7QUFDdEIsY0FBYyxxREFBUTtBQUN0QixzQkFBc0IscURBQVE7QUFDOUI7QUFDQTtBQUNBLG1CQUFtQiwwQ0FBYSxXQUFXLHVEQUFlO0FBQzFELEVBQUUscURBQVE7QUFDVjtBQUNBLEdBQUc7QUFDSCxFQUFFLDRDQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDRDQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSCxzQkFBc0IsZ0RBQW1CLGNBQWMsOEVBQVE7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRXdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxkcmVpXFxjb3JlXFxPcmJpdENvbnRyb2xzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZXh0ZW5kcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzJztcbmltcG9ydCB7IHVzZVRocmVlLCB1c2VGcmFtZSB9IGZyb20gJ0ByZWFjdC10aHJlZS9maWJlcic7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBPcmJpdENvbnRyb2xzIGFzIE9yYml0Q29udHJvbHMkMSB9IGZyb20gJ3RocmVlLXN0ZGxpYic7XG5cbmNvbnN0IE9yYml0Q29udHJvbHMgPSAvKiBAX19QVVJFX18gKi9SZWFjdC5mb3J3YXJkUmVmKCh7XG4gIG1ha2VEZWZhdWx0LFxuICBjYW1lcmEsXG4gIHJlZ3Jlc3MsXG4gIGRvbUVsZW1lbnQsXG4gIGVuYWJsZURhbXBpbmcgPSB0cnVlLFxuICBrZXlFdmVudHMgPSBmYWxzZSxcbiAgb25DaGFuZ2UsXG4gIG9uU3RhcnQsXG4gIG9uRW5kLFxuICAuLi5yZXN0UHJvcHNcbn0sIHJlZikgPT4ge1xuICBjb25zdCBpbnZhbGlkYXRlID0gdXNlVGhyZWUoc3RhdGUgPT4gc3RhdGUuaW52YWxpZGF0ZSk7XG4gIGNvbnN0IGRlZmF1bHRDYW1lcmEgPSB1c2VUaHJlZShzdGF0ZSA9PiBzdGF0ZS5jYW1lcmEpO1xuICBjb25zdCBnbCA9IHVzZVRocmVlKHN0YXRlID0+IHN0YXRlLmdsKTtcbiAgY29uc3QgZXZlbnRzID0gdXNlVGhyZWUoc3RhdGUgPT4gc3RhdGUuZXZlbnRzKTtcbiAgY29uc3Qgc2V0RXZlbnRzID0gdXNlVGhyZWUoc3RhdGUgPT4gc3RhdGUuc2V0RXZlbnRzKTtcbiAgY29uc3Qgc2V0ID0gdXNlVGhyZWUoc3RhdGUgPT4gc3RhdGUuc2V0KTtcbiAgY29uc3QgZ2V0ID0gdXNlVGhyZWUoc3RhdGUgPT4gc3RhdGUuZ2V0KTtcbiAgY29uc3QgcGVyZm9ybWFuY2UgPSB1c2VUaHJlZShzdGF0ZSA9PiBzdGF0ZS5wZXJmb3JtYW5jZSk7XG4gIGNvbnN0IGV4cGxDYW1lcmEgPSBjYW1lcmEgfHwgZGVmYXVsdENhbWVyYTtcbiAgY29uc3QgZXhwbERvbUVsZW1lbnQgPSBkb21FbGVtZW50IHx8IGV2ZW50cy5jb25uZWN0ZWQgfHwgZ2wuZG9tRWxlbWVudDtcbiAgY29uc3QgY29udHJvbHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IG5ldyBPcmJpdENvbnRyb2xzJDEoZXhwbENhbWVyYSksIFtleHBsQ2FtZXJhXSk7XG4gIHVzZUZyYW1lKCgpID0+IHtcbiAgICBpZiAoY29udHJvbHMuZW5hYmxlZCkgY29udHJvbHMudXBkYXRlKCk7XG4gIH0sIC0xKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoa2V5RXZlbnRzKSB7XG4gICAgICBjb250cm9scy5jb25uZWN0KGtleUV2ZW50cyA9PT0gdHJ1ZSA/IGV4cGxEb21FbGVtZW50IDoga2V5RXZlbnRzKTtcbiAgICB9XG4gICAgY29udHJvbHMuY29ubmVjdChleHBsRG9tRWxlbWVudCk7XG4gICAgcmV0dXJuICgpID0+IHZvaWQgY29udHJvbHMuZGlzcG9zZSgpO1xuICB9LCBba2V5RXZlbnRzLCBleHBsRG9tRWxlbWVudCwgcmVncmVzcywgY29udHJvbHMsIGludmFsaWRhdGVdKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjYWxsYmFjayA9IGUgPT4ge1xuICAgICAgaW52YWxpZGF0ZSgpO1xuICAgICAgaWYgKHJlZ3Jlc3MpIHBlcmZvcm1hbmNlLnJlZ3Jlc3MoKTtcbiAgICAgIGlmIChvbkNoYW5nZSkgb25DaGFuZ2UoZSk7XG4gICAgfTtcbiAgICBjb25zdCBvblN0YXJ0Q2IgPSBlID0+IHtcbiAgICAgIGlmIChvblN0YXJ0KSBvblN0YXJ0KGUpO1xuICAgIH07XG4gICAgY29uc3Qgb25FbmRDYiA9IGUgPT4ge1xuICAgICAgaWYgKG9uRW5kKSBvbkVuZChlKTtcbiAgICB9O1xuICAgIGNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNhbGxiYWNrKTtcbiAgICBjb250cm9scy5hZGRFdmVudExpc3RlbmVyKCdzdGFydCcsIG9uU3RhcnRDYik7XG4gICAgY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcignZW5kJywgb25FbmRDYik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnRyb2xzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0YXJ0Jywgb25TdGFydENiKTtcbiAgICAgIGNvbnRyb2xzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZCcsIG9uRW5kQ2IpO1xuICAgICAgY29udHJvbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2FsbGJhY2spO1xuICAgIH07XG4gIH0sIFtvbkNoYW5nZSwgb25TdGFydCwgb25FbmQsIGNvbnRyb2xzLCBpbnZhbGlkYXRlLCBzZXRFdmVudHNdKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWFrZURlZmF1bHQpIHtcbiAgICAgIGNvbnN0IG9sZCA9IGdldCgpLmNvbnRyb2xzO1xuICAgICAgLy8gQHRzLWlnbm9yZSBodHRwczovL2dpdGh1Yi5jb20vdGhyZWUtdHlwZXMvdGhyZWUtdHMtdHlwZXMvcHVsbC8xMzk4XG4gICAgICBzZXQoe1xuICAgICAgICBjb250cm9sc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gKCkgPT4gc2V0KHtcbiAgICAgICAgY29udHJvbHM6IG9sZFxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbbWFrZURlZmF1bHQsIGNvbnRyb2xzXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInByaW1pdGl2ZVwiLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgb2JqZWN0OiBjb250cm9scyxcbiAgICBlbmFibGVEYW1waW5nOiBlbmFibGVEYW1waW5nXG4gIH0sIHJlc3RQcm9wcykpO1xufSk7XG5cbmV4cG9ydCB7IE9yYml0Q29udHJvbHMgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/drei/core/OrbitControls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/drei/core/shapes.js":
/*!*******************************************************!*\
  !*** ./node_modules/@react-three/drei/core/shapes.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Box: () => (/* binding */ Box),\n/* harmony export */   Capsule: () => (/* binding */ Capsule),\n/* harmony export */   Circle: () => (/* binding */ Circle),\n/* harmony export */   Cone: () => (/* binding */ Cone),\n/* harmony export */   Cylinder: () => (/* binding */ Cylinder),\n/* harmony export */   Dodecahedron: () => (/* binding */ Dodecahedron),\n/* harmony export */   Extrude: () => (/* binding */ Extrude),\n/* harmony export */   Icosahedron: () => (/* binding */ Icosahedron),\n/* harmony export */   Lathe: () => (/* binding */ Lathe),\n/* harmony export */   Octahedron: () => (/* binding */ Octahedron),\n/* harmony export */   Plane: () => (/* binding */ Plane),\n/* harmony export */   Polyhedron: () => (/* binding */ Polyhedron),\n/* harmony export */   Ring: () => (/* binding */ Ring),\n/* harmony export */   Shape: () => (/* binding */ Shape),\n/* harmony export */   Sphere: () => (/* binding */ Sphere),\n/* harmony export */   Tetrahedron: () => (/* binding */ Tetrahedron),\n/* harmony export */   Torus: () => (/* binding */ Torus),\n/* harmony export */   TorusKnot: () => (/* binding */ TorusKnot),\n/* harmony export */   Tube: () => (/* binding */ Tube)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"(ssr)/./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n\n\n\n\nfunction create(type, effect) {\n  const El = type + 'Geometry';\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({\n    args,\n    children,\n    ...props\n  }, fref) => {\n    const ref = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(fref, () => ref.current);\n    react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => void (effect == null ? void 0 : effect(ref.current)));\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"mesh\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n      ref: ref\n    }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(El, {\n      attach: \"geometry\",\n      args: args\n    }), children);\n  });\n}\nconst Box = /* @__PURE__ */create('box');\nconst Circle = /* @__PURE__ */create('circle');\nconst Cone = /* @__PURE__ */create('cone');\nconst Cylinder = /* @__PURE__ */create('cylinder');\nconst Sphere = /* @__PURE__ */create('sphere');\nconst Plane = /* @__PURE__ */create('plane');\nconst Tube = /* @__PURE__ */create('tube');\nconst Torus = /* @__PURE__ */create('torus');\nconst TorusKnot = /* @__PURE__ */create('torusKnot');\nconst Tetrahedron = /* @__PURE__ */create('tetrahedron');\nconst Ring = /* @__PURE__ */create('ring');\nconst Polyhedron = /* @__PURE__ */create('polyhedron');\nconst Icosahedron = /* @__PURE__ */create('icosahedron');\nconst Octahedron = /* @__PURE__ */create('octahedron');\nconst Dodecahedron = /* @__PURE__ */create('dodecahedron');\nconst Extrude = /* @__PURE__ */create('extrude');\nconst Lathe = /* @__PURE__ */create('lathe');\nconst Capsule = /* @__PURE__ */create('capsule');\nconst Shape = /* @__PURE__ */create('shape', ({\n  geometry\n}) => {\n  // Calculate UVs (by https://discourse.threejs.org/u/prisoner849)\n  // https://discourse.threejs.org/t/custom-shape-in-image-not-working/49348/10\n  const pos = geometry.attributes.position;\n  const b3 = new three__WEBPACK_IMPORTED_MODULE_2__.Box3().setFromBufferAttribute(pos);\n  const b3size = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n  b3.getSize(b3size);\n  const uv = [];\n  let x = 0,\n    y = 0,\n    u = 0,\n    v = 0;\n  for (let i = 0; i < pos.count; i++) {\n    x = pos.getX(i);\n    y = pos.getY(i);\n    u = (x - b3.min.x) / b3size.x;\n    v = (y - b3.min.y) / b3size.y;\n    uv.push(u, v);\n  }\n  geometry.setAttribute('uv', new three__WEBPACK_IMPORTED_MODULE_2__.Float32BufferAttribute(uv, 2));\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvY29yZS9zaGFwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDM0I7QUFDQTs7QUFFL0I7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBZ0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQix5Q0FBWTtBQUM1QixJQUFJLHNEQUF5QjtBQUM3QixJQUFJLGtEQUFxQjtBQUN6Qix3QkFBd0IsZ0RBQW1CLFNBQVMsOEVBQVE7QUFDNUQ7QUFDQSxLQUFLLHVCQUF1QixnREFBbUI7QUFDL0M7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1Q0FBVTtBQUMzQixxQkFBcUIsMENBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGVBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHlEQUE0QjtBQUM5RCxDQUFDOztBQUVtTCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxccGFyZW50bHl0aWNzXFxub2RlX21vZHVsZXNcXEByZWFjdC10aHJlZVxcZHJlaVxcY29yZVxcc2hhcGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZXh0ZW5kcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuZnVuY3Rpb24gY3JlYXRlKHR5cGUsIGVmZmVjdCkge1xuICBjb25zdCBFbCA9IHR5cGUgKyAnR2VvbWV0cnknO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoKHtcbiAgICBhcmdzLFxuICAgIGNoaWxkcmVuLFxuICAgIC4uLnByb3BzXG4gIH0sIGZyZWYpID0+IHtcbiAgICBjb25zdCByZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgUmVhY3QudXNlSW1wZXJhdGl2ZUhhbmRsZShmcmVmLCAoKSA9PiByZWYuY3VycmVudCk7XG4gICAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHZvaWQgKGVmZmVjdCA9PSBudWxsID8gdm9pZCAwIDogZWZmZWN0KHJlZi5jdXJyZW50KSkpO1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcIm1lc2hcIiwgX2V4dGVuZHMoe1xuICAgICAgcmVmOiByZWZcbiAgICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEVsLCB7XG4gICAgICBhdHRhY2g6IFwiZ2VvbWV0cnlcIixcbiAgICAgIGFyZ3M6IGFyZ3NcbiAgICB9KSwgY2hpbGRyZW4pO1xuICB9KTtcbn1cbmNvbnN0IEJveCA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgnYm94Jyk7XG5jb25zdCBDaXJjbGUgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ2NpcmNsZScpO1xuY29uc3QgQ29uZSA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgnY29uZScpO1xuY29uc3QgQ3lsaW5kZXIgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ2N5bGluZGVyJyk7XG5jb25zdCBTcGhlcmUgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ3NwaGVyZScpO1xuY29uc3QgUGxhbmUgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ3BsYW5lJyk7XG5jb25zdCBUdWJlID0gLyogQF9fUFVSRV9fICovY3JlYXRlKCd0dWJlJyk7XG5jb25zdCBUb3J1cyA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgndG9ydXMnKTtcbmNvbnN0IFRvcnVzS25vdCA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgndG9ydXNLbm90Jyk7XG5jb25zdCBUZXRyYWhlZHJvbiA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgndGV0cmFoZWRyb24nKTtcbmNvbnN0IFJpbmcgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ3JpbmcnKTtcbmNvbnN0IFBvbHloZWRyb24gPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ3BvbHloZWRyb24nKTtcbmNvbnN0IEljb3NhaGVkcm9uID0gLyogQF9fUFVSRV9fICovY3JlYXRlKCdpY29zYWhlZHJvbicpO1xuY29uc3QgT2N0YWhlZHJvbiA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgnb2N0YWhlZHJvbicpO1xuY29uc3QgRG9kZWNhaGVkcm9uID0gLyogQF9fUFVSRV9fICovY3JlYXRlKCdkb2RlY2FoZWRyb24nKTtcbmNvbnN0IEV4dHJ1ZGUgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ2V4dHJ1ZGUnKTtcbmNvbnN0IExhdGhlID0gLyogQF9fUFVSRV9fICovY3JlYXRlKCdsYXRoZScpO1xuY29uc3QgQ2Fwc3VsZSA9IC8qIEBfX1BVUkVfXyAqL2NyZWF0ZSgnY2Fwc3VsZScpO1xuY29uc3QgU2hhcGUgPSAvKiBAX19QVVJFX18gKi9jcmVhdGUoJ3NoYXBlJywgKHtcbiAgZ2VvbWV0cnlcbn0pID0+IHtcbiAgLy8gQ2FsY3VsYXRlIFVWcyAoYnkgaHR0cHM6Ly9kaXNjb3Vyc2UudGhyZWVqcy5vcmcvdS9wcmlzb25lcjg0OSlcbiAgLy8gaHR0cHM6Ly9kaXNjb3Vyc2UudGhyZWVqcy5vcmcvdC9jdXN0b20tc2hhcGUtaW4taW1hZ2Utbm90LXdvcmtpbmcvNDkzNDgvMTBcbiAgY29uc3QgcG9zID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtcbiAgY29uc3QgYjMgPSBuZXcgVEhSRUUuQm94MygpLnNldEZyb21CdWZmZXJBdHRyaWJ1dGUocG9zKTtcbiAgY29uc3QgYjNzaXplID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgYjMuZ2V0U2l6ZShiM3NpemUpO1xuICBjb25zdCB1diA9IFtdO1xuICBsZXQgeCA9IDAsXG4gICAgeSA9IDAsXG4gICAgdSA9IDAsXG4gICAgdiA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zLmNvdW50OyBpKyspIHtcbiAgICB4ID0gcG9zLmdldFgoaSk7XG4gICAgeSA9IHBvcy5nZXRZKGkpO1xuICAgIHUgPSAoeCAtIGIzLm1pbi54KSAvIGIzc2l6ZS54O1xuICAgIHYgPSAoeSAtIGIzLm1pbi55KSAvIGIzc2l6ZS55O1xuICAgIHV2LnB1c2godSwgdik7XG4gIH1cbiAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCd1dicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHV2LCAyKSk7XG59KTtcblxuZXhwb3J0IHsgQm94LCBDYXBzdWxlLCBDaXJjbGUsIENvbmUsIEN5bGluZGVyLCBEb2RlY2FoZWRyb24sIEV4dHJ1ZGUsIEljb3NhaGVkcm9uLCBMYXRoZSwgT2N0YWhlZHJvbiwgUGxhbmUsIFBvbHloZWRyb24sIFJpbmcsIFNoYXBlLCBTcGhlcmUsIFRldHJhaGVkcm9uLCBUb3J1cywgVG9ydXNLbm90LCBUdWJlIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/drei/core/shapes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/fiber/dist/events-cf57b220.esm.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@react-three/fiber/dist/events-cf57b220.esm.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ useStore),\n/* harmony export */   B: () => (/* binding */ Block),\n/* harmony export */   C: () => (/* binding */ useThree),\n/* harmony export */   D: () => (/* binding */ useFrame),\n/* harmony export */   E: () => (/* binding */ ErrorBoundary),\n/* harmony export */   F: () => (/* binding */ useGraph),\n/* harmony export */   G: () => (/* binding */ useLoader),\n/* harmony export */   _: () => (/* binding */ _roots),\n/* harmony export */   a: () => (/* binding */ useMutableCallback),\n/* harmony export */   b: () => (/* binding */ useIsomorphicLayoutEffect),\n/* harmony export */   c: () => (/* binding */ createRoot),\n/* harmony export */   d: () => (/* binding */ unmountComponentAtNode),\n/* harmony export */   e: () => (/* binding */ extend),\n/* harmony export */   f: () => (/* binding */ createPointerEvents),\n/* harmony export */   g: () => (/* binding */ createEvents),\n/* harmony export */   h: () => (/* binding */ flushGlobalEffects),\n/* harmony export */   i: () => (/* binding */ isRef),\n/* harmony export */   j: () => (/* binding */ addEffect),\n/* harmony export */   k: () => (/* binding */ addAfterEffect),\n/* harmony export */   l: () => (/* binding */ addTail),\n/* harmony export */   m: () => (/* binding */ invalidate),\n/* harmony export */   n: () => (/* binding */ advance),\n/* harmony export */   o: () => (/* binding */ createPortal),\n/* harmony export */   p: () => (/* binding */ flushSync),\n/* harmony export */   q: () => (/* binding */ context),\n/* harmony export */   r: () => (/* binding */ reconciler),\n/* harmony export */   s: () => (/* binding */ applyProps),\n/* harmony export */   t: () => (/* binding */ threeTypes),\n/* harmony export */   u: () => (/* binding */ useBridge),\n/* harmony export */   v: () => (/* binding */ getRootState),\n/* harmony export */   w: () => (/* binding */ dispose),\n/* harmony export */   x: () => (/* binding */ act),\n/* harmony export */   y: () => (/* binding */ buildGraph),\n/* harmony export */   z: () => (/* binding */ useInstanceHandle)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_reconciler_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-reconciler/constants */ \"(ssr)/./node_modules/react-reconciler/constants.js\");\n/* harmony import */ var zustand_traditional__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zustand/traditional */ \"(ssr)/./node_modules/zustand/esm/traditional.mjs\");\n/* harmony import */ var react_reconciler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-reconciler */ \"(ssr)/./node_modules/react-reconciler/index.js\");\n/* harmony import */ var react_reconciler__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_reconciler__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var scheduler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! scheduler */ \"(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/index.js\");\n/* harmony import */ var suspend_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! suspend-react */ \"(ssr)/./node_modules/suspend-react/index.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var its_fine__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! its-fine */ \"(ssr)/./node_modules/its-fine/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\nvar threeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\n/**\n * Returns the instance's initial (outmost) root.\n */\nfunction findInitialRoot(instance) {\n  let root = instance.root;\n  while (root.getState().previousRoot) root = root.getState().previousRoot;\n  return root;\n}\n/**\n * Safely flush async effects when testing, simulating a legacy root.\n * @deprecated Import from React instead. import { act } from 'react'\n */\n// Reference with computed key to break Webpack static analysis\n// https://github.com/webpack/webpack/issues/14814\nconst act = react__WEBPACK_IMPORTED_MODULE_0__['act' + ''];\nconst isOrthographicCamera = def => def && def.isOrthographicCamera;\nconst isRef = obj => obj && obj.hasOwnProperty('current');\nconst isColorRepresentation = value => value != null && (typeof value === 'string' || typeof value === 'number' || value.isColor);\n\n/**\n * An SSR-friendly useLayoutEffect.\n *\n * React currently throws a warning when using useLayoutEffect on the server.\n * To get around it, we can conditionally useEffect on the server (no-op) and\n * useLayoutEffect elsewhere.\n *\n * @see https://github.com/facebook/react/issues/14927\n */\nconst useIsomorphicLayoutEffect = /* @__PURE__ */((_window$document, _window$navigator) => typeof window !== 'undefined' && (((_window$document = window.document) == null ? void 0 : _window$document.createElement) || ((_window$navigator = window.navigator) == null ? void 0 : _window$navigator.product) === 'ReactNative'))() ? react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect : react__WEBPACK_IMPORTED_MODULE_0__.useEffect;\nfunction useMutableCallback(fn) {\n  const ref = react__WEBPACK_IMPORTED_MODULE_0__.useRef(fn);\n  useIsomorphicLayoutEffect(() => void (ref.current = fn), [fn]);\n  return ref;\n}\n/**\n * Bridges renderer Context and StrictMode from a primary renderer.\n */\nfunction useBridge() {\n  const fiber = (0,its_fine__WEBPACK_IMPORTED_MODULE_5__.useFiber)();\n  const ContextBridge = (0,its_fine__WEBPACK_IMPORTED_MODULE_5__.useContextBridge)();\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({\n    children\n  }) => {\n    const strict = !!(0,its_fine__WEBPACK_IMPORTED_MODULE_5__.traverseFiber)(fiber, true, node => node.type === react__WEBPACK_IMPORTED_MODULE_0__.StrictMode);\n    const Root = strict ? react__WEBPACK_IMPORTED_MODULE_0__.StrictMode : react__WEBPACK_IMPORTED_MODULE_0__.Fragment;\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Root, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ContextBridge, {\n        children: children\n      })\n    });\n  }, [fiber, ContextBridge]);\n}\nfunction Block({\n  set\n}) {\n  useIsomorphicLayoutEffect(() => {\n    set(new Promise(() => null));\n    return () => set(false);\n  }, [set]);\n  return null;\n}\n\n// NOTE: static members get down-level transpiled to mutations which break tree-shaking\nconst ErrorBoundary = /* @__PURE__ */(_ErrorBoundary => (_ErrorBoundary = class ErrorBoundary extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: false\n    };\n  }\n  componentDidCatch(err) {\n    this.props.set(err);\n  }\n  render() {\n    return this.state.error ? null : this.props.children;\n  }\n}, _ErrorBoundary.getDerivedStateFromError = () => ({\n  error: true\n}), _ErrorBoundary))();\nfunction calculateDpr(dpr) {\n  var _window$devicePixelRa;\n  // Err on the side of progress by assuming 2x dpr if we can't detect it\n  // This will happen in workers where window is defined but dpr isn't.\n  const target = typeof window !== 'undefined' ? (_window$devicePixelRa = window.devicePixelRatio) != null ? _window$devicePixelRa : 2 : 1;\n  return Array.isArray(dpr) ? Math.min(Math.max(dpr[0], target), dpr[1]) : dpr;\n}\n\n/**\n * Returns instance root state\n */\nfunction getRootState(obj) {\n  var _r3f;\n  return (_r3f = obj.__r3f) == null ? void 0 : _r3f.root.getState();\n}\n// A collection of compare functions\nconst is = {\n  obj: a => a === Object(a) && !is.arr(a) && typeof a !== 'function',\n  fun: a => typeof a === 'function',\n  str: a => typeof a === 'string',\n  num: a => typeof a === 'number',\n  boo: a => typeof a === 'boolean',\n  und: a => a === void 0,\n  nul: a => a === null,\n  arr: a => Array.isArray(a),\n  equ(a, b, {\n    arrays = 'shallow',\n    objects = 'reference',\n    strict = true\n  } = {}) {\n    // Wrong type or one of the two undefined, doesn't match\n    if (typeof a !== typeof b || !!a !== !!b) return false;\n    // Atomic, just compare a against b\n    if (is.str(a) || is.num(a) || is.boo(a)) return a === b;\n    const isObj = is.obj(a);\n    if (isObj && objects === 'reference') return a === b;\n    const isArr = is.arr(a);\n    if (isArr && arrays === 'reference') return a === b;\n    // Array or Object, shallow compare first to see if it's a match\n    if ((isArr || isObj) && a === b) return true;\n    // Last resort, go through keys\n    let i;\n    // Check if a has all the keys of b\n    for (i in a) if (!(i in b)) return false;\n    // Check if values between keys match\n    if (isObj && arrays === 'shallow' && objects === 'shallow') {\n      for (i in strict ? b : a) if (!is.equ(a[i], b[i], {\n        strict,\n        objects: 'reference'\n      })) return false;\n    } else {\n      for (i in strict ? b : a) if (a[i] !== b[i]) return false;\n    }\n    // If i is undefined\n    if (is.und(i)) {\n      // If both arrays are empty we consider them equal\n      if (isArr && a.length === 0 && b.length === 0) return true;\n      // If both objects are empty we consider them equal\n      if (isObj && Object.keys(a).length === 0 && Object.keys(b).length === 0) return true;\n      // Otherwise match them by value\n      if (a !== b) return false;\n    }\n    return true;\n  }\n};\n\n// Collects nodes and materials from a THREE.Object3D\nfunction buildGraph(object) {\n  const data = {\n    nodes: {},\n    materials: {},\n    meshes: {}\n  };\n  if (object) {\n    object.traverse(obj => {\n      if (obj.name) data.nodes[obj.name] = obj;\n      if (obj.material && !data.materials[obj.material.name]) data.materials[obj.material.name] = obj.material;\n      if (obj.isMesh && !data.meshes[obj.name]) data.meshes[obj.name] = obj;\n    });\n  }\n  return data;\n}\n// Disposes an object and all its properties\nfunction dispose(obj) {\n  if (obj.type !== 'Scene') obj.dispose == null ? void 0 : obj.dispose();\n  for (const p in obj) {\n    const prop = obj[p];\n    if ((prop == null ? void 0 : prop.type) !== 'Scene') prop == null ? void 0 : prop.dispose == null ? void 0 : prop.dispose();\n  }\n}\nconst REACT_INTERNAL_PROPS = ['children', 'key', 'ref'];\n\n// Gets only instance props from reconciler fibers\nfunction getInstanceProps(queue) {\n  const props = {};\n  for (const key in queue) {\n    if (!REACT_INTERNAL_PROPS.includes(key)) props[key] = queue[key];\n  }\n  return props;\n}\n\n// Each object in the scene carries a small LocalState descriptor\nfunction prepare(target, root, type, props) {\n  const object = target;\n\n  // Create instance descriptor\n  let instance = object == null ? void 0 : object.__r3f;\n  if (!instance) {\n    instance = {\n      root,\n      type,\n      parent: null,\n      children: [],\n      props: getInstanceProps(props),\n      object,\n      eventCount: 0,\n      handlers: {},\n      isHidden: false\n    };\n    if (object) object.__r3f = instance;\n  }\n  return instance;\n}\nfunction resolve(root, key) {\n  let target = root[key];\n  if (!key.includes('-')) return {\n    root,\n    key,\n    target\n  };\n\n  // Resolve pierced target\n  target = root;\n  for (const part of key.split('-')) {\n    var _target;\n    key = part;\n    root = target;\n    target = (_target = target) == null ? void 0 : _target[key];\n  }\n\n  // TODO: change key to 'foo-bar' if target is undefined?\n\n  return {\n    root,\n    key,\n    target\n  };\n}\n\n// Checks if a dash-cased string ends with an integer\nconst INDEX_REGEX = /-\\d+$/;\nfunction attach(parent, child) {\n  if (is.str(child.props.attach)) {\n    // If attaching into an array (foo-0), create one\n    if (INDEX_REGEX.test(child.props.attach)) {\n      const index = child.props.attach.replace(INDEX_REGEX, '');\n      const {\n        root,\n        key\n      } = resolve(parent.object, index);\n      if (!Array.isArray(root[key])) root[key] = [];\n    }\n    const {\n      root,\n      key\n    } = resolve(parent.object, child.props.attach);\n    child.previousAttach = root[key];\n    root[key] = child.object;\n  } else if (is.fun(child.props.attach)) {\n    child.previousAttach = child.props.attach(parent.object, child.object);\n  }\n}\nfunction detach(parent, child) {\n  if (is.str(child.props.attach)) {\n    const {\n      root,\n      key\n    } = resolve(parent.object, child.props.attach);\n    const previous = child.previousAttach;\n    // When the previous value was undefined, it means the value was never set to begin with\n    if (previous === undefined) delete root[key];\n    // Otherwise set the previous value\n    else root[key] = previous;\n  } else {\n    child.previousAttach == null ? void 0 : child.previousAttach(parent.object, child.object);\n  }\n  delete child.previousAttach;\n}\nconst RESERVED_PROPS = [...REACT_INTERNAL_PROPS,\n// Instance props\n'args', 'dispose', 'attach', 'object', 'onUpdate',\n// Behavior flags\n'dispose'];\nconst MEMOIZED_PROTOTYPES = new Map();\nfunction getMemoizedPrototype(root) {\n  let ctor = MEMOIZED_PROTOTYPES.get(root.constructor);\n  try {\n    if (!ctor) {\n      ctor = new root.constructor();\n      MEMOIZED_PROTOTYPES.set(root.constructor, ctor);\n    }\n  } catch (e) {\n    // ...\n  }\n  return ctor;\n}\n\n// This function prepares a set of changes to be applied to the instance\nfunction diffProps(instance, newProps) {\n  const changedProps = {};\n\n  // Sort through props\n  for (const prop in newProps) {\n    // Skip reserved keys\n    if (RESERVED_PROPS.includes(prop)) continue;\n    // Skip if props match\n    if (is.equ(newProps[prop], instance.props[prop])) continue;\n\n    // Props changed, add them\n    changedProps[prop] = newProps[prop];\n\n    // Reset pierced props\n    for (const other in newProps) {\n      if (other.startsWith(`${prop}-`)) changedProps[other] = newProps[other];\n    }\n  }\n\n  // Reset removed props for HMR\n  for (const prop in instance.props) {\n    if (RESERVED_PROPS.includes(prop) || newProps.hasOwnProperty(prop)) continue;\n    const {\n      root,\n      key\n    } = resolve(instance.object, prop);\n\n    // https://github.com/mrdoob/three.js/issues/21209\n    // HMR/fast-refresh relies on the ability to cancel out props, but threejs\n    // has no means to do this. Hence we curate a small collection of value-classes\n    // with their respective constructor/set arguments\n    // For removed props, try to set default values, if possible\n    if (root.constructor && root.constructor.length === 0) {\n      // create a blank slate of the instance and copy the particular parameter.\n      const ctor = getMemoizedPrototype(root);\n      if (!is.und(ctor)) changedProps[key] = ctor[key];\n    } else {\n      // instance does not have constructor, just set it to 0\n      changedProps[key] = 0;\n    }\n  }\n  return changedProps;\n}\n\n// https://github.com/mrdoob/three.js/pull/27042\n// https://github.com/mrdoob/three.js/pull/22748\nconst colorMaps = ['map', 'emissiveMap', 'sheenColorMap', 'specularColorMap', 'envMap'];\nconst EVENT_REGEX = /^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;\n// This function applies a set of changes to the instance\nfunction applyProps(object, props) {\n  var _instance$object;\n  const instance = object.__r3f;\n  const rootState = instance && findInitialRoot(instance).getState();\n  const prevHandlers = instance == null ? void 0 : instance.eventCount;\n  for (const prop in props) {\n    let value = props[prop];\n\n    // Don't mutate reserved keys\n    if (RESERVED_PROPS.includes(prop)) continue;\n\n    // Deal with pointer events, including removing them if undefined\n    if (instance && EVENT_REGEX.test(prop)) {\n      if (typeof value === 'function') instance.handlers[prop] = value;else delete instance.handlers[prop];\n      instance.eventCount = Object.keys(instance.handlers).length;\n      continue;\n    }\n\n    // Ignore setting undefined props\n    // https://github.com/pmndrs/react-three-fiber/issues/274\n    if (value === undefined) continue;\n    let {\n      root,\n      key,\n      target\n    } = resolve(object, prop);\n\n    // Layers must be written to the mask property\n    if (target instanceof three__WEBPACK_IMPORTED_MODULE_6__.Layers && value instanceof three__WEBPACK_IMPORTED_MODULE_6__.Layers) {\n      target.mask = value.mask;\n    }\n    // Set colors if valid color representation for automatic conversion (copy)\n    else if (target instanceof three__WEBPACK_IMPORTED_MODULE_6__.Color && isColorRepresentation(value)) {\n      target.set(value);\n    }\n    // Copy if properties match signatures and implement math interface (likely read-only)\n    else if (target !== null && typeof target === 'object' && typeof target.set === 'function' && typeof target.copy === 'function' && value != null && value.constructor && target.constructor === value.constructor) {\n      target.copy(value);\n    }\n    // Set array types\n    else if (target !== null && typeof target === 'object' && typeof target.set === 'function' && Array.isArray(value)) {\n      if (typeof target.fromArray === 'function') target.fromArray(value);else target.set(...value);\n    }\n    // Set literal types\n    else if (target !== null && typeof target === 'object' && typeof target.set === 'function' && typeof value === 'number') {\n      // Allow setting array scalars\n      if (typeof target.setScalar === 'function') target.setScalar(value);\n      // Otherwise just set single value\n      else target.set(value);\n    }\n    // Else, just overwrite the value\n    else {\n      var _root$key;\n      root[key] = value;\n\n      // Auto-convert sRGB texture parameters for built-in materials\n      // https://github.com/pmndrs/react-three-fiber/issues/344\n      // https://github.com/mrdoob/three.js/pull/25857\n      if (rootState && !rootState.linear && colorMaps.includes(key) && (_root$key = root[key]) != null && _root$key.isTexture &&\n      // sRGB textures must be RGBA8 since r137 https://github.com/mrdoob/three.js/pull/23129\n      root[key].format === three__WEBPACK_IMPORTED_MODULE_6__.RGBAFormat && root[key].type === three__WEBPACK_IMPORTED_MODULE_6__.UnsignedByteType) {\n        // NOTE: this cannot be set from the renderer (e.g. sRGB source textures rendered to P3)\n        root[key].colorSpace = three__WEBPACK_IMPORTED_MODULE_6__.SRGBColorSpace;\n      }\n    }\n  }\n\n  // Register event handlers\n  if (instance != null && instance.parent && rootState != null && rootState.internal && (_instance$object = instance.object) != null && _instance$object.isObject3D && prevHandlers !== instance.eventCount) {\n    const object = instance.object;\n    // Pre-emptively remove the instance from the interaction manager\n    const index = rootState.internal.interaction.indexOf(object);\n    if (index > -1) rootState.internal.interaction.splice(index, 1);\n    // Add the instance to the interaction manager only when it has handlers\n    if (instance.eventCount && object.raycast !== null) {\n      rootState.internal.interaction.push(object);\n    }\n  }\n\n  // Auto-attach geometries and materials\n  if (instance && instance.props.attach === undefined) {\n    if (instance.object.isBufferGeometry) instance.props.attach = 'geometry';else if (instance.object.isMaterial) instance.props.attach = 'material';\n  }\n\n  // Instance was updated, request a frame\n  if (instance) invalidateInstance(instance);\n  return object;\n}\nfunction invalidateInstance(instance) {\n  var _instance$root;\n  if (!instance.parent) return;\n  instance.props.onUpdate == null ? void 0 : instance.props.onUpdate(instance.object);\n  const state = (_instance$root = instance.root) == null ? void 0 : _instance$root.getState == null ? void 0 : _instance$root.getState();\n  if (state && state.internal.frames === 0) state.invalidate();\n}\nfunction updateCamera(camera, size) {\n  // Do not mess with the camera if it belongs to the user\n  // https://github.com/pmndrs/react-three-fiber/issues/92\n  if (camera.manual) return;\n  if (isOrthographicCamera(camera)) {\n    camera.left = size.width / -2;\n    camera.right = size.width / 2;\n    camera.top = size.height / 2;\n    camera.bottom = size.height / -2;\n  } else {\n    camera.aspect = size.width / size.height;\n  }\n  camera.updateProjectionMatrix();\n}\nconst isObject3D = object => object == null ? void 0 : object.isObject3D;\n\nfunction makeId(event) {\n  return (event.eventObject || event.object).uuid + '/' + event.index + event.instanceId;\n}\n\n/**\n * Release pointer captures.\n * This is called by releasePointerCapture in the API, and when an object is removed.\n */\nfunction releaseInternalPointerCapture(capturedMap, obj, captures, pointerId) {\n  const captureData = captures.get(obj);\n  if (captureData) {\n    captures.delete(obj);\n    // If this was the last capturing object for this pointer\n    if (captures.size === 0) {\n      capturedMap.delete(pointerId);\n      captureData.target.releasePointerCapture(pointerId);\n    }\n  }\n}\nfunction removeInteractivity(store, object) {\n  const {\n    internal\n  } = store.getState();\n  // Removes every trace of an object from the data store\n  internal.interaction = internal.interaction.filter(o => o !== object);\n  internal.initialHits = internal.initialHits.filter(o => o !== object);\n  internal.hovered.forEach((value, key) => {\n    if (value.eventObject === object || value.object === object) {\n      // Clear out intersects, they are outdated by now\n      internal.hovered.delete(key);\n    }\n  });\n  internal.capturedMap.forEach((captures, pointerId) => {\n    releaseInternalPointerCapture(internal.capturedMap, object, captures, pointerId);\n  });\n}\nfunction createEvents(store) {\n  /** Calculates delta */\n  function calculateDistance(event) {\n    const {\n      internal\n    } = store.getState();\n    const dx = event.offsetX - internal.initialClick[0];\n    const dy = event.offsetY - internal.initialClick[1];\n    return Math.round(Math.sqrt(dx * dx + dy * dy));\n  }\n\n  /** Returns true if an instance has a valid pointer-event registered, this excludes scroll, clicks etc */\n  function filterPointerEvents(objects) {\n    return objects.filter(obj => ['Move', 'Over', 'Enter', 'Out', 'Leave'].some(name => {\n      var _r3f;\n      return (_r3f = obj.__r3f) == null ? void 0 : _r3f.handlers['onPointer' + name];\n    }));\n  }\n  function intersect(event, filter) {\n    const state = store.getState();\n    const duplicates = new Set();\n    const intersections = [];\n    // Allow callers to eliminate event objects\n    const eventsObjects = filter ? filter(state.internal.interaction) : state.internal.interaction;\n    // Reset all raycaster cameras to undefined\n    for (let i = 0; i < eventsObjects.length; i++) {\n      const state = getRootState(eventsObjects[i]);\n      if (state) {\n        state.raycaster.camera = undefined;\n      }\n    }\n    if (!state.previousRoot) {\n      // Make sure root-level pointer and ray are set up\n      state.events.compute == null ? void 0 : state.events.compute(event, state);\n    }\n    function handleRaycast(obj) {\n      const state = getRootState(obj);\n      // Skip event handling when noEvents is set, or when the raycasters camera is null\n      if (!state || !state.events.enabled || state.raycaster.camera === null) return [];\n\n      // When the camera is undefined we have to call the event layers update function\n      if (state.raycaster.camera === undefined) {\n        var _state$previousRoot;\n        state.events.compute == null ? void 0 : state.events.compute(event, state, (_state$previousRoot = state.previousRoot) == null ? void 0 : _state$previousRoot.getState());\n        // If the camera is still undefined we have to skip this layer entirely\n        if (state.raycaster.camera === undefined) state.raycaster.camera = null;\n      }\n\n      // Intersect object by object\n      return state.raycaster.camera ? state.raycaster.intersectObject(obj, true) : [];\n    }\n\n    // Collect events\n    let hits = eventsObjects\n    // Intersect objects\n    .flatMap(handleRaycast)\n    // Sort by event priority and distance\n    .sort((a, b) => {\n      const aState = getRootState(a.object);\n      const bState = getRootState(b.object);\n      if (!aState || !bState) return a.distance - b.distance;\n      return bState.events.priority - aState.events.priority || a.distance - b.distance;\n    })\n    // Filter out duplicates\n    .filter(item => {\n      const id = makeId(item);\n      if (duplicates.has(id)) return false;\n      duplicates.add(id);\n      return true;\n    });\n\n    // https://github.com/mrdoob/three.js/issues/16031\n    // Allow custom userland intersect sort order, this likely only makes sense on the root filter\n    if (state.events.filter) hits = state.events.filter(hits, state);\n\n    // Bubble up the events, find the event source (eventObject)\n    for (const hit of hits) {\n      let eventObject = hit.object;\n      // Bubble event up\n      while (eventObject) {\n        var _r3f2;\n        if ((_r3f2 = eventObject.__r3f) != null && _r3f2.eventCount) intersections.push({\n          ...hit,\n          eventObject\n        });\n        eventObject = eventObject.parent;\n      }\n    }\n\n    // If the interaction is captured, make all capturing targets part of the intersect.\n    if ('pointerId' in event && state.internal.capturedMap.has(event.pointerId)) {\n      for (let captureData of state.internal.capturedMap.get(event.pointerId).values()) {\n        if (!duplicates.has(makeId(captureData.intersection))) intersections.push(captureData.intersection);\n      }\n    }\n    return intersections;\n  }\n\n  /**  Handles intersections by forwarding them to handlers */\n  function handleIntersects(intersections, event, delta, callback) {\n    // If anything has been found, forward it to the event listeners\n    if (intersections.length) {\n      const localState = {\n        stopped: false\n      };\n      for (const hit of intersections) {\n        let state = getRootState(hit.object);\n\n        // If the object is not managed by R3F, it might be parented to an element which is.\n        // Traverse upwards until we find a managed parent and use its state instead.\n        if (!state) {\n          hit.object.traverseAncestors(obj => {\n            const parentState = getRootState(obj);\n            if (parentState) {\n              state = parentState;\n              return false;\n            }\n          });\n        }\n        if (state) {\n          const {\n            raycaster,\n            pointer,\n            camera,\n            internal\n          } = state;\n          const unprojectedPoint = new three__WEBPACK_IMPORTED_MODULE_6__.Vector3(pointer.x, pointer.y, 0).unproject(camera);\n          const hasPointerCapture = id => {\n            var _internal$capturedMap, _internal$capturedMap2;\n            return (_internal$capturedMap = (_internal$capturedMap2 = internal.capturedMap.get(id)) == null ? void 0 : _internal$capturedMap2.has(hit.eventObject)) != null ? _internal$capturedMap : false;\n          };\n          const setPointerCapture = id => {\n            const captureData = {\n              intersection: hit,\n              target: event.target\n            };\n            if (internal.capturedMap.has(id)) {\n              // if the pointerId was previously captured, we add the hit to the\n              // event capturedMap.\n              internal.capturedMap.get(id).set(hit.eventObject, captureData);\n            } else {\n              // if the pointerId was not previously captured, we create a map\n              // containing the hitObject, and the hit. hitObject is used for\n              // faster access.\n              internal.capturedMap.set(id, new Map([[hit.eventObject, captureData]]));\n            }\n            event.target.setPointerCapture(id);\n          };\n          const releasePointerCapture = id => {\n            const captures = internal.capturedMap.get(id);\n            if (captures) {\n              releaseInternalPointerCapture(internal.capturedMap, hit.eventObject, captures, id);\n            }\n          };\n\n          // Add native event props\n          let extractEventProps = {};\n          // This iterates over the event's properties including the inherited ones. Native PointerEvents have most of their props as getters which are inherited, but polyfilled PointerEvents have them all as their own properties (i.e. not inherited). We can't use Object.keys() or Object.entries() as they only return \"own\" properties; nor Object.getPrototypeOf(event) as that *doesn't* return \"own\" properties, only inherited ones.\n          for (let prop in event) {\n            let property = event[prop];\n            // Only copy over atomics, leave functions alone as these should be\n            // called as event.nativeEvent.fn()\n            if (typeof property !== 'function') extractEventProps[prop] = property;\n          }\n          let raycastEvent = {\n            ...hit,\n            ...extractEventProps,\n            pointer,\n            intersections,\n            stopped: localState.stopped,\n            delta,\n            unprojectedPoint,\n            ray: raycaster.ray,\n            camera: camera,\n            // Hijack stopPropagation, which just sets a flag\n            stopPropagation() {\n              // https://github.com/pmndrs/react-three-fiber/issues/596\n              // Events are not allowed to stop propagation if the pointer has been captured\n              const capturesForPointer = 'pointerId' in event && internal.capturedMap.get(event.pointerId);\n\n              // We only authorize stopPropagation...\n              if (\n              // ...if this pointer hasn't been captured\n              !capturesForPointer ||\n              // ... or if the hit object is capturing the pointer\n              capturesForPointer.has(hit.eventObject)) {\n                raycastEvent.stopped = localState.stopped = true;\n                // Propagation is stopped, remove all other hover records\n                // An event handler is only allowed to flush other handlers if it is hovered itself\n                if (internal.hovered.size && Array.from(internal.hovered.values()).find(i => i.eventObject === hit.eventObject)) {\n                  // Objects cannot flush out higher up objects that have already caught the event\n                  const higher = intersections.slice(0, intersections.indexOf(hit));\n                  cancelPointer([...higher, hit]);\n                }\n              }\n            },\n            // there should be a distinction between target and currentTarget\n            target: {\n              hasPointerCapture,\n              setPointerCapture,\n              releasePointerCapture\n            },\n            currentTarget: {\n              hasPointerCapture,\n              setPointerCapture,\n              releasePointerCapture\n            },\n            nativeEvent: event\n          };\n\n          // Call subscribers\n          callback(raycastEvent);\n          // Event bubbling may be interrupted by stopPropagation\n          if (localState.stopped === true) break;\n        }\n      }\n    }\n    return intersections;\n  }\n  function cancelPointer(intersections) {\n    const {\n      internal\n    } = store.getState();\n    for (const hoveredObj of internal.hovered.values()) {\n      // When no objects were hit or the the hovered object wasn't found underneath the cursor\n      // we call onPointerOut and delete the object from the hovered-elements map\n      if (!intersections.length || !intersections.find(hit => hit.object === hoveredObj.object && hit.index === hoveredObj.index && hit.instanceId === hoveredObj.instanceId)) {\n        const eventObject = hoveredObj.eventObject;\n        const instance = eventObject.__r3f;\n        internal.hovered.delete(makeId(hoveredObj));\n        if (instance != null && instance.eventCount) {\n          const handlers = instance.handlers;\n          // Clear out intersects, they are outdated by now\n          const data = {\n            ...hoveredObj,\n            intersections\n          };\n          handlers.onPointerOut == null ? void 0 : handlers.onPointerOut(data);\n          handlers.onPointerLeave == null ? void 0 : handlers.onPointerLeave(data);\n        }\n      }\n    }\n  }\n  function pointerMissed(event, objects) {\n    for (let i = 0; i < objects.length; i++) {\n      const instance = objects[i].__r3f;\n      instance == null ? void 0 : instance.handlers.onPointerMissed == null ? void 0 : instance.handlers.onPointerMissed(event);\n    }\n  }\n  function handlePointer(name) {\n    // Deal with cancelation\n    switch (name) {\n      case 'onPointerLeave':\n      case 'onPointerCancel':\n        return () => cancelPointer([]);\n      case 'onLostPointerCapture':\n        return event => {\n          const {\n            internal\n          } = store.getState();\n          if ('pointerId' in event && internal.capturedMap.has(event.pointerId)) {\n            // If the object event interface had onLostPointerCapture, we'd call it here on every\n            // object that's getting removed. We call it on the next frame because onLostPointerCapture\n            // fires before onPointerUp. Otherwise pointerUp would never be called if the event didn't\n            // happen in the object it originated from, leaving components in a in-between state.\n            requestAnimationFrame(() => {\n              // Only release if pointer-up didn't do it already\n              if (internal.capturedMap.has(event.pointerId)) {\n                internal.capturedMap.delete(event.pointerId);\n                cancelPointer([]);\n              }\n            });\n          }\n        };\n    }\n\n    // Any other pointer goes here ...\n    return function handleEvent(event) {\n      const {\n        onPointerMissed,\n        internal\n      } = store.getState();\n\n      // prepareRay(event)\n      internal.lastEvent.current = event;\n\n      // Get fresh intersects\n      const isPointerMove = name === 'onPointerMove';\n      const isClickEvent = name === 'onClick' || name === 'onContextMenu' || name === 'onDoubleClick';\n      const filter = isPointerMove ? filterPointerEvents : undefined;\n      const hits = intersect(event, filter);\n      const delta = isClickEvent ? calculateDistance(event) : 0;\n\n      // Save initial coordinates on pointer-down\n      if (name === 'onPointerDown') {\n        internal.initialClick = [event.offsetX, event.offsetY];\n        internal.initialHits = hits.map(hit => hit.eventObject);\n      }\n\n      // If a click yields no results, pass it back to the user as a miss\n      // Missed events have to come first in order to establish user-land side-effect clean up\n      if (isClickEvent && !hits.length) {\n        if (delta <= 2) {\n          pointerMissed(event, internal.interaction);\n          if (onPointerMissed) onPointerMissed(event);\n        }\n      }\n      // Take care of unhover\n      if (isPointerMove) cancelPointer(hits);\n      function onIntersect(data) {\n        const eventObject = data.eventObject;\n        const instance = eventObject.__r3f;\n\n        // Check presence of handlers\n        if (!(instance != null && instance.eventCount)) return;\n        const handlers = instance.handlers;\n\n        /*\n        MAYBE TODO, DELETE IF NOT: \n          Check if the object is captured, captured events should not have intersects running in parallel\n          But wouldn't it be better to just replace capturedMap with a single entry?\n          Also, are we OK with straight up making picking up multiple objects impossible?\n          \n        const pointerId = (data as ThreeEvent<PointerEvent>).pointerId        \n        if (pointerId !== undefined) {\n          const capturedMeshSet = internal.capturedMap.get(pointerId)\n          if (capturedMeshSet) {\n            const captured = capturedMeshSet.get(eventObject)\n            if (captured && captured.localState.stopped) return\n          }\n        }*/\n\n        if (isPointerMove) {\n          // Move event ...\n          if (handlers.onPointerOver || handlers.onPointerEnter || handlers.onPointerOut || handlers.onPointerLeave) {\n            // When enter or out is present take care of hover-state\n            const id = makeId(data);\n            const hoveredItem = internal.hovered.get(id);\n            if (!hoveredItem) {\n              // If the object wasn't previously hovered, book it and call its handler\n              internal.hovered.set(id, data);\n              handlers.onPointerOver == null ? void 0 : handlers.onPointerOver(data);\n              handlers.onPointerEnter == null ? void 0 : handlers.onPointerEnter(data);\n            } else if (hoveredItem.stopped) {\n              // If the object was previously hovered and stopped, we shouldn't allow other items to proceed\n              data.stopPropagation();\n            }\n          }\n          // Call mouse move\n          handlers.onPointerMove == null ? void 0 : handlers.onPointerMove(data);\n        } else {\n          // All other events ...\n          const handler = handlers[name];\n          if (handler) {\n            // Forward all events back to their respective handlers with the exception of click events,\n            // which must use the initial target\n            if (!isClickEvent || internal.initialHits.includes(eventObject)) {\n              // Missed events have to come first\n              pointerMissed(event, internal.interaction.filter(object => !internal.initialHits.includes(object)));\n              // Now call the handler\n              handler(data);\n            }\n          } else {\n            // Trigger onPointerMissed on all elements that have pointer over/out handlers, but not click and weren't hit\n            if (isClickEvent && internal.initialHits.includes(eventObject)) {\n              pointerMissed(event, internal.interaction.filter(object => !internal.initialHits.includes(object)));\n            }\n          }\n        }\n      }\n      handleIntersects(hits, event, delta, onIntersect);\n    };\n  }\n  return {\n    handlePointer\n  };\n}\n\nconst isRenderer = def => !!(def != null && def.render);\nconst context = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_0__.createContext(null);\nconst createStore = (invalidate, advance) => {\n  const rootStore = (0,zustand_traditional__WEBPACK_IMPORTED_MODULE_7__.createWithEqualityFn)((set, get) => {\n    const position = new three__WEBPACK_IMPORTED_MODULE_6__.Vector3();\n    const defaultTarget = new three__WEBPACK_IMPORTED_MODULE_6__.Vector3();\n    const tempTarget = new three__WEBPACK_IMPORTED_MODULE_6__.Vector3();\n    function getCurrentViewport(camera = get().camera, target = defaultTarget, size = get().size) {\n      const {\n        width,\n        height,\n        top,\n        left\n      } = size;\n      const aspect = width / height;\n      if (target.isVector3) tempTarget.copy(target);else tempTarget.set(...target);\n      const distance = camera.getWorldPosition(position).distanceTo(tempTarget);\n      if (isOrthographicCamera(camera)) {\n        return {\n          width: width / camera.zoom,\n          height: height / camera.zoom,\n          top,\n          left,\n          factor: 1,\n          distance,\n          aspect\n        };\n      } else {\n        const fov = camera.fov * Math.PI / 180; // convert vertical fov to radians\n        const h = 2 * Math.tan(fov / 2) * distance; // visible height\n        const w = h * (width / height);\n        return {\n          width: w,\n          height: h,\n          top,\n          left,\n          factor: width / w,\n          distance,\n          aspect\n        };\n      }\n    }\n    let performanceTimeout = undefined;\n    const setPerformanceCurrent = current => set(state => ({\n      performance: {\n        ...state.performance,\n        current\n      }\n    }));\n    const pointer = new three__WEBPACK_IMPORTED_MODULE_6__.Vector2();\n    const rootState = {\n      set,\n      get,\n      // Mock objects that have to be configured\n      gl: null,\n      camera: null,\n      raycaster: null,\n      events: {\n        priority: 1,\n        enabled: true,\n        connected: false\n      },\n      scene: null,\n      xr: null,\n      invalidate: (frames = 1) => invalidate(get(), frames),\n      advance: (timestamp, runGlobalEffects) => advance(timestamp, runGlobalEffects, get()),\n      legacy: false,\n      linear: false,\n      flat: false,\n      controls: null,\n      clock: new three__WEBPACK_IMPORTED_MODULE_6__.Clock(),\n      pointer,\n      mouse: pointer,\n      frameloop: 'always',\n      onPointerMissed: undefined,\n      performance: {\n        current: 1,\n        min: 0.5,\n        max: 1,\n        debounce: 200,\n        regress: () => {\n          const state = get();\n          // Clear timeout\n          if (performanceTimeout) clearTimeout(performanceTimeout);\n          // Set lower bound performance\n          if (state.performance.current !== state.performance.min) setPerformanceCurrent(state.performance.min);\n          // Go back to upper bound performance after a while unless something regresses meanwhile\n          performanceTimeout = setTimeout(() => setPerformanceCurrent(get().performance.max), state.performance.debounce);\n        }\n      },\n      size: {\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0\n      },\n      viewport: {\n        initialDpr: 0,\n        dpr: 0,\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        aspect: 0,\n        distance: 0,\n        factor: 0,\n        getCurrentViewport\n      },\n      setEvents: events => set(state => ({\n        ...state,\n        events: {\n          ...state.events,\n          ...events\n        }\n      })),\n      setSize: (width, height, top = 0, left = 0) => {\n        const camera = get().camera;\n        const size = {\n          width,\n          height,\n          top,\n          left\n        };\n        set(state => ({\n          size,\n          viewport: {\n            ...state.viewport,\n            ...getCurrentViewport(camera, defaultTarget, size)\n          }\n        }));\n      },\n      setDpr: dpr => set(state => {\n        const resolved = calculateDpr(dpr);\n        return {\n          viewport: {\n            ...state.viewport,\n            dpr: resolved,\n            initialDpr: state.viewport.initialDpr || resolved\n          }\n        };\n      }),\n      setFrameloop: (frameloop = 'always') => {\n        const clock = get().clock;\n\n        // if frameloop === \"never\" clock.elapsedTime is updated using advance(timestamp)\n        clock.stop();\n        clock.elapsedTime = 0;\n        if (frameloop !== 'never') {\n          clock.start();\n          clock.elapsedTime = 0;\n        }\n        set(() => ({\n          frameloop\n        }));\n      },\n      previousRoot: undefined,\n      internal: {\n        // Events\n        interaction: [],\n        hovered: new Map(),\n        subscribers: [],\n        initialClick: [0, 0],\n        initialHits: [],\n        capturedMap: new Map(),\n        lastEvent: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createRef(),\n        // Updates\n        active: false,\n        frames: 0,\n        priority: 0,\n        subscribe: (ref, priority, store) => {\n          const internal = get().internal;\n          // If this subscription was given a priority, it takes rendering into its own hands\n          // For that reason we switch off automatic rendering and increase the manual flag\n          // As long as this flag is positive there can be no internal rendering at all\n          // because there could be multiple render subscriptions\n          internal.priority = internal.priority + (priority > 0 ? 1 : 0);\n          internal.subscribers.push({\n            ref,\n            priority,\n            store\n          });\n          // Register subscriber and sort layers from lowest to highest, meaning,\n          // highest priority renders last (on top of the other frames)\n          internal.subscribers = internal.subscribers.sort((a, b) => a.priority - b.priority);\n          return () => {\n            const internal = get().internal;\n            if (internal != null && internal.subscribers) {\n              // Decrease manual flag if this subscription had a priority\n              internal.priority = internal.priority - (priority > 0 ? 1 : 0);\n              // Remove subscriber from list\n              internal.subscribers = internal.subscribers.filter(s => s.ref !== ref);\n            }\n          };\n        }\n      }\n    };\n    return rootState;\n  });\n  const state = rootStore.getState();\n  let oldSize = state.size;\n  let oldDpr = state.viewport.dpr;\n  let oldCamera = state.camera;\n  rootStore.subscribe(() => {\n    const {\n      camera,\n      size,\n      viewport,\n      gl,\n      set\n    } = rootStore.getState();\n\n    // Resize camera and renderer on changes to size and pixelratio\n    if (size.width !== oldSize.width || size.height !== oldSize.height || viewport.dpr !== oldDpr) {\n      oldSize = size;\n      oldDpr = viewport.dpr;\n      // Update camera & renderer\n      updateCamera(camera, size);\n      if (viewport.dpr > 0) gl.setPixelRatio(viewport.dpr);\n      const updateStyle = typeof HTMLCanvasElement !== 'undefined' && gl.domElement instanceof HTMLCanvasElement;\n      gl.setSize(size.width, size.height, updateStyle);\n    }\n\n    // Update viewport once the camera changes\n    if (camera !== oldCamera) {\n      oldCamera = camera;\n      // Update viewport\n      set(state => ({\n        viewport: {\n          ...state.viewport,\n          ...state.viewport.getCurrentViewport(camera)\n        }\n      }));\n    }\n  });\n\n  // Invalidate on any change\n  rootStore.subscribe(state => invalidate(state));\n\n  // Return root state\n  return rootStore;\n};\n\n/**\n * Exposes an object's {@link Instance}.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#useInstanceHandle\n *\n * **Note**: this is an escape hatch to react-internal fields. Expect this to change significantly between versions.\n */\nfunction useInstanceHandle(ref) {\n  const instance = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(instance, () => ref.current.__r3f, [ref]);\n  return instance;\n}\n\n/**\n * Returns the R3F Canvas' Zustand store. Useful for [transient updates](https://github.com/pmndrs/zustand#transient-updates-for-often-occurring-state-changes).\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#usestore\n */\nfunction useStore() {\n  const store = react__WEBPACK_IMPORTED_MODULE_0__.useContext(context);\n  if (!store) throw new Error('R3F: Hooks can only be used within the Canvas component!');\n  return store;\n}\n\n/**\n * Accesses R3F's internal state, containing renderer, canvas, scene, etc.\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#usethree\n */\nfunction useThree(selector = state => state, equalityFn) {\n  return useStore()(selector, equalityFn);\n}\n\n/**\n * Executes a callback before render in a shared frame loop.\n * Can order effects with render priority or manually render with a positive priority.\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#useframe\n */\nfunction useFrame(callback, renderPriority = 0) {\n  const store = useStore();\n  const subscribe = store.getState().internal.subscribe;\n  // Memoize ref\n  const ref = useMutableCallback(callback);\n  // Subscribe on mount, unsubscribe on unmount\n  useIsomorphicLayoutEffect(() => subscribe(ref, renderPriority, store), [renderPriority, subscribe, store]);\n  return null;\n}\n\n/**\n * Returns a node graph of an object with named nodes & materials.\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#usegraph\n */\nfunction useGraph(object) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => buildGraph(object), [object]);\n}\nconst memoizedLoaders = new WeakMap();\nconst isConstructor$1 = value => {\n  var _value$prototype;\n  return typeof value === 'function' && (value == null ? void 0 : (_value$prototype = value.prototype) == null ? void 0 : _value$prototype.constructor) === value;\n};\nfunction loadingFn(extensions, onProgress) {\n  return function (Proto, ...input) {\n    let loader;\n\n    // Construct and cache loader if constructor was passed\n    if (isConstructor$1(Proto)) {\n      loader = memoizedLoaders.get(Proto);\n      if (!loader) {\n        loader = new Proto();\n        memoizedLoaders.set(Proto, loader);\n      }\n    } else {\n      loader = Proto;\n    }\n\n    // Apply loader extensions\n    if (extensions) extensions(loader);\n\n    // Go through the urls and load them\n    return Promise.all(input.map(input => new Promise((res, reject) => loader.load(input, data => {\n      if (isObject3D(data == null ? void 0 : data.scene)) Object.assign(data, buildGraph(data.scene));\n      res(data);\n    }, onProgress, error => reject(new Error(`Could not load ${input}: ${error == null ? void 0 : error.message}`))))));\n  };\n}\n\n/**\n * Synchronously loads and caches assets with a three loader.\n *\n * Note: this hook's caller must be wrapped with `React.Suspense`\n * @see https://docs.pmnd.rs/react-three-fiber/api/hooks#useloader\n */\nfunction useLoader(loader, input, extensions, onProgress) {\n  // Use suspense to load async assets\n  const keys = Array.isArray(input) ? input : [input];\n  const results = (0,suspend_react__WEBPACK_IMPORTED_MODULE_8__.suspend)(loadingFn(extensions, onProgress), [loader, ...keys], {\n    equal: is.equ\n  });\n  // Return the object(s)\n  return Array.isArray(input) ? results : results[0];\n}\n\n/**\n * Preloads an asset into cache as a side-effect.\n */\nuseLoader.preload = function (loader, input, extensions) {\n  const keys = Array.isArray(input) ? input : [input];\n  return (0,suspend_react__WEBPACK_IMPORTED_MODULE_8__.preload)(loadingFn(extensions), [loader, ...keys]);\n};\n\n/**\n * Removes a loaded asset from cache.\n */\nuseLoader.clear = function (loader, input) {\n  const keys = Array.isArray(input) ? input : [input];\n  return (0,suspend_react__WEBPACK_IMPORTED_MODULE_8__.clear)([loader, ...keys]);\n};\n\n// TODO: upstream to DefinitelyTyped for React 19\n// https://github.com/facebook/react/issues/28956\n\nfunction createReconciler(config) {\n  const reconciler = react_reconciler__WEBPACK_IMPORTED_MODULE_2___default()(config);\n  reconciler.injectIntoDevTools({\n    bundleType: typeof process !== 'undefined' && \"development\" !== 'production' ? 1 : 0,\n    rendererPackageName: '@react-three/fiber',\n    version: react__WEBPACK_IMPORTED_MODULE_0__.version\n  });\n  return reconciler;\n}\nconst NoEventPriority = 0;\n\n// TODO: handle constructor overloads\n// https://github.com/pmndrs/react-three-fiber/pull/2931\n// https://github.com/microsoft/TypeScript/issues/37079\n\nconst catalogue = {};\nconst PREFIX_REGEX = /^three(?=[A-Z])/;\nconst toPascalCase = type => `${type[0].toUpperCase()}${type.slice(1)}`;\nlet i = 0;\nconst isConstructor = object => typeof object === 'function';\nfunction extend(objects) {\n  if (isConstructor(objects)) {\n    const Component = `${i++}`;\n    catalogue[Component] = objects;\n    return Component;\n  } else {\n    Object.assign(catalogue, objects);\n  }\n}\nfunction validateInstance(type, props) {\n  // Get target from catalogue\n  const name = toPascalCase(type);\n  const target = catalogue[name];\n\n  // Validate element target\n  if (type !== 'primitive' && !target) throw new Error(`R3F: ${name} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);\n\n  // Validate primitives\n  if (type === 'primitive' && !props.object) throw new Error(`R3F: Primitives without 'object' are invalid!`);\n\n  // Throw if an object or literal was passed for args\n  if (props.args !== undefined && !Array.isArray(props.args)) throw new Error('R3F: The args prop must be an array!');\n}\nfunction createInstance(type, props, root) {\n  var _props$object;\n  // Remove three* prefix from elements if native element not present\n  type = toPascalCase(type) in catalogue ? type : type.replace(PREFIX_REGEX, '');\n  validateInstance(type, props);\n\n  // Regenerate the R3F instance for primitives to simulate a new object\n  if (type === 'primitive' && (_props$object = props.object) != null && _props$object.__r3f) delete props.object.__r3f;\n  return prepare(props.object, root, type, props);\n}\nfunction hideInstance(instance) {\n  if (!instance.isHidden) {\n    var _instance$parent;\n    if (instance.props.attach && (_instance$parent = instance.parent) != null && _instance$parent.object) {\n      detach(instance.parent, instance);\n    } else if (isObject3D(instance.object)) {\n      instance.object.visible = false;\n    }\n    instance.isHidden = true;\n    invalidateInstance(instance);\n  }\n}\nfunction unhideInstance(instance) {\n  if (instance.isHidden) {\n    var _instance$parent2;\n    if (instance.props.attach && (_instance$parent2 = instance.parent) != null && _instance$parent2.object) {\n      attach(instance.parent, instance);\n    } else if (isObject3D(instance.object) && instance.props.visible !== false) {\n      instance.object.visible = true;\n    }\n    instance.isHidden = false;\n    invalidateInstance(instance);\n  }\n}\n\n// https://github.com/facebook/react/issues/20271\n// This will make sure events and attach are only handled once when trees are complete\nfunction handleContainerEffects(parent, child, beforeChild) {\n  // Bail if tree isn't mounted or parent is not a container.\n  // This ensures that the tree is finalized and React won't discard results to Suspense\n  const state = child.root.getState();\n  if (!parent.parent && parent.object !== state.scene) return;\n\n  // Create & link object on first run\n  if (!child.object) {\n    var _child$props$object, _child$props$args;\n    // Get target from catalogue\n    const target = catalogue[toPascalCase(child.type)];\n\n    // Create object\n    child.object = (_child$props$object = child.props.object) != null ? _child$props$object : new target(...((_child$props$args = child.props.args) != null ? _child$props$args : []));\n    child.object.__r3f = child;\n  }\n\n  // Set initial props\n  applyProps(child.object, child.props);\n\n  // Append instance\n  if (child.props.attach) {\n    attach(parent, child);\n  } else if (isObject3D(child.object) && isObject3D(parent.object)) {\n    const childIndex = parent.object.children.indexOf(beforeChild == null ? void 0 : beforeChild.object);\n    if (beforeChild && childIndex !== -1) {\n      // If the child is already in the parent's children array, move it to the new position\n      // Otherwise, just insert it at the target position\n      const existingIndex = parent.object.children.indexOf(child.object);\n      if (existingIndex !== -1) {\n        parent.object.children.splice(existingIndex, 1);\n        const adjustedIndex = existingIndex < childIndex ? childIndex - 1 : childIndex;\n        parent.object.children.splice(adjustedIndex, 0, child.object);\n      } else {\n        child.object.parent = parent.object;\n        parent.object.children.splice(childIndex, 0, child.object);\n        child.object.dispatchEvent({\n          type: 'added'\n        });\n        parent.object.dispatchEvent({\n          type: 'childadded',\n          child: child.object\n        });\n      }\n    } else {\n      parent.object.add(child.object);\n    }\n  }\n\n  // Link subtree\n  for (const childInstance of child.children) handleContainerEffects(child, childInstance);\n\n  // Tree was updated, request a frame\n  invalidateInstance(child);\n}\nfunction appendChild(parent, child) {\n  if (!child) return;\n\n  // Link instances\n  child.parent = parent;\n  parent.children.push(child);\n\n  // Attach tree once complete\n  handleContainerEffects(parent, child);\n}\nfunction insertBefore(parent, child, beforeChild) {\n  if (!child || !beforeChild) return;\n\n  // Link instances\n  child.parent = parent;\n  const childIndex = parent.children.indexOf(beforeChild);\n  if (childIndex !== -1) parent.children.splice(childIndex, 0, child);else parent.children.push(child);\n\n  // Attach tree once complete\n  handleContainerEffects(parent, child, beforeChild);\n}\nfunction disposeOnIdle(object) {\n  if (typeof object.dispose === 'function') {\n    const handleDispose = () => {\n      try {\n        object.dispose();\n      } catch {\n        // no-op\n      }\n    };\n\n    // In a testing environment, cleanup immediately\n    if (typeof IS_REACT_ACT_ENVIRONMENT !== 'undefined') handleDispose();\n    // Otherwise, using a real GPU so schedule cleanup to prevent stalls\n    else (0,scheduler__WEBPACK_IMPORTED_MODULE_3__.unstable_scheduleCallback)(scheduler__WEBPACK_IMPORTED_MODULE_3__.unstable_IdlePriority, handleDispose);\n  }\n}\nfunction removeChild(parent, child, dispose) {\n  if (!child) return;\n\n  // Unlink instances\n  child.parent = null;\n  const childIndex = parent.children.indexOf(child);\n  if (childIndex !== -1) parent.children.splice(childIndex, 1);\n\n  // Eagerly tear down tree\n  if (child.props.attach) {\n    detach(parent, child);\n  } else if (isObject3D(child.object) && isObject3D(parent.object)) {\n    parent.object.remove(child.object);\n    removeInteractivity(findInitialRoot(child), child.object);\n  }\n\n  // Allow objects to bail out of unmount disposal with dispose={null}\n  const shouldDispose = child.props.dispose !== null && dispose !== false;\n\n  // Recursively remove instance children\n  for (let i = child.children.length - 1; i >= 0; i--) {\n    const node = child.children[i];\n    removeChild(child, node, shouldDispose);\n  }\n  child.children.length = 0;\n\n  // Unlink instance object\n  delete child.object.__r3f;\n\n  // Dispose object whenever the reconciler feels like it.\n  // Never dispose of primitives because their state may be kept outside of React!\n  // In order for an object to be able to dispose it\n  //   - has a dispose method\n  //   - cannot be a <primitive object={...} />\n  //   - cannot be a THREE.Scene, because three has broken its own API\n  if (shouldDispose && child.type !== 'primitive' && child.object.type !== 'Scene') {\n    disposeOnIdle(child.object);\n  }\n\n  // Tree was updated, request a frame for top-level instance\n  if (dispose === undefined) invalidateInstance(child);\n}\nfunction setFiberRef(fiber, publicInstance) {\n  for (const _fiber of [fiber, fiber.alternate]) {\n    if (_fiber !== null) {\n      if (typeof _fiber.ref === 'function') {\n        _fiber.refCleanup == null ? void 0 : _fiber.refCleanup();\n        const cleanup = _fiber.ref(publicInstance);\n        if (typeof cleanup === 'function') _fiber.refCleanup = cleanup;\n      } else if (_fiber.ref) {\n        _fiber.ref.current = publicInstance;\n      }\n    }\n  }\n}\nconst reconstructed = [];\nfunction swapInstances() {\n  // Detach instance\n  for (const [instance] of reconstructed) {\n    const parent = instance.parent;\n    if (parent) {\n      if (instance.props.attach) {\n        detach(parent, instance);\n      } else if (isObject3D(instance.object) && isObject3D(parent.object)) {\n        parent.object.remove(instance.object);\n      }\n      for (const child of instance.children) {\n        if (child.props.attach) {\n          detach(instance, child);\n        } else if (isObject3D(child.object) && isObject3D(instance.object)) {\n          instance.object.remove(child.object);\n        }\n      }\n    }\n\n    // If the old instance is hidden, we need to unhide it.\n    // React assumes it can discard instances since they're pure for DOM.\n    // This isn't true for us since our lifetimes are impure and longliving.\n    // So, we manually check if an instance was hidden and unhide it.\n    if (instance.isHidden) unhideInstance(instance);\n\n    // Dispose of old object if able\n    if (instance.object.__r3f) delete instance.object.__r3f;\n    if (instance.type !== 'primitive') disposeOnIdle(instance.object);\n  }\n\n  // Update instance\n  for (const [instance, props, fiber] of reconstructed) {\n    instance.props = props;\n    const parent = instance.parent;\n    if (parent) {\n      var _instance$props$objec, _instance$props$args;\n      // Get target from catalogue\n      const target = catalogue[toPascalCase(instance.type)];\n\n      // Create object\n      instance.object = (_instance$props$objec = instance.props.object) != null ? _instance$props$objec : new target(...((_instance$props$args = instance.props.args) != null ? _instance$props$args : []));\n      instance.object.__r3f = instance;\n      setFiberRef(fiber, instance.object);\n\n      // Set initial props\n      applyProps(instance.object, instance.props);\n      if (instance.props.attach) {\n        attach(parent, instance);\n      } else if (isObject3D(instance.object) && isObject3D(parent.object)) {\n        parent.object.add(instance.object);\n      }\n      for (const child of instance.children) {\n        if (child.props.attach) {\n          attach(instance, child);\n        } else if (isObject3D(child.object) && isObject3D(instance.object)) {\n          instance.object.add(child.object);\n        }\n      }\n\n      // Tree was updated, request a frame\n      invalidateInstance(instance);\n    }\n  }\n  reconstructed.length = 0;\n}\n\n// Don't handle text instances, make it no-op\nconst handleTextInstance = () => {};\nconst NO_CONTEXT = {};\nlet currentUpdatePriority = NoEventPriority;\n\n// https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactFiberFlags.js\nconst NoFlags = 0;\nconst Update = 4;\nconst reconciler = /* @__PURE__ */createReconciler({\n  isPrimaryRenderer: false,\n  warnsIfNotActing: false,\n  supportsMutation: true,\n  supportsPersistence: false,\n  supportsHydration: false,\n  createInstance,\n  removeChild,\n  appendChild,\n  appendInitialChild: appendChild,\n  insertBefore,\n  appendChildToContainer(container, child) {\n    const scene = container.getState().scene.__r3f;\n    if (!child || !scene) return;\n    appendChild(scene, child);\n  },\n  removeChildFromContainer(container, child) {\n    const scene = container.getState().scene.__r3f;\n    if (!child || !scene) return;\n    removeChild(scene, child);\n  },\n  insertInContainerBefore(container, child, beforeChild) {\n    const scene = container.getState().scene.__r3f;\n    if (!child || !beforeChild || !scene) return;\n    insertBefore(scene, child, beforeChild);\n  },\n  getRootHostContext: () => NO_CONTEXT,\n  getChildHostContext: () => NO_CONTEXT,\n  commitUpdate(instance, type, oldProps, newProps, fiber) {\n    var _newProps$args, _oldProps$args, _newProps$args2;\n    validateInstance(type, newProps);\n    let reconstruct = false;\n\n    // Reconstruct primitives if object prop changes\n    if (instance.type === 'primitive' && oldProps.object !== newProps.object) reconstruct = true;\n    // Reconstruct instance if args were added or removed\n    else if (((_newProps$args = newProps.args) == null ? void 0 : _newProps$args.length) !== ((_oldProps$args = oldProps.args) == null ? void 0 : _oldProps$args.length)) reconstruct = true;\n    // Reconstruct instance if args were changed\n    else if ((_newProps$args2 = newProps.args) != null && _newProps$args2.some((value, index) => {\n      var _oldProps$args2;\n      return value !== ((_oldProps$args2 = oldProps.args) == null ? void 0 : _oldProps$args2[index]);\n    })) reconstruct = true;\n\n    // Reconstruct when args or <primitive object={...} have changes\n    if (reconstruct) {\n      reconstructed.push([instance, {\n        ...newProps\n      }, fiber]);\n    } else {\n      // Create a diff-set, flag if there are any changes\n      const changedProps = diffProps(instance, newProps);\n      if (Object.keys(changedProps).length) {\n        Object.assign(instance.props, changedProps);\n        applyProps(instance.object, changedProps);\n      }\n    }\n\n    // Flush reconstructed siblings when we hit the last updated child in a sequence\n    const isTailSibling = fiber.sibling === null || (fiber.flags & Update) === NoFlags;\n    if (isTailSibling) swapInstances();\n  },\n  finalizeInitialChildren: () => false,\n  commitMount() {},\n  getPublicInstance: instance => instance == null ? void 0 : instance.object,\n  prepareForCommit: () => null,\n  preparePortalMount: container => prepare(container.getState().scene, container, '', {}),\n  resetAfterCommit: () => {},\n  shouldSetTextContent: () => false,\n  clearContainer: () => false,\n  hideInstance,\n  unhideInstance,\n  createTextInstance: handleTextInstance,\n  hideTextInstance: handleTextInstance,\n  unhideTextInstance: handleTextInstance,\n  scheduleTimeout: typeof setTimeout === 'function' ? setTimeout : undefined,\n  cancelTimeout: typeof clearTimeout === 'function' ? clearTimeout : undefined,\n  noTimeout: -1,\n  getInstanceFromNode: () => null,\n  beforeActiveInstanceBlur() {},\n  afterActiveInstanceBlur() {},\n  detachDeletedInstance() {},\n  prepareScopeUpdate() {},\n  getInstanceFromScope: () => null,\n  shouldAttemptEagerTransition: () => false,\n  trackSchedulerEvent: () => {},\n  resolveEventType: () => null,\n  resolveEventTimeStamp: () => -1.1,\n  requestPostPaintCallback() {},\n  maySuspendCommit: () => false,\n  preloadInstance: () => true,\n  // true indicates already loaded\n  startSuspendingCommit() {},\n  suspendInstance() {},\n  waitForCommitToBeReady: () => null,\n  NotPendingTransition: null,\n  HostTransitionContext: /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_0__.createContext(null),\n  setCurrentUpdatePriority(newPriority) {\n    currentUpdatePriority = newPriority;\n  },\n  getCurrentUpdatePriority() {\n    return currentUpdatePriority;\n  },\n  resolveUpdatePriority() {\n    var _window$event;\n    if (currentUpdatePriority !== NoEventPriority) return currentUpdatePriority;\n    switch (typeof window !== 'undefined' && ((_window$event = window.event) == null ? void 0 : _window$event.type)) {\n      case 'click':\n      case 'contextmenu':\n      case 'dblclick':\n      case 'pointercancel':\n      case 'pointerdown':\n      case 'pointerup':\n        return react_reconciler_constants__WEBPACK_IMPORTED_MODULE_1__.DiscreteEventPriority;\n      case 'pointermove':\n      case 'pointerout':\n      case 'pointerover':\n      case 'pointerenter':\n      case 'pointerleave':\n      case 'wheel':\n        return react_reconciler_constants__WEBPACK_IMPORTED_MODULE_1__.ContinuousEventPriority;\n      default:\n        return react_reconciler_constants__WEBPACK_IMPORTED_MODULE_1__.DefaultEventPriority;\n    }\n  },\n  resetFormInstance() {}\n});\n\nconst _roots = new Map();\nconst shallowLoose = {\n  objects: 'shallow',\n  strict: false\n};\nfunction computeInitialSize(canvas, size) {\n  if (!size && typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement && canvas.parentElement) {\n    const {\n      width,\n      height,\n      top,\n      left\n    } = canvas.parentElement.getBoundingClientRect();\n    return {\n      width,\n      height,\n      top,\n      left\n    };\n  } else if (!size && typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas) {\n    return {\n      width: canvas.width,\n      height: canvas.height,\n      top: 0,\n      left: 0\n    };\n  }\n  return {\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    ...size\n  };\n}\nfunction createRoot(canvas) {\n  // Check against mistaken use of createRoot\n  const prevRoot = _roots.get(canvas);\n  const prevFiber = prevRoot == null ? void 0 : prevRoot.fiber;\n  const prevStore = prevRoot == null ? void 0 : prevRoot.store;\n  if (prevRoot) console.warn('R3F.createRoot should only be called once!');\n\n  // Report when an error was detected in a previous render\n  // https://github.com/pmndrs/react-three-fiber/pull/2261\n  const logRecoverableError = typeof reportError === 'function' ?\n  // In modern browsers, reportError will dispatch an error event,\n  // emulating an uncaught JavaScript error.\n  reportError :\n  // In older browsers and test environments, fallback to console.error.\n  console.error;\n\n  // Create store\n  const store = prevStore || createStore(invalidate, advance);\n  // Create renderer\n  const fiber = prevFiber || reconciler.createContainer(store,\n  // container\n  react_reconciler_constants__WEBPACK_IMPORTED_MODULE_1__.ConcurrentRoot,\n  // tag\n  null,\n  // hydration callbacks\n  false,\n  // isStrictMode\n  null,\n  // concurrentUpdatesByDefaultOverride\n  '',\n  // identifierPrefix\n  logRecoverableError,\n  // onUncaughtError\n  logRecoverableError,\n  // onCaughtError\n  logRecoverableError,\n  // onRecoverableError\n  null // transitionCallbacks\n  );\n  // Map it\n  if (!prevRoot) _roots.set(canvas, {\n    fiber,\n    store\n  });\n\n  // Locals\n  let onCreated;\n  let lastCamera;\n  let configured = false;\n  let pending = null;\n  return {\n    async configure(props = {}) {\n      let resolve;\n      pending = new Promise(_resolve => resolve = _resolve);\n      let {\n        gl: glConfig,\n        size: propsSize,\n        scene: sceneOptions,\n        events,\n        onCreated: onCreatedCallback,\n        shadows = false,\n        linear = false,\n        flat = false,\n        legacy = false,\n        orthographic = false,\n        frameloop = 'always',\n        dpr = [1, 2],\n        performance,\n        raycaster: raycastOptions,\n        camera: cameraOptions,\n        onPointerMissed\n      } = props;\n      let state = store.getState();\n\n      // Set up renderer (one time only!)\n      let gl = state.gl;\n      if (!state.gl) {\n        const defaultProps = {\n          canvas: canvas,\n          powerPreference: 'high-performance',\n          antialias: true,\n          alpha: true\n        };\n        const customRenderer = typeof glConfig === 'function' ? await glConfig(defaultProps) : glConfig;\n        if (isRenderer(customRenderer)) {\n          gl = customRenderer;\n        } else {\n          gl = new three__WEBPACK_IMPORTED_MODULE_9__.WebGLRenderer({\n            ...defaultProps,\n            ...glConfig\n          });\n        }\n        state.set({\n          gl\n        });\n      }\n\n      // Set up raycaster (one time only!)\n      let raycaster = state.raycaster;\n      if (!raycaster) state.set({\n        raycaster: raycaster = new three__WEBPACK_IMPORTED_MODULE_6__.Raycaster()\n      });\n\n      // Set raycaster options\n      const {\n        params,\n        ...options\n      } = raycastOptions || {};\n      if (!is.equ(options, raycaster, shallowLoose)) applyProps(raycaster, {\n        ...options\n      });\n      if (!is.equ(params, raycaster.params, shallowLoose)) applyProps(raycaster, {\n        params: {\n          ...raycaster.params,\n          ...params\n        }\n      });\n\n      // Create default camera, don't overwrite any user-set state\n      if (!state.camera || state.camera === lastCamera && !is.equ(lastCamera, cameraOptions, shallowLoose)) {\n        lastCamera = cameraOptions;\n        const isCamera = cameraOptions == null ? void 0 : cameraOptions.isCamera;\n        const camera = isCamera ? cameraOptions : orthographic ? new three__WEBPACK_IMPORTED_MODULE_6__.OrthographicCamera(0, 0, 0, 0, 0.1, 1000) : new three__WEBPACK_IMPORTED_MODULE_6__.PerspectiveCamera(75, 0, 0.1, 1000);\n        if (!isCamera) {\n          camera.position.z = 5;\n          if (cameraOptions) {\n            applyProps(camera, cameraOptions);\n            // Preserve user-defined frustum if possible\n            // https://github.com/pmndrs/react-three-fiber/issues/3160\n            if (!camera.manual) {\n              if ('aspect' in cameraOptions || 'left' in cameraOptions || 'right' in cameraOptions || 'bottom' in cameraOptions || 'top' in cameraOptions) {\n                camera.manual = true;\n                camera.updateProjectionMatrix();\n              }\n            }\n          }\n          // Always look at center by default\n          if (!state.camera && !(cameraOptions != null && cameraOptions.rotation)) camera.lookAt(0, 0, 0);\n        }\n        state.set({\n          camera\n        });\n\n        // Configure raycaster\n        // https://github.com/pmndrs/react-xr/issues/300\n        raycaster.camera = camera;\n      }\n\n      // Set up scene (one time only!)\n      if (!state.scene) {\n        let scene;\n        if (sceneOptions != null && sceneOptions.isScene) {\n          scene = sceneOptions;\n          prepare(scene, store, '', {});\n        } else {\n          scene = new three__WEBPACK_IMPORTED_MODULE_6__.Scene();\n          prepare(scene, store, '', {});\n          if (sceneOptions) applyProps(scene, sceneOptions);\n        }\n        state.set({\n          scene\n        });\n      }\n\n      // Store events internally\n      if (events && !state.events.handlers) state.set({\n        events: events(store)\n      });\n      // Check size, allow it to take on container bounds initially\n      const size = computeInitialSize(canvas, propsSize);\n      if (!is.equ(size, state.size, shallowLoose)) {\n        state.setSize(size.width, size.height, size.top, size.left);\n      }\n      // Check pixelratio\n      if (dpr && state.viewport.dpr !== calculateDpr(dpr)) state.setDpr(dpr);\n      // Check frameloop\n      if (state.frameloop !== frameloop) state.setFrameloop(frameloop);\n      // Check pointer missed\n      if (!state.onPointerMissed) state.set({\n        onPointerMissed\n      });\n      // Check performance\n      if (performance && !is.equ(performance, state.performance, shallowLoose)) state.set(state => ({\n        performance: {\n          ...state.performance,\n          ...performance\n        }\n      }));\n\n      // Set up XR (one time only!)\n      if (!state.xr) {\n        var _gl$xr;\n        // Handle frame behavior in WebXR\n        const handleXRFrame = (timestamp, frame) => {\n          const state = store.getState();\n          if (state.frameloop === 'never') return;\n          advance(timestamp, true, state, frame);\n        };\n\n        // Toggle render switching on session\n        const handleSessionChange = () => {\n          const state = store.getState();\n          state.gl.xr.enabled = state.gl.xr.isPresenting;\n          state.gl.xr.setAnimationLoop(state.gl.xr.isPresenting ? handleXRFrame : null);\n          if (!state.gl.xr.isPresenting) invalidate(state);\n        };\n\n        // WebXR session manager\n        const xr = {\n          connect() {\n            const gl = store.getState().gl;\n            gl.xr.addEventListener('sessionstart', handleSessionChange);\n            gl.xr.addEventListener('sessionend', handleSessionChange);\n          },\n          disconnect() {\n            const gl = store.getState().gl;\n            gl.xr.removeEventListener('sessionstart', handleSessionChange);\n            gl.xr.removeEventListener('sessionend', handleSessionChange);\n          }\n        };\n\n        // Subscribe to WebXR session events\n        if (typeof ((_gl$xr = gl.xr) == null ? void 0 : _gl$xr.addEventListener) === 'function') xr.connect();\n        state.set({\n          xr\n        });\n      }\n\n      // Set shadowmap\n      if (gl.shadowMap) {\n        const oldEnabled = gl.shadowMap.enabled;\n        const oldType = gl.shadowMap.type;\n        gl.shadowMap.enabled = !!shadows;\n        if (is.boo(shadows)) {\n          gl.shadowMap.type = three__WEBPACK_IMPORTED_MODULE_6__.PCFSoftShadowMap;\n        } else if (is.str(shadows)) {\n          var _types$shadows;\n          const types = {\n            basic: three__WEBPACK_IMPORTED_MODULE_6__.BasicShadowMap,\n            percentage: three__WEBPACK_IMPORTED_MODULE_6__.PCFShadowMap,\n            soft: three__WEBPACK_IMPORTED_MODULE_6__.PCFSoftShadowMap,\n            variance: three__WEBPACK_IMPORTED_MODULE_6__.VSMShadowMap\n          };\n          gl.shadowMap.type = (_types$shadows = types[shadows]) != null ? _types$shadows : three__WEBPACK_IMPORTED_MODULE_6__.PCFSoftShadowMap;\n        } else if (is.obj(shadows)) {\n          Object.assign(gl.shadowMap, shadows);\n        }\n        if (oldEnabled !== gl.shadowMap.enabled || oldType !== gl.shadowMap.type) gl.shadowMap.needsUpdate = true;\n      }\n      three__WEBPACK_IMPORTED_MODULE_6__.ColorManagement.enabled = !legacy;\n\n      // Set color space and tonemapping preferences\n      if (!configured) {\n        gl.outputColorSpace = linear ? three__WEBPACK_IMPORTED_MODULE_6__.LinearSRGBColorSpace : three__WEBPACK_IMPORTED_MODULE_6__.SRGBColorSpace;\n        gl.toneMapping = flat ? three__WEBPACK_IMPORTED_MODULE_6__.NoToneMapping : three__WEBPACK_IMPORTED_MODULE_6__.ACESFilmicToneMapping;\n      }\n\n      // Update color management state\n      if (state.legacy !== legacy) state.set(() => ({\n        legacy\n      }));\n      if (state.linear !== linear) state.set(() => ({\n        linear\n      }));\n      if (state.flat !== flat) state.set(() => ({\n        flat\n      }));\n\n      // Set gl props\n      if (glConfig && !is.fun(glConfig) && !isRenderer(glConfig) && !is.equ(glConfig, gl, shallowLoose)) applyProps(gl, glConfig);\n\n      // Set locals\n      onCreated = onCreatedCallback;\n      configured = true;\n      resolve();\n      return this;\n    },\n    render(children) {\n      // The root has to be configured before it can be rendered\n      if (!configured && !pending) this.configure();\n      pending.then(() => {\n        reconciler.updateContainer( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Provider, {\n          store: store,\n          children: children,\n          onCreated: onCreated,\n          rootElement: canvas\n        }), fiber, null, () => undefined);\n      });\n      return store;\n    },\n    unmount() {\n      unmountComponentAtNode(canvas);\n    }\n  };\n}\nfunction Provider({\n  store,\n  children,\n  onCreated,\n  rootElement\n}) {\n  useIsomorphicLayoutEffect(() => {\n    const state = store.getState();\n    // Flag the canvas active, rendering will now begin\n    state.set(state => ({\n      internal: {\n        ...state.internal,\n        active: true\n      }\n    }));\n    // Notify that init is completed, the scene graph exists, but nothing has yet rendered\n    if (onCreated) onCreated(state);\n    // Connect events to the targets parent, this is done to ensure events are registered on\n    // a shared target, and not on the canvas itself\n    if (!store.getState().events.connected) state.events.connect == null ? void 0 : state.events.connect(rootElement);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(context.Provider, {\n    value: store,\n    children: children\n  });\n}\nfunction unmountComponentAtNode(canvas, callback) {\n  const root = _roots.get(canvas);\n  const fiber = root == null ? void 0 : root.fiber;\n  if (fiber) {\n    const state = root == null ? void 0 : root.store.getState();\n    if (state) state.internal.active = false;\n    reconciler.updateContainer(null, fiber, null, () => {\n      if (state) {\n        setTimeout(() => {\n          try {\n            var _state$gl, _state$gl$renderLists, _state$gl2, _state$gl3;\n            state.events.disconnect == null ? void 0 : state.events.disconnect();\n            (_state$gl = state.gl) == null ? void 0 : (_state$gl$renderLists = _state$gl.renderLists) == null ? void 0 : _state$gl$renderLists.dispose == null ? void 0 : _state$gl$renderLists.dispose();\n            (_state$gl2 = state.gl) == null ? void 0 : _state$gl2.forceContextLoss == null ? void 0 : _state$gl2.forceContextLoss();\n            if ((_state$gl3 = state.gl) != null && _state$gl3.xr) state.xr.disconnect();\n            dispose(state.scene);\n            _roots.delete(canvas);\n            if (callback) callback(canvas);\n          } catch (e) {\n            /* ... */\n          }\n        }, 500);\n      }\n    });\n  }\n}\nfunction createPortal(children, container, state) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Portal, {\n    children: children,\n    container: container,\n    state: state\n  });\n}\nfunction Portal({\n  state = {},\n  children,\n  container\n}) {\n  /** This has to be a component because it would not be able to call useThree/useStore otherwise since\n   *  if this is our environment, then we are not in r3f's renderer but in react-dom, it would trigger\n   *  the \"R3F hooks can only be used within the Canvas component!\" warning:\n   *  <Canvas>\n   *    {createPortal(...)} */\n  const {\n    events,\n    size,\n    ...rest\n  } = state;\n  const previousRoot = useStore();\n  const [raycaster] = react__WEBPACK_IMPORTED_MODULE_0__.useState(() => new three__WEBPACK_IMPORTED_MODULE_6__.Raycaster());\n  const [pointer] = react__WEBPACK_IMPORTED_MODULE_0__.useState(() => new three__WEBPACK_IMPORTED_MODULE_6__.Vector2());\n  const inject = useMutableCallback((rootState, injectState) => {\n    let viewport = undefined;\n    if (injectState.camera && size) {\n      const camera = injectState.camera;\n      // Calculate the override viewport, if present\n      viewport = rootState.viewport.getCurrentViewport(camera, new three__WEBPACK_IMPORTED_MODULE_6__.Vector3(), size);\n      // Update the portal camera, if it differs from the previous layer\n      if (camera !== rootState.camera) updateCamera(camera, size);\n    }\n    return {\n      // The intersect consists of the previous root state\n      ...rootState,\n      ...injectState,\n      // Portals have their own scene, which forms the root, a raycaster and a pointer\n      scene: container,\n      raycaster,\n      pointer,\n      mouse: pointer,\n      // Their previous root is the layer before it\n      previousRoot,\n      // Events, size and viewport can be overridden by the inject layer\n      events: {\n        ...rootState.events,\n        ...injectState.events,\n        ...events\n      },\n      size: {\n        ...rootState.size,\n        ...size\n      },\n      viewport: {\n        ...rootState.viewport,\n        ...viewport\n      },\n      // Layers are allowed to override events\n      setEvents: events => injectState.set(state => ({\n        ...state,\n        events: {\n          ...state.events,\n          ...events\n        }\n      }))\n    };\n  });\n  const usePortalStore = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    // Create a mirrored store, based on the previous root with a few overrides ...\n    const store = (0,zustand_traditional__WEBPACK_IMPORTED_MODULE_7__.createWithEqualityFn)((set, get) => ({\n      ...rest,\n      set,\n      get\n    }));\n\n    // Subscribe to previous root-state and copy changes over to the mirrored portal-state\n    const onMutate = prev => store.setState(state => inject.current(prev, state));\n    onMutate(previousRoot.getState());\n    previousRoot.subscribe(onMutate);\n    return store;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [previousRoot, container]);\n  return (\n    /*#__PURE__*/\n    // @ts-ignore, reconciler types are not maintained\n    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n      children: reconciler.createPortal( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(context.Provider, {\n        value: usePortalStore,\n        children: children\n      }), usePortalStore, null)\n    })\n  );\n}\n\n/**\n * Force React to flush any updates inside the provided callback synchronously and immediately.\n * All the same caveats documented for react-dom's `flushSync` apply here (see https://react.dev/reference/react-dom/flushSync).\n * Nevertheless, sometimes one needs to render synchronously, for example to keep DOM and 3D changes in lock-step without\n * having to revert to a non-React solution.\n */\nfunction flushSync(fn) {\n  return reconciler.flushSync(fn);\n}\n\nfunction createSubs(callback, subs) {\n  const sub = {\n    callback\n  };\n  subs.add(sub);\n  return () => void subs.delete(sub);\n}\nconst globalEffects = new Set();\nconst globalAfterEffects = new Set();\nconst globalTailEffects = new Set();\n\n/**\n * Adds a global render callback which is called each frame.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#addEffect\n */\nconst addEffect = callback => createSubs(callback, globalEffects);\n\n/**\n * Adds a global after-render callback which is called each frame.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#addAfterEffect\n */\nconst addAfterEffect = callback => createSubs(callback, globalAfterEffects);\n\n/**\n * Adds a global callback which is called when rendering stops.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#addTail\n */\nconst addTail = callback => createSubs(callback, globalTailEffects);\nfunction run(effects, timestamp) {\n  if (!effects.size) return;\n  for (const {\n    callback\n  } of effects.values()) {\n    callback(timestamp);\n  }\n}\nfunction flushGlobalEffects(type, timestamp) {\n  switch (type) {\n    case 'before':\n      return run(globalEffects, timestamp);\n    case 'after':\n      return run(globalAfterEffects, timestamp);\n    case 'tail':\n      return run(globalTailEffects, timestamp);\n  }\n}\nlet subscribers;\nlet subscription;\nfunction update(timestamp, state, frame) {\n  // Run local effects\n  let delta = state.clock.getDelta();\n\n  // In frameloop='never' mode, clock times are updated using the provided timestamp\n  if (state.frameloop === 'never' && typeof timestamp === 'number') {\n    delta = timestamp - state.clock.elapsedTime;\n    state.clock.oldTime = state.clock.elapsedTime;\n    state.clock.elapsedTime = timestamp;\n  }\n\n  // Call subscribers (useFrame)\n  subscribers = state.internal.subscribers;\n  for (let i = 0; i < subscribers.length; i++) {\n    subscription = subscribers[i];\n    subscription.ref.current(subscription.store.getState(), delta, frame);\n  }\n\n  // Render content\n  if (!state.internal.priority && state.gl.render) state.gl.render(state.scene, state.camera);\n\n  // Decrease frame count\n  state.internal.frames = Math.max(0, state.internal.frames - 1);\n  return state.frameloop === 'always' ? 1 : state.internal.frames;\n}\nlet running = false;\nlet useFrameInProgress = false;\nlet repeat;\nlet frame;\nlet state;\nfunction loop(timestamp) {\n  frame = requestAnimationFrame(loop);\n  running = true;\n  repeat = 0;\n\n  // Run effects\n  flushGlobalEffects('before', timestamp);\n\n  // Render all roots\n  useFrameInProgress = true;\n  for (const root of _roots.values()) {\n    var _state$gl$xr;\n    state = root.store.getState();\n\n    // If the frameloop is invalidated, do not run another frame\n    if (state.internal.active && (state.frameloop === 'always' || state.internal.frames > 0) && !((_state$gl$xr = state.gl.xr) != null && _state$gl$xr.isPresenting)) {\n      repeat += update(timestamp, state);\n    }\n  }\n  useFrameInProgress = false;\n\n  // Run after-effects\n  flushGlobalEffects('after', timestamp);\n\n  // Stop the loop if nothing invalidates it\n  if (repeat === 0) {\n    // Tail call effects, they are called when rendering stops\n    flushGlobalEffects('tail', timestamp);\n\n    // Flag end of operation\n    running = false;\n    return cancelAnimationFrame(frame);\n  }\n}\n\n/**\n * Invalidates the view, requesting a frame to be rendered. Will globally invalidate unless passed a root's state.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#invalidate\n */\nfunction invalidate(state, frames = 1) {\n  var _state$gl$xr2;\n  if (!state) return _roots.forEach(root => invalidate(root.store.getState(), frames));\n  if ((_state$gl$xr2 = state.gl.xr) != null && _state$gl$xr2.isPresenting || !state.internal.active || state.frameloop === 'never') return;\n  if (frames > 1) {\n    // legacy support for people using frames parameters\n    // Increase frames, do not go higher than 60\n    state.internal.frames = Math.min(60, state.internal.frames + frames);\n  } else {\n    if (useFrameInProgress) {\n      //called from within a useFrame, it means the user wants an additional frame\n      state.internal.frames = 2;\n    } else {\n      //the user need a new frame, no need to increment further than 1\n      state.internal.frames = 1;\n    }\n  }\n\n  // If the render-loop isn't active, start it\n  if (!running) {\n    running = true;\n    requestAnimationFrame(loop);\n  }\n}\n\n/**\n * Advances the frameloop and runs render effects, useful for when manually rendering via `frameloop=\"never\"`.\n * @see https://docs.pmnd.rs/react-three-fiber/api/additional-exports#advance\n */\nfunction advance(timestamp, runGlobalEffects = true, state, frame) {\n  if (runGlobalEffects) flushGlobalEffects('before', timestamp);\n  if (!state) for (const root of _roots.values()) update(timestamp, root.store.getState());else update(timestamp, state, frame);\n  if (runGlobalEffects) flushGlobalEffects('after', timestamp);\n}\n\nconst DOM_EVENTS = {\n  onClick: ['click', false],\n  onContextMenu: ['contextmenu', false],\n  onDoubleClick: ['dblclick', false],\n  onWheel: ['wheel', true],\n  onPointerDown: ['pointerdown', true],\n  onPointerUp: ['pointerup', true],\n  onPointerLeave: ['pointerleave', true],\n  onPointerMove: ['pointermove', true],\n  onPointerCancel: ['pointercancel', true],\n  onLostPointerCapture: ['lostpointercapture', true]\n};\n\n/** Default R3F event manager for web */\nfunction createPointerEvents(store) {\n  const {\n    handlePointer\n  } = createEvents(store);\n  return {\n    priority: 1,\n    enabled: true,\n    compute(event, state, previous) {\n      // https://github.com/pmndrs/react-three-fiber/pull/782\n      // Events trigger outside of canvas when moved, use offsetX/Y by default and allow overrides\n      state.pointer.set(event.offsetX / state.size.width * 2 - 1, -(event.offsetY / state.size.height) * 2 + 1);\n      state.raycaster.setFromCamera(state.pointer, state.camera);\n    },\n    connected: undefined,\n    handlers: Object.keys(DOM_EVENTS).reduce((acc, key) => ({\n      ...acc,\n      [key]: handlePointer(key)\n    }), {}),\n    update: () => {\n      var _internal$lastEvent;\n      const {\n        events,\n        internal\n      } = store.getState();\n      if ((_internal$lastEvent = internal.lastEvent) != null && _internal$lastEvent.current && events.handlers) events.handlers.onPointerMove(internal.lastEvent.current);\n    },\n    connect: target => {\n      const {\n        set,\n        events\n      } = store.getState();\n      events.disconnect == null ? void 0 : events.disconnect();\n      set(state => ({\n        events: {\n          ...state.events,\n          connected: target\n        }\n      }));\n      if (events.handlers) {\n        for (const name in events.handlers) {\n          const event = events.handlers[name];\n          const [eventName, passive] = DOM_EVENTS[name];\n          target.addEventListener(eventName, event, {\n            passive\n          });\n        }\n      }\n    },\n    disconnect: () => {\n      const {\n        set,\n        events\n      } = store.getState();\n      if (events.connected) {\n        if (events.handlers) {\n          for (const name in events.handlers) {\n            const event = events.handlers[name];\n            const [eventName] = DOM_EVENTS[name];\n            events.connected.removeEventListener(eventName, event);\n          }\n        }\n        set(state => ({\n          events: {\n            ...state.events,\n            connected: undefined\n          }\n        }));\n      }\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2ZpYmVyL2Rpc3QvZXZlbnRzLWNmNTdiMjIwLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUNBO0FBQ21HO0FBQ3ZFO0FBQ2pCO0FBQ21DO0FBQ3JCO0FBQ047QUFDbUI7O0FBRXJFO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELE1BQU07QUFDekQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQ0FBSztBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdVVBQXVVLGtEQUFxQixHQUFHLDRDQUFlO0FBQzlXO0FBQ0EsY0FBYyx5Q0FBWTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrREFBUTtBQUN4Qix3QkFBd0IsMERBQWdCO0FBQ3hDLFNBQVMsMENBQWE7QUFDdEI7QUFDQSxHQUFHO0FBQ0gscUJBQXFCLHVEQUFhLG9DQUFvQyw2Q0FBZ0I7QUFDdEYsMEJBQTBCLDZDQUFnQixHQUFHLDJDQUFjO0FBQzNELHdCQUF3QixzREFBRztBQUMzQiw2QkFBNkIsc0RBQUc7QUFDaEM7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxzR0FBc0csNENBQWU7QUFDckg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLEtBQUs7QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0EsMEJBQTBCLHlDQUFZLHFCQUFxQix5Q0FBWTtBQUN2RTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0NBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2Q0FBZ0IsdUJBQXVCLG1EQUFzQjtBQUN4RjtBQUNBLCtCQUErQixpREFBb0I7QUFDbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZFQUE2RTtBQUM3RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQkFBMEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLHVDQUF1QywwQ0FBYTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaVZBQWlWO0FBQ2pWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQixnREFBbUI7QUFDbEQ7QUFDQSxvQkFBb0IseUVBQW9CO0FBQ3hDLHlCQUF5QiwwQ0FBYTtBQUN0Qyw4QkFBOEIsMENBQWE7QUFDM0MsMkJBQTJCLDBDQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLGdEQUFnRDtBQUNoRCxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHdCQUF3QiwwQ0FBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0NBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNENBQWU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlDQUFZO0FBQy9CLEVBQUUsc0RBQXlCO0FBQzNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2Q0FBZ0I7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMENBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMERBQTBELE1BQU0sSUFBSSx1Q0FBdUM7QUFDaEg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQU87QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNEQUFPO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9EQUFLO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQix1REFBVTtBQUMvQjtBQUNBLGtEQUFrRCxhQUFvQjtBQUN0RTtBQUNBLGFBQWEsMENBQWE7QUFDMUIsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdDQUFnQyxzQkFBc0IsRUFBRSxjQUFjO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtEQUErRCxNQUFNOztBQUVyRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRTs7QUFFdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUyxvRUFBeUIsQ0FBQyw0REFBcUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQSxpRUFBaUU7QUFDakU7O0FBRUE7QUFDQSwwQ0FBMEMsUUFBUTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLEtBQUs7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsbURBQW1ELEtBQUs7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLHdGQUF3RjtBQUN4Riw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQiw4QkFBOEI7QUFDOUIsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0Esd0NBQXdDLGdEQUFtQjtBQUMzRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLCtFQUF1QjtBQUN0QztBQUNBLGVBQWUsNEVBQW9CO0FBQ25DO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHNFQUFjO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixtQkFBbUIsZ0RBQW1CO0FBQ3RDO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0Q0FBZTtBQUNsRCxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUscURBQXdCLDhCQUE4QixvREFBdUI7QUFDbEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLFVBQVU7QUFDVixzQkFBc0Isd0NBQVc7QUFDakMsc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsbURBQXNCO0FBQ3BELFVBQVU7QUFDVjtBQUNBO0FBQ0EsbUJBQW1CLGlEQUFvQjtBQUN2Qyx3QkFBd0IsK0NBQWtCO0FBQzFDLGtCQUFrQixtREFBc0I7QUFDeEMsc0JBQXNCLCtDQUFrQjtBQUN4QztBQUNBLDJGQUEyRixtREFBc0I7QUFDakgsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxrREFBcUI7O0FBRTNCO0FBQ0E7QUFDQSx1Q0FBdUMsdURBQTBCLEdBQUcsaURBQW9CO0FBQ3hGLGdDQUFnQyxnREFBbUIsR0FBRyx3REFBMkI7QUFDakY7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHNEQUFHO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQkFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxzQkFBc0IsMkNBQWMsV0FBVyw0Q0FBZTtBQUM5RCxvQkFBb0IsMkNBQWMsV0FBVywwQ0FBYTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDBDQUFhO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0gseUJBQXlCLDBDQUFhO0FBQ3RDO0FBQ0Esa0JBQWtCLHlFQUFvQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFHLENBQUMsdURBQVE7QUFDaEIsc0RBQXNELHNEQUFHO0FBQ3pEO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRkFBMkY7QUFDM0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssS0FBSztBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVtbUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXHBhcmVudGx5dGljc1xcbm9kZV9tb2R1bGVzXFxAcmVhY3QtdGhyZWVcXGZpYmVyXFxkaXN0XFxldmVudHMtY2Y1N2IyMjAuZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IERlZmF1bHRFdmVudFByaW9yaXR5LCBDb250aW51b3VzRXZlbnRQcmlvcml0eSwgRGlzY3JldGVFdmVudFByaW9yaXR5LCBDb25jdXJyZW50Um9vdCB9IGZyb20gJ3JlYWN0LXJlY29uY2lsZXIvY29uc3RhbnRzJztcbmltcG9ydCB7IGNyZWF0ZVdpdGhFcXVhbGl0eUZuIH0gZnJvbSAnenVzdGFuZC90cmFkaXRpb25hbCc7XG5pbXBvcnQgUmVjb25jaWxlciBmcm9tICdyZWFjdC1yZWNvbmNpbGVyJztcbmltcG9ydCB7IHVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2ssIHVuc3RhYmxlX0lkbGVQcmlvcml0eSB9IGZyb20gJ3NjaGVkdWxlcic7XG5pbXBvcnQgeyBzdXNwZW5kLCBwcmVsb2FkLCBjbGVhciB9IGZyb20gJ3N1c3BlbmQtcmVhY3QnO1xuaW1wb3J0IHsganN4LCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IHVzZUZpYmVyLCB1c2VDb250ZXh0QnJpZGdlLCB0cmF2ZXJzZUZpYmVyIH0gZnJvbSAnaXRzLWZpbmUnO1xuXG52YXIgdGhyZWVUeXBlcyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsXG59KTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnN0YW5jZSdzIGluaXRpYWwgKG91dG1vc3QpIHJvb3QuXG4gKi9cbmZ1bmN0aW9uIGZpbmRJbml0aWFsUm9vdChpbnN0YW5jZSkge1xuICBsZXQgcm9vdCA9IGluc3RhbmNlLnJvb3Q7XG4gIHdoaWxlIChyb290LmdldFN0YXRlKCkucHJldmlvdXNSb290KSByb290ID0gcm9vdC5nZXRTdGF0ZSgpLnByZXZpb3VzUm9vdDtcbiAgcmV0dXJuIHJvb3Q7XG59XG4vKipcbiAqIFNhZmVseSBmbHVzaCBhc3luYyBlZmZlY3RzIHdoZW4gdGVzdGluZywgc2ltdWxhdGluZyBhIGxlZ2FjeSByb290LlxuICogQGRlcHJlY2F0ZWQgSW1wb3J0IGZyb20gUmVhY3QgaW5zdGVhZC4gaW1wb3J0IHsgYWN0IH0gZnJvbSAncmVhY3QnXG4gKi9cbi8vIFJlZmVyZW5jZSB3aXRoIGNvbXB1dGVkIGtleSB0byBicmVhayBXZWJwYWNrIHN0YXRpYyBhbmFseXNpc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2svd2VicGFjay9pc3N1ZXMvMTQ4MTRcbmNvbnN0IGFjdCA9IFJlYWN0WydhY3QnICsgJyddO1xuY29uc3QgaXNPcnRob2dyYXBoaWNDYW1lcmEgPSBkZWYgPT4gZGVmICYmIGRlZi5pc09ydGhvZ3JhcGhpY0NhbWVyYTtcbmNvbnN0IGlzUmVmID0gb2JqID0+IG9iaiAmJiBvYmouaGFzT3duUHJvcGVydHkoJ2N1cnJlbnQnKTtcbmNvbnN0IGlzQ29sb3JSZXByZXNlbnRhdGlvbiA9IHZhbHVlID0+IHZhbHVlICE9IG51bGwgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB2YWx1ZS5pc0NvbG9yKTtcblxuLyoqXG4gKiBBbiBTU1ItZnJpZW5kbHkgdXNlTGF5b3V0RWZmZWN0LlxuICpcbiAqIFJlYWN0IGN1cnJlbnRseSB0aHJvd3MgYSB3YXJuaW5nIHdoZW4gdXNpbmcgdXNlTGF5b3V0RWZmZWN0IG9uIHRoZSBzZXJ2ZXIuXG4gKiBUbyBnZXQgYXJvdW5kIGl0LCB3ZSBjYW4gY29uZGl0aW9uYWxseSB1c2VFZmZlY3Qgb24gdGhlIHNlcnZlciAobm8tb3ApIGFuZFxuICogdXNlTGF5b3V0RWZmZWN0IGVsc2V3aGVyZS5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTQ5MjdcbiAqL1xuY29uc3QgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCA9IC8qIEBfX1BVUkVfXyAqLygoX3dpbmRvdyRkb2N1bWVudCwgX3dpbmRvdyRuYXZpZ2F0b3IpID0+IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICgoKF93aW5kb3ckZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfd2luZG93JGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpIHx8ICgoX3dpbmRvdyRuYXZpZ2F0b3IgPSB3aW5kb3cubmF2aWdhdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX3dpbmRvdyRuYXZpZ2F0b3IucHJvZHVjdCkgPT09ICdSZWFjdE5hdGl2ZScpKSgpID8gUmVhY3QudXNlTGF5b3V0RWZmZWN0IDogUmVhY3QudXNlRWZmZWN0O1xuZnVuY3Rpb24gdXNlTXV0YWJsZUNhbGxiYWNrKGZuKSB7XG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZihmbik7XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4gdm9pZCAocmVmLmN1cnJlbnQgPSBmbiksIFtmbl0pO1xuICByZXR1cm4gcmVmO1xufVxuLyoqXG4gKiBCcmlkZ2VzIHJlbmRlcmVyIENvbnRleHQgYW5kIFN0cmljdE1vZGUgZnJvbSBhIHByaW1hcnkgcmVuZGVyZXIuXG4gKi9cbmZ1bmN0aW9uIHVzZUJyaWRnZSgpIHtcbiAgY29uc3QgZmliZXIgPSB1c2VGaWJlcigpO1xuICBjb25zdCBDb250ZXh0QnJpZGdlID0gdXNlQ29udGV4dEJyaWRnZSgpO1xuICByZXR1cm4gUmVhY3QudXNlTWVtbygoKSA9PiAoe1xuICAgIGNoaWxkcmVuXG4gIH0pID0+IHtcbiAgICBjb25zdCBzdHJpY3QgPSAhIXRyYXZlcnNlRmliZXIoZmliZXIsIHRydWUsIG5vZGUgPT4gbm9kZS50eXBlID09PSBSZWFjdC5TdHJpY3RNb2RlKTtcbiAgICBjb25zdCBSb290ID0gc3RyaWN0ID8gUmVhY3QuU3RyaWN0TW9kZSA6IFJlYWN0LkZyYWdtZW50O1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFJvb3QsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KENvbnRleHRCcmlkZ2UsIHtcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgICB9KVxuICAgIH0pO1xuICB9LCBbZmliZXIsIENvbnRleHRCcmlkZ2VdKTtcbn1cbmZ1bmN0aW9uIEJsb2NrKHtcbiAgc2V0XG59KSB7XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIHNldChuZXcgUHJvbWlzZSgoKSA9PiBudWxsKSk7XG4gICAgcmV0dXJuICgpID0+IHNldChmYWxzZSk7XG4gIH0sIFtzZXRdKTtcbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIE5PVEU6IHN0YXRpYyBtZW1iZXJzIGdldCBkb3duLWxldmVsIHRyYW5zcGlsZWQgdG8gbXV0YXRpb25zIHdoaWNoIGJyZWFrIHRyZWUtc2hha2luZ1xuY29uc3QgRXJyb3JCb3VuZGFyeSA9IC8qIEBfX1BVUkVfXyAqLyhfRXJyb3JCb3VuZGFyeSA9PiAoX0Vycm9yQm91bmRhcnkgPSBjbGFzcyBFcnJvckJvdW5kYXJ5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBlcnJvcjogZmFsc2VcbiAgICB9O1xuICB9XG4gIGNvbXBvbmVudERpZENhdGNoKGVycikge1xuICAgIHRoaXMucHJvcHMuc2V0KGVycik7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmVycm9yID8gbnVsbCA6IHRoaXMucHJvcHMuY2hpbGRyZW47XG4gIH1cbn0sIF9FcnJvckJvdW5kYXJ5LmdldERlcml2ZWRTdGF0ZUZyb21FcnJvciA9ICgpID0+ICh7XG4gIGVycm9yOiB0cnVlXG59KSwgX0Vycm9yQm91bmRhcnkpKSgpO1xuZnVuY3Rpb24gY2FsY3VsYXRlRHByKGRwcikge1xuICB2YXIgX3dpbmRvdyRkZXZpY2VQaXhlbFJhO1xuICAvLyBFcnIgb24gdGhlIHNpZGUgb2YgcHJvZ3Jlc3MgYnkgYXNzdW1pbmcgMnggZHByIGlmIHdlIGNhbid0IGRldGVjdCBpdFxuICAvLyBUaGlzIHdpbGwgaGFwcGVuIGluIHdvcmtlcnMgd2hlcmUgd2luZG93IGlzIGRlZmluZWQgYnV0IGRwciBpc24ndC5cbiAgY29uc3QgdGFyZ2V0ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyAoX3dpbmRvdyRkZXZpY2VQaXhlbFJhID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pICE9IG51bGwgPyBfd2luZG93JGRldmljZVBpeGVsUmEgOiAyIDogMTtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZHByKSA/IE1hdGgubWluKE1hdGgubWF4KGRwclswXSwgdGFyZ2V0KSwgZHByWzFdKSA6IGRwcjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGluc3RhbmNlIHJvb3Qgc3RhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Um9vdFN0YXRlKG9iaikge1xuICB2YXIgX3IzZjtcbiAgcmV0dXJuIChfcjNmID0gb2JqLl9fcjNmKSA9PSBudWxsID8gdm9pZCAwIDogX3IzZi5yb290LmdldFN0YXRlKCk7XG59XG4vLyBBIGNvbGxlY3Rpb24gb2YgY29tcGFyZSBmdW5jdGlvbnNcbmNvbnN0IGlzID0ge1xuICBvYmo6IGEgPT4gYSA9PT0gT2JqZWN0KGEpICYmICFpcy5hcnIoYSkgJiYgdHlwZW9mIGEgIT09ICdmdW5jdGlvbicsXG4gIGZ1bjogYSA9PiB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyxcbiAgc3RyOiBhID0+IHR5cGVvZiBhID09PSAnc3RyaW5nJyxcbiAgbnVtOiBhID0+IHR5cGVvZiBhID09PSAnbnVtYmVyJyxcbiAgYm9vOiBhID0+IHR5cGVvZiBhID09PSAnYm9vbGVhbicsXG4gIHVuZDogYSA9PiBhID09PSB2b2lkIDAsXG4gIG51bDogYSA9PiBhID09PSBudWxsLFxuICBhcnI6IGEgPT4gQXJyYXkuaXNBcnJheShhKSxcbiAgZXF1KGEsIGIsIHtcbiAgICBhcnJheXMgPSAnc2hhbGxvdycsXG4gICAgb2JqZWN0cyA9ICdyZWZlcmVuY2UnLFxuICAgIHN0cmljdCA9IHRydWVcbiAgfSA9IHt9KSB7XG4gICAgLy8gV3JvbmcgdHlwZSBvciBvbmUgb2YgdGhlIHR3byB1bmRlZmluZWQsIGRvZXNuJ3QgbWF0Y2hcbiAgICBpZiAodHlwZW9mIGEgIT09IHR5cGVvZiBiIHx8ICEhYSAhPT0gISFiKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gQXRvbWljLCBqdXN0IGNvbXBhcmUgYSBhZ2FpbnN0IGJcbiAgICBpZiAoaXMuc3RyKGEpIHx8IGlzLm51bShhKSB8fCBpcy5ib28oYSkpIHJldHVybiBhID09PSBiO1xuICAgIGNvbnN0IGlzT2JqID0gaXMub2JqKGEpO1xuICAgIGlmIChpc09iaiAmJiBvYmplY3RzID09PSAncmVmZXJlbmNlJykgcmV0dXJuIGEgPT09IGI7XG4gICAgY29uc3QgaXNBcnIgPSBpcy5hcnIoYSk7XG4gICAgaWYgKGlzQXJyICYmIGFycmF5cyA9PT0gJ3JlZmVyZW5jZScpIHJldHVybiBhID09PSBiO1xuICAgIC8vIEFycmF5IG9yIE9iamVjdCwgc2hhbGxvdyBjb21wYXJlIGZpcnN0IHRvIHNlZSBpZiBpdCdzIGEgbWF0Y2hcbiAgICBpZiAoKGlzQXJyIHx8IGlzT2JqKSAmJiBhID09PSBiKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBMYXN0IHJlc29ydCwgZ28gdGhyb3VnaCBrZXlzXG4gICAgbGV0IGk7XG4gICAgLy8gQ2hlY2sgaWYgYSBoYXMgYWxsIHRoZSBrZXlzIG9mIGJcbiAgICBmb3IgKGkgaW4gYSkgaWYgKCEoaSBpbiBiKSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIENoZWNrIGlmIHZhbHVlcyBiZXR3ZWVuIGtleXMgbWF0Y2hcbiAgICBpZiAoaXNPYmogJiYgYXJyYXlzID09PSAnc2hhbGxvdycgJiYgb2JqZWN0cyA9PT0gJ3NoYWxsb3cnKSB7XG4gICAgICBmb3IgKGkgaW4gc3RyaWN0ID8gYiA6IGEpIGlmICghaXMuZXF1KGFbaV0sIGJbaV0sIHtcbiAgICAgICAgc3RyaWN0LFxuICAgICAgICBvYmplY3RzOiAncmVmZXJlbmNlJ1xuICAgICAgfSkpIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpIGluIHN0cmljdCA/IGIgOiBhKSBpZiAoYVtpXSAhPT0gYltpXSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBJZiBpIGlzIHVuZGVmaW5lZFxuICAgIGlmIChpcy51bmQoaSkpIHtcbiAgICAgIC8vIElmIGJvdGggYXJyYXlzIGFyZSBlbXB0eSB3ZSBjb25zaWRlciB0aGVtIGVxdWFsXG4gICAgICBpZiAoaXNBcnIgJiYgYS5sZW5ndGggPT09IDAgJiYgYi5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuICAgICAgLy8gSWYgYm90aCBvYmplY3RzIGFyZSBlbXB0eSB3ZSBjb25zaWRlciB0aGVtIGVxdWFsXG4gICAgICBpZiAoaXNPYmogJiYgT2JqZWN0LmtleXMoYSkubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKGIpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAvLyBPdGhlcndpc2UgbWF0Y2ggdGhlbSBieSB2YWx1ZVxuICAgICAgaWYgKGEgIT09IGIpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8vIENvbGxlY3RzIG5vZGVzIGFuZCBtYXRlcmlhbHMgZnJvbSBhIFRIUkVFLk9iamVjdDNEXG5mdW5jdGlvbiBidWlsZEdyYXBoKG9iamVjdCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIG5vZGVzOiB7fSxcbiAgICBtYXRlcmlhbHM6IHt9LFxuICAgIG1lc2hlczoge31cbiAgfTtcbiAgaWYgKG9iamVjdCkge1xuICAgIG9iamVjdC50cmF2ZXJzZShvYmogPT4ge1xuICAgICAgaWYgKG9iai5uYW1lKSBkYXRhLm5vZGVzW29iai5uYW1lXSA9IG9iajtcbiAgICAgIGlmIChvYmoubWF0ZXJpYWwgJiYgIWRhdGEubWF0ZXJpYWxzW29iai5tYXRlcmlhbC5uYW1lXSkgZGF0YS5tYXRlcmlhbHNbb2JqLm1hdGVyaWFsLm5hbWVdID0gb2JqLm1hdGVyaWFsO1xuICAgICAgaWYgKG9iai5pc01lc2ggJiYgIWRhdGEubWVzaGVzW29iai5uYW1lXSkgZGF0YS5tZXNoZXNbb2JqLm5hbWVdID0gb2JqO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuLy8gRGlzcG9zZXMgYW4gb2JqZWN0IGFuZCBhbGwgaXRzIHByb3BlcnRpZXNcbmZ1bmN0aW9uIGRpc3Bvc2Uob2JqKSB7XG4gIGlmIChvYmoudHlwZSAhPT0gJ1NjZW5lJykgb2JqLmRpc3Bvc2UgPT0gbnVsbCA/IHZvaWQgMCA6IG9iai5kaXNwb3NlKCk7XG4gIGZvciAoY29uc3QgcCBpbiBvYmopIHtcbiAgICBjb25zdCBwcm9wID0gb2JqW3BdO1xuICAgIGlmICgocHJvcCA9PSBudWxsID8gdm9pZCAwIDogcHJvcC50eXBlKSAhPT0gJ1NjZW5lJykgcHJvcCA9PSBudWxsID8gdm9pZCAwIDogcHJvcC5kaXNwb3NlID09IG51bGwgPyB2b2lkIDAgOiBwcm9wLmRpc3Bvc2UoKTtcbiAgfVxufVxuY29uc3QgUkVBQ1RfSU5URVJOQUxfUFJPUFMgPSBbJ2NoaWxkcmVuJywgJ2tleScsICdyZWYnXTtcblxuLy8gR2V0cyBvbmx5IGluc3RhbmNlIHByb3BzIGZyb20gcmVjb25jaWxlciBmaWJlcnNcbmZ1bmN0aW9uIGdldEluc3RhbmNlUHJvcHMocXVldWUpIHtcbiAgY29uc3QgcHJvcHMgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gcXVldWUpIHtcbiAgICBpZiAoIVJFQUNUX0lOVEVSTkFMX1BST1BTLmluY2x1ZGVzKGtleSkpIHByb3BzW2tleV0gPSBxdWV1ZVtrZXldO1xuICB9XG4gIHJldHVybiBwcm9wcztcbn1cblxuLy8gRWFjaCBvYmplY3QgaW4gdGhlIHNjZW5lIGNhcnJpZXMgYSBzbWFsbCBMb2NhbFN0YXRlIGRlc2NyaXB0b3JcbmZ1bmN0aW9uIHByZXBhcmUodGFyZ2V0LCByb290LCB0eXBlLCBwcm9wcykge1xuICBjb25zdCBvYmplY3QgPSB0YXJnZXQ7XG5cbiAgLy8gQ3JlYXRlIGluc3RhbmNlIGRlc2NyaXB0b3JcbiAgbGV0IGluc3RhbmNlID0gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3QuX19yM2Y7XG4gIGlmICghaW5zdGFuY2UpIHtcbiAgICBpbnN0YW5jZSA9IHtcbiAgICAgIHJvb3QsXG4gICAgICB0eXBlLFxuICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgcHJvcHM6IGdldEluc3RhbmNlUHJvcHMocHJvcHMpLFxuICAgICAgb2JqZWN0LFxuICAgICAgZXZlbnRDb3VudDogMCxcbiAgICAgIGhhbmRsZXJzOiB7fSxcbiAgICAgIGlzSGlkZGVuOiBmYWxzZVxuICAgIH07XG4gICAgaWYgKG9iamVjdCkgb2JqZWN0Ll9fcjNmID0gaW5zdGFuY2U7XG4gIH1cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuZnVuY3Rpb24gcmVzb2x2ZShyb290LCBrZXkpIHtcbiAgbGV0IHRhcmdldCA9IHJvb3Rba2V5XTtcbiAgaWYgKCFrZXkuaW5jbHVkZXMoJy0nKSkgcmV0dXJuIHtcbiAgICByb290LFxuICAgIGtleSxcbiAgICB0YXJnZXRcbiAgfTtcblxuICAvLyBSZXNvbHZlIHBpZXJjZWQgdGFyZ2V0XG4gIHRhcmdldCA9IHJvb3Q7XG4gIGZvciAoY29uc3QgcGFydCBvZiBrZXkuc3BsaXQoJy0nKSkge1xuICAgIHZhciBfdGFyZ2V0O1xuICAgIGtleSA9IHBhcnQ7XG4gICAgcm9vdCA9IHRhcmdldDtcbiAgICB0YXJnZXQgPSAoX3RhcmdldCA9IHRhcmdldCkgPT0gbnVsbCA/IHZvaWQgMCA6IF90YXJnZXRba2V5XTtcbiAgfVxuXG4gIC8vIFRPRE86IGNoYW5nZSBrZXkgdG8gJ2Zvby1iYXInIGlmIHRhcmdldCBpcyB1bmRlZmluZWQ/XG5cbiAgcmV0dXJuIHtcbiAgICByb290LFxuICAgIGtleSxcbiAgICB0YXJnZXRcbiAgfTtcbn1cblxuLy8gQ2hlY2tzIGlmIGEgZGFzaC1jYXNlZCBzdHJpbmcgZW5kcyB3aXRoIGFuIGludGVnZXJcbmNvbnN0IElOREVYX1JFR0VYID0gLy1cXGQrJC87XG5mdW5jdGlvbiBhdHRhY2gocGFyZW50LCBjaGlsZCkge1xuICBpZiAoaXMuc3RyKGNoaWxkLnByb3BzLmF0dGFjaCkpIHtcbiAgICAvLyBJZiBhdHRhY2hpbmcgaW50byBhbiBhcnJheSAoZm9vLTApLCBjcmVhdGUgb25lXG4gICAgaWYgKElOREVYX1JFR0VYLnRlc3QoY2hpbGQucHJvcHMuYXR0YWNoKSkge1xuICAgICAgY29uc3QgaW5kZXggPSBjaGlsZC5wcm9wcy5hdHRhY2gucmVwbGFjZShJTkRFWF9SRUdFWCwgJycpO1xuICAgICAgY29uc3Qge1xuICAgICAgICByb290LFxuICAgICAgICBrZXlcbiAgICAgIH0gPSByZXNvbHZlKHBhcmVudC5vYmplY3QsIGluZGV4KTtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShyb290W2tleV0pKSByb290W2tleV0gPSBbXTtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgcm9vdCxcbiAgICAgIGtleVxuICAgIH0gPSByZXNvbHZlKHBhcmVudC5vYmplY3QsIGNoaWxkLnByb3BzLmF0dGFjaCk7XG4gICAgY2hpbGQucHJldmlvdXNBdHRhY2ggPSByb290W2tleV07XG4gICAgcm9vdFtrZXldID0gY2hpbGQub2JqZWN0O1xuICB9IGVsc2UgaWYgKGlzLmZ1bihjaGlsZC5wcm9wcy5hdHRhY2gpKSB7XG4gICAgY2hpbGQucHJldmlvdXNBdHRhY2ggPSBjaGlsZC5wcm9wcy5hdHRhY2gocGFyZW50Lm9iamVjdCwgY2hpbGQub2JqZWN0KTtcbiAgfVxufVxuZnVuY3Rpb24gZGV0YWNoKHBhcmVudCwgY2hpbGQpIHtcbiAgaWYgKGlzLnN0cihjaGlsZC5wcm9wcy5hdHRhY2gpKSB7XG4gICAgY29uc3Qge1xuICAgICAgcm9vdCxcbiAgICAgIGtleVxuICAgIH0gPSByZXNvbHZlKHBhcmVudC5vYmplY3QsIGNoaWxkLnByb3BzLmF0dGFjaCk7XG4gICAgY29uc3QgcHJldmlvdXMgPSBjaGlsZC5wcmV2aW91c0F0dGFjaDtcbiAgICAvLyBXaGVuIHRoZSBwcmV2aW91cyB2YWx1ZSB3YXMgdW5kZWZpbmVkLCBpdCBtZWFucyB0aGUgdmFsdWUgd2FzIG5ldmVyIHNldCB0byBiZWdpbiB3aXRoXG4gICAgaWYgKHByZXZpb3VzID09PSB1bmRlZmluZWQpIGRlbGV0ZSByb290W2tleV07XG4gICAgLy8gT3RoZXJ3aXNlIHNldCB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICBlbHNlIHJvb3Rba2V5XSA9IHByZXZpb3VzO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkLnByZXZpb3VzQXR0YWNoID09IG51bGwgPyB2b2lkIDAgOiBjaGlsZC5wcmV2aW91c0F0dGFjaChwYXJlbnQub2JqZWN0LCBjaGlsZC5vYmplY3QpO1xuICB9XG4gIGRlbGV0ZSBjaGlsZC5wcmV2aW91c0F0dGFjaDtcbn1cbmNvbnN0IFJFU0VSVkVEX1BST1BTID0gWy4uLlJFQUNUX0lOVEVSTkFMX1BST1BTLFxuLy8gSW5zdGFuY2UgcHJvcHNcbidhcmdzJywgJ2Rpc3Bvc2UnLCAnYXR0YWNoJywgJ29iamVjdCcsICdvblVwZGF0ZScsXG4vLyBCZWhhdmlvciBmbGFnc1xuJ2Rpc3Bvc2UnXTtcbmNvbnN0IE1FTU9JWkVEX1BST1RPVFlQRVMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZW1vaXplZFByb3RvdHlwZShyb290KSB7XG4gIGxldCBjdG9yID0gTUVNT0laRURfUFJPVE9UWVBFUy5nZXQocm9vdC5jb25zdHJ1Y3Rvcik7XG4gIHRyeSB7XG4gICAgaWYgKCFjdG9yKSB7XG4gICAgICBjdG9yID0gbmV3IHJvb3QuY29uc3RydWN0b3IoKTtcbiAgICAgIE1FTU9JWkVEX1BST1RPVFlQRVMuc2V0KHJvb3QuY29uc3RydWN0b3IsIGN0b3IpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIC4uLlxuICB9XG4gIHJldHVybiBjdG9yO1xufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIHByZXBhcmVzIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgYXBwbGllZCB0byB0aGUgaW5zdGFuY2VcbmZ1bmN0aW9uIGRpZmZQcm9wcyhpbnN0YW5jZSwgbmV3UHJvcHMpIHtcbiAgY29uc3QgY2hhbmdlZFByb3BzID0ge307XG5cbiAgLy8gU29ydCB0aHJvdWdoIHByb3BzXG4gIGZvciAoY29uc3QgcHJvcCBpbiBuZXdQcm9wcykge1xuICAgIC8vIFNraXAgcmVzZXJ2ZWQga2V5c1xuICAgIGlmIChSRVNFUlZFRF9QUk9QUy5pbmNsdWRlcyhwcm9wKSkgY29udGludWU7XG4gICAgLy8gU2tpcCBpZiBwcm9wcyBtYXRjaFxuICAgIGlmIChpcy5lcXUobmV3UHJvcHNbcHJvcF0sIGluc3RhbmNlLnByb3BzW3Byb3BdKSkgY29udGludWU7XG5cbiAgICAvLyBQcm9wcyBjaGFuZ2VkLCBhZGQgdGhlbVxuICAgIGNoYW5nZWRQcm9wc1twcm9wXSA9IG5ld1Byb3BzW3Byb3BdO1xuXG4gICAgLy8gUmVzZXQgcGllcmNlZCBwcm9wc1xuICAgIGZvciAoY29uc3Qgb3RoZXIgaW4gbmV3UHJvcHMpIHtcbiAgICAgIGlmIChvdGhlci5zdGFydHNXaXRoKGAke3Byb3B9LWApKSBjaGFuZ2VkUHJvcHNbb3RoZXJdID0gbmV3UHJvcHNbb3RoZXJdO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlc2V0IHJlbW92ZWQgcHJvcHMgZm9yIEhNUlxuICBmb3IgKGNvbnN0IHByb3AgaW4gaW5zdGFuY2UucHJvcHMpIHtcbiAgICBpZiAoUkVTRVJWRURfUFJPUFMuaW5jbHVkZXMocHJvcCkgfHwgbmV3UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHtcbiAgICAgIHJvb3QsXG4gICAgICBrZXlcbiAgICB9ID0gcmVzb2x2ZShpbnN0YW5jZS5vYmplY3QsIHByb3ApO1xuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMjEyMDlcbiAgICAvLyBITVIvZmFzdC1yZWZyZXNoIHJlbGllcyBvbiB0aGUgYWJpbGl0eSB0byBjYW5jZWwgb3V0IHByb3BzLCBidXQgdGhyZWVqc1xuICAgIC8vIGhhcyBubyBtZWFucyB0byBkbyB0aGlzLiBIZW5jZSB3ZSBjdXJhdGUgYSBzbWFsbCBjb2xsZWN0aW9uIG9mIHZhbHVlLWNsYXNzZXNcbiAgICAvLyB3aXRoIHRoZWlyIHJlc3BlY3RpdmUgY29uc3RydWN0b3Ivc2V0IGFyZ3VtZW50c1xuICAgIC8vIEZvciByZW1vdmVkIHByb3BzLCB0cnkgdG8gc2V0IGRlZmF1bHQgdmFsdWVzLCBpZiBwb3NzaWJsZVxuICAgIGlmIChyb290LmNvbnN0cnVjdG9yICYmIHJvb3QuY29uc3RydWN0b3IubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBjcmVhdGUgYSBibGFuayBzbGF0ZSBvZiB0aGUgaW5zdGFuY2UgYW5kIGNvcHkgdGhlIHBhcnRpY3VsYXIgcGFyYW1ldGVyLlxuICAgICAgY29uc3QgY3RvciA9IGdldE1lbW9pemVkUHJvdG90eXBlKHJvb3QpO1xuICAgICAgaWYgKCFpcy51bmQoY3RvcikpIGNoYW5nZWRQcm9wc1trZXldID0gY3RvcltrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbnN0YW5jZSBkb2VzIG5vdCBoYXZlIGNvbnN0cnVjdG9yLCBqdXN0IHNldCBpdCB0byAwXG4gICAgICBjaGFuZ2VkUHJvcHNba2V5XSA9IDA7XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGFuZ2VkUHJvcHM7XG59XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvcHVsbC8yNzA0MlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9wdWxsLzIyNzQ4XG5jb25zdCBjb2xvck1hcHMgPSBbJ21hcCcsICdlbWlzc2l2ZU1hcCcsICdzaGVlbkNvbG9yTWFwJywgJ3NwZWN1bGFyQ29sb3JNYXAnLCAnZW52TWFwJ107XG5jb25zdCBFVkVOVF9SRUdFWCA9IC9eb24oUG9pbnRlcnxDbGlja3xEb3VibGVDbGlja3xDb250ZXh0TWVudXxXaGVlbCkvO1xuLy8gVGhpcyBmdW5jdGlvbiBhcHBsaWVzIGEgc2V0IG9mIGNoYW5nZXMgdG8gdGhlIGluc3RhbmNlXG5mdW5jdGlvbiBhcHBseVByb3BzKG9iamVjdCwgcHJvcHMpIHtcbiAgdmFyIF9pbnN0YW5jZSRvYmplY3Q7XG4gIGNvbnN0IGluc3RhbmNlID0gb2JqZWN0Ll9fcjNmO1xuICBjb25zdCByb290U3RhdGUgPSBpbnN0YW5jZSAmJiBmaW5kSW5pdGlhbFJvb3QoaW5zdGFuY2UpLmdldFN0YXRlKCk7XG4gIGNvbnN0IHByZXZIYW5kbGVycyA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5ldmVudENvdW50O1xuICBmb3IgKGNvbnN0IHByb3AgaW4gcHJvcHMpIHtcbiAgICBsZXQgdmFsdWUgPSBwcm9wc1twcm9wXTtcblxuICAgIC8vIERvbid0IG11dGF0ZSByZXNlcnZlZCBrZXlzXG4gICAgaWYgKFJFU0VSVkVEX1BST1BTLmluY2x1ZGVzKHByb3ApKSBjb250aW51ZTtcblxuICAgIC8vIERlYWwgd2l0aCBwb2ludGVyIGV2ZW50cywgaW5jbHVkaW5nIHJlbW92aW5nIHRoZW0gaWYgdW5kZWZpbmVkXG4gICAgaWYgKGluc3RhbmNlICYmIEVWRU5UX1JFR0VYLnRlc3QocHJvcCkpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIGluc3RhbmNlLmhhbmRsZXJzW3Byb3BdID0gdmFsdWU7ZWxzZSBkZWxldGUgaW5zdGFuY2UuaGFuZGxlcnNbcHJvcF07XG4gICAgICBpbnN0YW5jZS5ldmVudENvdW50ID0gT2JqZWN0LmtleXMoaW5zdGFuY2UuaGFuZGxlcnMpLmxlbmd0aDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSBzZXR0aW5nIHVuZGVmaW5lZCBwcm9wc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvcmVhY3QtdGhyZWUtZmliZXIvaXNzdWVzLzI3NFxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICBsZXQge1xuICAgICAgcm9vdCxcbiAgICAgIGtleSxcbiAgICAgIHRhcmdldFxuICAgIH0gPSByZXNvbHZlKG9iamVjdCwgcHJvcCk7XG5cbiAgICAvLyBMYXllcnMgbXVzdCBiZSB3cml0dGVuIHRvIHRoZSBtYXNrIHByb3BlcnR5XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFRIUkVFLkxheWVycyAmJiB2YWx1ZSBpbnN0YW5jZW9mIFRIUkVFLkxheWVycykge1xuICAgICAgdGFyZ2V0Lm1hc2sgPSB2YWx1ZS5tYXNrO1xuICAgIH1cbiAgICAvLyBTZXQgY29sb3JzIGlmIHZhbGlkIGNvbG9yIHJlcHJlc2VudGF0aW9uIGZvciBhdXRvbWF0aWMgY29udmVyc2lvbiAoY29weSlcbiAgICBlbHNlIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBUSFJFRS5Db2xvciAmJiBpc0NvbG9yUmVwcmVzZW50YXRpb24odmFsdWUpKSB7XG4gICAgICB0YXJnZXQuc2V0KHZhbHVlKTtcbiAgICB9XG4gICAgLy8gQ29weSBpZiBwcm9wZXJ0aWVzIG1hdGNoIHNpZ25hdHVyZXMgYW5kIGltcGxlbWVudCBtYXRoIGludGVyZmFjZSAobGlrZWx5IHJlYWQtb25seSlcbiAgICBlbHNlIGlmICh0YXJnZXQgIT09IG51bGwgJiYgdHlwZW9mIHRhcmdldCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldC5zZXQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHRhcmdldC5jb3B5ID09PSAnZnVuY3Rpb24nICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUuY29uc3RydWN0b3IgJiYgdGFyZ2V0LmNvbnN0cnVjdG9yID09PSB2YWx1ZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgdGFyZ2V0LmNvcHkodmFsdWUpO1xuICAgIH1cbiAgICAvLyBTZXQgYXJyYXkgdHlwZXNcbiAgICBlbHNlIGlmICh0YXJnZXQgIT09IG51bGwgJiYgdHlwZW9mIHRhcmdldCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldC5zZXQgPT09ICdmdW5jdGlvbicgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGlmICh0eXBlb2YgdGFyZ2V0LmZyb21BcnJheSA9PT0gJ2Z1bmN0aW9uJykgdGFyZ2V0LmZyb21BcnJheSh2YWx1ZSk7ZWxzZSB0YXJnZXQuc2V0KC4uLnZhbHVlKTtcbiAgICB9XG4gICAgLy8gU2V0IGxpdGVyYWwgdHlwZXNcbiAgICBlbHNlIGlmICh0YXJnZXQgIT09IG51bGwgJiYgdHlwZW9mIHRhcmdldCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldC5zZXQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgLy8gQWxsb3cgc2V0dGluZyBhcnJheSBzY2FsYXJzXG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5zZXRTY2FsYXIgPT09ICdmdW5jdGlvbicpIHRhcmdldC5zZXRTY2FsYXIodmFsdWUpO1xuICAgICAgLy8gT3RoZXJ3aXNlIGp1c3Qgc2V0IHNpbmdsZSB2YWx1ZVxuICAgICAgZWxzZSB0YXJnZXQuc2V0KHZhbHVlKTtcbiAgICB9XG4gICAgLy8gRWxzZSwganVzdCBvdmVyd3JpdGUgdGhlIHZhbHVlXG4gICAgZWxzZSB7XG4gICAgICB2YXIgX3Jvb3Qka2V5O1xuICAgICAgcm9vdFtrZXldID0gdmFsdWU7XG5cbiAgICAgIC8vIEF1dG8tY29udmVydCBzUkdCIHRleHR1cmUgcGFyYW1ldGVycyBmb3IgYnVpbHQtaW4gbWF0ZXJpYWxzXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcG1uZHJzL3JlYWN0LXRocmVlLWZpYmVyL2lzc3Vlcy8zNDRcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvcHVsbC8yNTg1N1xuICAgICAgaWYgKHJvb3RTdGF0ZSAmJiAhcm9vdFN0YXRlLmxpbmVhciAmJiBjb2xvck1hcHMuaW5jbHVkZXMoa2V5KSAmJiAoX3Jvb3Qka2V5ID0gcm9vdFtrZXldKSAhPSBudWxsICYmIF9yb290JGtleS5pc1RleHR1cmUgJiZcbiAgICAgIC8vIHNSR0IgdGV4dHVyZXMgbXVzdCBiZSBSR0JBOCBzaW5jZSByMTM3IGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvcHVsbC8yMzEyOVxuICAgICAgcm9vdFtrZXldLmZvcm1hdCA9PT0gVEhSRUUuUkdCQUZvcm1hdCAmJiByb290W2tleV0udHlwZSA9PT0gVEhSRUUuVW5zaWduZWRCeXRlVHlwZSkge1xuICAgICAgICAvLyBOT1RFOiB0aGlzIGNhbm5vdCBiZSBzZXQgZnJvbSB0aGUgcmVuZGVyZXIgKGUuZy4gc1JHQiBzb3VyY2UgdGV4dHVyZXMgcmVuZGVyZWQgdG8gUDMpXG4gICAgICAgIHJvb3Rba2V5XS5jb2xvclNwYWNlID0gVEhSRUUuU1JHQkNvbG9yU3BhY2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcbiAgaWYgKGluc3RhbmNlICE9IG51bGwgJiYgaW5zdGFuY2UucGFyZW50ICYmIHJvb3RTdGF0ZSAhPSBudWxsICYmIHJvb3RTdGF0ZS5pbnRlcm5hbCAmJiAoX2luc3RhbmNlJG9iamVjdCA9IGluc3RhbmNlLm9iamVjdCkgIT0gbnVsbCAmJiBfaW5zdGFuY2Ukb2JqZWN0LmlzT2JqZWN0M0QgJiYgcHJldkhhbmRsZXJzICE9PSBpbnN0YW5jZS5ldmVudENvdW50KSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gaW5zdGFuY2Uub2JqZWN0O1xuICAgIC8vIFByZS1lbXB0aXZlbHkgcmVtb3ZlIHRoZSBpbnN0YW5jZSBmcm9tIHRoZSBpbnRlcmFjdGlvbiBtYW5hZ2VyXG4gICAgY29uc3QgaW5kZXggPSByb290U3RhdGUuaW50ZXJuYWwuaW50ZXJhY3Rpb24uaW5kZXhPZihvYmplY3QpO1xuICAgIGlmIChpbmRleCA+IC0xKSByb290U3RhdGUuaW50ZXJuYWwuaW50ZXJhY3Rpb24uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAvLyBBZGQgdGhlIGluc3RhbmNlIHRvIHRoZSBpbnRlcmFjdGlvbiBtYW5hZ2VyIG9ubHkgd2hlbiBpdCBoYXMgaGFuZGxlcnNcbiAgICBpZiAoaW5zdGFuY2UuZXZlbnRDb3VudCAmJiBvYmplY3QucmF5Y2FzdCAhPT0gbnVsbCkge1xuICAgICAgcm9vdFN0YXRlLmludGVybmFsLmludGVyYWN0aW9uLnB1c2gob2JqZWN0KTtcbiAgICB9XG4gIH1cblxuICAvLyBBdXRvLWF0dGFjaCBnZW9tZXRyaWVzIGFuZCBtYXRlcmlhbHNcbiAgaWYgKGluc3RhbmNlICYmIGluc3RhbmNlLnByb3BzLmF0dGFjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGluc3RhbmNlLm9iamVjdC5pc0J1ZmZlckdlb21ldHJ5KSBpbnN0YW5jZS5wcm9wcy5hdHRhY2ggPSAnZ2VvbWV0cnknO2Vsc2UgaWYgKGluc3RhbmNlLm9iamVjdC5pc01hdGVyaWFsKSBpbnN0YW5jZS5wcm9wcy5hdHRhY2ggPSAnbWF0ZXJpYWwnO1xuICB9XG5cbiAgLy8gSW5zdGFuY2Ugd2FzIHVwZGF0ZWQsIHJlcXVlc3QgYSBmcmFtZVxuICBpZiAoaW5zdGFuY2UpIGludmFsaWRhdGVJbnN0YW5jZShpbnN0YW5jZSk7XG4gIHJldHVybiBvYmplY3Q7XG59XG5mdW5jdGlvbiBpbnZhbGlkYXRlSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgdmFyIF9pbnN0YW5jZSRyb290O1xuICBpZiAoIWluc3RhbmNlLnBhcmVudCkgcmV0dXJuO1xuICBpbnN0YW5jZS5wcm9wcy5vblVwZGF0ZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UucHJvcHMub25VcGRhdGUoaW5zdGFuY2Uub2JqZWN0KTtcbiAgY29uc3Qgc3RhdGUgPSAoX2luc3RhbmNlJHJvb3QgPSBpbnN0YW5jZS5yb290KSA9PSBudWxsID8gdm9pZCAwIDogX2luc3RhbmNlJHJvb3QuZ2V0U3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IF9pbnN0YW5jZSRyb290LmdldFN0YXRlKCk7XG4gIGlmIChzdGF0ZSAmJiBzdGF0ZS5pbnRlcm5hbC5mcmFtZXMgPT09IDApIHN0YXRlLmludmFsaWRhdGUoKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUNhbWVyYShjYW1lcmEsIHNpemUpIHtcbiAgLy8gRG8gbm90IG1lc3Mgd2l0aCB0aGUgY2FtZXJhIGlmIGl0IGJlbG9uZ3MgdG8gdGhlIHVzZXJcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BtbmRycy9yZWFjdC10aHJlZS1maWJlci9pc3N1ZXMvOTJcbiAgaWYgKGNhbWVyYS5tYW51YWwpIHJldHVybjtcbiAgaWYgKGlzT3J0aG9ncmFwaGljQ2FtZXJhKGNhbWVyYSkpIHtcbiAgICBjYW1lcmEubGVmdCA9IHNpemUud2lkdGggLyAtMjtcbiAgICBjYW1lcmEucmlnaHQgPSBzaXplLndpZHRoIC8gMjtcbiAgICBjYW1lcmEudG9wID0gc2l6ZS5oZWlnaHQgLyAyO1xuICAgIGNhbWVyYS5ib3R0b20gPSBzaXplLmhlaWdodCAvIC0yO1xuICB9IGVsc2Uge1xuICAgIGNhbWVyYS5hc3BlY3QgPSBzaXplLndpZHRoIC8gc2l6ZS5oZWlnaHQ7XG4gIH1cbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbn1cbmNvbnN0IGlzT2JqZWN0M0QgPSBvYmplY3QgPT4gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3QuaXNPYmplY3QzRDtcblxuZnVuY3Rpb24gbWFrZUlkKGV2ZW50KSB7XG4gIHJldHVybiAoZXZlbnQuZXZlbnRPYmplY3QgfHwgZXZlbnQub2JqZWN0KS51dWlkICsgJy8nICsgZXZlbnQuaW5kZXggKyBldmVudC5pbnN0YW5jZUlkO1xufVxuXG4vKipcbiAqIFJlbGVhc2UgcG9pbnRlciBjYXB0dXJlcy5cbiAqIFRoaXMgaXMgY2FsbGVkIGJ5IHJlbGVhc2VQb2ludGVyQ2FwdHVyZSBpbiB0aGUgQVBJLCBhbmQgd2hlbiBhbiBvYmplY3QgaXMgcmVtb3ZlZC5cbiAqL1xuZnVuY3Rpb24gcmVsZWFzZUludGVybmFsUG9pbnRlckNhcHR1cmUoY2FwdHVyZWRNYXAsIG9iaiwgY2FwdHVyZXMsIHBvaW50ZXJJZCkge1xuICBjb25zdCBjYXB0dXJlRGF0YSA9IGNhcHR1cmVzLmdldChvYmopO1xuICBpZiAoY2FwdHVyZURhdGEpIHtcbiAgICBjYXB0dXJlcy5kZWxldGUob2JqKTtcbiAgICAvLyBJZiB0aGlzIHdhcyB0aGUgbGFzdCBjYXB0dXJpbmcgb2JqZWN0IGZvciB0aGlzIHBvaW50ZXJcbiAgICBpZiAoY2FwdHVyZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgY2FwdHVyZWRNYXAuZGVsZXRlKHBvaW50ZXJJZCk7XG4gICAgICBjYXB0dXJlRGF0YS50YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiByZW1vdmVJbnRlcmFjdGl2aXR5KHN0b3JlLCBvYmplY3QpIHtcbiAgY29uc3Qge1xuICAgIGludGVybmFsXG4gIH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAvLyBSZW1vdmVzIGV2ZXJ5IHRyYWNlIG9mIGFuIG9iamVjdCBmcm9tIHRoZSBkYXRhIHN0b3JlXG4gIGludGVybmFsLmludGVyYWN0aW9uID0gaW50ZXJuYWwuaW50ZXJhY3Rpb24uZmlsdGVyKG8gPT4gbyAhPT0gb2JqZWN0KTtcbiAgaW50ZXJuYWwuaW5pdGlhbEhpdHMgPSBpbnRlcm5hbC5pbml0aWFsSGl0cy5maWx0ZXIobyA9PiBvICE9PSBvYmplY3QpO1xuICBpbnRlcm5hbC5ob3ZlcmVkLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICBpZiAodmFsdWUuZXZlbnRPYmplY3QgPT09IG9iamVjdCB8fCB2YWx1ZS5vYmplY3QgPT09IG9iamVjdCkge1xuICAgICAgLy8gQ2xlYXIgb3V0IGludGVyc2VjdHMsIHRoZXkgYXJlIG91dGRhdGVkIGJ5IG5vd1xuICAgICAgaW50ZXJuYWwuaG92ZXJlZC5kZWxldGUoa2V5KTtcbiAgICB9XG4gIH0pO1xuICBpbnRlcm5hbC5jYXB0dXJlZE1hcC5mb3JFYWNoKChjYXB0dXJlcywgcG9pbnRlcklkKSA9PiB7XG4gICAgcmVsZWFzZUludGVybmFsUG9pbnRlckNhcHR1cmUoaW50ZXJuYWwuY2FwdHVyZWRNYXAsIG9iamVjdCwgY2FwdHVyZXMsIHBvaW50ZXJJZCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlRXZlbnRzKHN0b3JlKSB7XG4gIC8qKiBDYWxjdWxhdGVzIGRlbHRhICovXG4gIGZ1bmN0aW9uIGNhbGN1bGF0ZURpc3RhbmNlKGV2ZW50KSB7XG4gICAgY29uc3Qge1xuICAgICAgaW50ZXJuYWxcbiAgICB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBkeCA9IGV2ZW50Lm9mZnNldFggLSBpbnRlcm5hbC5pbml0aWFsQ2xpY2tbMF07XG4gICAgY29uc3QgZHkgPSBldmVudC5vZmZzZXRZIC0gaW50ZXJuYWwuaW5pdGlhbENsaWNrWzFdO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBhbiBpbnN0YW5jZSBoYXMgYSB2YWxpZCBwb2ludGVyLWV2ZW50IHJlZ2lzdGVyZWQsIHRoaXMgZXhjbHVkZXMgc2Nyb2xsLCBjbGlja3MgZXRjICovXG4gIGZ1bmN0aW9uIGZpbHRlclBvaW50ZXJFdmVudHMob2JqZWN0cykge1xuICAgIHJldHVybiBvYmplY3RzLmZpbHRlcihvYmogPT4gWydNb3ZlJywgJ092ZXInLCAnRW50ZXInLCAnT3V0JywgJ0xlYXZlJ10uc29tZShuYW1lID0+IHtcbiAgICAgIHZhciBfcjNmO1xuICAgICAgcmV0dXJuIChfcjNmID0gb2JqLl9fcjNmKSA9PSBudWxsID8gdm9pZCAwIDogX3IzZi5oYW5kbGVyc1snb25Qb2ludGVyJyArIG5hbWVdO1xuICAgIH0pKTtcbiAgfVxuICBmdW5jdGlvbiBpbnRlcnNlY3QoZXZlbnQsIGZpbHRlcikge1xuICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBkdXBsaWNhdGVzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGludGVyc2VjdGlvbnMgPSBbXTtcbiAgICAvLyBBbGxvdyBjYWxsZXJzIHRvIGVsaW1pbmF0ZSBldmVudCBvYmplY3RzXG4gICAgY29uc3QgZXZlbnRzT2JqZWN0cyA9IGZpbHRlciA/IGZpbHRlcihzdGF0ZS5pbnRlcm5hbC5pbnRlcmFjdGlvbikgOiBzdGF0ZS5pbnRlcm5hbC5pbnRlcmFjdGlvbjtcbiAgICAvLyBSZXNldCBhbGwgcmF5Y2FzdGVyIGNhbWVyYXMgdG8gdW5kZWZpbmVkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHNPYmplY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IGdldFJvb3RTdGF0ZShldmVudHNPYmplY3RzW2ldKTtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBzdGF0ZS5yYXljYXN0ZXIuY2FtZXJhID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXN0YXRlLnByZXZpb3VzUm9vdCkge1xuICAgICAgLy8gTWFrZSBzdXJlIHJvb3QtbGV2ZWwgcG9pbnRlciBhbmQgcmF5IGFyZSBzZXQgdXBcbiAgICAgIHN0YXRlLmV2ZW50cy5jb21wdXRlID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS5ldmVudHMuY29tcHV0ZShldmVudCwgc3RhdGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVSYXljYXN0KG9iaikge1xuICAgICAgY29uc3Qgc3RhdGUgPSBnZXRSb290U3RhdGUob2JqKTtcbiAgICAgIC8vIFNraXAgZXZlbnQgaGFuZGxpbmcgd2hlbiBub0V2ZW50cyBpcyBzZXQsIG9yIHdoZW4gdGhlIHJheWNhc3RlcnMgY2FtZXJhIGlzIG51bGxcbiAgICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLmV2ZW50cy5lbmFibGVkIHx8IHN0YXRlLnJheWNhc3Rlci5jYW1lcmEgPT09IG51bGwpIHJldHVybiBbXTtcblxuICAgICAgLy8gV2hlbiB0aGUgY2FtZXJhIGlzIHVuZGVmaW5lZCB3ZSBoYXZlIHRvIGNhbGwgdGhlIGV2ZW50IGxheWVycyB1cGRhdGUgZnVuY3Rpb25cbiAgICAgIGlmIChzdGF0ZS5yYXljYXN0ZXIuY2FtZXJhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIF9zdGF0ZSRwcmV2aW91c1Jvb3Q7XG4gICAgICAgIHN0YXRlLmV2ZW50cy5jb21wdXRlID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS5ldmVudHMuY29tcHV0ZShldmVudCwgc3RhdGUsIChfc3RhdGUkcHJldmlvdXNSb290ID0gc3RhdGUucHJldmlvdXNSb290KSA9PSBudWxsID8gdm9pZCAwIDogX3N0YXRlJHByZXZpb3VzUm9vdC5nZXRTdGF0ZSgpKTtcbiAgICAgICAgLy8gSWYgdGhlIGNhbWVyYSBpcyBzdGlsbCB1bmRlZmluZWQgd2UgaGF2ZSB0byBza2lwIHRoaXMgbGF5ZXIgZW50aXJlbHlcbiAgICAgICAgaWYgKHN0YXRlLnJheWNhc3Rlci5jYW1lcmEgPT09IHVuZGVmaW5lZCkgc3RhdGUucmF5Y2FzdGVyLmNhbWVyYSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIEludGVyc2VjdCBvYmplY3QgYnkgb2JqZWN0XG4gICAgICByZXR1cm4gc3RhdGUucmF5Y2FzdGVyLmNhbWVyYSA/IHN0YXRlLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3Qob2JqLCB0cnVlKSA6IFtdO1xuICAgIH1cblxuICAgIC8vIENvbGxlY3QgZXZlbnRzXG4gICAgbGV0IGhpdHMgPSBldmVudHNPYmplY3RzXG4gICAgLy8gSW50ZXJzZWN0IG9iamVjdHNcbiAgICAuZmxhdE1hcChoYW5kbGVSYXljYXN0KVxuICAgIC8vIFNvcnQgYnkgZXZlbnQgcHJpb3JpdHkgYW5kIGRpc3RhbmNlXG4gICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGFTdGF0ZSA9IGdldFJvb3RTdGF0ZShhLm9iamVjdCk7XG4gICAgICBjb25zdCBiU3RhdGUgPSBnZXRSb290U3RhdGUoYi5vYmplY3QpO1xuICAgICAgaWYgKCFhU3RhdGUgfHwgIWJTdGF0ZSkgcmV0dXJuIGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlO1xuICAgICAgcmV0dXJuIGJTdGF0ZS5ldmVudHMucHJpb3JpdHkgLSBhU3RhdGUuZXZlbnRzLnByaW9yaXR5IHx8IGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlO1xuICAgIH0pXG4gICAgLy8gRmlsdGVyIG91dCBkdXBsaWNhdGVzXG4gICAgLmZpbHRlcihpdGVtID0+IHtcbiAgICAgIGNvbnN0IGlkID0gbWFrZUlkKGl0ZW0pO1xuICAgICAgaWYgKGR1cGxpY2F0ZXMuaGFzKGlkKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgZHVwbGljYXRlcy5hZGQoaWQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8xNjAzMVxuICAgIC8vIEFsbG93IGN1c3RvbSB1c2VybGFuZCBpbnRlcnNlY3Qgc29ydCBvcmRlciwgdGhpcyBsaWtlbHkgb25seSBtYWtlcyBzZW5zZSBvbiB0aGUgcm9vdCBmaWx0ZXJcbiAgICBpZiAoc3RhdGUuZXZlbnRzLmZpbHRlcikgaGl0cyA9IHN0YXRlLmV2ZW50cy5maWx0ZXIoaGl0cywgc3RhdGUpO1xuXG4gICAgLy8gQnViYmxlIHVwIHRoZSBldmVudHMsIGZpbmQgdGhlIGV2ZW50IHNvdXJjZSAoZXZlbnRPYmplY3QpXG4gICAgZm9yIChjb25zdCBoaXQgb2YgaGl0cykge1xuICAgICAgbGV0IGV2ZW50T2JqZWN0ID0gaGl0Lm9iamVjdDtcbiAgICAgIC8vIEJ1YmJsZSBldmVudCB1cFxuICAgICAgd2hpbGUgKGV2ZW50T2JqZWN0KSB7XG4gICAgICAgIHZhciBfcjNmMjtcbiAgICAgICAgaWYgKChfcjNmMiA9IGV2ZW50T2JqZWN0Ll9fcjNmKSAhPSBudWxsICYmIF9yM2YyLmV2ZW50Q291bnQpIGludGVyc2VjdGlvbnMucHVzaCh7XG4gICAgICAgICAgLi4uaGl0LFxuICAgICAgICAgIGV2ZW50T2JqZWN0XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudE9iamVjdCA9IGV2ZW50T2JqZWN0LnBhcmVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgaW50ZXJhY3Rpb24gaXMgY2FwdHVyZWQsIG1ha2UgYWxsIGNhcHR1cmluZyB0YXJnZXRzIHBhcnQgb2YgdGhlIGludGVyc2VjdC5cbiAgICBpZiAoJ3BvaW50ZXJJZCcgaW4gZXZlbnQgJiYgc3RhdGUuaW50ZXJuYWwuY2FwdHVyZWRNYXAuaGFzKGV2ZW50LnBvaW50ZXJJZCkpIHtcbiAgICAgIGZvciAobGV0IGNhcHR1cmVEYXRhIG9mIHN0YXRlLmludGVybmFsLmNhcHR1cmVkTWFwLmdldChldmVudC5wb2ludGVySWQpLnZhbHVlcygpKSB7XG4gICAgICAgIGlmICghZHVwbGljYXRlcy5oYXMobWFrZUlkKGNhcHR1cmVEYXRhLmludGVyc2VjdGlvbikpKSBpbnRlcnNlY3Rpb25zLnB1c2goY2FwdHVyZURhdGEuaW50ZXJzZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGludGVyc2VjdGlvbnM7XG4gIH1cblxuICAvKiogIEhhbmRsZXMgaW50ZXJzZWN0aW9ucyBieSBmb3J3YXJkaW5nIHRoZW0gdG8gaGFuZGxlcnMgKi9cbiAgZnVuY3Rpb24gaGFuZGxlSW50ZXJzZWN0cyhpbnRlcnNlY3Rpb25zLCBldmVudCwgZGVsdGEsIGNhbGxiYWNrKSB7XG4gICAgLy8gSWYgYW55dGhpbmcgaGFzIGJlZW4gZm91bmQsIGZvcndhcmQgaXQgdG8gdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgIGlmIChpbnRlcnNlY3Rpb25zLmxlbmd0aCkge1xuICAgICAgY29uc3QgbG9jYWxTdGF0ZSA9IHtcbiAgICAgICAgc3RvcHBlZDogZmFsc2VcbiAgICAgIH07XG4gICAgICBmb3IgKGNvbnN0IGhpdCBvZiBpbnRlcnNlY3Rpb25zKSB7XG4gICAgICAgIGxldCBzdGF0ZSA9IGdldFJvb3RTdGF0ZShoaXQub2JqZWN0KTtcblxuICAgICAgICAvLyBJZiB0aGUgb2JqZWN0IGlzIG5vdCBtYW5hZ2VkIGJ5IFIzRiwgaXQgbWlnaHQgYmUgcGFyZW50ZWQgdG8gYW4gZWxlbWVudCB3aGljaCBpcy5cbiAgICAgICAgLy8gVHJhdmVyc2UgdXB3YXJkcyB1bnRpbCB3ZSBmaW5kIGEgbWFuYWdlZCBwYXJlbnQgYW5kIHVzZSBpdHMgc3RhdGUgaW5zdGVhZC5cbiAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgIGhpdC5vYmplY3QudHJhdmVyc2VBbmNlc3RvcnMob2JqID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFN0YXRlID0gZ2V0Um9vdFN0YXRlKG9iaik7XG4gICAgICAgICAgICBpZiAocGFyZW50U3RhdGUpIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBwYXJlbnRTdGF0ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHJheWNhc3RlcixcbiAgICAgICAgICAgIHBvaW50ZXIsXG4gICAgICAgICAgICBjYW1lcmEsXG4gICAgICAgICAgICBpbnRlcm5hbFxuICAgICAgICAgIH0gPSBzdGF0ZTtcbiAgICAgICAgICBjb25zdCB1bnByb2plY3RlZFBvaW50ID0gbmV3IFRIUkVFLlZlY3RvcjMocG9pbnRlci54LCBwb2ludGVyLnksIDApLnVucHJvamVjdChjYW1lcmEpO1xuICAgICAgICAgIGNvbnN0IGhhc1BvaW50ZXJDYXB0dXJlID0gaWQgPT4ge1xuICAgICAgICAgICAgdmFyIF9pbnRlcm5hbCRjYXB0dXJlZE1hcCwgX2ludGVybmFsJGNhcHR1cmVkTWFwMjtcbiAgICAgICAgICAgIHJldHVybiAoX2ludGVybmFsJGNhcHR1cmVkTWFwID0gKF9pbnRlcm5hbCRjYXB0dXJlZE1hcDIgPSBpbnRlcm5hbC5jYXB0dXJlZE1hcC5nZXQoaWQpKSA9PSBudWxsID8gdm9pZCAwIDogX2ludGVybmFsJGNhcHR1cmVkTWFwMi5oYXMoaGl0LmV2ZW50T2JqZWN0KSkgIT0gbnVsbCA/IF9pbnRlcm5hbCRjYXB0dXJlZE1hcCA6IGZhbHNlO1xuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3Qgc2V0UG9pbnRlckNhcHR1cmUgPSBpZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXB0dXJlRGF0YSA9IHtcbiAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uOiBoaXQsXG4gICAgICAgICAgICAgIHRhcmdldDogZXZlbnQudGFyZ2V0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGludGVybmFsLmNhcHR1cmVkTWFwLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIHBvaW50ZXJJZCB3YXMgcHJldmlvdXNseSBjYXB0dXJlZCwgd2UgYWRkIHRoZSBoaXQgdG8gdGhlXG4gICAgICAgICAgICAgIC8vIGV2ZW50IGNhcHR1cmVkTWFwLlxuICAgICAgICAgICAgICBpbnRlcm5hbC5jYXB0dXJlZE1hcC5nZXQoaWQpLnNldChoaXQuZXZlbnRPYmplY3QsIGNhcHR1cmVEYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGlmIHRoZSBwb2ludGVySWQgd2FzIG5vdCBwcmV2aW91c2x5IGNhcHR1cmVkLCB3ZSBjcmVhdGUgYSBtYXBcbiAgICAgICAgICAgICAgLy8gY29udGFpbmluZyB0aGUgaGl0T2JqZWN0LCBhbmQgdGhlIGhpdC4gaGl0T2JqZWN0IGlzIHVzZWQgZm9yXG4gICAgICAgICAgICAgIC8vIGZhc3RlciBhY2Nlc3MuXG4gICAgICAgICAgICAgIGludGVybmFsLmNhcHR1cmVkTWFwLnNldChpZCwgbmV3IE1hcChbW2hpdC5ldmVudE9iamVjdCwgY2FwdHVyZURhdGFdXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKGlkKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHJlbGVhc2VQb2ludGVyQ2FwdHVyZSA9IGlkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVzID0gaW50ZXJuYWwuY2FwdHVyZWRNYXAuZ2V0KGlkKTtcbiAgICAgICAgICAgIGlmIChjYXB0dXJlcykge1xuICAgICAgICAgICAgICByZWxlYXNlSW50ZXJuYWxQb2ludGVyQ2FwdHVyZShpbnRlcm5hbC5jYXB0dXJlZE1hcCwgaGl0LmV2ZW50T2JqZWN0LCBjYXB0dXJlcywgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBBZGQgbmF0aXZlIGV2ZW50IHByb3BzXG4gICAgICAgICAgbGV0IGV4dHJhY3RFdmVudFByb3BzID0ge307XG4gICAgICAgICAgLy8gVGhpcyBpdGVyYXRlcyBvdmVyIHRoZSBldmVudCdzIHByb3BlcnRpZXMgaW5jbHVkaW5nIHRoZSBpbmhlcml0ZWQgb25lcy4gTmF0aXZlIFBvaW50ZXJFdmVudHMgaGF2ZSBtb3N0IG9mIHRoZWlyIHByb3BzIGFzIGdldHRlcnMgd2hpY2ggYXJlIGluaGVyaXRlZCwgYnV0IHBvbHlmaWxsZWQgUG9pbnRlckV2ZW50cyBoYXZlIHRoZW0gYWxsIGFzIHRoZWlyIG93biBwcm9wZXJ0aWVzIChpLmUuIG5vdCBpbmhlcml0ZWQpLiBXZSBjYW4ndCB1c2UgT2JqZWN0LmtleXMoKSBvciBPYmplY3QuZW50cmllcygpIGFzIHRoZXkgb25seSByZXR1cm4gXCJvd25cIiBwcm9wZXJ0aWVzOyBub3IgT2JqZWN0LmdldFByb3RvdHlwZU9mKGV2ZW50KSBhcyB0aGF0ICpkb2Vzbid0KiByZXR1cm4gXCJvd25cIiBwcm9wZXJ0aWVzLCBvbmx5IGluaGVyaXRlZCBvbmVzLlxuICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gZXZlbnQpIHtcbiAgICAgICAgICAgIGxldCBwcm9wZXJ0eSA9IGV2ZW50W3Byb3BdO1xuICAgICAgICAgICAgLy8gT25seSBjb3B5IG92ZXIgYXRvbWljcywgbGVhdmUgZnVuY3Rpb25zIGFsb25lIGFzIHRoZXNlIHNob3VsZCBiZVxuICAgICAgICAgICAgLy8gY2FsbGVkIGFzIGV2ZW50Lm5hdGl2ZUV2ZW50LmZuKClcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgIT09ICdmdW5jdGlvbicpIGV4dHJhY3RFdmVudFByb3BzW3Byb3BdID0gcHJvcGVydHk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCByYXljYXN0RXZlbnQgPSB7XG4gICAgICAgICAgICAuLi5oaXQsXG4gICAgICAgICAgICAuLi5leHRyYWN0RXZlbnRQcm9wcyxcbiAgICAgICAgICAgIHBvaW50ZXIsXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25zLFxuICAgICAgICAgICAgc3RvcHBlZDogbG9jYWxTdGF0ZS5zdG9wcGVkLFxuICAgICAgICAgICAgZGVsdGEsXG4gICAgICAgICAgICB1bnByb2plY3RlZFBvaW50LFxuICAgICAgICAgICAgcmF5OiByYXljYXN0ZXIucmF5LFxuICAgICAgICAgICAgY2FtZXJhOiBjYW1lcmEsXG4gICAgICAgICAgICAvLyBIaWphY2sgc3RvcFByb3BhZ2F0aW9uLCB3aGljaCBqdXN0IHNldHMgYSBmbGFnXG4gICAgICAgICAgICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvcmVhY3QtdGhyZWUtZmliZXIvaXNzdWVzLzU5NlxuICAgICAgICAgICAgICAvLyBFdmVudHMgYXJlIG5vdCBhbGxvd2VkIHRvIHN0b3AgcHJvcGFnYXRpb24gaWYgdGhlIHBvaW50ZXIgaGFzIGJlZW4gY2FwdHVyZWRcbiAgICAgICAgICAgICAgY29uc3QgY2FwdHVyZXNGb3JQb2ludGVyID0gJ3BvaW50ZXJJZCcgaW4gZXZlbnQgJiYgaW50ZXJuYWwuY2FwdHVyZWRNYXAuZ2V0KGV2ZW50LnBvaW50ZXJJZCk7XG5cbiAgICAgICAgICAgICAgLy8gV2Ugb25seSBhdXRob3JpemUgc3RvcFByb3BhZ2F0aW9uLi4uXG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgLy8gLi4uaWYgdGhpcyBwb2ludGVyIGhhc24ndCBiZWVuIGNhcHR1cmVkXG4gICAgICAgICAgICAgICFjYXB0dXJlc0ZvclBvaW50ZXIgfHxcbiAgICAgICAgICAgICAgLy8gLi4uIG9yIGlmIHRoZSBoaXQgb2JqZWN0IGlzIGNhcHR1cmluZyB0aGUgcG9pbnRlclxuICAgICAgICAgICAgICBjYXB0dXJlc0ZvclBvaW50ZXIuaGFzKGhpdC5ldmVudE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICByYXljYXN0RXZlbnQuc3RvcHBlZCA9IGxvY2FsU3RhdGUuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gUHJvcGFnYXRpb24gaXMgc3RvcHBlZCwgcmVtb3ZlIGFsbCBvdGhlciBob3ZlciByZWNvcmRzXG4gICAgICAgICAgICAgICAgLy8gQW4gZXZlbnQgaGFuZGxlciBpcyBvbmx5IGFsbG93ZWQgdG8gZmx1c2ggb3RoZXIgaGFuZGxlcnMgaWYgaXQgaXMgaG92ZXJlZCBpdHNlbGZcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWwuaG92ZXJlZC5zaXplICYmIEFycmF5LmZyb20oaW50ZXJuYWwuaG92ZXJlZC52YWx1ZXMoKSkuZmluZChpID0+IGkuZXZlbnRPYmplY3QgPT09IGhpdC5ldmVudE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIE9iamVjdHMgY2Fubm90IGZsdXNoIG91dCBoaWdoZXIgdXAgb2JqZWN0cyB0aGF0IGhhdmUgYWxyZWFkeSBjYXVnaHQgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICBjb25zdCBoaWdoZXIgPSBpbnRlcnNlY3Rpb25zLnNsaWNlKDAsIGludGVyc2VjdGlvbnMuaW5kZXhPZihoaXQpKTtcbiAgICAgICAgICAgICAgICAgIGNhbmNlbFBvaW50ZXIoWy4uLmhpZ2hlciwgaGl0XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gdGhlcmUgc2hvdWxkIGJlIGEgZGlzdGluY3Rpb24gYmV0d2VlbiB0YXJnZXQgYW5kIGN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAgIHRhcmdldDoge1xuICAgICAgICAgICAgICBoYXNQb2ludGVyQ2FwdHVyZSxcbiAgICAgICAgICAgICAgc2V0UG9pbnRlckNhcHR1cmUsXG4gICAgICAgICAgICAgIHJlbGVhc2VQb2ludGVyQ2FwdHVyZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHtcbiAgICAgICAgICAgICAgaGFzUG9pbnRlckNhcHR1cmUsXG4gICAgICAgICAgICAgIHNldFBvaW50ZXJDYXB0dXJlLFxuICAgICAgICAgICAgICByZWxlYXNlUG9pbnRlckNhcHR1cmVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYXRpdmVFdmVudDogZXZlbnRcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gQ2FsbCBzdWJzY3JpYmVyc1xuICAgICAgICAgIGNhbGxiYWNrKHJheWNhc3RFdmVudCk7XG4gICAgICAgICAgLy8gRXZlbnQgYnViYmxpbmcgbWF5IGJlIGludGVycnVwdGVkIGJ5IHN0b3BQcm9wYWdhdGlvblxuICAgICAgICAgIGlmIChsb2NhbFN0YXRlLnN0b3BwZWQgPT09IHRydWUpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb25zO1xuICB9XG4gIGZ1bmN0aW9uIGNhbmNlbFBvaW50ZXIoaW50ZXJzZWN0aW9ucykge1xuICAgIGNvbnN0IHtcbiAgICAgIGludGVybmFsXG4gICAgfSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gICAgZm9yIChjb25zdCBob3ZlcmVkT2JqIG9mIGludGVybmFsLmhvdmVyZWQudmFsdWVzKCkpIHtcbiAgICAgIC8vIFdoZW4gbm8gb2JqZWN0cyB3ZXJlIGhpdCBvciB0aGUgdGhlIGhvdmVyZWQgb2JqZWN0IHdhc24ndCBmb3VuZCB1bmRlcm5lYXRoIHRoZSBjdXJzb3JcbiAgICAgIC8vIHdlIGNhbGwgb25Qb2ludGVyT3V0IGFuZCBkZWxldGUgdGhlIG9iamVjdCBmcm9tIHRoZSBob3ZlcmVkLWVsZW1lbnRzIG1hcFxuICAgICAgaWYgKCFpbnRlcnNlY3Rpb25zLmxlbmd0aCB8fCAhaW50ZXJzZWN0aW9ucy5maW5kKGhpdCA9PiBoaXQub2JqZWN0ID09PSBob3ZlcmVkT2JqLm9iamVjdCAmJiBoaXQuaW5kZXggPT09IGhvdmVyZWRPYmouaW5kZXggJiYgaGl0Lmluc3RhbmNlSWQgPT09IGhvdmVyZWRPYmouaW5zdGFuY2VJZCkpIHtcbiAgICAgICAgY29uc3QgZXZlbnRPYmplY3QgPSBob3ZlcmVkT2JqLmV2ZW50T2JqZWN0O1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGV2ZW50T2JqZWN0Ll9fcjNmO1xuICAgICAgICBpbnRlcm5hbC5ob3ZlcmVkLmRlbGV0ZShtYWtlSWQoaG92ZXJlZE9iaikpO1xuICAgICAgICBpZiAoaW5zdGFuY2UgIT0gbnVsbCAmJiBpbnN0YW5jZS5ldmVudENvdW50KSB7XG4gICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBpbnN0YW5jZS5oYW5kbGVycztcbiAgICAgICAgICAvLyBDbGVhciBvdXQgaW50ZXJzZWN0cywgdGhleSBhcmUgb3V0ZGF0ZWQgYnkgbm93XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIC4uLmhvdmVyZWRPYmosXG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25zXG4gICAgICAgICAgfTtcbiAgICAgICAgICBoYW5kbGVycy5vblBvaW50ZXJPdXQgPT0gbnVsbCA/IHZvaWQgMCA6IGhhbmRsZXJzLm9uUG9pbnRlck91dChkYXRhKTtcbiAgICAgICAgICBoYW5kbGVycy5vblBvaW50ZXJMZWF2ZSA9PSBudWxsID8gdm9pZCAwIDogaGFuZGxlcnMub25Qb2ludGVyTGVhdmUoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcG9pbnRlck1pc3NlZChldmVudCwgb2JqZWN0cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBvYmplY3RzW2ldLl9fcjNmO1xuICAgICAgaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLmhhbmRsZXJzLm9uUG9pbnRlck1pc3NlZCA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UuaGFuZGxlcnMub25Qb2ludGVyTWlzc2VkKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlUG9pbnRlcihuYW1lKSB7XG4gICAgLy8gRGVhbCB3aXRoIGNhbmNlbGF0aW9uXG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICdvblBvaW50ZXJMZWF2ZSc6XG4gICAgICBjYXNlICdvblBvaW50ZXJDYW5jZWwnOlxuICAgICAgICByZXR1cm4gKCkgPT4gY2FuY2VsUG9pbnRlcihbXSk7XG4gICAgICBjYXNlICdvbkxvc3RQb2ludGVyQ2FwdHVyZSc6XG4gICAgICAgIHJldHVybiBldmVudCA9PiB7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZXJuYWxcbiAgICAgICAgICB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICBpZiAoJ3BvaW50ZXJJZCcgaW4gZXZlbnQgJiYgaW50ZXJuYWwuY2FwdHVyZWRNYXAuaGFzKGV2ZW50LnBvaW50ZXJJZCkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3QgZXZlbnQgaW50ZXJmYWNlIGhhZCBvbkxvc3RQb2ludGVyQ2FwdHVyZSwgd2UnZCBjYWxsIGl0IGhlcmUgb24gZXZlcnlcbiAgICAgICAgICAgIC8vIG9iamVjdCB0aGF0J3MgZ2V0dGluZyByZW1vdmVkLiBXZSBjYWxsIGl0IG9uIHRoZSBuZXh0IGZyYW1lIGJlY2F1c2Ugb25Mb3N0UG9pbnRlckNhcHR1cmVcbiAgICAgICAgICAgIC8vIGZpcmVzIGJlZm9yZSBvblBvaW50ZXJVcC4gT3RoZXJ3aXNlIHBvaW50ZXJVcCB3b3VsZCBuZXZlciBiZSBjYWxsZWQgaWYgdGhlIGV2ZW50IGRpZG4ndFxuICAgICAgICAgICAgLy8gaGFwcGVuIGluIHRoZSBvYmplY3QgaXQgb3JpZ2luYXRlZCBmcm9tLCBsZWF2aW5nIGNvbXBvbmVudHMgaW4gYSBpbi1iZXR3ZWVuIHN0YXRlLlxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gT25seSByZWxlYXNlIGlmIHBvaW50ZXItdXAgZGlkbid0IGRvIGl0IGFscmVhZHlcbiAgICAgICAgICAgICAgaWYgKGludGVybmFsLmNhcHR1cmVkTWFwLmhhcyhldmVudC5wb2ludGVySWQpKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJuYWwuY2FwdHVyZWRNYXAuZGVsZXRlKGV2ZW50LnBvaW50ZXJJZCk7XG4gICAgICAgICAgICAgICAgY2FuY2VsUG9pbnRlcihbXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBBbnkgb3RoZXIgcG9pbnRlciBnb2VzIGhlcmUgLi4uXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG9uUG9pbnRlck1pc3NlZCxcbiAgICAgICAgaW50ZXJuYWxcbiAgICAgIH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAvLyBwcmVwYXJlUmF5KGV2ZW50KVxuICAgICAgaW50ZXJuYWwubGFzdEV2ZW50LmN1cnJlbnQgPSBldmVudDtcblxuICAgICAgLy8gR2V0IGZyZXNoIGludGVyc2VjdHNcbiAgICAgIGNvbnN0IGlzUG9pbnRlck1vdmUgPSBuYW1lID09PSAnb25Qb2ludGVyTW92ZSc7XG4gICAgICBjb25zdCBpc0NsaWNrRXZlbnQgPSBuYW1lID09PSAnb25DbGljaycgfHwgbmFtZSA9PT0gJ29uQ29udGV4dE1lbnUnIHx8IG5hbWUgPT09ICdvbkRvdWJsZUNsaWNrJztcbiAgICAgIGNvbnN0IGZpbHRlciA9IGlzUG9pbnRlck1vdmUgPyBmaWx0ZXJQb2ludGVyRXZlbnRzIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3QgaGl0cyA9IGludGVyc2VjdChldmVudCwgZmlsdGVyKTtcbiAgICAgIGNvbnN0IGRlbHRhID0gaXNDbGlja0V2ZW50ID8gY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpIDogMDtcblxuICAgICAgLy8gU2F2ZSBpbml0aWFsIGNvb3JkaW5hdGVzIG9uIHBvaW50ZXItZG93blxuICAgICAgaWYgKG5hbWUgPT09ICdvblBvaW50ZXJEb3duJykge1xuICAgICAgICBpbnRlcm5hbC5pbml0aWFsQ2xpY2sgPSBbZXZlbnQub2Zmc2V0WCwgZXZlbnQub2Zmc2V0WV07XG4gICAgICAgIGludGVybmFsLmluaXRpYWxIaXRzID0gaGl0cy5tYXAoaGl0ID0+IGhpdC5ldmVudE9iamVjdCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGEgY2xpY2sgeWllbGRzIG5vIHJlc3VsdHMsIHBhc3MgaXQgYmFjayB0byB0aGUgdXNlciBhcyBhIG1pc3NcbiAgICAgIC8vIE1pc3NlZCBldmVudHMgaGF2ZSB0byBjb21lIGZpcnN0IGluIG9yZGVyIHRvIGVzdGFibGlzaCB1c2VyLWxhbmQgc2lkZS1lZmZlY3QgY2xlYW4gdXBcbiAgICAgIGlmIChpc0NsaWNrRXZlbnQgJiYgIWhpdHMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChkZWx0YSA8PSAyKSB7XG4gICAgICAgICAgcG9pbnRlck1pc3NlZChldmVudCwgaW50ZXJuYWwuaW50ZXJhY3Rpb24pO1xuICAgICAgICAgIGlmIChvblBvaW50ZXJNaXNzZWQpIG9uUG9pbnRlck1pc3NlZChldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFRha2UgY2FyZSBvZiB1bmhvdmVyXG4gICAgICBpZiAoaXNQb2ludGVyTW92ZSkgY2FuY2VsUG9pbnRlcihoaXRzKTtcbiAgICAgIGZ1bmN0aW9uIG9uSW50ZXJzZWN0KGRhdGEpIHtcbiAgICAgICAgY29uc3QgZXZlbnRPYmplY3QgPSBkYXRhLmV2ZW50T2JqZWN0O1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGV2ZW50T2JqZWN0Ll9fcjNmO1xuXG4gICAgICAgIC8vIENoZWNrIHByZXNlbmNlIG9mIGhhbmRsZXJzXG4gICAgICAgIGlmICghKGluc3RhbmNlICE9IG51bGwgJiYgaW5zdGFuY2UuZXZlbnRDb3VudCkpIHJldHVybjtcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBpbnN0YW5jZS5oYW5kbGVycztcblxuICAgICAgICAvKlxuICAgICAgICBNQVlCRSBUT0RPLCBERUxFVEUgSUYgTk9UOiBcbiAgICAgICAgICBDaGVjayBpZiB0aGUgb2JqZWN0IGlzIGNhcHR1cmVkLCBjYXB0dXJlZCBldmVudHMgc2hvdWxkIG5vdCBoYXZlIGludGVyc2VjdHMgcnVubmluZyBpbiBwYXJhbGxlbFxuICAgICAgICAgIEJ1dCB3b3VsZG4ndCBpdCBiZSBiZXR0ZXIgdG8ganVzdCByZXBsYWNlIGNhcHR1cmVkTWFwIHdpdGggYSBzaW5nbGUgZW50cnk/XG4gICAgICAgICAgQWxzbywgYXJlIHdlIE9LIHdpdGggc3RyYWlnaHQgdXAgbWFraW5nIHBpY2tpbmcgdXAgbXVsdGlwbGUgb2JqZWN0cyBpbXBvc3NpYmxlP1xuICAgICAgICAgIFxuICAgICAgICBjb25zdCBwb2ludGVySWQgPSAoZGF0YSBhcyBUaHJlZUV2ZW50PFBvaW50ZXJFdmVudD4pLnBvaW50ZXJJZCAgICAgICAgXG4gICAgICAgIGlmIChwb2ludGVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IGNhcHR1cmVkTWVzaFNldCA9IGludGVybmFsLmNhcHR1cmVkTWFwLmdldChwb2ludGVySWQpXG4gICAgICAgICAgaWYgKGNhcHR1cmVkTWVzaFNldCkge1xuICAgICAgICAgICAgY29uc3QgY2FwdHVyZWQgPSBjYXB0dXJlZE1lc2hTZXQuZ2V0KGV2ZW50T2JqZWN0KVxuICAgICAgICAgICAgaWYgKGNhcHR1cmVkICYmIGNhcHR1cmVkLmxvY2FsU3RhdGUuc3RvcHBlZCkgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9Ki9cblxuICAgICAgICBpZiAoaXNQb2ludGVyTW92ZSkge1xuICAgICAgICAgIC8vIE1vdmUgZXZlbnQgLi4uXG4gICAgICAgICAgaWYgKGhhbmRsZXJzLm9uUG9pbnRlck92ZXIgfHwgaGFuZGxlcnMub25Qb2ludGVyRW50ZXIgfHwgaGFuZGxlcnMub25Qb2ludGVyT3V0IHx8IGhhbmRsZXJzLm9uUG9pbnRlckxlYXZlKSB7XG4gICAgICAgICAgICAvLyBXaGVuIGVudGVyIG9yIG91dCBpcyBwcmVzZW50IHRha2UgY2FyZSBvZiBob3Zlci1zdGF0ZVxuICAgICAgICAgICAgY29uc3QgaWQgPSBtYWtlSWQoZGF0YSk7XG4gICAgICAgICAgICBjb25zdCBob3ZlcmVkSXRlbSA9IGludGVybmFsLmhvdmVyZWQuZ2V0KGlkKTtcbiAgICAgICAgICAgIGlmICghaG92ZXJlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgLy8gSWYgdGhlIG9iamVjdCB3YXNuJ3QgcHJldmlvdXNseSBob3ZlcmVkLCBib29rIGl0IGFuZCBjYWxsIGl0cyBoYW5kbGVyXG4gICAgICAgICAgICAgIGludGVybmFsLmhvdmVyZWQuc2V0KGlkLCBkYXRhKTtcbiAgICAgICAgICAgICAgaGFuZGxlcnMub25Qb2ludGVyT3ZlciA9PSBudWxsID8gdm9pZCAwIDogaGFuZGxlcnMub25Qb2ludGVyT3ZlcihkYXRhKTtcbiAgICAgICAgICAgICAgaGFuZGxlcnMub25Qb2ludGVyRW50ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGhhbmRsZXJzLm9uUG9pbnRlckVudGVyKGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChob3ZlcmVkSXRlbS5zdG9wcGVkKSB7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3Qgd2FzIHByZXZpb3VzbHkgaG92ZXJlZCBhbmQgc3RvcHBlZCwgd2Ugc2hvdWxkbid0IGFsbG93IG90aGVyIGl0ZW1zIHRvIHByb2NlZWRcbiAgICAgICAgICAgICAgZGF0YS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQ2FsbCBtb3VzZSBtb3ZlXG4gICAgICAgICAgaGFuZGxlcnMub25Qb2ludGVyTW92ZSA9PSBudWxsID8gdm9pZCAwIDogaGFuZGxlcnMub25Qb2ludGVyTW92ZShkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBBbGwgb3RoZXIgZXZlbnRzIC4uLlxuICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBoYW5kbGVyc1tuYW1lXTtcbiAgICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgLy8gRm9yd2FyZCBhbGwgZXZlbnRzIGJhY2sgdG8gdGhlaXIgcmVzcGVjdGl2ZSBoYW5kbGVycyB3aXRoIHRoZSBleGNlcHRpb24gb2YgY2xpY2sgZXZlbnRzLFxuICAgICAgICAgICAgLy8gd2hpY2ggbXVzdCB1c2UgdGhlIGluaXRpYWwgdGFyZ2V0XG4gICAgICAgICAgICBpZiAoIWlzQ2xpY2tFdmVudCB8fCBpbnRlcm5hbC5pbml0aWFsSGl0cy5pbmNsdWRlcyhldmVudE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgLy8gTWlzc2VkIGV2ZW50cyBoYXZlIHRvIGNvbWUgZmlyc3RcbiAgICAgICAgICAgICAgcG9pbnRlck1pc3NlZChldmVudCwgaW50ZXJuYWwuaW50ZXJhY3Rpb24uZmlsdGVyKG9iamVjdCA9PiAhaW50ZXJuYWwuaW5pdGlhbEhpdHMuaW5jbHVkZXMob2JqZWN0KSkpO1xuICAgICAgICAgICAgICAvLyBOb3cgY2FsbCB0aGUgaGFuZGxlclxuICAgICAgICAgICAgICBoYW5kbGVyKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUcmlnZ2VyIG9uUG9pbnRlck1pc3NlZCBvbiBhbGwgZWxlbWVudHMgdGhhdCBoYXZlIHBvaW50ZXIgb3Zlci9vdXQgaGFuZGxlcnMsIGJ1dCBub3QgY2xpY2sgYW5kIHdlcmVuJ3QgaGl0XG4gICAgICAgICAgICBpZiAoaXNDbGlja0V2ZW50ICYmIGludGVybmFsLmluaXRpYWxIaXRzLmluY2x1ZGVzKGV2ZW50T2JqZWN0KSkge1xuICAgICAgICAgICAgICBwb2ludGVyTWlzc2VkKGV2ZW50LCBpbnRlcm5hbC5pbnRlcmFjdGlvbi5maWx0ZXIob2JqZWN0ID0+ICFpbnRlcm5hbC5pbml0aWFsSGl0cy5pbmNsdWRlcyhvYmplY3QpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBoYW5kbGVJbnRlcnNlY3RzKGhpdHMsIGV2ZW50LCBkZWx0YSwgb25JbnRlcnNlY3QpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBoYW5kbGVQb2ludGVyXG4gIH07XG59XG5cbmNvbnN0IGlzUmVuZGVyZXIgPSBkZWYgPT4gISEoZGVmICE9IG51bGwgJiYgZGVmLnJlbmRlcik7XG5jb25zdCBjb250ZXh0ID0gLyogQF9fUFVSRV9fICovUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcbmNvbnN0IGNyZWF0ZVN0b3JlID0gKGludmFsaWRhdGUsIGFkdmFuY2UpID0+IHtcbiAgY29uc3Qgcm9vdFN0b3JlID0gY3JlYXRlV2l0aEVxdWFsaXR5Rm4oKHNldCwgZ2V0KSA9PiB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIGNvbnN0IGRlZmF1bHRUYXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIGNvbnN0IHRlbXBUYXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRWaWV3cG9ydChjYW1lcmEgPSBnZXQoKS5jYW1lcmEsIHRhcmdldCA9IGRlZmF1bHRUYXJnZXQsIHNpemUgPSBnZXQoKS5zaXplKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIHRvcCxcbiAgICAgICAgbGVmdFxuICAgICAgfSA9IHNpemU7XG4gICAgICBjb25zdCBhc3BlY3QgPSB3aWR0aCAvIGhlaWdodDtcbiAgICAgIGlmICh0YXJnZXQuaXNWZWN0b3IzKSB0ZW1wVGFyZ2V0LmNvcHkodGFyZ2V0KTtlbHNlIHRlbXBUYXJnZXQuc2V0KC4uLnRhcmdldCk7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IGNhbWVyYS5nZXRXb3JsZFBvc2l0aW9uKHBvc2l0aW9uKS5kaXN0YW5jZVRvKHRlbXBUYXJnZXQpO1xuICAgICAgaWYgKGlzT3J0aG9ncmFwaGljQ2FtZXJhKGNhbWVyYSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3aWR0aDogd2lkdGggLyBjYW1lcmEuem9vbSxcbiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCAvIGNhbWVyYS56b29tLFxuICAgICAgICAgIHRvcCxcbiAgICAgICAgICBsZWZ0LFxuICAgICAgICAgIGZhY3RvcjogMSxcbiAgICAgICAgICBkaXN0YW5jZSxcbiAgICAgICAgICBhc3BlY3RcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZvdiA9IGNhbWVyYS5mb3YgKiBNYXRoLlBJIC8gMTgwOyAvLyBjb252ZXJ0IHZlcnRpY2FsIGZvdiB0byByYWRpYW5zXG4gICAgICAgIGNvbnN0IGggPSAyICogTWF0aC50YW4oZm92IC8gMikgKiBkaXN0YW5jZTsgLy8gdmlzaWJsZSBoZWlnaHRcbiAgICAgICAgY29uc3QgdyA9IGggKiAod2lkdGggLyBoZWlnaHQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgIGhlaWdodDogaCxcbiAgICAgICAgICB0b3AsXG4gICAgICAgICAgbGVmdCxcbiAgICAgICAgICBmYWN0b3I6IHdpZHRoIC8gdyxcbiAgICAgICAgICBkaXN0YW5jZSxcbiAgICAgICAgICBhc3BlY3RcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBlcmZvcm1hbmNlVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzZXRQZXJmb3JtYW5jZUN1cnJlbnQgPSBjdXJyZW50ID0+IHNldChzdGF0ZSA9PiAoe1xuICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgLi4uc3RhdGUucGVyZm9ybWFuY2UsXG4gICAgICAgIGN1cnJlbnRcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgcG9pbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG4gICAgY29uc3Qgcm9vdFN0YXRlID0ge1xuICAgICAgc2V0LFxuICAgICAgZ2V0LFxuICAgICAgLy8gTW9jayBvYmplY3RzIHRoYXQgaGF2ZSB0byBiZSBjb25maWd1cmVkXG4gICAgICBnbDogbnVsbCxcbiAgICAgIGNhbWVyYTogbnVsbCxcbiAgICAgIHJheWNhc3RlcjogbnVsbCxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBwcmlvcml0eTogMSxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgY29ubmVjdGVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHNjZW5lOiBudWxsLFxuICAgICAgeHI6IG51bGwsXG4gICAgICBpbnZhbGlkYXRlOiAoZnJhbWVzID0gMSkgPT4gaW52YWxpZGF0ZShnZXQoKSwgZnJhbWVzKSxcbiAgICAgIGFkdmFuY2U6ICh0aW1lc3RhbXAsIHJ1bkdsb2JhbEVmZmVjdHMpID0+IGFkdmFuY2UodGltZXN0YW1wLCBydW5HbG9iYWxFZmZlY3RzLCBnZXQoKSksXG4gICAgICBsZWdhY3k6IGZhbHNlLFxuICAgICAgbGluZWFyOiBmYWxzZSxcbiAgICAgIGZsYXQ6IGZhbHNlLFxuICAgICAgY29udHJvbHM6IG51bGwsXG4gICAgICBjbG9jazogbmV3IFRIUkVFLkNsb2NrKCksXG4gICAgICBwb2ludGVyLFxuICAgICAgbW91c2U6IHBvaW50ZXIsXG4gICAgICBmcmFtZWxvb3A6ICdhbHdheXMnLFxuICAgICAgb25Qb2ludGVyTWlzc2VkOiB1bmRlZmluZWQsXG4gICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICBjdXJyZW50OiAxLFxuICAgICAgICBtaW46IDAuNSxcbiAgICAgICAgbWF4OiAxLFxuICAgICAgICBkZWJvdW5jZTogMjAwLFxuICAgICAgICByZWdyZXNzOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICAvLyBDbGVhciB0aW1lb3V0XG4gICAgICAgICAgaWYgKHBlcmZvcm1hbmNlVGltZW91dCkgY2xlYXJUaW1lb3V0KHBlcmZvcm1hbmNlVGltZW91dCk7XG4gICAgICAgICAgLy8gU2V0IGxvd2VyIGJvdW5kIHBlcmZvcm1hbmNlXG4gICAgICAgICAgaWYgKHN0YXRlLnBlcmZvcm1hbmNlLmN1cnJlbnQgIT09IHN0YXRlLnBlcmZvcm1hbmNlLm1pbikgc2V0UGVyZm9ybWFuY2VDdXJyZW50KHN0YXRlLnBlcmZvcm1hbmNlLm1pbik7XG4gICAgICAgICAgLy8gR28gYmFjayB0byB1cHBlciBib3VuZCBwZXJmb3JtYW5jZSBhZnRlciBhIHdoaWxlIHVubGVzcyBzb21ldGhpbmcgcmVncmVzc2VzIG1lYW53aGlsZVxuICAgICAgICAgIHBlcmZvcm1hbmNlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0UGVyZm9ybWFuY2VDdXJyZW50KGdldCgpLnBlcmZvcm1hbmNlLm1heCksIHN0YXRlLnBlcmZvcm1hbmNlLmRlYm91bmNlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNpemU6IHtcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwXG4gICAgICB9LFxuICAgICAgdmlld3BvcnQ6IHtcbiAgICAgICAgaW5pdGlhbERwcjogMCxcbiAgICAgICAgZHByOiAwLFxuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIGFzcGVjdDogMCxcbiAgICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICAgIGZhY3RvcjogMCxcbiAgICAgICAgZ2V0Q3VycmVudFZpZXdwb3J0XG4gICAgICB9LFxuICAgICAgc2V0RXZlbnRzOiBldmVudHMgPT4gc2V0KHN0YXRlID0+ICh7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5ldmVudHMsXG4gICAgICAgICAgLi4uZXZlbnRzXG4gICAgICAgIH1cbiAgICAgIH0pKSxcbiAgICAgIHNldFNpemU6ICh3aWR0aCwgaGVpZ2h0LCB0b3AgPSAwLCBsZWZ0ID0gMCkgPT4ge1xuICAgICAgICBjb25zdCBjYW1lcmEgPSBnZXQoKS5jYW1lcmE7XG4gICAgICAgIGNvbnN0IHNpemUgPSB7XG4gICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgIHRvcCxcbiAgICAgICAgICBsZWZ0XG4gICAgICAgIH07XG4gICAgICAgIHNldChzdGF0ZSA9PiAoe1xuICAgICAgICAgIHNpemUsXG4gICAgICAgICAgdmlld3BvcnQ6IHtcbiAgICAgICAgICAgIC4uLnN0YXRlLnZpZXdwb3J0LFxuICAgICAgICAgICAgLi4uZ2V0Q3VycmVudFZpZXdwb3J0KGNhbWVyYSwgZGVmYXVsdFRhcmdldCwgc2l6ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICBzZXREcHI6IGRwciA9PiBzZXQoc3RhdGUgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlZCA9IGNhbGN1bGF0ZURwcihkcHIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgICAgICAuLi5zdGF0ZS52aWV3cG9ydCxcbiAgICAgICAgICAgIGRwcjogcmVzb2x2ZWQsXG4gICAgICAgICAgICBpbml0aWFsRHByOiBzdGF0ZS52aWV3cG9ydC5pbml0aWFsRHByIHx8IHJlc29sdmVkXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgICBzZXRGcmFtZWxvb3A6IChmcmFtZWxvb3AgPSAnYWx3YXlzJykgPT4ge1xuICAgICAgICBjb25zdCBjbG9jayA9IGdldCgpLmNsb2NrO1xuXG4gICAgICAgIC8vIGlmIGZyYW1lbG9vcCA9PT0gXCJuZXZlclwiIGNsb2NrLmVsYXBzZWRUaW1lIGlzIHVwZGF0ZWQgdXNpbmcgYWR2YW5jZSh0aW1lc3RhbXApXG4gICAgICAgIGNsb2NrLnN0b3AoKTtcbiAgICAgICAgY2xvY2suZWxhcHNlZFRpbWUgPSAwO1xuICAgICAgICBpZiAoZnJhbWVsb29wICE9PSAnbmV2ZXInKSB7XG4gICAgICAgICAgY2xvY2suc3RhcnQoKTtcbiAgICAgICAgICBjbG9jay5lbGFwc2VkVGltZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KCgpID0+ICh7XG4gICAgICAgICAgZnJhbWVsb29wXG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICBwcmV2aW91c1Jvb3Q6IHVuZGVmaW5lZCxcbiAgICAgIGludGVybmFsOiB7XG4gICAgICAgIC8vIEV2ZW50c1xuICAgICAgICBpbnRlcmFjdGlvbjogW10sXG4gICAgICAgIGhvdmVyZWQ6IG5ldyBNYXAoKSxcbiAgICAgICAgc3Vic2NyaWJlcnM6IFtdLFxuICAgICAgICBpbml0aWFsQ2xpY2s6IFswLCAwXSxcbiAgICAgICAgaW5pdGlhbEhpdHM6IFtdLFxuICAgICAgICBjYXB0dXJlZE1hcDogbmV3IE1hcCgpLFxuICAgICAgICBsYXN0RXZlbnQ6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVSZWYoKSxcbiAgICAgICAgLy8gVXBkYXRlc1xuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICBmcmFtZXM6IDAsXG4gICAgICAgIHByaW9yaXR5OiAwLFxuICAgICAgICBzdWJzY3JpYmU6IChyZWYsIHByaW9yaXR5LCBzdG9yZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGludGVybmFsID0gZ2V0KCkuaW50ZXJuYWw7XG4gICAgICAgICAgLy8gSWYgdGhpcyBzdWJzY3JpcHRpb24gd2FzIGdpdmVuIGEgcHJpb3JpdHksIGl0IHRha2VzIHJlbmRlcmluZyBpbnRvIGl0cyBvd24gaGFuZHNcbiAgICAgICAgICAvLyBGb3IgdGhhdCByZWFzb24gd2Ugc3dpdGNoIG9mZiBhdXRvbWF0aWMgcmVuZGVyaW5nIGFuZCBpbmNyZWFzZSB0aGUgbWFudWFsIGZsYWdcbiAgICAgICAgICAvLyBBcyBsb25nIGFzIHRoaXMgZmxhZyBpcyBwb3NpdGl2ZSB0aGVyZSBjYW4gYmUgbm8gaW50ZXJuYWwgcmVuZGVyaW5nIGF0IGFsbFxuICAgICAgICAgIC8vIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgbXVsdGlwbGUgcmVuZGVyIHN1YnNjcmlwdGlvbnNcbiAgICAgICAgICBpbnRlcm5hbC5wcmlvcml0eSA9IGludGVybmFsLnByaW9yaXR5ICsgKHByaW9yaXR5ID4gMCA/IDEgOiAwKTtcbiAgICAgICAgICBpbnRlcm5hbC5zdWJzY3JpYmVycy5wdXNoKHtcbiAgICAgICAgICAgIHJlZixcbiAgICAgICAgICAgIHByaW9yaXR5LFxuICAgICAgICAgICAgc3RvcmVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBSZWdpc3RlciBzdWJzY3JpYmVyIGFuZCBzb3J0IGxheWVycyBmcm9tIGxvd2VzdCB0byBoaWdoZXN0LCBtZWFuaW5nLFxuICAgICAgICAgIC8vIGhpZ2hlc3QgcHJpb3JpdHkgcmVuZGVycyBsYXN0IChvbiB0b3Agb2YgdGhlIG90aGVyIGZyYW1lcylcbiAgICAgICAgICBpbnRlcm5hbC5zdWJzY3JpYmVycyA9IGludGVybmFsLnN1YnNjcmliZXJzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KTtcbiAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW50ZXJuYWwgPSBnZXQoKS5pbnRlcm5hbDtcbiAgICAgICAgICAgIGlmIChpbnRlcm5hbCAhPSBudWxsICYmIGludGVybmFsLnN1YnNjcmliZXJzKSB7XG4gICAgICAgICAgICAgIC8vIERlY3JlYXNlIG1hbnVhbCBmbGFnIGlmIHRoaXMgc3Vic2NyaXB0aW9uIGhhZCBhIHByaW9yaXR5XG4gICAgICAgICAgICAgIGludGVybmFsLnByaW9yaXR5ID0gaW50ZXJuYWwucHJpb3JpdHkgLSAocHJpb3JpdHkgPiAwID8gMSA6IDApO1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgc3Vic2NyaWJlciBmcm9tIGxpc3RcbiAgICAgICAgICAgICAgaW50ZXJuYWwuc3Vic2NyaWJlcnMgPSBpbnRlcm5hbC5zdWJzY3JpYmVycy5maWx0ZXIocyA9PiBzLnJlZiAhPT0gcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gcm9vdFN0YXRlO1xuICB9KTtcbiAgY29uc3Qgc3RhdGUgPSByb290U3RvcmUuZ2V0U3RhdGUoKTtcbiAgbGV0IG9sZFNpemUgPSBzdGF0ZS5zaXplO1xuICBsZXQgb2xkRHByID0gc3RhdGUudmlld3BvcnQuZHByO1xuICBsZXQgb2xkQ2FtZXJhID0gc3RhdGUuY2FtZXJhO1xuICByb290U3RvcmUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBjYW1lcmEsXG4gICAgICBzaXplLFxuICAgICAgdmlld3BvcnQsXG4gICAgICBnbCxcbiAgICAgIHNldFxuICAgIH0gPSByb290U3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgIC8vIFJlc2l6ZSBjYW1lcmEgYW5kIHJlbmRlcmVyIG9uIGNoYW5nZXMgdG8gc2l6ZSBhbmQgcGl4ZWxyYXRpb1xuICAgIGlmIChzaXplLndpZHRoICE9PSBvbGRTaXplLndpZHRoIHx8IHNpemUuaGVpZ2h0ICE9PSBvbGRTaXplLmhlaWdodCB8fCB2aWV3cG9ydC5kcHIgIT09IG9sZERwcikge1xuICAgICAgb2xkU2l6ZSA9IHNpemU7XG4gICAgICBvbGREcHIgPSB2aWV3cG9ydC5kcHI7XG4gICAgICAvLyBVcGRhdGUgY2FtZXJhICYgcmVuZGVyZXJcbiAgICAgIHVwZGF0ZUNhbWVyYShjYW1lcmEsIHNpemUpO1xuICAgICAgaWYgKHZpZXdwb3J0LmRwciA+IDApIGdsLnNldFBpeGVsUmF0aW8odmlld3BvcnQuZHByKTtcbiAgICAgIGNvbnN0IHVwZGF0ZVN0eWxlID0gdHlwZW9mIEhUTUxDYW52YXNFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBnbC5kb21FbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgICBnbC5zZXRTaXplKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0LCB1cGRhdGVTdHlsZSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHZpZXdwb3J0IG9uY2UgdGhlIGNhbWVyYSBjaGFuZ2VzXG4gICAgaWYgKGNhbWVyYSAhPT0gb2xkQ2FtZXJhKSB7XG4gICAgICBvbGRDYW1lcmEgPSBjYW1lcmE7XG4gICAgICAvLyBVcGRhdGUgdmlld3BvcnRcbiAgICAgIHNldChzdGF0ZSA9PiAoe1xuICAgICAgICB2aWV3cG9ydDoge1xuICAgICAgICAgIC4uLnN0YXRlLnZpZXdwb3J0LFxuICAgICAgICAgIC4uLnN0YXRlLnZpZXdwb3J0LmdldEN1cnJlbnRWaWV3cG9ydChjYW1lcmEpXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEludmFsaWRhdGUgb24gYW55IGNoYW5nZVxuICByb290U3RvcmUuc3Vic2NyaWJlKHN0YXRlID0+IGludmFsaWRhdGUoc3RhdGUpKTtcblxuICAvLyBSZXR1cm4gcm9vdCBzdGF0ZVxuICByZXR1cm4gcm9vdFN0b3JlO1xufTtcblxuLyoqXG4gKiBFeHBvc2VzIGFuIG9iamVjdCdzIHtAbGluayBJbnN0YW5jZX0uXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9hZGRpdGlvbmFsLWV4cG9ydHMjdXNlSW5zdGFuY2VIYW5kbGVcbiAqXG4gKiAqKk5vdGUqKjogdGhpcyBpcyBhbiBlc2NhcGUgaGF0Y2ggdG8gcmVhY3QtaW50ZXJuYWwgZmllbGRzLiBFeHBlY3QgdGhpcyB0byBjaGFuZ2Ugc2lnbmlmaWNhbnRseSBiZXR3ZWVuIHZlcnNpb25zLlxuICovXG5mdW5jdGlvbiB1c2VJbnN0YW5jZUhhbmRsZShyZWYpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIFJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUoaW5zdGFuY2UsICgpID0+IHJlZi5jdXJyZW50Ll9fcjNmLCBbcmVmXSk7XG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBSM0YgQ2FudmFzJyBadXN0YW5kIHN0b3JlLiBVc2VmdWwgZm9yIFt0cmFuc2llbnQgdXBkYXRlc10oaHR0cHM6Ly9naXRodWIuY29tL3BtbmRycy96dXN0YW5kI3RyYW5zaWVudC11cGRhdGVzLWZvci1vZnRlbi1vY2N1cnJpbmctc3RhdGUtY2hhbmdlcykuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9ob29rcyN1c2VzdG9yZVxuICovXG5mdW5jdGlvbiB1c2VTdG9yZSgpIHtcbiAgY29uc3Qgc3RvcmUgPSBSZWFjdC51c2VDb250ZXh0KGNvbnRleHQpO1xuICBpZiAoIXN0b3JlKSB0aHJvdyBuZXcgRXJyb3IoJ1IzRjogSG9va3MgY2FuIG9ubHkgYmUgdXNlZCB3aXRoaW4gdGhlIENhbnZhcyBjb21wb25lbnQhJyk7XG4gIHJldHVybiBzdG9yZTtcbn1cblxuLyoqXG4gKiBBY2Nlc3NlcyBSM0YncyBpbnRlcm5hbCBzdGF0ZSwgY29udGFpbmluZyByZW5kZXJlciwgY2FudmFzLCBzY2VuZSwgZXRjLlxuICogQHNlZSBodHRwczovL2RvY3MucG1uZC5ycy9yZWFjdC10aHJlZS1maWJlci9hcGkvaG9va3MjdXNldGhyZWVcbiAqL1xuZnVuY3Rpb24gdXNlVGhyZWUoc2VsZWN0b3IgPSBzdGF0ZSA9PiBzdGF0ZSwgZXF1YWxpdHlGbikge1xuICByZXR1cm4gdXNlU3RvcmUoKShzZWxlY3RvciwgZXF1YWxpdHlGbik7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgYSBjYWxsYmFjayBiZWZvcmUgcmVuZGVyIGluIGEgc2hhcmVkIGZyYW1lIGxvb3AuXG4gKiBDYW4gb3JkZXIgZWZmZWN0cyB3aXRoIHJlbmRlciBwcmlvcml0eSBvciBtYW51YWxseSByZW5kZXIgd2l0aCBhIHBvc2l0aXZlIHByaW9yaXR5LlxuICogQHNlZSBodHRwczovL2RvY3MucG1uZC5ycy9yZWFjdC10aHJlZS1maWJlci9hcGkvaG9va3MjdXNlZnJhbWVcbiAqL1xuZnVuY3Rpb24gdXNlRnJhbWUoY2FsbGJhY2ssIHJlbmRlclByaW9yaXR5ID0gMCkge1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7XG4gIGNvbnN0IHN1YnNjcmliZSA9IHN0b3JlLmdldFN0YXRlKCkuaW50ZXJuYWwuc3Vic2NyaWJlO1xuICAvLyBNZW1vaXplIHJlZlxuICBjb25zdCByZWYgPSB1c2VNdXRhYmxlQ2FsbGJhY2soY2FsbGJhY2spO1xuICAvLyBTdWJzY3JpYmUgb24gbW91bnQsIHVuc3Vic2NyaWJlIG9uIHVubW91bnRcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiBzdWJzY3JpYmUocmVmLCByZW5kZXJQcmlvcml0eSwgc3RvcmUpLCBbcmVuZGVyUHJpb3JpdHksIHN1YnNjcmliZSwgc3RvcmVdKTtcbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5vZGUgZ3JhcGggb2YgYW4gb2JqZWN0IHdpdGggbmFtZWQgbm9kZXMgJiBtYXRlcmlhbHMuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9ob29rcyN1c2VncmFwaFxuICovXG5mdW5jdGlvbiB1c2VHcmFwaChvYmplY3QpIHtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4gYnVpbGRHcmFwaChvYmplY3QpLCBbb2JqZWN0XSk7XG59XG5jb25zdCBtZW1vaXplZExvYWRlcnMgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgaXNDb25zdHJ1Y3RvciQxID0gdmFsdWUgPT4ge1xuICB2YXIgX3ZhbHVlJHByb3RvdHlwZTtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiAodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IChfdmFsdWUkcHJvdG90eXBlID0gdmFsdWUucHJvdG90eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX3ZhbHVlJHByb3RvdHlwZS5jb25zdHJ1Y3RvcikgPT09IHZhbHVlO1xufTtcbmZ1bmN0aW9uIGxvYWRpbmdGbihleHRlbnNpb25zLCBvblByb2dyZXNzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoUHJvdG8sIC4uLmlucHV0KSB7XG4gICAgbGV0IGxvYWRlcjtcblxuICAgIC8vIENvbnN0cnVjdCBhbmQgY2FjaGUgbG9hZGVyIGlmIGNvbnN0cnVjdG9yIHdhcyBwYXNzZWRcbiAgICBpZiAoaXNDb25zdHJ1Y3RvciQxKFByb3RvKSkge1xuICAgICAgbG9hZGVyID0gbWVtb2l6ZWRMb2FkZXJzLmdldChQcm90byk7XG4gICAgICBpZiAoIWxvYWRlcikge1xuICAgICAgICBsb2FkZXIgPSBuZXcgUHJvdG8oKTtcbiAgICAgICAgbWVtb2l6ZWRMb2FkZXJzLnNldChQcm90bywgbG9hZGVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZGVyID0gUHJvdG87XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgbG9hZGVyIGV4dGVuc2lvbnNcbiAgICBpZiAoZXh0ZW5zaW9ucykgZXh0ZW5zaW9ucyhsb2FkZXIpO1xuXG4gICAgLy8gR28gdGhyb3VnaCB0aGUgdXJscyBhbmQgbG9hZCB0aGVtXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGlucHV0Lm1hcChpbnB1dCA9PiBuZXcgUHJvbWlzZSgocmVzLCByZWplY3QpID0+IGxvYWRlci5sb2FkKGlucHV0LCBkYXRhID0+IHtcbiAgICAgIGlmIChpc09iamVjdDNEKGRhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGRhdGEuc2NlbmUpKSBPYmplY3QuYXNzaWduKGRhdGEsIGJ1aWxkR3JhcGgoZGF0YS5zY2VuZSkpO1xuICAgICAgcmVzKGRhdGEpO1xuICAgIH0sIG9uUHJvZ3Jlc3MsIGVycm9yID0+IHJlamVjdChuZXcgRXJyb3IoYENvdWxkIG5vdCBsb2FkICR7aW5wdXR9OiAke2Vycm9yID09IG51bGwgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlfWApKSkpKSk7XG4gIH07XG59XG5cbi8qKlxuICogU3luY2hyb25vdXNseSBsb2FkcyBhbmQgY2FjaGVzIGFzc2V0cyB3aXRoIGEgdGhyZWUgbG9hZGVyLlxuICpcbiAqIE5vdGU6IHRoaXMgaG9vaydzIGNhbGxlciBtdXN0IGJlIHdyYXBwZWQgd2l0aCBgUmVhY3QuU3VzcGVuc2VgXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9ob29rcyN1c2Vsb2FkZXJcbiAqL1xuZnVuY3Rpb24gdXNlTG9hZGVyKGxvYWRlciwgaW5wdXQsIGV4dGVuc2lvbnMsIG9uUHJvZ3Jlc3MpIHtcbiAgLy8gVXNlIHN1c3BlbnNlIHRvIGxvYWQgYXN5bmMgYXNzZXRzXG4gIGNvbnN0IGtleXMgPSBBcnJheS5pc0FycmF5KGlucHV0KSA/IGlucHV0IDogW2lucHV0XTtcbiAgY29uc3QgcmVzdWx0cyA9IHN1c3BlbmQobG9hZGluZ0ZuKGV4dGVuc2lvbnMsIG9uUHJvZ3Jlc3MpLCBbbG9hZGVyLCAuLi5rZXlzXSwge1xuICAgIGVxdWFsOiBpcy5lcXVcbiAgfSk7XG4gIC8vIFJldHVybiB0aGUgb2JqZWN0KHMpXG4gIHJldHVybiBBcnJheS5pc0FycmF5KGlucHV0KSA/IHJlc3VsdHMgOiByZXN1bHRzWzBdO1xufVxuXG4vKipcbiAqIFByZWxvYWRzIGFuIGFzc2V0IGludG8gY2FjaGUgYXMgYSBzaWRlLWVmZmVjdC5cbiAqL1xudXNlTG9hZGVyLnByZWxvYWQgPSBmdW5jdGlvbiAobG9hZGVyLCBpbnB1dCwgZXh0ZW5zaW9ucykge1xuICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShpbnB1dCkgPyBpbnB1dCA6IFtpbnB1dF07XG4gIHJldHVybiBwcmVsb2FkKGxvYWRpbmdGbihleHRlbnNpb25zKSwgW2xvYWRlciwgLi4ua2V5c10pO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgbG9hZGVkIGFzc2V0IGZyb20gY2FjaGUuXG4gKi9cbnVzZUxvYWRlci5jbGVhciA9IGZ1bmN0aW9uIChsb2FkZXIsIGlucHV0KSB7XG4gIGNvbnN0IGtleXMgPSBBcnJheS5pc0FycmF5KGlucHV0KSA/IGlucHV0IDogW2lucHV0XTtcbiAgcmV0dXJuIGNsZWFyKFtsb2FkZXIsIC4uLmtleXNdKTtcbn07XG5cbi8vIFRPRE86IHVwc3RyZWFtIHRvIERlZmluaXRlbHlUeXBlZCBmb3IgUmVhY3QgMTlcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMjg5NTZcblxuZnVuY3Rpb24gY3JlYXRlUmVjb25jaWxlcihjb25maWcpIHtcbiAgY29uc3QgcmVjb25jaWxlciA9IFJlY29uY2lsZXIoY29uZmlnKTtcbiAgcmVjb25jaWxlci5pbmplY3RJbnRvRGV2VG9vbHMoe1xuICAgIGJ1bmRsZVR5cGU6IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gMSA6IDAsXG4gICAgcmVuZGVyZXJQYWNrYWdlTmFtZTogJ0ByZWFjdC10aHJlZS9maWJlcicsXG4gICAgdmVyc2lvbjogUmVhY3QudmVyc2lvblxuICB9KTtcbiAgcmV0dXJuIHJlY29uY2lsZXI7XG59XG5jb25zdCBOb0V2ZW50UHJpb3JpdHkgPSAwO1xuXG4vLyBUT0RPOiBoYW5kbGUgY29uc3RydWN0b3Igb3ZlcmxvYWRzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcG1uZHJzL3JlYWN0LXRocmVlLWZpYmVyL3B1bGwvMjkzMVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zNzA3OVxuXG5jb25zdCBjYXRhbG9ndWUgPSB7fTtcbmNvbnN0IFBSRUZJWF9SRUdFWCA9IC9edGhyZWUoPz1bQS1aXSkvO1xuY29uc3QgdG9QYXNjYWxDYXNlID0gdHlwZSA9PiBgJHt0eXBlWzBdLnRvVXBwZXJDYXNlKCl9JHt0eXBlLnNsaWNlKDEpfWA7XG5sZXQgaSA9IDA7XG5jb25zdCBpc0NvbnN0cnVjdG9yID0gb2JqZWN0ID0+IHR5cGVvZiBvYmplY3QgPT09ICdmdW5jdGlvbic7XG5mdW5jdGlvbiBleHRlbmQob2JqZWN0cykge1xuICBpZiAoaXNDb25zdHJ1Y3RvcihvYmplY3RzKSkge1xuICAgIGNvbnN0IENvbXBvbmVudCA9IGAke2krK31gO1xuICAgIGNhdGFsb2d1ZVtDb21wb25lbnRdID0gb2JqZWN0cztcbiAgICByZXR1cm4gQ29tcG9uZW50O1xuICB9IGVsc2Uge1xuICAgIE9iamVjdC5hc3NpZ24oY2F0YWxvZ3VlLCBvYmplY3RzKTtcbiAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVJbnN0YW5jZSh0eXBlLCBwcm9wcykge1xuICAvLyBHZXQgdGFyZ2V0IGZyb20gY2F0YWxvZ3VlXG4gIGNvbnN0IG5hbWUgPSB0b1Bhc2NhbENhc2UodHlwZSk7XG4gIGNvbnN0IHRhcmdldCA9IGNhdGFsb2d1ZVtuYW1lXTtcblxuICAvLyBWYWxpZGF0ZSBlbGVtZW50IHRhcmdldFxuICBpZiAodHlwZSAhPT0gJ3ByaW1pdGl2ZScgJiYgIXRhcmdldCkgdGhyb3cgbmV3IEVycm9yKGBSM0Y6ICR7bmFtZX0gaXMgbm90IHBhcnQgb2YgdGhlIFRIUkVFIG5hbWVzcGFjZSEgRGlkIHlvdSBmb3JnZXQgdG8gZXh0ZW5kPyBTZWU6IGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9vYmplY3RzI3VzaW5nLTNyZC1wYXJ0eS1vYmplY3RzLWRlY2xhcmF0aXZlbHlgKTtcblxuICAvLyBWYWxpZGF0ZSBwcmltaXRpdmVzXG4gIGlmICh0eXBlID09PSAncHJpbWl0aXZlJyAmJiAhcHJvcHMub2JqZWN0KSB0aHJvdyBuZXcgRXJyb3IoYFIzRjogUHJpbWl0aXZlcyB3aXRob3V0ICdvYmplY3QnIGFyZSBpbnZhbGlkIWApO1xuXG4gIC8vIFRocm93IGlmIGFuIG9iamVjdCBvciBsaXRlcmFsIHdhcyBwYXNzZWQgZm9yIGFyZ3NcbiAgaWYgKHByb3BzLmFyZ3MgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShwcm9wcy5hcmdzKSkgdGhyb3cgbmV3IEVycm9yKCdSM0Y6IFRoZSBhcmdzIHByb3AgbXVzdCBiZSBhbiBhcnJheSEnKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKHR5cGUsIHByb3BzLCByb290KSB7XG4gIHZhciBfcHJvcHMkb2JqZWN0O1xuICAvLyBSZW1vdmUgdGhyZWUqIHByZWZpeCBmcm9tIGVsZW1lbnRzIGlmIG5hdGl2ZSBlbGVtZW50IG5vdCBwcmVzZW50XG4gIHR5cGUgPSB0b1Bhc2NhbENhc2UodHlwZSkgaW4gY2F0YWxvZ3VlID8gdHlwZSA6IHR5cGUucmVwbGFjZShQUkVGSVhfUkVHRVgsICcnKTtcbiAgdmFsaWRhdGVJbnN0YW5jZSh0eXBlLCBwcm9wcyk7XG5cbiAgLy8gUmVnZW5lcmF0ZSB0aGUgUjNGIGluc3RhbmNlIGZvciBwcmltaXRpdmVzIHRvIHNpbXVsYXRlIGEgbmV3IG9iamVjdFxuICBpZiAodHlwZSA9PT0gJ3ByaW1pdGl2ZScgJiYgKF9wcm9wcyRvYmplY3QgPSBwcm9wcy5vYmplY3QpICE9IG51bGwgJiYgX3Byb3BzJG9iamVjdC5fX3IzZikgZGVsZXRlIHByb3BzLm9iamVjdC5fX3IzZjtcbiAgcmV0dXJuIHByZXBhcmUocHJvcHMub2JqZWN0LCByb290LCB0eXBlLCBwcm9wcyk7XG59XG5mdW5jdGlvbiBoaWRlSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgaWYgKCFpbnN0YW5jZS5pc0hpZGRlbikge1xuICAgIHZhciBfaW5zdGFuY2UkcGFyZW50O1xuICAgIGlmIChpbnN0YW5jZS5wcm9wcy5hdHRhY2ggJiYgKF9pbnN0YW5jZSRwYXJlbnQgPSBpbnN0YW5jZS5wYXJlbnQpICE9IG51bGwgJiYgX2luc3RhbmNlJHBhcmVudC5vYmplY3QpIHtcbiAgICAgIGRldGFjaChpbnN0YW5jZS5wYXJlbnQsIGluc3RhbmNlKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0M0QoaW5zdGFuY2Uub2JqZWN0KSkge1xuICAgICAgaW5zdGFuY2Uub2JqZWN0LnZpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaW5zdGFuY2UuaXNIaWRkZW4gPSB0cnVlO1xuICAgIGludmFsaWRhdGVJbnN0YW5jZShpbnN0YW5jZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHVuaGlkZUluc3RhbmNlKGluc3RhbmNlKSB7XG4gIGlmIChpbnN0YW5jZS5pc0hpZGRlbikge1xuICAgIHZhciBfaW5zdGFuY2UkcGFyZW50MjtcbiAgICBpZiAoaW5zdGFuY2UucHJvcHMuYXR0YWNoICYmIChfaW5zdGFuY2UkcGFyZW50MiA9IGluc3RhbmNlLnBhcmVudCkgIT0gbnVsbCAmJiBfaW5zdGFuY2UkcGFyZW50Mi5vYmplY3QpIHtcbiAgICAgIGF0dGFjaChpbnN0YW5jZS5wYXJlbnQsIGluc3RhbmNlKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0M0QoaW5zdGFuY2Uub2JqZWN0KSAmJiBpbnN0YW5jZS5wcm9wcy52aXNpYmxlICE9PSBmYWxzZSkge1xuICAgICAgaW5zdGFuY2Uub2JqZWN0LnZpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgICBpbnN0YW5jZS5pc0hpZGRlbiA9IGZhbHNlO1xuICAgIGludmFsaWRhdGVJbnN0YW5jZShpbnN0YW5jZSk7XG4gIH1cbn1cblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8yMDI3MVxuLy8gVGhpcyB3aWxsIG1ha2Ugc3VyZSBldmVudHMgYW5kIGF0dGFjaCBhcmUgb25seSBoYW5kbGVkIG9uY2Ugd2hlbiB0cmVlcyBhcmUgY29tcGxldGVcbmZ1bmN0aW9uIGhhbmRsZUNvbnRhaW5lckVmZmVjdHMocGFyZW50LCBjaGlsZCwgYmVmb3JlQ2hpbGQpIHtcbiAgLy8gQmFpbCBpZiB0cmVlIGlzbid0IG1vdW50ZWQgb3IgcGFyZW50IGlzIG5vdCBhIGNvbnRhaW5lci5cbiAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIHRyZWUgaXMgZmluYWxpemVkIGFuZCBSZWFjdCB3b24ndCBkaXNjYXJkIHJlc3VsdHMgdG8gU3VzcGVuc2VcbiAgY29uc3Qgc3RhdGUgPSBjaGlsZC5yb290LmdldFN0YXRlKCk7XG4gIGlmICghcGFyZW50LnBhcmVudCAmJiBwYXJlbnQub2JqZWN0ICE9PSBzdGF0ZS5zY2VuZSkgcmV0dXJuO1xuXG4gIC8vIENyZWF0ZSAmIGxpbmsgb2JqZWN0IG9uIGZpcnN0IHJ1blxuICBpZiAoIWNoaWxkLm9iamVjdCkge1xuICAgIHZhciBfY2hpbGQkcHJvcHMkb2JqZWN0LCBfY2hpbGQkcHJvcHMkYXJncztcbiAgICAvLyBHZXQgdGFyZ2V0IGZyb20gY2F0YWxvZ3VlXG4gICAgY29uc3QgdGFyZ2V0ID0gY2F0YWxvZ3VlW3RvUGFzY2FsQ2FzZShjaGlsZC50eXBlKV07XG5cbiAgICAvLyBDcmVhdGUgb2JqZWN0XG4gICAgY2hpbGQub2JqZWN0ID0gKF9jaGlsZCRwcm9wcyRvYmplY3QgPSBjaGlsZC5wcm9wcy5vYmplY3QpICE9IG51bGwgPyBfY2hpbGQkcHJvcHMkb2JqZWN0IDogbmV3IHRhcmdldCguLi4oKF9jaGlsZCRwcm9wcyRhcmdzID0gY2hpbGQucHJvcHMuYXJncykgIT0gbnVsbCA/IF9jaGlsZCRwcm9wcyRhcmdzIDogW10pKTtcbiAgICBjaGlsZC5vYmplY3QuX19yM2YgPSBjaGlsZDtcbiAgfVxuXG4gIC8vIFNldCBpbml0aWFsIHByb3BzXG4gIGFwcGx5UHJvcHMoY2hpbGQub2JqZWN0LCBjaGlsZC5wcm9wcyk7XG5cbiAgLy8gQXBwZW5kIGluc3RhbmNlXG4gIGlmIChjaGlsZC5wcm9wcy5hdHRhY2gpIHtcbiAgICBhdHRhY2gocGFyZW50LCBjaGlsZCk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QzRChjaGlsZC5vYmplY3QpICYmIGlzT2JqZWN0M0QocGFyZW50Lm9iamVjdCkpIHtcbiAgICBjb25zdCBjaGlsZEluZGV4ID0gcGFyZW50Lm9iamVjdC5jaGlsZHJlbi5pbmRleE9mKGJlZm9yZUNoaWxkID09IG51bGwgPyB2b2lkIDAgOiBiZWZvcmVDaGlsZC5vYmplY3QpO1xuICAgIGlmIChiZWZvcmVDaGlsZCAmJiBjaGlsZEluZGV4ICE9PSAtMSkge1xuICAgICAgLy8gSWYgdGhlIGNoaWxkIGlzIGFscmVhZHkgaW4gdGhlIHBhcmVudCdzIGNoaWxkcmVuIGFycmF5LCBtb3ZlIGl0IHRvIHRoZSBuZXcgcG9zaXRpb25cbiAgICAgIC8vIE90aGVyd2lzZSwganVzdCBpbnNlcnQgaXQgYXQgdGhlIHRhcmdldCBwb3NpdGlvblxuICAgICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHBhcmVudC5vYmplY3QuY2hpbGRyZW4uaW5kZXhPZihjaGlsZC5vYmplY3QpO1xuICAgICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgIHBhcmVudC5vYmplY3QuY2hpbGRyZW4uc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpO1xuICAgICAgICBjb25zdCBhZGp1c3RlZEluZGV4ID0gZXhpc3RpbmdJbmRleCA8IGNoaWxkSW5kZXggPyBjaGlsZEluZGV4IC0gMSA6IGNoaWxkSW5kZXg7XG4gICAgICAgIHBhcmVudC5vYmplY3QuY2hpbGRyZW4uc3BsaWNlKGFkanVzdGVkSW5kZXgsIDAsIGNoaWxkLm9iamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZC5vYmplY3QucGFyZW50ID0gcGFyZW50Lm9iamVjdDtcbiAgICAgICAgcGFyZW50Lm9iamVjdC5jaGlsZHJlbi5zcGxpY2UoY2hpbGRJbmRleCwgMCwgY2hpbGQub2JqZWN0KTtcbiAgICAgICAgY2hpbGQub2JqZWN0LmRpc3BhdGNoRXZlbnQoe1xuICAgICAgICAgIHR5cGU6ICdhZGRlZCdcbiAgICAgICAgfSk7XG4gICAgICAgIHBhcmVudC5vYmplY3QuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgICAgdHlwZTogJ2NoaWxkYWRkZWQnLFxuICAgICAgICAgIGNoaWxkOiBjaGlsZC5vYmplY3RcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmVudC5vYmplY3QuYWRkKGNoaWxkLm9iamVjdCk7XG4gICAgfVxuICB9XG5cbiAgLy8gTGluayBzdWJ0cmVlXG4gIGZvciAoY29uc3QgY2hpbGRJbnN0YW5jZSBvZiBjaGlsZC5jaGlsZHJlbikgaGFuZGxlQ29udGFpbmVyRWZmZWN0cyhjaGlsZCwgY2hpbGRJbnN0YW5jZSk7XG5cbiAgLy8gVHJlZSB3YXMgdXBkYXRlZCwgcmVxdWVzdCBhIGZyYW1lXG4gIGludmFsaWRhdGVJbnN0YW5jZShjaGlsZCk7XG59XG5mdW5jdGlvbiBhcHBlbmRDaGlsZChwYXJlbnQsIGNoaWxkKSB7XG4gIGlmICghY2hpbGQpIHJldHVybjtcblxuICAvLyBMaW5rIGluc3RhbmNlc1xuICBjaGlsZC5wYXJlbnQgPSBwYXJlbnQ7XG4gIHBhcmVudC5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcblxuICAvLyBBdHRhY2ggdHJlZSBvbmNlIGNvbXBsZXRlXG4gIGhhbmRsZUNvbnRhaW5lckVmZmVjdHMocGFyZW50LCBjaGlsZCk7XG59XG5mdW5jdGlvbiBpbnNlcnRCZWZvcmUocGFyZW50LCBjaGlsZCwgYmVmb3JlQ2hpbGQpIHtcbiAgaWYgKCFjaGlsZCB8fCAhYmVmb3JlQ2hpbGQpIHJldHVybjtcblxuICAvLyBMaW5rIGluc3RhbmNlc1xuICBjaGlsZC5wYXJlbnQgPSBwYXJlbnQ7XG4gIGNvbnN0IGNoaWxkSW5kZXggPSBwYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihiZWZvcmVDaGlsZCk7XG4gIGlmIChjaGlsZEluZGV4ICE9PSAtMSkgcGFyZW50LmNoaWxkcmVuLnNwbGljZShjaGlsZEluZGV4LCAwLCBjaGlsZCk7ZWxzZSBwYXJlbnQuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG5cbiAgLy8gQXR0YWNoIHRyZWUgb25jZSBjb21wbGV0ZVxuICBoYW5kbGVDb250YWluZXJFZmZlY3RzKHBhcmVudCwgY2hpbGQsIGJlZm9yZUNoaWxkKTtcbn1cbmZ1bmN0aW9uIGRpc3Bvc2VPbklkbGUob2JqZWN0KSB7XG4gIGlmICh0eXBlb2Ygb2JqZWN0LmRpc3Bvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBoYW5kbGVEaXNwb3NlID0gKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgb2JqZWN0LmRpc3Bvc2UoKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBuby1vcFxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBJbiBhIHRlc3RpbmcgZW52aXJvbm1lbnQsIGNsZWFudXAgaW1tZWRpYXRlbHlcbiAgICBpZiAodHlwZW9mIElTX1JFQUNUX0FDVF9FTlZJUk9OTUVOVCAhPT0gJ3VuZGVmaW5lZCcpIGhhbmRsZURpc3Bvc2UoKTtcbiAgICAvLyBPdGhlcndpc2UsIHVzaW5nIGEgcmVhbCBHUFUgc28gc2NoZWR1bGUgY2xlYW51cCB0byBwcmV2ZW50IHN0YWxsc1xuICAgIGVsc2UgdW5zdGFibGVfc2NoZWR1bGVDYWxsYmFjayh1bnN0YWJsZV9JZGxlUHJpb3JpdHksIGhhbmRsZURpc3Bvc2UpO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVDaGlsZChwYXJlbnQsIGNoaWxkLCBkaXNwb3NlKSB7XG4gIGlmICghY2hpbGQpIHJldHVybjtcblxuICAvLyBVbmxpbmsgaW5zdGFuY2VzXG4gIGNoaWxkLnBhcmVudCA9IG51bGw7XG4gIGNvbnN0IGNoaWxkSW5kZXggPSBwYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihjaGlsZCk7XG4gIGlmIChjaGlsZEluZGV4ICE9PSAtMSkgcGFyZW50LmNoaWxkcmVuLnNwbGljZShjaGlsZEluZGV4LCAxKTtcblxuICAvLyBFYWdlcmx5IHRlYXIgZG93biB0cmVlXG4gIGlmIChjaGlsZC5wcm9wcy5hdHRhY2gpIHtcbiAgICBkZXRhY2gocGFyZW50LCBjaGlsZCk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QzRChjaGlsZC5vYmplY3QpICYmIGlzT2JqZWN0M0QocGFyZW50Lm9iamVjdCkpIHtcbiAgICBwYXJlbnQub2JqZWN0LnJlbW92ZShjaGlsZC5vYmplY3QpO1xuICAgIHJlbW92ZUludGVyYWN0aXZpdHkoZmluZEluaXRpYWxSb290KGNoaWxkKSwgY2hpbGQub2JqZWN0KTtcbiAgfVxuXG4gIC8vIEFsbG93IG9iamVjdHMgdG8gYmFpbCBvdXQgb2YgdW5tb3VudCBkaXNwb3NhbCB3aXRoIGRpc3Bvc2U9e251bGx9XG4gIGNvbnN0IHNob3VsZERpc3Bvc2UgPSBjaGlsZC5wcm9wcy5kaXNwb3NlICE9PSBudWxsICYmIGRpc3Bvc2UgIT09IGZhbHNlO1xuXG4gIC8vIFJlY3Vyc2l2ZWx5IHJlbW92ZSBpbnN0YW5jZSBjaGlsZHJlblxuICBmb3IgKGxldCBpID0gY2hpbGQuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCBub2RlID0gY2hpbGQuY2hpbGRyZW5baV07XG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQsIG5vZGUsIHNob3VsZERpc3Bvc2UpO1xuICB9XG4gIGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA9IDA7XG5cbiAgLy8gVW5saW5rIGluc3RhbmNlIG9iamVjdFxuICBkZWxldGUgY2hpbGQub2JqZWN0Ll9fcjNmO1xuXG4gIC8vIERpc3Bvc2Ugb2JqZWN0IHdoZW5ldmVyIHRoZSByZWNvbmNpbGVyIGZlZWxzIGxpa2UgaXQuXG4gIC8vIE5ldmVyIGRpc3Bvc2Ugb2YgcHJpbWl0aXZlcyBiZWNhdXNlIHRoZWlyIHN0YXRlIG1heSBiZSBrZXB0IG91dHNpZGUgb2YgUmVhY3QhXG4gIC8vIEluIG9yZGVyIGZvciBhbiBvYmplY3QgdG8gYmUgYWJsZSB0byBkaXNwb3NlIGl0XG4gIC8vICAgLSBoYXMgYSBkaXNwb3NlIG1ldGhvZFxuICAvLyAgIC0gY2Fubm90IGJlIGEgPHByaW1pdGl2ZSBvYmplY3Q9ey4uLn0gLz5cbiAgLy8gICAtIGNhbm5vdCBiZSBhIFRIUkVFLlNjZW5lLCBiZWNhdXNlIHRocmVlIGhhcyBicm9rZW4gaXRzIG93biBBUElcbiAgaWYgKHNob3VsZERpc3Bvc2UgJiYgY2hpbGQudHlwZSAhPT0gJ3ByaW1pdGl2ZScgJiYgY2hpbGQub2JqZWN0LnR5cGUgIT09ICdTY2VuZScpIHtcbiAgICBkaXNwb3NlT25JZGxlKGNoaWxkLm9iamVjdCk7XG4gIH1cblxuICAvLyBUcmVlIHdhcyB1cGRhdGVkLCByZXF1ZXN0IGEgZnJhbWUgZm9yIHRvcC1sZXZlbCBpbnN0YW5jZVxuICBpZiAoZGlzcG9zZSA9PT0gdW5kZWZpbmVkKSBpbnZhbGlkYXRlSW5zdGFuY2UoY2hpbGQpO1xufVxuZnVuY3Rpb24gc2V0RmliZXJSZWYoZmliZXIsIHB1YmxpY0luc3RhbmNlKSB7XG4gIGZvciAoY29uc3QgX2ZpYmVyIG9mIFtmaWJlciwgZmliZXIuYWx0ZXJuYXRlXSkge1xuICAgIGlmIChfZmliZXIgIT09IG51bGwpIHtcbiAgICAgIGlmICh0eXBlb2YgX2ZpYmVyLnJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBfZmliZXIucmVmQ2xlYW51cCA9PSBudWxsID8gdm9pZCAwIDogX2ZpYmVyLnJlZkNsZWFudXAoKTtcbiAgICAgICAgY29uc3QgY2xlYW51cCA9IF9maWJlci5yZWYocHVibGljSW5zdGFuY2UpO1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFudXAgPT09ICdmdW5jdGlvbicpIF9maWJlci5yZWZDbGVhbnVwID0gY2xlYW51cDtcbiAgICAgIH0gZWxzZSBpZiAoX2ZpYmVyLnJlZikge1xuICAgICAgICBfZmliZXIucmVmLmN1cnJlbnQgPSBwdWJsaWNJbnN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmNvbnN0IHJlY29uc3RydWN0ZWQgPSBbXTtcbmZ1bmN0aW9uIHN3YXBJbnN0YW5jZXMoKSB7XG4gIC8vIERldGFjaCBpbnN0YW5jZVxuICBmb3IgKGNvbnN0IFtpbnN0YW5jZV0gb2YgcmVjb25zdHJ1Y3RlZCkge1xuICAgIGNvbnN0IHBhcmVudCA9IGluc3RhbmNlLnBhcmVudDtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBpZiAoaW5zdGFuY2UucHJvcHMuYXR0YWNoKSB7XG4gICAgICAgIGRldGFjaChwYXJlbnQsIGluc3RhbmNlKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QzRChpbnN0YW5jZS5vYmplY3QpICYmIGlzT2JqZWN0M0QocGFyZW50Lm9iamVjdCkpIHtcbiAgICAgICAgcGFyZW50Lm9iamVjdC5yZW1vdmUoaW5zdGFuY2Uub2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgaW5zdGFuY2UuY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGNoaWxkLnByb3BzLmF0dGFjaCkge1xuICAgICAgICAgIGRldGFjaChpbnN0YW5jZSwgY2hpbGQpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0M0QoY2hpbGQub2JqZWN0KSAmJiBpc09iamVjdDNEKGluc3RhbmNlLm9iamVjdCkpIHtcbiAgICAgICAgICBpbnN0YW5jZS5vYmplY3QucmVtb3ZlKGNoaWxkLm9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgb2xkIGluc3RhbmNlIGlzIGhpZGRlbiwgd2UgbmVlZCB0byB1bmhpZGUgaXQuXG4gICAgLy8gUmVhY3QgYXNzdW1lcyBpdCBjYW4gZGlzY2FyZCBpbnN0YW5jZXMgc2luY2UgdGhleSdyZSBwdXJlIGZvciBET00uXG4gICAgLy8gVGhpcyBpc24ndCB0cnVlIGZvciB1cyBzaW5jZSBvdXIgbGlmZXRpbWVzIGFyZSBpbXB1cmUgYW5kIGxvbmdsaXZpbmcuXG4gICAgLy8gU28sIHdlIG1hbnVhbGx5IGNoZWNrIGlmIGFuIGluc3RhbmNlIHdhcyBoaWRkZW4gYW5kIHVuaGlkZSBpdC5cbiAgICBpZiAoaW5zdGFuY2UuaXNIaWRkZW4pIHVuaGlkZUluc3RhbmNlKGluc3RhbmNlKTtcblxuICAgIC8vIERpc3Bvc2Ugb2Ygb2xkIG9iamVjdCBpZiBhYmxlXG4gICAgaWYgKGluc3RhbmNlLm9iamVjdC5fX3IzZikgZGVsZXRlIGluc3RhbmNlLm9iamVjdC5fX3IzZjtcbiAgICBpZiAoaW5zdGFuY2UudHlwZSAhPT0gJ3ByaW1pdGl2ZScpIGRpc3Bvc2VPbklkbGUoaW5zdGFuY2Uub2JqZWN0KTtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBpbnN0YW5jZVxuICBmb3IgKGNvbnN0IFtpbnN0YW5jZSwgcHJvcHMsIGZpYmVyXSBvZiByZWNvbnN0cnVjdGVkKSB7XG4gICAgaW5zdGFuY2UucHJvcHMgPSBwcm9wcztcbiAgICBjb25zdCBwYXJlbnQgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgdmFyIF9pbnN0YW5jZSRwcm9wcyRvYmplYywgX2luc3RhbmNlJHByb3BzJGFyZ3M7XG4gICAgICAvLyBHZXQgdGFyZ2V0IGZyb20gY2F0YWxvZ3VlXG4gICAgICBjb25zdCB0YXJnZXQgPSBjYXRhbG9ndWVbdG9QYXNjYWxDYXNlKGluc3RhbmNlLnR5cGUpXTtcblxuICAgICAgLy8gQ3JlYXRlIG9iamVjdFxuICAgICAgaW5zdGFuY2Uub2JqZWN0ID0gKF9pbnN0YW5jZSRwcm9wcyRvYmplYyA9IGluc3RhbmNlLnByb3BzLm9iamVjdCkgIT0gbnVsbCA/IF9pbnN0YW5jZSRwcm9wcyRvYmplYyA6IG5ldyB0YXJnZXQoLi4uKChfaW5zdGFuY2UkcHJvcHMkYXJncyA9IGluc3RhbmNlLnByb3BzLmFyZ3MpICE9IG51bGwgPyBfaW5zdGFuY2UkcHJvcHMkYXJncyA6IFtdKSk7XG4gICAgICBpbnN0YW5jZS5vYmplY3QuX19yM2YgPSBpbnN0YW5jZTtcbiAgICAgIHNldEZpYmVyUmVmKGZpYmVyLCBpbnN0YW5jZS5vYmplY3QpO1xuXG4gICAgICAvLyBTZXQgaW5pdGlhbCBwcm9wc1xuICAgICAgYXBwbHlQcm9wcyhpbnN0YW5jZS5vYmplY3QsIGluc3RhbmNlLnByb3BzKTtcbiAgICAgIGlmIChpbnN0YW5jZS5wcm9wcy5hdHRhY2gpIHtcbiAgICAgICAgYXR0YWNoKHBhcmVudCwgaW5zdGFuY2UpO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdDNEKGluc3RhbmNlLm9iamVjdCkgJiYgaXNPYmplY3QzRChwYXJlbnQub2JqZWN0KSkge1xuICAgICAgICBwYXJlbnQub2JqZWN0LmFkZChpbnN0YW5jZS5vYmplY3QpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBpbnN0YW5jZS5jaGlsZHJlbikge1xuICAgICAgICBpZiAoY2hpbGQucHJvcHMuYXR0YWNoKSB7XG4gICAgICAgICAgYXR0YWNoKGluc3RhbmNlLCBjaGlsZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QzRChjaGlsZC5vYmplY3QpICYmIGlzT2JqZWN0M0QoaW5zdGFuY2Uub2JqZWN0KSkge1xuICAgICAgICAgIGluc3RhbmNlLm9iamVjdC5hZGQoY2hpbGQub2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUcmVlIHdhcyB1cGRhdGVkLCByZXF1ZXN0IGEgZnJhbWVcbiAgICAgIGludmFsaWRhdGVJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgfVxuICB9XG4gIHJlY29uc3RydWN0ZWQubGVuZ3RoID0gMDtcbn1cblxuLy8gRG9uJ3QgaGFuZGxlIHRleHQgaW5zdGFuY2VzLCBtYWtlIGl0IG5vLW9wXG5jb25zdCBoYW5kbGVUZXh0SW5zdGFuY2UgPSAoKSA9PiB7fTtcbmNvbnN0IE5PX0NPTlRFWFQgPSB7fTtcbmxldCBjdXJyZW50VXBkYXRlUHJpb3JpdHkgPSBOb0V2ZW50UHJpb3JpdHk7XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL21haW4vcGFja2FnZXMvcmVhY3QtcmVjb25jaWxlci9zcmMvUmVhY3RGaWJlckZsYWdzLmpzXG5jb25zdCBOb0ZsYWdzID0gMDtcbmNvbnN0IFVwZGF0ZSA9IDQ7XG5jb25zdCByZWNvbmNpbGVyID0gLyogQF9fUFVSRV9fICovY3JlYXRlUmVjb25jaWxlcih7XG4gIGlzUHJpbWFyeVJlbmRlcmVyOiBmYWxzZSxcbiAgd2FybnNJZk5vdEFjdGluZzogZmFsc2UsXG4gIHN1cHBvcnRzTXV0YXRpb246IHRydWUsXG4gIHN1cHBvcnRzUGVyc2lzdGVuY2U6IGZhbHNlLFxuICBzdXBwb3J0c0h5ZHJhdGlvbjogZmFsc2UsXG4gIGNyZWF0ZUluc3RhbmNlLFxuICByZW1vdmVDaGlsZCxcbiAgYXBwZW5kQ2hpbGQsXG4gIGFwcGVuZEluaXRpYWxDaGlsZDogYXBwZW5kQ2hpbGQsXG4gIGluc2VydEJlZm9yZSxcbiAgYXBwZW5kQ2hpbGRUb0NvbnRhaW5lcihjb250YWluZXIsIGNoaWxkKSB7XG4gICAgY29uc3Qgc2NlbmUgPSBjb250YWluZXIuZ2V0U3RhdGUoKS5zY2VuZS5fX3IzZjtcbiAgICBpZiAoIWNoaWxkIHx8ICFzY2VuZSkgcmV0dXJuO1xuICAgIGFwcGVuZENoaWxkKHNjZW5lLCBjaGlsZCk7XG4gIH0sXG4gIHJlbW92ZUNoaWxkRnJvbUNvbnRhaW5lcihjb250YWluZXIsIGNoaWxkKSB7XG4gICAgY29uc3Qgc2NlbmUgPSBjb250YWluZXIuZ2V0U3RhdGUoKS5zY2VuZS5fX3IzZjtcbiAgICBpZiAoIWNoaWxkIHx8ICFzY2VuZSkgcmV0dXJuO1xuICAgIHJlbW92ZUNoaWxkKHNjZW5lLCBjaGlsZCk7XG4gIH0sXG4gIGluc2VydEluQ29udGFpbmVyQmVmb3JlKGNvbnRhaW5lciwgY2hpbGQsIGJlZm9yZUNoaWxkKSB7XG4gICAgY29uc3Qgc2NlbmUgPSBjb250YWluZXIuZ2V0U3RhdGUoKS5zY2VuZS5fX3IzZjtcbiAgICBpZiAoIWNoaWxkIHx8ICFiZWZvcmVDaGlsZCB8fCAhc2NlbmUpIHJldHVybjtcbiAgICBpbnNlcnRCZWZvcmUoc2NlbmUsIGNoaWxkLCBiZWZvcmVDaGlsZCk7XG4gIH0sXG4gIGdldFJvb3RIb3N0Q29udGV4dDogKCkgPT4gTk9fQ09OVEVYVCxcbiAgZ2V0Q2hpbGRIb3N0Q29udGV4dDogKCkgPT4gTk9fQ09OVEVYVCxcbiAgY29tbWl0VXBkYXRlKGluc3RhbmNlLCB0eXBlLCBvbGRQcm9wcywgbmV3UHJvcHMsIGZpYmVyKSB7XG4gICAgdmFyIF9uZXdQcm9wcyRhcmdzLCBfb2xkUHJvcHMkYXJncywgX25ld1Byb3BzJGFyZ3MyO1xuICAgIHZhbGlkYXRlSW5zdGFuY2UodHlwZSwgbmV3UHJvcHMpO1xuICAgIGxldCByZWNvbnN0cnVjdCA9IGZhbHNlO1xuXG4gICAgLy8gUmVjb25zdHJ1Y3QgcHJpbWl0aXZlcyBpZiBvYmplY3QgcHJvcCBjaGFuZ2VzXG4gICAgaWYgKGluc3RhbmNlLnR5cGUgPT09ICdwcmltaXRpdmUnICYmIG9sZFByb3BzLm9iamVjdCAhPT0gbmV3UHJvcHMub2JqZWN0KSByZWNvbnN0cnVjdCA9IHRydWU7XG4gICAgLy8gUmVjb25zdHJ1Y3QgaW5zdGFuY2UgaWYgYXJncyB3ZXJlIGFkZGVkIG9yIHJlbW92ZWRcbiAgICBlbHNlIGlmICgoKF9uZXdQcm9wcyRhcmdzID0gbmV3UHJvcHMuYXJncykgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXdQcm9wcyRhcmdzLmxlbmd0aCkgIT09ICgoX29sZFByb3BzJGFyZ3MgPSBvbGRQcm9wcy5hcmdzKSA9PSBudWxsID8gdm9pZCAwIDogX29sZFByb3BzJGFyZ3MubGVuZ3RoKSkgcmVjb25zdHJ1Y3QgPSB0cnVlO1xuICAgIC8vIFJlY29uc3RydWN0IGluc3RhbmNlIGlmIGFyZ3Mgd2VyZSBjaGFuZ2VkXG4gICAgZWxzZSBpZiAoKF9uZXdQcm9wcyRhcmdzMiA9IG5ld1Byb3BzLmFyZ3MpICE9IG51bGwgJiYgX25ld1Byb3BzJGFyZ3MyLnNvbWUoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgdmFyIF9vbGRQcm9wcyRhcmdzMjtcbiAgICAgIHJldHVybiB2YWx1ZSAhPT0gKChfb2xkUHJvcHMkYXJnczIgPSBvbGRQcm9wcy5hcmdzKSA9PSBudWxsID8gdm9pZCAwIDogX29sZFByb3BzJGFyZ3MyW2luZGV4XSk7XG4gICAgfSkpIHJlY29uc3RydWN0ID0gdHJ1ZTtcblxuICAgIC8vIFJlY29uc3RydWN0IHdoZW4gYXJncyBvciA8cHJpbWl0aXZlIG9iamVjdD17Li4ufSBoYXZlIGNoYW5nZXNcbiAgICBpZiAocmVjb25zdHJ1Y3QpIHtcbiAgICAgIHJlY29uc3RydWN0ZWQucHVzaChbaW5zdGFuY2UsIHtcbiAgICAgICAgLi4ubmV3UHJvcHNcbiAgICAgIH0sIGZpYmVyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBhIGRpZmYtc2V0LCBmbGFnIGlmIHRoZXJlIGFyZSBhbnkgY2hhbmdlc1xuICAgICAgY29uc3QgY2hhbmdlZFByb3BzID0gZGlmZlByb3BzKGluc3RhbmNlLCBuZXdQcm9wcyk7XG4gICAgICBpZiAoT2JqZWN0LmtleXMoY2hhbmdlZFByb3BzKS5sZW5ndGgpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihpbnN0YW5jZS5wcm9wcywgY2hhbmdlZFByb3BzKTtcbiAgICAgICAgYXBwbHlQcm9wcyhpbnN0YW5jZS5vYmplY3QsIGNoYW5nZWRQcm9wcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmx1c2ggcmVjb25zdHJ1Y3RlZCBzaWJsaW5ncyB3aGVuIHdlIGhpdCB0aGUgbGFzdCB1cGRhdGVkIGNoaWxkIGluIGEgc2VxdWVuY2VcbiAgICBjb25zdCBpc1RhaWxTaWJsaW5nID0gZmliZXIuc2libGluZyA9PT0gbnVsbCB8fCAoZmliZXIuZmxhZ3MgJiBVcGRhdGUpID09PSBOb0ZsYWdzO1xuICAgIGlmIChpc1RhaWxTaWJsaW5nKSBzd2FwSW5zdGFuY2VzKCk7XG4gIH0sXG4gIGZpbmFsaXplSW5pdGlhbENoaWxkcmVuOiAoKSA9PiBmYWxzZSxcbiAgY29tbWl0TW91bnQoKSB7fSxcbiAgZ2V0UHVibGljSW5zdGFuY2U6IGluc3RhbmNlID0+IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5vYmplY3QsXG4gIHByZXBhcmVGb3JDb21taXQ6ICgpID0+IG51bGwsXG4gIHByZXBhcmVQb3J0YWxNb3VudDogY29udGFpbmVyID0+IHByZXBhcmUoY29udGFpbmVyLmdldFN0YXRlKCkuc2NlbmUsIGNvbnRhaW5lciwgJycsIHt9KSxcbiAgcmVzZXRBZnRlckNvbW1pdDogKCkgPT4ge30sXG4gIHNob3VsZFNldFRleHRDb250ZW50OiAoKSA9PiBmYWxzZSxcbiAgY2xlYXJDb250YWluZXI6ICgpID0+IGZhbHNlLFxuICBoaWRlSW5zdGFuY2UsXG4gIHVuaGlkZUluc3RhbmNlLFxuICBjcmVhdGVUZXh0SW5zdGFuY2U6IGhhbmRsZVRleHRJbnN0YW5jZSxcbiAgaGlkZVRleHRJbnN0YW5jZTogaGFuZGxlVGV4dEluc3RhbmNlLFxuICB1bmhpZGVUZXh0SW5zdGFuY2U6IGhhbmRsZVRleHRJbnN0YW5jZSxcbiAgc2NoZWR1bGVUaW1lb3V0OiB0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJyA/IHNldFRpbWVvdXQgOiB1bmRlZmluZWQsXG4gIGNhbmNlbFRpbWVvdXQ6IHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicgPyBjbGVhclRpbWVvdXQgOiB1bmRlZmluZWQsXG4gIG5vVGltZW91dDogLTEsXG4gIGdldEluc3RhbmNlRnJvbU5vZGU6ICgpID0+IG51bGwsXG4gIGJlZm9yZUFjdGl2ZUluc3RhbmNlQmx1cigpIHt9LFxuICBhZnRlckFjdGl2ZUluc3RhbmNlQmx1cigpIHt9LFxuICBkZXRhY2hEZWxldGVkSW5zdGFuY2UoKSB7fSxcbiAgcHJlcGFyZVNjb3BlVXBkYXRlKCkge30sXG4gIGdldEluc3RhbmNlRnJvbVNjb3BlOiAoKSA9PiBudWxsLFxuICBzaG91bGRBdHRlbXB0RWFnZXJUcmFuc2l0aW9uOiAoKSA9PiBmYWxzZSxcbiAgdHJhY2tTY2hlZHVsZXJFdmVudDogKCkgPT4ge30sXG4gIHJlc29sdmVFdmVudFR5cGU6ICgpID0+IG51bGwsXG4gIHJlc29sdmVFdmVudFRpbWVTdGFtcDogKCkgPT4gLTEuMSxcbiAgcmVxdWVzdFBvc3RQYWludENhbGxiYWNrKCkge30sXG4gIG1heVN1c3BlbmRDb21taXQ6ICgpID0+IGZhbHNlLFxuICBwcmVsb2FkSW5zdGFuY2U6ICgpID0+IHRydWUsXG4gIC8vIHRydWUgaW5kaWNhdGVzIGFscmVhZHkgbG9hZGVkXG4gIHN0YXJ0U3VzcGVuZGluZ0NvbW1pdCgpIHt9LFxuICBzdXNwZW5kSW5zdGFuY2UoKSB7fSxcbiAgd2FpdEZvckNvbW1pdFRvQmVSZWFkeTogKCkgPT4gbnVsbCxcbiAgTm90UGVuZGluZ1RyYW5zaXRpb246IG51bGwsXG4gIEhvc3RUcmFuc2l0aW9uQ29udGV4dDogLyogQF9fUFVSRV9fICovUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKSxcbiAgc2V0Q3VycmVudFVwZGF0ZVByaW9yaXR5KG5ld1ByaW9yaXR5KSB7XG4gICAgY3VycmVudFVwZGF0ZVByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gIH0sXG4gIGdldEN1cnJlbnRVcGRhdGVQcmlvcml0eSgpIHtcbiAgICByZXR1cm4gY3VycmVudFVwZGF0ZVByaW9yaXR5O1xuICB9LFxuICByZXNvbHZlVXBkYXRlUHJpb3JpdHkoKSB7XG4gICAgdmFyIF93aW5kb3ckZXZlbnQ7XG4gICAgaWYgKGN1cnJlbnRVcGRhdGVQcmlvcml0eSAhPT0gTm9FdmVudFByaW9yaXR5KSByZXR1cm4gY3VycmVudFVwZGF0ZVByaW9yaXR5O1xuICAgIHN3aXRjaCAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfd2luZG93JGV2ZW50ID0gd2luZG93LmV2ZW50KSA9PSBudWxsID8gdm9pZCAwIDogX3dpbmRvdyRldmVudC50eXBlKSkge1xuICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgY2FzZSAnY29udGV4dG1lbnUnOlxuICAgICAgY2FzZSAnZGJsY2xpY2snOlxuICAgICAgY2FzZSAncG9pbnRlcmNhbmNlbCc6XG4gICAgICBjYXNlICdwb2ludGVyZG93bic6XG4gICAgICBjYXNlICdwb2ludGVydXAnOlxuICAgICAgICByZXR1cm4gRGlzY3JldGVFdmVudFByaW9yaXR5O1xuICAgICAgY2FzZSAncG9pbnRlcm1vdmUnOlxuICAgICAgY2FzZSAncG9pbnRlcm91dCc6XG4gICAgICBjYXNlICdwb2ludGVyb3Zlcic6XG4gICAgICBjYXNlICdwb2ludGVyZW50ZXInOlxuICAgICAgY2FzZSAncG9pbnRlcmxlYXZlJzpcbiAgICAgIGNhc2UgJ3doZWVsJzpcbiAgICAgICAgcmV0dXJuIENvbnRpbnVvdXNFdmVudFByaW9yaXR5O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIERlZmF1bHRFdmVudFByaW9yaXR5O1xuICAgIH1cbiAgfSxcbiAgcmVzZXRGb3JtSW5zdGFuY2UoKSB7fVxufSk7XG5cbmNvbnN0IF9yb290cyA9IG5ldyBNYXAoKTtcbmNvbnN0IHNoYWxsb3dMb29zZSA9IHtcbiAgb2JqZWN0czogJ3NoYWxsb3cnLFxuICBzdHJpY3Q6IGZhbHNlXG59O1xuZnVuY3Rpb24gY29tcHV0ZUluaXRpYWxTaXplKGNhbnZhcywgc2l6ZSkge1xuICBpZiAoIXNpemUgJiYgdHlwZW9mIEhUTUxDYW52YXNFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCAmJiBjYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgdG9wLFxuICAgICAgbGVmdFxuICAgIH0gPSBjYW52YXMucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICB0b3AsXG4gICAgICBsZWZ0XG4gICAgfTtcbiAgfSBlbHNlIGlmICghc2l6ZSAmJiB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJyAmJiBjYW52YXMgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IGNhbnZhcy53aWR0aCxcbiAgICAgIGhlaWdodDogY2FudmFzLmhlaWdodCxcbiAgICAgIHRvcDogMCxcbiAgICAgIGxlZnQ6IDBcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIC4uLnNpemVcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJvb3QoY2FudmFzKSB7XG4gIC8vIENoZWNrIGFnYWluc3QgbWlzdGFrZW4gdXNlIG9mIGNyZWF0ZVJvb3RcbiAgY29uc3QgcHJldlJvb3QgPSBfcm9vdHMuZ2V0KGNhbnZhcyk7XG4gIGNvbnN0IHByZXZGaWJlciA9IHByZXZSb290ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Um9vdC5maWJlcjtcbiAgY29uc3QgcHJldlN0b3JlID0gcHJldlJvb3QgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZSb290LnN0b3JlO1xuICBpZiAocHJldlJvb3QpIGNvbnNvbGUud2FybignUjNGLmNyZWF0ZVJvb3Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UhJyk7XG5cbiAgLy8gUmVwb3J0IHdoZW4gYW4gZXJyb3Igd2FzIGRldGVjdGVkIGluIGEgcHJldmlvdXMgcmVuZGVyXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvcmVhY3QtdGhyZWUtZmliZXIvcHVsbC8yMjYxXG4gIGNvbnN0IGxvZ1JlY292ZXJhYmxlRXJyb3IgPSB0eXBlb2YgcmVwb3J0RXJyb3IgPT09ICdmdW5jdGlvbicgP1xuICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMsIHJlcG9ydEVycm9yIHdpbGwgZGlzcGF0Y2ggYW4gZXJyb3IgZXZlbnQsXG4gIC8vIGVtdWxhdGluZyBhbiB1bmNhdWdodCBKYXZhU2NyaXB0IGVycm9yLlxuICByZXBvcnRFcnJvciA6XG4gIC8vIEluIG9sZGVyIGJyb3dzZXJzIGFuZCB0ZXN0IGVudmlyb25tZW50cywgZmFsbGJhY2sgdG8gY29uc29sZS5lcnJvci5cbiAgY29uc29sZS5lcnJvcjtcblxuICAvLyBDcmVhdGUgc3RvcmVcbiAgY29uc3Qgc3RvcmUgPSBwcmV2U3RvcmUgfHwgY3JlYXRlU3RvcmUoaW52YWxpZGF0ZSwgYWR2YW5jZSk7XG4gIC8vIENyZWF0ZSByZW5kZXJlclxuICBjb25zdCBmaWJlciA9IHByZXZGaWJlciB8fCByZWNvbmNpbGVyLmNyZWF0ZUNvbnRhaW5lcihzdG9yZSxcbiAgLy8gY29udGFpbmVyXG4gIENvbmN1cnJlbnRSb290LFxuICAvLyB0YWdcbiAgbnVsbCxcbiAgLy8gaHlkcmF0aW9uIGNhbGxiYWNrc1xuICBmYWxzZSxcbiAgLy8gaXNTdHJpY3RNb2RlXG4gIG51bGwsXG4gIC8vIGNvbmN1cnJlbnRVcGRhdGVzQnlEZWZhdWx0T3ZlcnJpZGVcbiAgJycsXG4gIC8vIGlkZW50aWZpZXJQcmVmaXhcbiAgbG9nUmVjb3ZlcmFibGVFcnJvcixcbiAgLy8gb25VbmNhdWdodEVycm9yXG4gIGxvZ1JlY292ZXJhYmxlRXJyb3IsXG4gIC8vIG9uQ2F1Z2h0RXJyb3JcbiAgbG9nUmVjb3ZlcmFibGVFcnJvcixcbiAgLy8gb25SZWNvdmVyYWJsZUVycm9yXG4gIG51bGwgLy8gdHJhbnNpdGlvbkNhbGxiYWNrc1xuICApO1xuICAvLyBNYXAgaXRcbiAgaWYgKCFwcmV2Um9vdCkgX3Jvb3RzLnNldChjYW52YXMsIHtcbiAgICBmaWJlcixcbiAgICBzdG9yZVxuICB9KTtcblxuICAvLyBMb2NhbHNcbiAgbGV0IG9uQ3JlYXRlZDtcbiAgbGV0IGxhc3RDYW1lcmE7XG4gIGxldCBjb25maWd1cmVkID0gZmFsc2U7XG4gIGxldCBwZW5kaW5nID0gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBjb25maWd1cmUocHJvcHMgPSB7fSkge1xuICAgICAgbGV0IHJlc29sdmU7XG4gICAgICBwZW5kaW5nID0gbmV3IFByb21pc2UoX3Jlc29sdmUgPT4gcmVzb2x2ZSA9IF9yZXNvbHZlKTtcbiAgICAgIGxldCB7XG4gICAgICAgIGdsOiBnbENvbmZpZyxcbiAgICAgICAgc2l6ZTogcHJvcHNTaXplLFxuICAgICAgICBzY2VuZTogc2NlbmVPcHRpb25zLFxuICAgICAgICBldmVudHMsXG4gICAgICAgIG9uQ3JlYXRlZDogb25DcmVhdGVkQ2FsbGJhY2ssXG4gICAgICAgIHNoYWRvd3MgPSBmYWxzZSxcbiAgICAgICAgbGluZWFyID0gZmFsc2UsXG4gICAgICAgIGZsYXQgPSBmYWxzZSxcbiAgICAgICAgbGVnYWN5ID0gZmFsc2UsXG4gICAgICAgIG9ydGhvZ3JhcGhpYyA9IGZhbHNlLFxuICAgICAgICBmcmFtZWxvb3AgPSAnYWx3YXlzJyxcbiAgICAgICAgZHByID0gWzEsIDJdLFxuICAgICAgICBwZXJmb3JtYW5jZSxcbiAgICAgICAgcmF5Y2FzdGVyOiByYXljYXN0T3B0aW9ucyxcbiAgICAgICAgY2FtZXJhOiBjYW1lcmFPcHRpb25zLFxuICAgICAgICBvblBvaW50ZXJNaXNzZWRcbiAgICAgIH0gPSBwcm9wcztcbiAgICAgIGxldCBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgIC8vIFNldCB1cCByZW5kZXJlciAob25lIHRpbWUgb25seSEpXG4gICAgICBsZXQgZ2wgPSBzdGF0ZS5nbDtcbiAgICAgIGlmICghc3RhdGUuZ2wpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICAgIGNhbnZhczogY2FudmFzLFxuICAgICAgICAgIHBvd2VyUHJlZmVyZW5jZTogJ2hpZ2gtcGVyZm9ybWFuY2UnLFxuICAgICAgICAgIGFudGlhbGlhczogdHJ1ZSxcbiAgICAgICAgICBhbHBoYTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjdXN0b21SZW5kZXJlciA9IHR5cGVvZiBnbENvbmZpZyA9PT0gJ2Z1bmN0aW9uJyA/IGF3YWl0IGdsQ29uZmlnKGRlZmF1bHRQcm9wcykgOiBnbENvbmZpZztcbiAgICAgICAgaWYgKGlzUmVuZGVyZXIoY3VzdG9tUmVuZGVyZXIpKSB7XG4gICAgICAgICAgZ2wgPSBjdXN0b21SZW5kZXJlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnbCA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgICAgIC4uLmdsQ29uZmlnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuc2V0KHtcbiAgICAgICAgICBnbFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHVwIHJheWNhc3RlciAob25lIHRpbWUgb25seSEpXG4gICAgICBsZXQgcmF5Y2FzdGVyID0gc3RhdGUucmF5Y2FzdGVyO1xuICAgICAgaWYgKCFyYXljYXN0ZXIpIHN0YXRlLnNldCh7XG4gICAgICAgIHJheWNhc3RlcjogcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpXG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0IHJheWNhc3RlciBvcHRpb25zXG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfSA9IHJheWNhc3RPcHRpb25zIHx8IHt9O1xuICAgICAgaWYgKCFpcy5lcXUob3B0aW9ucywgcmF5Y2FzdGVyLCBzaGFsbG93TG9vc2UpKSBhcHBseVByb3BzKHJheWNhc3Rlciwge1xuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9KTtcbiAgICAgIGlmICghaXMuZXF1KHBhcmFtcywgcmF5Y2FzdGVyLnBhcmFtcywgc2hhbGxvd0xvb3NlKSkgYXBwbHlQcm9wcyhyYXljYXN0ZXIsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgLi4ucmF5Y2FzdGVyLnBhcmFtcyxcbiAgICAgICAgICAuLi5wYXJhbXNcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IGNhbWVyYSwgZG9uJ3Qgb3ZlcndyaXRlIGFueSB1c2VyLXNldCBzdGF0ZVxuICAgICAgaWYgKCFzdGF0ZS5jYW1lcmEgfHwgc3RhdGUuY2FtZXJhID09PSBsYXN0Q2FtZXJhICYmICFpcy5lcXUobGFzdENhbWVyYSwgY2FtZXJhT3B0aW9ucywgc2hhbGxvd0xvb3NlKSkge1xuICAgICAgICBsYXN0Q2FtZXJhID0gY2FtZXJhT3B0aW9ucztcbiAgICAgICAgY29uc3QgaXNDYW1lcmEgPSBjYW1lcmFPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBjYW1lcmFPcHRpb25zLmlzQ2FtZXJhO1xuICAgICAgICBjb25zdCBjYW1lcmEgPSBpc0NhbWVyYSA/IGNhbWVyYU9wdGlvbnMgOiBvcnRob2dyYXBoaWMgPyBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKDAsIDAsIDAsIDAsIDAuMSwgMTAwMCkgOiBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIDAsIDAuMSwgMTAwMCk7XG4gICAgICAgIGlmICghaXNDYW1lcmEpIHtcbiAgICAgICAgICBjYW1lcmEucG9zaXRpb24ueiA9IDU7XG4gICAgICAgICAgaWYgKGNhbWVyYU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGFwcGx5UHJvcHMoY2FtZXJhLCBjYW1lcmFPcHRpb25zKTtcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHVzZXItZGVmaW5lZCBmcnVzdHVtIGlmIHBvc3NpYmxlXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcG1uZHJzL3JlYWN0LXRocmVlLWZpYmVyL2lzc3Vlcy8zMTYwXG4gICAgICAgICAgICBpZiAoIWNhbWVyYS5tYW51YWwpIHtcbiAgICAgICAgICAgICAgaWYgKCdhc3BlY3QnIGluIGNhbWVyYU9wdGlvbnMgfHwgJ2xlZnQnIGluIGNhbWVyYU9wdGlvbnMgfHwgJ3JpZ2h0JyBpbiBjYW1lcmFPcHRpb25zIHx8ICdib3R0b20nIGluIGNhbWVyYU9wdGlvbnMgfHwgJ3RvcCcgaW4gY2FtZXJhT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGNhbWVyYS5tYW51YWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQWx3YXlzIGxvb2sgYXQgY2VudGVyIGJ5IGRlZmF1bHRcbiAgICAgICAgICBpZiAoIXN0YXRlLmNhbWVyYSAmJiAhKGNhbWVyYU9wdGlvbnMgIT0gbnVsbCAmJiBjYW1lcmFPcHRpb25zLnJvdGF0aW9uKSkgY2FtZXJhLmxvb2tBdCgwLCAwLCAwKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5zZXQoe1xuICAgICAgICAgIGNhbWVyYVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDb25maWd1cmUgcmF5Y2FzdGVyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvcmVhY3QteHIvaXNzdWVzLzMwMFxuICAgICAgICByYXljYXN0ZXIuY2FtZXJhID0gY2FtZXJhO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdXAgc2NlbmUgKG9uZSB0aW1lIG9ubHkhKVxuICAgICAgaWYgKCFzdGF0ZS5zY2VuZSkge1xuICAgICAgICBsZXQgc2NlbmU7XG4gICAgICAgIGlmIChzY2VuZU9wdGlvbnMgIT0gbnVsbCAmJiBzY2VuZU9wdGlvbnMuaXNTY2VuZSkge1xuICAgICAgICAgIHNjZW5lID0gc2NlbmVPcHRpb25zO1xuICAgICAgICAgIHByZXBhcmUoc2NlbmUsIHN0b3JlLCAnJywge30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gICAgICAgICAgcHJlcGFyZShzY2VuZSwgc3RvcmUsICcnLCB7fSk7XG4gICAgICAgICAgaWYgKHNjZW5lT3B0aW9ucykgYXBwbHlQcm9wcyhzY2VuZSwgc2NlbmVPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5zZXQoe1xuICAgICAgICAgIHNjZW5lXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSBldmVudHMgaW50ZXJuYWxseVxuICAgICAgaWYgKGV2ZW50cyAmJiAhc3RhdGUuZXZlbnRzLmhhbmRsZXJzKSBzdGF0ZS5zZXQoe1xuICAgICAgICBldmVudHM6IGV2ZW50cyhzdG9yZSlcbiAgICAgIH0pO1xuICAgICAgLy8gQ2hlY2sgc2l6ZSwgYWxsb3cgaXQgdG8gdGFrZSBvbiBjb250YWluZXIgYm91bmRzIGluaXRpYWxseVxuICAgICAgY29uc3Qgc2l6ZSA9IGNvbXB1dGVJbml0aWFsU2l6ZShjYW52YXMsIHByb3BzU2l6ZSk7XG4gICAgICBpZiAoIWlzLmVxdShzaXplLCBzdGF0ZS5zaXplLCBzaGFsbG93TG9vc2UpKSB7XG4gICAgICAgIHN0YXRlLnNldFNpemUoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQsIHNpemUudG9wLCBzaXplLmxlZnQpO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgcGl4ZWxyYXRpb1xuICAgICAgaWYgKGRwciAmJiBzdGF0ZS52aWV3cG9ydC5kcHIgIT09IGNhbGN1bGF0ZURwcihkcHIpKSBzdGF0ZS5zZXREcHIoZHByKTtcbiAgICAgIC8vIENoZWNrIGZyYW1lbG9vcFxuICAgICAgaWYgKHN0YXRlLmZyYW1lbG9vcCAhPT0gZnJhbWVsb29wKSBzdGF0ZS5zZXRGcmFtZWxvb3AoZnJhbWVsb29wKTtcbiAgICAgIC8vIENoZWNrIHBvaW50ZXIgbWlzc2VkXG4gICAgICBpZiAoIXN0YXRlLm9uUG9pbnRlck1pc3NlZCkgc3RhdGUuc2V0KHtcbiAgICAgICAgb25Qb2ludGVyTWlzc2VkXG4gICAgICB9KTtcbiAgICAgIC8vIENoZWNrIHBlcmZvcm1hbmNlXG4gICAgICBpZiAocGVyZm9ybWFuY2UgJiYgIWlzLmVxdShwZXJmb3JtYW5jZSwgc3RhdGUucGVyZm9ybWFuY2UsIHNoYWxsb3dMb29zZSkpIHN0YXRlLnNldChzdGF0ZSA9PiAoe1xuICAgICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICAgIC4uLnN0YXRlLnBlcmZvcm1hbmNlLFxuICAgICAgICAgIC4uLnBlcmZvcm1hbmNlXG4gICAgICAgIH1cbiAgICAgIH0pKTtcblxuICAgICAgLy8gU2V0IHVwIFhSIChvbmUgdGltZSBvbmx5ISlcbiAgICAgIGlmICghc3RhdGUueHIpIHtcbiAgICAgICAgdmFyIF9nbCR4cjtcbiAgICAgICAgLy8gSGFuZGxlIGZyYW1lIGJlaGF2aW9yIGluIFdlYlhSXG4gICAgICAgIGNvbnN0IGhhbmRsZVhSRnJhbWUgPSAodGltZXN0YW1wLCBmcmFtZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICBpZiAoc3RhdGUuZnJhbWVsb29wID09PSAnbmV2ZXInKSByZXR1cm47XG4gICAgICAgICAgYWR2YW5jZSh0aW1lc3RhbXAsIHRydWUsIHN0YXRlLCBmcmFtZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVG9nZ2xlIHJlbmRlciBzd2l0Y2hpbmcgb24gc2Vzc2lvblxuICAgICAgICBjb25zdCBoYW5kbGVTZXNzaW9uQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICBzdGF0ZS5nbC54ci5lbmFibGVkID0gc3RhdGUuZ2wueHIuaXNQcmVzZW50aW5nO1xuICAgICAgICAgIHN0YXRlLmdsLnhyLnNldEFuaW1hdGlvbkxvb3Aoc3RhdGUuZ2wueHIuaXNQcmVzZW50aW5nID8gaGFuZGxlWFJGcmFtZSA6IG51bGwpO1xuICAgICAgICAgIGlmICghc3RhdGUuZ2wueHIuaXNQcmVzZW50aW5nKSBpbnZhbGlkYXRlKHN0YXRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBXZWJYUiBzZXNzaW9uIG1hbmFnZXJcbiAgICAgICAgY29uc3QgeHIgPSB7XG4gICAgICAgICAgY29ubmVjdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGdsID0gc3RvcmUuZ2V0U3RhdGUoKS5nbDtcbiAgICAgICAgICAgIGdsLnhyLmFkZEV2ZW50TGlzdGVuZXIoJ3Nlc3Npb25zdGFydCcsIGhhbmRsZVNlc3Npb25DaGFuZ2UpO1xuICAgICAgICAgICAgZ2wueHIuYWRkRXZlbnRMaXN0ZW5lcignc2Vzc2lvbmVuZCcsIGhhbmRsZVNlc3Npb25DaGFuZ2UpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGdsID0gc3RvcmUuZ2V0U3RhdGUoKS5nbDtcbiAgICAgICAgICAgIGdsLnhyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Nlc3Npb25zdGFydCcsIGhhbmRsZVNlc3Npb25DaGFuZ2UpO1xuICAgICAgICAgICAgZ2wueHIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Vzc2lvbmVuZCcsIGhhbmRsZVNlc3Npb25DaGFuZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTdWJzY3JpYmUgdG8gV2ViWFIgc2Vzc2lvbiBldmVudHNcbiAgICAgICAgaWYgKHR5cGVvZiAoKF9nbCR4ciA9IGdsLnhyKSA9PSBudWxsID8gdm9pZCAwIDogX2dsJHhyLmFkZEV2ZW50TGlzdGVuZXIpID09PSAnZnVuY3Rpb24nKSB4ci5jb25uZWN0KCk7XG4gICAgICAgIHN0YXRlLnNldCh7XG4gICAgICAgICAgeHJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBzaGFkb3dtYXBcbiAgICAgIGlmIChnbC5zaGFkb3dNYXApIHtcbiAgICAgICAgY29uc3Qgb2xkRW5hYmxlZCA9IGdsLnNoYWRvd01hcC5lbmFibGVkO1xuICAgICAgICBjb25zdCBvbGRUeXBlID0gZ2wuc2hhZG93TWFwLnR5cGU7XG4gICAgICAgIGdsLnNoYWRvd01hcC5lbmFibGVkID0gISFzaGFkb3dzO1xuICAgICAgICBpZiAoaXMuYm9vKHNoYWRvd3MpKSB7XG4gICAgICAgICAgZ2wuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwO1xuICAgICAgICB9IGVsc2UgaWYgKGlzLnN0cihzaGFkb3dzKSkge1xuICAgICAgICAgIHZhciBfdHlwZXMkc2hhZG93cztcbiAgICAgICAgICBjb25zdCB0eXBlcyA9IHtcbiAgICAgICAgICAgIGJhc2ljOiBUSFJFRS5CYXNpY1NoYWRvd01hcCxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IFRIUkVFLlBDRlNoYWRvd01hcCxcbiAgICAgICAgICAgIHNvZnQ6IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXAsXG4gICAgICAgICAgICB2YXJpYW5jZTogVEhSRUUuVlNNU2hhZG93TWFwXG4gICAgICAgICAgfTtcbiAgICAgICAgICBnbC5zaGFkb3dNYXAudHlwZSA9IChfdHlwZXMkc2hhZG93cyA9IHR5cGVzW3NoYWRvd3NdKSAhPSBudWxsID8gX3R5cGVzJHNoYWRvd3MgOiBUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwO1xuICAgICAgICB9IGVsc2UgaWYgKGlzLm9iaihzaGFkb3dzKSkge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oZ2wuc2hhZG93TWFwLCBzaGFkb3dzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2xkRW5hYmxlZCAhPT0gZ2wuc2hhZG93TWFwLmVuYWJsZWQgfHwgb2xkVHlwZSAhPT0gZ2wuc2hhZG93TWFwLnR5cGUpIGdsLnNoYWRvd01hcC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBUSFJFRS5Db2xvck1hbmFnZW1lbnQuZW5hYmxlZCA9ICFsZWdhY3k7XG5cbiAgICAgIC8vIFNldCBjb2xvciBzcGFjZSBhbmQgdG9uZW1hcHBpbmcgcHJlZmVyZW5jZXNcbiAgICAgIGlmICghY29uZmlndXJlZCkge1xuICAgICAgICBnbC5vdXRwdXRDb2xvclNwYWNlID0gbGluZWFyID8gVEhSRUUuTGluZWFyU1JHQkNvbG9yU3BhY2UgOiBUSFJFRS5TUkdCQ29sb3JTcGFjZTtcbiAgICAgICAgZ2wudG9uZU1hcHBpbmcgPSBmbGF0ID8gVEhSRUUuTm9Ub25lTWFwcGluZyA6IFRIUkVFLkFDRVNGaWxtaWNUb25lTWFwcGluZztcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGNvbG9yIG1hbmFnZW1lbnQgc3RhdGVcbiAgICAgIGlmIChzdGF0ZS5sZWdhY3kgIT09IGxlZ2FjeSkgc3RhdGUuc2V0KCgpID0+ICh7XG4gICAgICAgIGxlZ2FjeVxuICAgICAgfSkpO1xuICAgICAgaWYgKHN0YXRlLmxpbmVhciAhPT0gbGluZWFyKSBzdGF0ZS5zZXQoKCkgPT4gKHtcbiAgICAgICAgbGluZWFyXG4gICAgICB9KSk7XG4gICAgICBpZiAoc3RhdGUuZmxhdCAhPT0gZmxhdCkgc3RhdGUuc2V0KCgpID0+ICh7XG4gICAgICAgIGZsYXRcbiAgICAgIH0pKTtcblxuICAgICAgLy8gU2V0IGdsIHByb3BzXG4gICAgICBpZiAoZ2xDb25maWcgJiYgIWlzLmZ1bihnbENvbmZpZykgJiYgIWlzUmVuZGVyZXIoZ2xDb25maWcpICYmICFpcy5lcXUoZ2xDb25maWcsIGdsLCBzaGFsbG93TG9vc2UpKSBhcHBseVByb3BzKGdsLCBnbENvbmZpZyk7XG5cbiAgICAgIC8vIFNldCBsb2NhbHNcbiAgICAgIG9uQ3JlYXRlZCA9IG9uQ3JlYXRlZENhbGxiYWNrO1xuICAgICAgY29uZmlndXJlZCA9IHRydWU7XG4gICAgICByZXNvbHZlKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHJlbmRlcihjaGlsZHJlbikge1xuICAgICAgLy8gVGhlIHJvb3QgaGFzIHRvIGJlIGNvbmZpZ3VyZWQgYmVmb3JlIGl0IGNhbiBiZSByZW5kZXJlZFxuICAgICAgaWYgKCFjb25maWd1cmVkICYmICFwZW5kaW5nKSB0aGlzLmNvbmZpZ3VyZSgpO1xuICAgICAgcGVuZGluZy50aGVuKCgpID0+IHtcbiAgICAgICAgcmVjb25jaWxlci51cGRhdGVDb250YWluZXIoIC8qI19fUFVSRV9fKi9qc3goUHJvdmlkZXIsIHtcbiAgICAgICAgICBzdG9yZTogc3RvcmUsXG4gICAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuLFxuICAgICAgICAgIG9uQ3JlYXRlZDogb25DcmVhdGVkLFxuICAgICAgICAgIHJvb3RFbGVtZW50OiBjYW52YXNcbiAgICAgICAgfSksIGZpYmVyLCBudWxsLCAoKSA9PiB1bmRlZmluZWQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3RvcmU7XG4gICAgfSxcbiAgICB1bm1vdW50KCkge1xuICAgICAgdW5tb3VudENvbXBvbmVudEF0Tm9kZShjYW52YXMpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIFByb3ZpZGVyKHtcbiAgc3RvcmUsXG4gIGNoaWxkcmVuLFxuICBvbkNyZWF0ZWQsXG4gIHJvb3RFbGVtZW50XG59KSB7XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAvLyBGbGFnIHRoZSBjYW52YXMgYWN0aXZlLCByZW5kZXJpbmcgd2lsbCBub3cgYmVnaW5cbiAgICBzdGF0ZS5zZXQoc3RhdGUgPT4gKHtcbiAgICAgIGludGVybmFsOiB7XG4gICAgICAgIC4uLnN0YXRlLmludGVybmFsLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgLy8gTm90aWZ5IHRoYXQgaW5pdCBpcyBjb21wbGV0ZWQsIHRoZSBzY2VuZSBncmFwaCBleGlzdHMsIGJ1dCBub3RoaW5nIGhhcyB5ZXQgcmVuZGVyZWRcbiAgICBpZiAob25DcmVhdGVkKSBvbkNyZWF0ZWQoc3RhdGUpO1xuICAgIC8vIENvbm5lY3QgZXZlbnRzIHRvIHRoZSB0YXJnZXRzIHBhcmVudCwgdGhpcyBpcyBkb25lIHRvIGVuc3VyZSBldmVudHMgYXJlIHJlZ2lzdGVyZWQgb25cbiAgICAvLyBhIHNoYXJlZCB0YXJnZXQsIGFuZCBub3Qgb24gdGhlIGNhbnZhcyBpdHNlbGZcbiAgICBpZiAoIXN0b3JlLmdldFN0YXRlKCkuZXZlbnRzLmNvbm5lY3RlZCkgc3RhdGUuZXZlbnRzLmNvbm5lY3QgPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRlLmV2ZW50cy5jb25uZWN0KHJvb3RFbGVtZW50KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goY29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBzdG9yZSxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgfSk7XG59XG5mdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50QXROb2RlKGNhbnZhcywgY2FsbGJhY2spIHtcbiAgY29uc3Qgcm9vdCA9IF9yb290cy5nZXQoY2FudmFzKTtcbiAgY29uc3QgZmliZXIgPSByb290ID09IG51bGwgPyB2b2lkIDAgOiByb290LmZpYmVyO1xuICBpZiAoZmliZXIpIHtcbiAgICBjb25zdCBzdGF0ZSA9IHJvb3QgPT0gbnVsbCA/IHZvaWQgMCA6IHJvb3Quc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBpZiAoc3RhdGUpIHN0YXRlLmludGVybmFsLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHJlY29uY2lsZXIudXBkYXRlQ29udGFpbmVyKG51bGwsIGZpYmVyLCBudWxsLCAoKSA9PiB7XG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBfc3RhdGUkZ2wsIF9zdGF0ZSRnbCRyZW5kZXJMaXN0cywgX3N0YXRlJGdsMiwgX3N0YXRlJGdsMztcbiAgICAgICAgICAgIHN0YXRlLmV2ZW50cy5kaXNjb25uZWN0ID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS5ldmVudHMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgKF9zdGF0ZSRnbCA9IHN0YXRlLmdsKSA9PSBudWxsID8gdm9pZCAwIDogKF9zdGF0ZSRnbCRyZW5kZXJMaXN0cyA9IF9zdGF0ZSRnbC5yZW5kZXJMaXN0cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9zdGF0ZSRnbCRyZW5kZXJMaXN0cy5kaXNwb3NlID09IG51bGwgPyB2b2lkIDAgOiBfc3RhdGUkZ2wkcmVuZGVyTGlzdHMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgKF9zdGF0ZSRnbDIgPSBzdGF0ZS5nbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9zdGF0ZSRnbDIuZm9yY2VDb250ZXh0TG9zcyA9PSBudWxsID8gdm9pZCAwIDogX3N0YXRlJGdsMi5mb3JjZUNvbnRleHRMb3NzKCk7XG4gICAgICAgICAgICBpZiAoKF9zdGF0ZSRnbDMgPSBzdGF0ZS5nbCkgIT0gbnVsbCAmJiBfc3RhdGUkZ2wzLnhyKSBzdGF0ZS54ci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBkaXNwb3NlKHN0YXRlLnNjZW5lKTtcbiAgICAgICAgICAgIF9yb290cy5kZWxldGUoY2FudmFzKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soY2FudmFzKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvKiAuLi4gKi9cbiAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVBvcnRhbChjaGlsZHJlbiwgY29udGFpbmVyLCBzdGF0ZSkge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChQb3J0YWwsIHtcbiAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgc3RhdGU6IHN0YXRlXG4gIH0pO1xufVxuZnVuY3Rpb24gUG9ydGFsKHtcbiAgc3RhdGUgPSB7fSxcbiAgY2hpbGRyZW4sXG4gIGNvbnRhaW5lclxufSkge1xuICAvKiogVGhpcyBoYXMgdG8gYmUgYSBjb21wb25lbnQgYmVjYXVzZSBpdCB3b3VsZCBub3QgYmUgYWJsZSB0byBjYWxsIHVzZVRocmVlL3VzZVN0b3JlIG90aGVyd2lzZSBzaW5jZVxuICAgKiAgaWYgdGhpcyBpcyBvdXIgZW52aXJvbm1lbnQsIHRoZW4gd2UgYXJlIG5vdCBpbiByM2YncyByZW5kZXJlciBidXQgaW4gcmVhY3QtZG9tLCBpdCB3b3VsZCB0cmlnZ2VyXG4gICAqICB0aGUgXCJSM0YgaG9va3MgY2FuIG9ubHkgYmUgdXNlZCB3aXRoaW4gdGhlIENhbnZhcyBjb21wb25lbnQhXCIgd2FybmluZzpcbiAgICogIDxDYW52YXM+XG4gICAqICAgIHtjcmVhdGVQb3J0YWwoLi4uKX0gKi9cbiAgY29uc3Qge1xuICAgIGV2ZW50cyxcbiAgICBzaXplLFxuICAgIC4uLnJlc3RcbiAgfSA9IHN0YXRlO1xuICBjb25zdCBwcmV2aW91c1Jvb3QgPSB1c2VTdG9yZSgpO1xuICBjb25zdCBbcmF5Y2FzdGVyXSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IG5ldyBUSFJFRS5SYXljYXN0ZXIoKSk7XG4gIGNvbnN0IFtwb2ludGVyXSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IG5ldyBUSFJFRS5WZWN0b3IyKCkpO1xuICBjb25zdCBpbmplY3QgPSB1c2VNdXRhYmxlQ2FsbGJhY2soKHJvb3RTdGF0ZSwgaW5qZWN0U3RhdGUpID0+IHtcbiAgICBsZXQgdmlld3BvcnQgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGluamVjdFN0YXRlLmNhbWVyYSAmJiBzaXplKSB7XG4gICAgICBjb25zdCBjYW1lcmEgPSBpbmplY3RTdGF0ZS5jYW1lcmE7XG4gICAgICAvLyBDYWxjdWxhdGUgdGhlIG92ZXJyaWRlIHZpZXdwb3J0LCBpZiBwcmVzZW50XG4gICAgICB2aWV3cG9ydCA9IHJvb3RTdGF0ZS52aWV3cG9ydC5nZXRDdXJyZW50Vmlld3BvcnQoY2FtZXJhLCBuZXcgVEhSRUUuVmVjdG9yMygpLCBzaXplKTtcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcG9ydGFsIGNhbWVyYSwgaWYgaXQgZGlmZmVycyBmcm9tIHRoZSBwcmV2aW91cyBsYXllclxuICAgICAgaWYgKGNhbWVyYSAhPT0gcm9vdFN0YXRlLmNhbWVyYSkgdXBkYXRlQ2FtZXJhKGNhbWVyYSwgc2l6ZSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAvLyBUaGUgaW50ZXJzZWN0IGNvbnNpc3RzIG9mIHRoZSBwcmV2aW91cyByb290IHN0YXRlXG4gICAgICAuLi5yb290U3RhdGUsXG4gICAgICAuLi5pbmplY3RTdGF0ZSxcbiAgICAgIC8vIFBvcnRhbHMgaGF2ZSB0aGVpciBvd24gc2NlbmUsIHdoaWNoIGZvcm1zIHRoZSByb290LCBhIHJheWNhc3RlciBhbmQgYSBwb2ludGVyXG4gICAgICBzY2VuZTogY29udGFpbmVyLFxuICAgICAgcmF5Y2FzdGVyLFxuICAgICAgcG9pbnRlcixcbiAgICAgIG1vdXNlOiBwb2ludGVyLFxuICAgICAgLy8gVGhlaXIgcHJldmlvdXMgcm9vdCBpcyB0aGUgbGF5ZXIgYmVmb3JlIGl0XG4gICAgICBwcmV2aW91c1Jvb3QsXG4gICAgICAvLyBFdmVudHMsIHNpemUgYW5kIHZpZXdwb3J0IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHRoZSBpbmplY3QgbGF5ZXJcbiAgICAgIGV2ZW50czoge1xuICAgICAgICAuLi5yb290U3RhdGUuZXZlbnRzLFxuICAgICAgICAuLi5pbmplY3RTdGF0ZS5ldmVudHMsXG4gICAgICAgIC4uLmV2ZW50c1xuICAgICAgfSxcbiAgICAgIHNpemU6IHtcbiAgICAgICAgLi4ucm9vdFN0YXRlLnNpemUsXG4gICAgICAgIC4uLnNpemVcbiAgICAgIH0sXG4gICAgICB2aWV3cG9ydDoge1xuICAgICAgICAuLi5yb290U3RhdGUudmlld3BvcnQsXG4gICAgICAgIC4uLnZpZXdwb3J0XG4gICAgICB9LFxuICAgICAgLy8gTGF5ZXJzIGFyZSBhbGxvd2VkIHRvIG92ZXJyaWRlIGV2ZW50c1xuICAgICAgc2V0RXZlbnRzOiBldmVudHMgPT4gaW5qZWN0U3RhdGUuc2V0KHN0YXRlID0+ICh7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5ldmVudHMsXG4gICAgICAgICAgLi4uZXZlbnRzXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgIH07XG4gIH0pO1xuICBjb25zdCB1c2VQb3J0YWxTdG9yZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIENyZWF0ZSBhIG1pcnJvcmVkIHN0b3JlLCBiYXNlZCBvbiB0aGUgcHJldmlvdXMgcm9vdCB3aXRoIGEgZmV3IG92ZXJyaWRlcyAuLi5cbiAgICBjb25zdCBzdG9yZSA9IGNyZWF0ZVdpdGhFcXVhbGl0eUZuKChzZXQsIGdldCkgPT4gKHtcbiAgICAgIC4uLnJlc3QsXG4gICAgICBzZXQsXG4gICAgICBnZXRcbiAgICB9KSk7XG5cbiAgICAvLyBTdWJzY3JpYmUgdG8gcHJldmlvdXMgcm9vdC1zdGF0ZSBhbmQgY29weSBjaGFuZ2VzIG92ZXIgdG8gdGhlIG1pcnJvcmVkIHBvcnRhbC1zdGF0ZVxuICAgIGNvbnN0IG9uTXV0YXRlID0gcHJldiA9PiBzdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiBpbmplY3QuY3VycmVudChwcmV2LCBzdGF0ZSkpO1xuICAgIG9uTXV0YXRlKHByZXZpb3VzUm9vdC5nZXRTdGF0ZSgpKTtcbiAgICBwcmV2aW91c1Jvb3Quc3Vic2NyaWJlKG9uTXV0YXRlKTtcbiAgICByZXR1cm4gc3RvcmU7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbcHJldmlvdXNSb290LCBjb250YWluZXJdKTtcbiAgcmV0dXJuIChcbiAgICAvKiNfX1BVUkVfXyovXG4gICAgLy8gQHRzLWlnbm9yZSwgcmVjb25jaWxlciB0eXBlcyBhcmUgbm90IG1haW50YWluZWRcbiAgICBqc3goRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiByZWNvbmNpbGVyLmNyZWF0ZVBvcnRhbCggLyojX19QVVJFX18qL2pzeChjb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiB1c2VQb3J0YWxTdG9yZSxcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgICB9KSwgdXNlUG9ydGFsU3RvcmUsIG51bGwpXG4gICAgfSlcbiAgKTtcbn1cblxuLyoqXG4gKiBGb3JjZSBSZWFjdCB0byBmbHVzaCBhbnkgdXBkYXRlcyBpbnNpZGUgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIHN5bmNocm9ub3VzbHkgYW5kIGltbWVkaWF0ZWx5LlxuICogQWxsIHRoZSBzYW1lIGNhdmVhdHMgZG9jdW1lbnRlZCBmb3IgcmVhY3QtZG9tJ3MgYGZsdXNoU3luY2AgYXBwbHkgaGVyZSAoc2VlIGh0dHBzOi8vcmVhY3QuZGV2L3JlZmVyZW5jZS9yZWFjdC1kb20vZmx1c2hTeW5jKS5cbiAqIE5ldmVydGhlbGVzcywgc29tZXRpbWVzIG9uZSBuZWVkcyB0byByZW5kZXIgc3luY2hyb25vdXNseSwgZm9yIGV4YW1wbGUgdG8ga2VlcCBET00gYW5kIDNEIGNoYW5nZXMgaW4gbG9jay1zdGVwIHdpdGhvdXRcbiAqIGhhdmluZyB0byByZXZlcnQgdG8gYSBub24tUmVhY3Qgc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGZsdXNoU3luYyhmbikge1xuICByZXR1cm4gcmVjb25jaWxlci5mbHVzaFN5bmMoZm4pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdWJzKGNhbGxiYWNrLCBzdWJzKSB7XG4gIGNvbnN0IHN1YiA9IHtcbiAgICBjYWxsYmFja1xuICB9O1xuICBzdWJzLmFkZChzdWIpO1xuICByZXR1cm4gKCkgPT4gdm9pZCBzdWJzLmRlbGV0ZShzdWIpO1xufVxuY29uc3QgZ2xvYmFsRWZmZWN0cyA9IG5ldyBTZXQoKTtcbmNvbnN0IGdsb2JhbEFmdGVyRWZmZWN0cyA9IG5ldyBTZXQoKTtcbmNvbnN0IGdsb2JhbFRhaWxFZmZlY3RzID0gbmV3IFNldCgpO1xuXG4vKipcbiAqIEFkZHMgYSBnbG9iYWwgcmVuZGVyIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBlYWNoIGZyYW1lLlxuICogQHNlZSBodHRwczovL2RvY3MucG1uZC5ycy9yZWFjdC10aHJlZS1maWJlci9hcGkvYWRkaXRpb25hbC1leHBvcnRzI2FkZEVmZmVjdFxuICovXG5jb25zdCBhZGRFZmZlY3QgPSBjYWxsYmFjayA9PiBjcmVhdGVTdWJzKGNhbGxiYWNrLCBnbG9iYWxFZmZlY3RzKTtcblxuLyoqXG4gKiBBZGRzIGEgZ2xvYmFsIGFmdGVyLXJlbmRlciBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgZWFjaCBmcmFtZS5cbiAqIEBzZWUgaHR0cHM6Ly9kb2NzLnBtbmQucnMvcmVhY3QtdGhyZWUtZmliZXIvYXBpL2FkZGl0aW9uYWwtZXhwb3J0cyNhZGRBZnRlckVmZmVjdFxuICovXG5jb25zdCBhZGRBZnRlckVmZmVjdCA9IGNhbGxiYWNrID0+IGNyZWF0ZVN1YnMoY2FsbGJhY2ssIGdsb2JhbEFmdGVyRWZmZWN0cyk7XG5cbi8qKlxuICogQWRkcyBhIGdsb2JhbCBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgd2hlbiByZW5kZXJpbmcgc3RvcHMuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9hZGRpdGlvbmFsLWV4cG9ydHMjYWRkVGFpbFxuICovXG5jb25zdCBhZGRUYWlsID0gY2FsbGJhY2sgPT4gY3JlYXRlU3VicyhjYWxsYmFjaywgZ2xvYmFsVGFpbEVmZmVjdHMpO1xuZnVuY3Rpb24gcnVuKGVmZmVjdHMsIHRpbWVzdGFtcCkge1xuICBpZiAoIWVmZmVjdHMuc2l6ZSkgcmV0dXJuO1xuICBmb3IgKGNvbnN0IHtcbiAgICBjYWxsYmFja1xuICB9IG9mIGVmZmVjdHMudmFsdWVzKCkpIHtcbiAgICBjYWxsYmFjayh0aW1lc3RhbXApO1xuICB9XG59XG5mdW5jdGlvbiBmbHVzaEdsb2JhbEVmZmVjdHModHlwZSwgdGltZXN0YW1wKSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ2JlZm9yZSc6XG4gICAgICByZXR1cm4gcnVuKGdsb2JhbEVmZmVjdHMsIHRpbWVzdGFtcCk7XG4gICAgY2FzZSAnYWZ0ZXInOlxuICAgICAgcmV0dXJuIHJ1bihnbG9iYWxBZnRlckVmZmVjdHMsIHRpbWVzdGFtcCk7XG4gICAgY2FzZSAndGFpbCc6XG4gICAgICByZXR1cm4gcnVuKGdsb2JhbFRhaWxFZmZlY3RzLCB0aW1lc3RhbXApO1xuICB9XG59XG5sZXQgc3Vic2NyaWJlcnM7XG5sZXQgc3Vic2NyaXB0aW9uO1xuZnVuY3Rpb24gdXBkYXRlKHRpbWVzdGFtcCwgc3RhdGUsIGZyYW1lKSB7XG4gIC8vIFJ1biBsb2NhbCBlZmZlY3RzXG4gIGxldCBkZWx0YSA9IHN0YXRlLmNsb2NrLmdldERlbHRhKCk7XG5cbiAgLy8gSW4gZnJhbWVsb29wPSduZXZlcicgbW9kZSwgY2xvY2sgdGltZXMgYXJlIHVwZGF0ZWQgdXNpbmcgdGhlIHByb3ZpZGVkIHRpbWVzdGFtcFxuICBpZiAoc3RhdGUuZnJhbWVsb29wID09PSAnbmV2ZXInICYmIHR5cGVvZiB0aW1lc3RhbXAgPT09ICdudW1iZXInKSB7XG4gICAgZGVsdGEgPSB0aW1lc3RhbXAgLSBzdGF0ZS5jbG9jay5lbGFwc2VkVGltZTtcbiAgICBzdGF0ZS5jbG9jay5vbGRUaW1lID0gc3RhdGUuY2xvY2suZWxhcHNlZFRpbWU7XG4gICAgc3RhdGUuY2xvY2suZWxhcHNlZFRpbWUgPSB0aW1lc3RhbXA7XG4gIH1cblxuICAvLyBDYWxsIHN1YnNjcmliZXJzICh1c2VGcmFtZSlcbiAgc3Vic2NyaWJlcnMgPSBzdGF0ZS5pbnRlcm5hbC5zdWJzY3JpYmVycztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkrKykge1xuICAgIHN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZXJzW2ldO1xuICAgIHN1YnNjcmlwdGlvbi5yZWYuY3VycmVudChzdWJzY3JpcHRpb24uc3RvcmUuZ2V0U3RhdGUoKSwgZGVsdGEsIGZyYW1lKTtcbiAgfVxuXG4gIC8vIFJlbmRlciBjb250ZW50XG4gIGlmICghc3RhdGUuaW50ZXJuYWwucHJpb3JpdHkgJiYgc3RhdGUuZ2wucmVuZGVyKSBzdGF0ZS5nbC5yZW5kZXIoc3RhdGUuc2NlbmUsIHN0YXRlLmNhbWVyYSk7XG5cbiAgLy8gRGVjcmVhc2UgZnJhbWUgY291bnRcbiAgc3RhdGUuaW50ZXJuYWwuZnJhbWVzID0gTWF0aC5tYXgoMCwgc3RhdGUuaW50ZXJuYWwuZnJhbWVzIC0gMSk7XG4gIHJldHVybiBzdGF0ZS5mcmFtZWxvb3AgPT09ICdhbHdheXMnID8gMSA6IHN0YXRlLmludGVybmFsLmZyYW1lcztcbn1cbmxldCBydW5uaW5nID0gZmFsc2U7XG5sZXQgdXNlRnJhbWVJblByb2dyZXNzID0gZmFsc2U7XG5sZXQgcmVwZWF0O1xubGV0IGZyYW1lO1xubGV0IHN0YXRlO1xuZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXApIHtcbiAgZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gIHJ1bm5pbmcgPSB0cnVlO1xuICByZXBlYXQgPSAwO1xuXG4gIC8vIFJ1biBlZmZlY3RzXG4gIGZsdXNoR2xvYmFsRWZmZWN0cygnYmVmb3JlJywgdGltZXN0YW1wKTtcblxuICAvLyBSZW5kZXIgYWxsIHJvb3RzXG4gIHVzZUZyYW1lSW5Qcm9ncmVzcyA9IHRydWU7XG4gIGZvciAoY29uc3Qgcm9vdCBvZiBfcm9vdHMudmFsdWVzKCkpIHtcbiAgICB2YXIgX3N0YXRlJGdsJHhyO1xuICAgIHN0YXRlID0gcm9vdC5zdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgLy8gSWYgdGhlIGZyYW1lbG9vcCBpcyBpbnZhbGlkYXRlZCwgZG8gbm90IHJ1biBhbm90aGVyIGZyYW1lXG4gICAgaWYgKHN0YXRlLmludGVybmFsLmFjdGl2ZSAmJiAoc3RhdGUuZnJhbWVsb29wID09PSAnYWx3YXlzJyB8fCBzdGF0ZS5pbnRlcm5hbC5mcmFtZXMgPiAwKSAmJiAhKChfc3RhdGUkZ2wkeHIgPSBzdGF0ZS5nbC54cikgIT0gbnVsbCAmJiBfc3RhdGUkZ2wkeHIuaXNQcmVzZW50aW5nKSkge1xuICAgICAgcmVwZWF0ICs9IHVwZGF0ZSh0aW1lc3RhbXAsIHN0YXRlKTtcbiAgICB9XG4gIH1cbiAgdXNlRnJhbWVJblByb2dyZXNzID0gZmFsc2U7XG5cbiAgLy8gUnVuIGFmdGVyLWVmZmVjdHNcbiAgZmx1c2hHbG9iYWxFZmZlY3RzKCdhZnRlcicsIHRpbWVzdGFtcCk7XG5cbiAgLy8gU3RvcCB0aGUgbG9vcCBpZiBub3RoaW5nIGludmFsaWRhdGVzIGl0XG4gIGlmIChyZXBlYXQgPT09IDApIHtcbiAgICAvLyBUYWlsIGNhbGwgZWZmZWN0cywgdGhleSBhcmUgY2FsbGVkIHdoZW4gcmVuZGVyaW5nIHN0b3BzXG4gICAgZmx1c2hHbG9iYWxFZmZlY3RzKCd0YWlsJywgdGltZXN0YW1wKTtcblxuICAgIC8vIEZsYWcgZW5kIG9mIG9wZXJhdGlvblxuICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICByZXR1cm4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpO1xuICB9XG59XG5cbi8qKlxuICogSW52YWxpZGF0ZXMgdGhlIHZpZXcsIHJlcXVlc3RpbmcgYSBmcmFtZSB0byBiZSByZW5kZXJlZC4gV2lsbCBnbG9iYWxseSBpbnZhbGlkYXRlIHVubGVzcyBwYXNzZWQgYSByb290J3Mgc3RhdGUuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9hZGRpdGlvbmFsLWV4cG9ydHMjaW52YWxpZGF0ZVxuICovXG5mdW5jdGlvbiBpbnZhbGlkYXRlKHN0YXRlLCBmcmFtZXMgPSAxKSB7XG4gIHZhciBfc3RhdGUkZ2wkeHIyO1xuICBpZiAoIXN0YXRlKSByZXR1cm4gX3Jvb3RzLmZvckVhY2gocm9vdCA9PiBpbnZhbGlkYXRlKHJvb3Quc3RvcmUuZ2V0U3RhdGUoKSwgZnJhbWVzKSk7XG4gIGlmICgoX3N0YXRlJGdsJHhyMiA9IHN0YXRlLmdsLnhyKSAhPSBudWxsICYmIF9zdGF0ZSRnbCR4cjIuaXNQcmVzZW50aW5nIHx8ICFzdGF0ZS5pbnRlcm5hbC5hY3RpdmUgfHwgc3RhdGUuZnJhbWVsb29wID09PSAnbmV2ZXInKSByZXR1cm47XG4gIGlmIChmcmFtZXMgPiAxKSB7XG4gICAgLy8gbGVnYWN5IHN1cHBvcnQgZm9yIHBlb3BsZSB1c2luZyBmcmFtZXMgcGFyYW1ldGVyc1xuICAgIC8vIEluY3JlYXNlIGZyYW1lcywgZG8gbm90IGdvIGhpZ2hlciB0aGFuIDYwXG4gICAgc3RhdGUuaW50ZXJuYWwuZnJhbWVzID0gTWF0aC5taW4oNjAsIHN0YXRlLmludGVybmFsLmZyYW1lcyArIGZyYW1lcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHVzZUZyYW1lSW5Qcm9ncmVzcykge1xuICAgICAgLy9jYWxsZWQgZnJvbSB3aXRoaW4gYSB1c2VGcmFtZSwgaXQgbWVhbnMgdGhlIHVzZXIgd2FudHMgYW4gYWRkaXRpb25hbCBmcmFtZVxuICAgICAgc3RhdGUuaW50ZXJuYWwuZnJhbWVzID0gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy90aGUgdXNlciBuZWVkIGEgbmV3IGZyYW1lLCBubyBuZWVkIHRvIGluY3JlbWVudCBmdXJ0aGVyIHRoYW4gMVxuICAgICAgc3RhdGUuaW50ZXJuYWwuZnJhbWVzID0gMTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiB0aGUgcmVuZGVyLWxvb3AgaXNuJ3QgYWN0aXZlLCBzdGFydCBpdFxuICBpZiAoIXJ1bm5pbmcpIHtcbiAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZHZhbmNlcyB0aGUgZnJhbWVsb29wIGFuZCBydW5zIHJlbmRlciBlZmZlY3RzLCB1c2VmdWwgZm9yIHdoZW4gbWFudWFsbHkgcmVuZGVyaW5nIHZpYSBgZnJhbWVsb29wPVwibmV2ZXJcImAuXG4gKiBAc2VlIGh0dHBzOi8vZG9jcy5wbW5kLnJzL3JlYWN0LXRocmVlLWZpYmVyL2FwaS9hZGRpdGlvbmFsLWV4cG9ydHMjYWR2YW5jZVxuICovXG5mdW5jdGlvbiBhZHZhbmNlKHRpbWVzdGFtcCwgcnVuR2xvYmFsRWZmZWN0cyA9IHRydWUsIHN0YXRlLCBmcmFtZSkge1xuICBpZiAocnVuR2xvYmFsRWZmZWN0cykgZmx1c2hHbG9iYWxFZmZlY3RzKCdiZWZvcmUnLCB0aW1lc3RhbXApO1xuICBpZiAoIXN0YXRlKSBmb3IgKGNvbnN0IHJvb3Qgb2YgX3Jvb3RzLnZhbHVlcygpKSB1cGRhdGUodGltZXN0YW1wLCByb290LnN0b3JlLmdldFN0YXRlKCkpO2Vsc2UgdXBkYXRlKHRpbWVzdGFtcCwgc3RhdGUsIGZyYW1lKTtcbiAgaWYgKHJ1bkdsb2JhbEVmZmVjdHMpIGZsdXNoR2xvYmFsRWZmZWN0cygnYWZ0ZXInLCB0aW1lc3RhbXApO1xufVxuXG5jb25zdCBET01fRVZFTlRTID0ge1xuICBvbkNsaWNrOiBbJ2NsaWNrJywgZmFsc2VdLFxuICBvbkNvbnRleHRNZW51OiBbJ2NvbnRleHRtZW51JywgZmFsc2VdLFxuICBvbkRvdWJsZUNsaWNrOiBbJ2RibGNsaWNrJywgZmFsc2VdLFxuICBvbldoZWVsOiBbJ3doZWVsJywgdHJ1ZV0sXG4gIG9uUG9pbnRlckRvd246IFsncG9pbnRlcmRvd24nLCB0cnVlXSxcbiAgb25Qb2ludGVyVXA6IFsncG9pbnRlcnVwJywgdHJ1ZV0sXG4gIG9uUG9pbnRlckxlYXZlOiBbJ3BvaW50ZXJsZWF2ZScsIHRydWVdLFxuICBvblBvaW50ZXJNb3ZlOiBbJ3BvaW50ZXJtb3ZlJywgdHJ1ZV0sXG4gIG9uUG9pbnRlckNhbmNlbDogWydwb2ludGVyY2FuY2VsJywgdHJ1ZV0sXG4gIG9uTG9zdFBvaW50ZXJDYXB0dXJlOiBbJ2xvc3Rwb2ludGVyY2FwdHVyZScsIHRydWVdXG59O1xuXG4vKiogRGVmYXVsdCBSM0YgZXZlbnQgbWFuYWdlciBmb3Igd2ViICovXG5mdW5jdGlvbiBjcmVhdGVQb2ludGVyRXZlbnRzKHN0b3JlKSB7XG4gIGNvbnN0IHtcbiAgICBoYW5kbGVQb2ludGVyXG4gIH0gPSBjcmVhdGVFdmVudHMoc3RvcmUpO1xuICByZXR1cm4ge1xuICAgIHByaW9yaXR5OiAxLFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgY29tcHV0ZShldmVudCwgc3RhdGUsIHByZXZpb3VzKSB7XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcG1uZHJzL3JlYWN0LXRocmVlLWZpYmVyL3B1bGwvNzgyXG4gICAgICAvLyBFdmVudHMgdHJpZ2dlciBvdXRzaWRlIG9mIGNhbnZhcyB3aGVuIG1vdmVkLCB1c2Ugb2Zmc2V0WC9ZIGJ5IGRlZmF1bHQgYW5kIGFsbG93IG92ZXJyaWRlc1xuICAgICAgc3RhdGUucG9pbnRlci5zZXQoZXZlbnQub2Zmc2V0WCAvIHN0YXRlLnNpemUud2lkdGggKiAyIC0gMSwgLShldmVudC5vZmZzZXRZIC8gc3RhdGUuc2l6ZS5oZWlnaHQpICogMiArIDEpO1xuICAgICAgc3RhdGUucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoc3RhdGUucG9pbnRlciwgc3RhdGUuY2FtZXJhKTtcbiAgICB9LFxuICAgIGNvbm5lY3RlZDogdW5kZWZpbmVkLFxuICAgIGhhbmRsZXJzOiBPYmplY3Qua2V5cyhET01fRVZFTlRTKS5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgLi4uYWNjLFxuICAgICAgW2tleV06IGhhbmRsZVBvaW50ZXIoa2V5KVxuICAgIH0pLCB7fSksXG4gICAgdXBkYXRlOiAoKSA9PiB7XG4gICAgICB2YXIgX2ludGVybmFsJGxhc3RFdmVudDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZXZlbnRzLFxuICAgICAgICBpbnRlcm5hbFxuICAgICAgfSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gICAgICBpZiAoKF9pbnRlcm5hbCRsYXN0RXZlbnQgPSBpbnRlcm5hbC5sYXN0RXZlbnQpICE9IG51bGwgJiYgX2ludGVybmFsJGxhc3RFdmVudC5jdXJyZW50ICYmIGV2ZW50cy5oYW5kbGVycykgZXZlbnRzLmhhbmRsZXJzLm9uUG9pbnRlck1vdmUoaW50ZXJuYWwubGFzdEV2ZW50LmN1cnJlbnQpO1xuICAgIH0sXG4gICAgY29ubmVjdDogdGFyZ2V0ID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2V0LFxuICAgICAgICBldmVudHNcbiAgICAgIH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgZXZlbnRzLmRpc2Nvbm5lY3QgPT0gbnVsbCA/IHZvaWQgMCA6IGV2ZW50cy5kaXNjb25uZWN0KCk7XG4gICAgICBzZXQoc3RhdGUgPT4gKHtcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgLi4uc3RhdGUuZXZlbnRzLFxuICAgICAgICAgIGNvbm5lY3RlZDogdGFyZ2V0XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIGlmIChldmVudHMuaGFuZGxlcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIGV2ZW50cy5oYW5kbGVycykge1xuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzLmhhbmRsZXJzW25hbWVdO1xuICAgICAgICAgIGNvbnN0IFtldmVudE5hbWUsIHBhc3NpdmVdID0gRE9NX0VWRU5UU1tuYW1lXTtcbiAgICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50LCB7XG4gICAgICAgICAgICBwYXNzaXZlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGRpc2Nvbm5lY3Q6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2V0LFxuICAgICAgICBldmVudHNcbiAgICAgIH0gPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgaWYgKGV2ZW50cy5jb25uZWN0ZWQpIHtcbiAgICAgICAgaWYgKGV2ZW50cy5oYW5kbGVycykge1xuICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBldmVudHMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzLmhhbmRsZXJzW25hbWVdO1xuICAgICAgICAgICAgY29uc3QgW2V2ZW50TmFtZV0gPSBET01fRVZFTlRTW25hbWVdO1xuICAgICAgICAgICAgZXZlbnRzLmNvbm5lY3RlZC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXQoc3RhdGUgPT4gKHtcbiAgICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAgIC4uLnN0YXRlLmV2ZW50cyxcbiAgICAgICAgICAgIGNvbm5lY3RlZDogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgeyB1c2VTdG9yZSBhcyBBLCBCbG9jayBhcyBCLCB1c2VUaHJlZSBhcyBDLCB1c2VGcmFtZSBhcyBELCBFcnJvckJvdW5kYXJ5IGFzIEUsIHVzZUdyYXBoIGFzIEYsIHVzZUxvYWRlciBhcyBHLCBfcm9vdHMgYXMgXywgdXNlTXV0YWJsZUNhbGxiYWNrIGFzIGEsIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgYXMgYiwgY3JlYXRlUm9vdCBhcyBjLCB1bm1vdW50Q29tcG9uZW50QXROb2RlIGFzIGQsIGV4dGVuZCBhcyBlLCBjcmVhdGVQb2ludGVyRXZlbnRzIGFzIGYsIGNyZWF0ZUV2ZW50cyBhcyBnLCBmbHVzaEdsb2JhbEVmZmVjdHMgYXMgaCwgaXNSZWYgYXMgaSwgYWRkRWZmZWN0IGFzIGosIGFkZEFmdGVyRWZmZWN0IGFzIGssIGFkZFRhaWwgYXMgbCwgaW52YWxpZGF0ZSBhcyBtLCBhZHZhbmNlIGFzIG4sIGNyZWF0ZVBvcnRhbCBhcyBvLCBmbHVzaFN5bmMgYXMgcCwgY29udGV4dCBhcyBxLCByZWNvbmNpbGVyIGFzIHIsIGFwcGx5UHJvcHMgYXMgcywgdGhyZWVUeXBlcyBhcyB0LCB1c2VCcmlkZ2UgYXMgdSwgZ2V0Um9vdFN0YXRlIGFzIHYsIGRpc3Bvc2UgYXMgdywgYWN0IGFzIHgsIGJ1aWxkR3JhcGggYXMgeSwgdXNlSW5zdGFuY2VIYW5kbGUgYXMgeiB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/fiber/dist/events-cf57b220.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Canvas: () => (/* binding */ Canvas),\n/* harmony export */   ReactThreeFiber: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.t),\n/* harmony export */   _roots: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__._),\n/* harmony export */   act: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.x),\n/* harmony export */   addAfterEffect: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.k),\n/* harmony export */   addEffect: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.j),\n/* harmony export */   addTail: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.l),\n/* harmony export */   advance: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.n),\n/* harmony export */   applyProps: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.s),\n/* harmony export */   buildGraph: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.y),\n/* harmony export */   context: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.q),\n/* harmony export */   createEvents: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.g),\n/* harmony export */   createPortal: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.o),\n/* harmony export */   createRoot: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   dispose: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.w),\n/* harmony export */   events: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.f),\n/* harmony export */   extend: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.e),\n/* harmony export */   flushGlobalEffects: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.h),\n/* harmony export */   flushSync: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.p),\n/* harmony export */   getRootState: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.v),\n/* harmony export */   invalidate: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.m),\n/* harmony export */   reconciler: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.r),\n/* harmony export */   unmountComponentAtNode: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.d),\n/* harmony export */   useFrame: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.D),\n/* harmony export */   useGraph: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.F),\n/* harmony export */   useInstanceHandle: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.z),\n/* harmony export */   useLoader: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.G),\n/* harmony export */   useStore: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.A),\n/* harmony export */   useThree: () => (/* reexport safe */ _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.C)\n/* harmony export */ });\n/* harmony import */ var _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events-cf57b220.esm.js */ \"(ssr)/./node_modules/@react-three/fiber/dist/events-cf57b220.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var react_use_measure__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-use-measure */ \"(ssr)/./node_modules/react-use-measure/dist/index.js\");\n/* harmony import */ var its_fine__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! its-fine */ \"(ssr)/./node_modules/its-fine/dist/index.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_reconciler_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-reconciler/constants */ \"(ssr)/./node_modules/react-reconciler/constants.js\");\n/* harmony import */ var react_reconciler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-reconciler */ \"(ssr)/./node_modules/react-reconciler/index.js\");\n/* harmony import */ var react_reconciler__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_reconciler__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var scheduler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! scheduler */ \"(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction CanvasImpl({\n  ref,\n  children,\n  fallback,\n  resize,\n  style,\n  gl,\n  events = _events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.f,\n  eventSource,\n  eventPrefix,\n  shadows,\n  linear,\n  flat,\n  legacy,\n  orthographic,\n  frameloop,\n  dpr,\n  performance,\n  raycaster,\n  camera,\n  scene,\n  onPointerMissed,\n  onCreated,\n  ...props\n}) {\n  // Create a known catalogue of Threejs-native elements\n  // This will include the entire THREE namespace by default, users can extend\n  // their own elements by using the createRoot API instead\n  react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.e)(three__WEBPACK_IMPORTED_MODULE_6__), []);\n  const Bridge = (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.u)();\n  const [containerRef, containerRect] = (0,react_use_measure__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    ...resize\n  });\n  const canvasRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const divRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle(ref, () => canvasRef.current);\n  const handlePointerMissed = (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(onPointerMissed);\n  const [block, setBlock] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const [error, setError] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n\n  // Suspend this component if block is a promise (2nd run)\n  if (block) throw block;\n  // Throw exception outwards if anything within canvas throws\n  if (error) throw error;\n  const root = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.b)(() => {\n    const canvas = canvasRef.current;\n    if (containerRect.width > 0 && containerRect.height > 0 && canvas) {\n      if (!root.current) root.current = (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.c)(canvas);\n      async function run() {\n        await root.current.configure({\n          gl,\n          scene,\n          events,\n          shadows,\n          linear,\n          flat,\n          legacy,\n          orthographic,\n          frameloop,\n          dpr,\n          performance,\n          raycaster,\n          camera,\n          size: containerRect,\n          // Pass mutable reference to onPointerMissed so it's free to update\n          onPointerMissed: (...args) => handlePointerMissed.current == null ? void 0 : handlePointerMissed.current(...args),\n          onCreated: state => {\n            // Connect to event source\n            state.events.connect == null ? void 0 : state.events.connect(eventSource ? (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(eventSource) ? eventSource.current : eventSource : divRef.current);\n            // Set up compute function\n            if (eventPrefix) {\n              state.setEvents({\n                compute: (event, state) => {\n                  const x = event[eventPrefix + 'X'];\n                  const y = event[eventPrefix + 'Y'];\n                  state.pointer.set(x / state.size.width * 2 - 1, -(y / state.size.height) * 2 + 1);\n                  state.raycaster.setFromCamera(state.pointer, state.camera);\n                }\n              });\n            }\n            // Call onCreated callback\n            onCreated == null ? void 0 : onCreated(state);\n          }\n        });\n        root.current.render( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Bridge, {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.E, {\n            set: setError,\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n              fallback: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.B, {\n                set: setBlock\n              }),\n              children: children != null ? children : null\n            })\n          })\n        }));\n      }\n      run();\n    }\n  });\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    const canvas = canvasRef.current;\n    if (canvas) return () => (0,_events_cf57b220_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)(canvas);\n  }, []);\n\n  // When the event source is not this div, we need to set pointer-events to none\n  // Or else the canvas will block events from reaching the event source\n  const pointerEvents = eventSource ? 'none' : 'auto';\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", {\n    ref: divRef,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      pointerEvents,\n      ...style\n    },\n    ...props,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", {\n      ref: containerRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: 'block'\n        },\n        children: fallback\n      })\n    })\n  });\n}\n\n/**\n * A DOM canvas which accepts threejs elements as children.\n * @see https://docs.pmnd.rs/react-three-fiber/api/canvas\n */\nfunction Canvas(props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(its_fine__WEBPACK_IMPORTED_MODULE_8__.FiberProvider, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CanvasImpl, {\n      ...props\n    })\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2ZpYmVyL2Rpc3QvcmVhY3QtdGhyZWUtZmliZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9QO0FBQ2tSO0FBQ3ZlO0FBQ0E7QUFDWTtBQUNGO0FBQ0Q7QUFDSjtBQUNQO0FBQ0g7QUFDUDtBQUNJOztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0RBQW1CO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMENBQWEsT0FBTywwREFBTSxDQUFDLGtDQUFLO0FBQ2xDLGlCQUFpQiwwREFBUztBQUMxQix3Q0FBd0MsNkRBQVU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsb0JBQW9CLHlDQUFZO0FBQ2hDLGlCQUFpQix5Q0FBWTtBQUM3QixFQUFFLHNEQUF5QjtBQUMzQiw4QkFBOEIsMERBQWtCO0FBQ2hELDRCQUE0QiwyQ0FBYztBQUMxQyw0QkFBNEIsMkNBQWM7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBWTtBQUMzQixFQUFFLDBEQUF5QjtBQUMzQjtBQUNBO0FBQ0Esd0NBQXdDLDBEQUFVO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RkFBdUYsMERBQUs7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDBDQUEwQyxzREFBRztBQUM3QyxpQ0FBaUMsc0RBQUcsQ0FBQyxzREFBYTtBQUNsRDtBQUNBLG1DQUFtQyxzREFBRyxDQUFDLDJDQUFjO0FBQ3JELHFDQUFxQyxzREFBRyxDQUFDLHNEQUFLO0FBQzlDO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsNENBQWU7QUFDakI7QUFDQSw2QkFBNkIsMERBQXNCO0FBQ25ELEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwyQkFBMkIsc0RBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsNkJBQTZCLHNEQUFHO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUcsQ0FBQyxtREFBYTtBQUN2QywyQkFBMkIsc0RBQUc7QUFDOUI7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVrQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxccGFyZW50bHl0aWNzXFxub2RlX21vZHVsZXNcXEByZWFjdC10aHJlZVxcZmliZXJcXGRpc3RcXHJlYWN0LXRocmVlLWZpYmVyLmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlIGFzIGV4dGVuZCwgdSBhcyB1c2VCcmlkZ2UsIGEgYXMgdXNlTXV0YWJsZUNhbGxiYWNrLCBiIGFzIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QsIGMgYXMgY3JlYXRlUm9vdCwgaSBhcyBpc1JlZiwgRSBhcyBFcnJvckJvdW5kYXJ5LCBCIGFzIEJsb2NrLCBkIGFzIHVubW91bnRDb21wb25lbnRBdE5vZGUsIGYgYXMgY3JlYXRlUG9pbnRlckV2ZW50cyB9IGZyb20gJy4vZXZlbnRzLWNmNTdiMjIwLmVzbS5qcyc7XG5leHBvcnQgeyB0IGFzIFJlYWN0VGhyZWVGaWJlciwgXyBhcyBfcm9vdHMsIHggYXMgYWN0LCBrIGFzIGFkZEFmdGVyRWZmZWN0LCBqIGFzIGFkZEVmZmVjdCwgbCBhcyBhZGRUYWlsLCBuIGFzIGFkdmFuY2UsIHMgYXMgYXBwbHlQcm9wcywgeSBhcyBidWlsZEdyYXBoLCBxIGFzIGNvbnRleHQsIGcgYXMgY3JlYXRlRXZlbnRzLCBvIGFzIGNyZWF0ZVBvcnRhbCwgYyBhcyBjcmVhdGVSb290LCB3IGFzIGRpc3Bvc2UsIGYgYXMgZXZlbnRzLCBlIGFzIGV4dGVuZCwgaCBhcyBmbHVzaEdsb2JhbEVmZmVjdHMsIHAgYXMgZmx1c2hTeW5jLCB2IGFzIGdldFJvb3RTdGF0ZSwgbSBhcyBpbnZhbGlkYXRlLCByIGFzIHJlY29uY2lsZXIsIGQgYXMgdW5tb3VudENvbXBvbmVudEF0Tm9kZSwgRCBhcyB1c2VGcmFtZSwgRiBhcyB1c2VHcmFwaCwgeiBhcyB1c2VJbnN0YW5jZUhhbmRsZSwgRyBhcyB1c2VMb2FkZXIsIEEgYXMgdXNlU3RvcmUsIEMgYXMgdXNlVGhyZWUgfSBmcm9tICcuL2V2ZW50cy1jZjU3YjIyMC5lc20uanMnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHVzZU1lYXN1cmUgZnJvbSAncmVhY3QtdXNlLW1lYXN1cmUnO1xuaW1wb3J0IHsgRmliZXJQcm92aWRlciB9IGZyb20gJ2l0cy1maW5lJztcbmltcG9ydCB7IGpzeCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCAncmVhY3QtcmVjb25jaWxlci9jb25zdGFudHMnO1xuaW1wb3J0ICd6dXN0YW5kL3RyYWRpdGlvbmFsJztcbmltcG9ydCAncmVhY3QtcmVjb25jaWxlcic7XG5pbXBvcnQgJ3NjaGVkdWxlcic7XG5pbXBvcnQgJ3N1c3BlbmQtcmVhY3QnO1xuXG5mdW5jdGlvbiBDYW52YXNJbXBsKHtcbiAgcmVmLFxuICBjaGlsZHJlbixcbiAgZmFsbGJhY2ssXG4gIHJlc2l6ZSxcbiAgc3R5bGUsXG4gIGdsLFxuICBldmVudHMgPSBjcmVhdGVQb2ludGVyRXZlbnRzLFxuICBldmVudFNvdXJjZSxcbiAgZXZlbnRQcmVmaXgsXG4gIHNoYWRvd3MsXG4gIGxpbmVhcixcbiAgZmxhdCxcbiAgbGVnYWN5LFxuICBvcnRob2dyYXBoaWMsXG4gIGZyYW1lbG9vcCxcbiAgZHByLFxuICBwZXJmb3JtYW5jZSxcbiAgcmF5Y2FzdGVyLFxuICBjYW1lcmEsXG4gIHNjZW5lLFxuICBvblBvaW50ZXJNaXNzZWQsXG4gIG9uQ3JlYXRlZCxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgLy8gQ3JlYXRlIGEga25vd24gY2F0YWxvZ3VlIG9mIFRocmVlanMtbmF0aXZlIGVsZW1lbnRzXG4gIC8vIFRoaXMgd2lsbCBpbmNsdWRlIHRoZSBlbnRpcmUgVEhSRUUgbmFtZXNwYWNlIGJ5IGRlZmF1bHQsIHVzZXJzIGNhbiBleHRlbmRcbiAgLy8gdGhlaXIgb3duIGVsZW1lbnRzIGJ5IHVzaW5nIHRoZSBjcmVhdGVSb290IEFQSSBpbnN0ZWFkXG4gIFJlYWN0LnVzZU1lbW8oKCkgPT4gZXh0ZW5kKFRIUkVFKSwgW10pO1xuICBjb25zdCBCcmlkZ2UgPSB1c2VCcmlkZ2UoKTtcbiAgY29uc3QgW2NvbnRhaW5lclJlZiwgY29udGFpbmVyUmVjdF0gPSB1c2VNZWFzdXJlKHtcbiAgICBzY3JvbGw6IHRydWUsXG4gICAgZGVib3VuY2U6IHtcbiAgICAgIHNjcm9sbDogNTAsXG4gICAgICByZXNpemU6IDBcbiAgICB9LFxuICAgIC4uLnJlc2l6ZVxuICB9KTtcbiAgY29uc3QgY2FudmFzUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCBkaXZSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIFJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiBjYW52YXNSZWYuY3VycmVudCk7XG4gIGNvbnN0IGhhbmRsZVBvaW50ZXJNaXNzZWQgPSB1c2VNdXRhYmxlQ2FsbGJhY2sob25Qb2ludGVyTWlzc2VkKTtcbiAgY29uc3QgW2Jsb2NrLCBzZXRCbG9ja10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFN1c3BlbmQgdGhpcyBjb21wb25lbnQgaWYgYmxvY2sgaXMgYSBwcm9taXNlICgybmQgcnVuKVxuICBpZiAoYmxvY2spIHRocm93IGJsb2NrO1xuICAvLyBUaHJvdyBleGNlcHRpb24gb3V0d2FyZHMgaWYgYW55dGhpbmcgd2l0aGluIGNhbnZhcyB0aHJvd3NcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgY29uc3Qgcm9vdCA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgaWYgKGNvbnRhaW5lclJlY3Qud2lkdGggPiAwICYmIGNvbnRhaW5lclJlY3QuaGVpZ2h0ID4gMCAmJiBjYW52YXMpIHtcbiAgICAgIGlmICghcm9vdC5jdXJyZW50KSByb290LmN1cnJlbnQgPSBjcmVhdGVSb290KGNhbnZhcyk7XG4gICAgICBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gICAgICAgIGF3YWl0IHJvb3QuY3VycmVudC5jb25maWd1cmUoe1xuICAgICAgICAgIGdsLFxuICAgICAgICAgIHNjZW5lLFxuICAgICAgICAgIGV2ZW50cyxcbiAgICAgICAgICBzaGFkb3dzLFxuICAgICAgICAgIGxpbmVhcixcbiAgICAgICAgICBmbGF0LFxuICAgICAgICAgIGxlZ2FjeSxcbiAgICAgICAgICBvcnRob2dyYXBoaWMsXG4gICAgICAgICAgZnJhbWVsb29wLFxuICAgICAgICAgIGRwcixcbiAgICAgICAgICBwZXJmb3JtYW5jZSxcbiAgICAgICAgICByYXljYXN0ZXIsXG4gICAgICAgICAgY2FtZXJhLFxuICAgICAgICAgIHNpemU6IGNvbnRhaW5lclJlY3QsXG4gICAgICAgICAgLy8gUGFzcyBtdXRhYmxlIHJlZmVyZW5jZSB0byBvblBvaW50ZXJNaXNzZWQgc28gaXQncyBmcmVlIHRvIHVwZGF0ZVxuICAgICAgICAgIG9uUG9pbnRlck1pc3NlZDogKC4uLmFyZ3MpID0+IGhhbmRsZVBvaW50ZXJNaXNzZWQuY3VycmVudCA9PSBudWxsID8gdm9pZCAwIDogaGFuZGxlUG9pbnRlck1pc3NlZC5jdXJyZW50KC4uLmFyZ3MpLFxuICAgICAgICAgIG9uQ3JlYXRlZDogc3RhdGUgPT4ge1xuICAgICAgICAgICAgLy8gQ29ubmVjdCB0byBldmVudCBzb3VyY2VcbiAgICAgICAgICAgIHN0YXRlLmV2ZW50cy5jb25uZWN0ID09IG51bGwgPyB2b2lkIDAgOiBzdGF0ZS5ldmVudHMuY29ubmVjdChldmVudFNvdXJjZSA/IGlzUmVmKGV2ZW50U291cmNlKSA/IGV2ZW50U291cmNlLmN1cnJlbnQgOiBldmVudFNvdXJjZSA6IGRpdlJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIC8vIFNldCB1cCBjb21wdXRlIGZ1bmN0aW9uXG4gICAgICAgICAgICBpZiAoZXZlbnRQcmVmaXgpIHtcbiAgICAgICAgICAgICAgc3RhdGUuc2V0RXZlbnRzKHtcbiAgICAgICAgICAgICAgICBjb21wdXRlOiAoZXZlbnQsIHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB4ID0gZXZlbnRbZXZlbnRQcmVmaXggKyAnWCddO1xuICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IGV2ZW50W2V2ZW50UHJlZml4ICsgJ1knXTtcbiAgICAgICAgICAgICAgICAgIHN0YXRlLnBvaW50ZXIuc2V0KHggLyBzdGF0ZS5zaXplLndpZHRoICogMiAtIDEsIC0oeSAvIHN0YXRlLnNpemUuaGVpZ2h0KSAqIDIgKyAxKTtcbiAgICAgICAgICAgICAgICAgIHN0YXRlLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHN0YXRlLnBvaW50ZXIsIHN0YXRlLmNhbWVyYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENhbGwgb25DcmVhdGVkIGNhbGxiYWNrXG4gICAgICAgICAgICBvbkNyZWF0ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uQ3JlYXRlZChzdGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcm9vdC5jdXJyZW50LnJlbmRlciggLyojX19QVVJFX18qL2pzeChCcmlkZ2UsIHtcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChFcnJvckJvdW5kYXJ5LCB7XG4gICAgICAgICAgICBzZXQ6IHNldEVycm9yLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goUmVhY3QuU3VzcGVuc2UsIHtcbiAgICAgICAgICAgICAgZmFsbGJhY2s6IC8qI19fUFVSRV9fKi9qc3goQmxvY2ssIHtcbiAgICAgICAgICAgICAgICBzZXQ6IHNldEJsb2NrXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4gIT0gbnVsbCA/IGNoaWxkcmVuIDogbnVsbFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICBydW4oKTtcbiAgICB9XG4gIH0pO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgIGlmIChjYW52YXMpIHJldHVybiAoKSA9PiB1bm1vdW50Q29tcG9uZW50QXROb2RlKGNhbnZhcyk7XG4gIH0sIFtdKTtcblxuICAvLyBXaGVuIHRoZSBldmVudCBzb3VyY2UgaXMgbm90IHRoaXMgZGl2LCB3ZSBuZWVkIHRvIHNldCBwb2ludGVyLWV2ZW50cyB0byBub25lXG4gIC8vIE9yIGVsc2UgdGhlIGNhbnZhcyB3aWxsIGJsb2NrIGV2ZW50cyBmcm9tIHJlYWNoaW5nIHRoZSBldmVudCBzb3VyY2VcbiAgY29uc3QgcG9pbnRlckV2ZW50cyA9IGV2ZW50U291cmNlID8gJ25vbmUnIDogJ2F1dG8nO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgcmVmOiBkaXZSZWYsXG4gICAgc3R5bGU6IHtcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgcG9pbnRlckV2ZW50cyxcbiAgICAgIC4uLnN0eWxlXG4gICAgfSxcbiAgICAuLi5wcm9wcyxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICByZWY6IGNvbnRhaW5lclJlZixcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGhlaWdodDogJzEwMCUnXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJjYW52YXNcIiwge1xuICAgICAgICByZWY6IGNhbnZhc1JlZixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBmYWxsYmFja1xuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cblxuLyoqXG4gKiBBIERPTSBjYW52YXMgd2hpY2ggYWNjZXB0cyB0aHJlZWpzIGVsZW1lbnRzIGFzIGNoaWxkcmVuLlxuICogQHNlZSBodHRwczovL2RvY3MucG1uZC5ycy9yZWFjdC10aHJlZS1maWJlci9hcGkvY2FudmFzXG4gKi9cbmZ1bmN0aW9uIENhbnZhcyhwcm9wcykge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGaWJlclByb3ZpZGVyLCB7XG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQ2FudmFzSW1wbCwge1xuICAgICAgLi4ucHJvcHNcbiAgICB9KVxuICB9KTtcbn1cblxuZXhwb3J0IHsgQ2FudmFzIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/cjs/scheduler.development.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@react-three/fiber/node_modules/scheduler/cjs/scheduler.development.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/**\n * @license React\n * scheduler.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n true &&\n  (function () {\n    function performWorkUntilDeadline() {\n      if (isMessageLoopRunning) {\n        var currentTime = exports.unstable_now();\n        startTime = currentTime;\n        var hasMoreWork = !0;\n        try {\n          a: {\n            isHostCallbackScheduled = !1;\n            isHostTimeoutScheduled &&\n              ((isHostTimeoutScheduled = !1),\n              localClearTimeout(taskTimeoutID),\n              (taskTimeoutID = -1));\n            isPerformingWork = !0;\n            var previousPriorityLevel = currentPriorityLevel;\n            try {\n              b: {\n                advanceTimers(currentTime);\n                for (\n                  currentTask = peek(taskQueue);\n                  null !== currentTask &&\n                  !(\n                    currentTask.expirationTime > currentTime &&\n                    shouldYieldToHost()\n                  );\n\n                ) {\n                  var callback = currentTask.callback;\n                  if (\"function\" === typeof callback) {\n                    currentTask.callback = null;\n                    currentPriorityLevel = currentTask.priorityLevel;\n                    var continuationCallback = callback(\n                      currentTask.expirationTime <= currentTime\n                    );\n                    currentTime = exports.unstable_now();\n                    if (\"function\" === typeof continuationCallback) {\n                      currentTask.callback = continuationCallback;\n                      advanceTimers(currentTime);\n                      hasMoreWork = !0;\n                      break b;\n                    }\n                    currentTask === peek(taskQueue) && pop(taskQueue);\n                    advanceTimers(currentTime);\n                  } else pop(taskQueue);\n                  currentTask = peek(taskQueue);\n                }\n                if (null !== currentTask) hasMoreWork = !0;\n                else {\n                  var firstTimer = peek(timerQueue);\n                  null !== firstTimer &&\n                    requestHostTimeout(\n                      handleTimeout,\n                      firstTimer.startTime - currentTime\n                    );\n                  hasMoreWork = !1;\n                }\n              }\n              break a;\n            } finally {\n              (currentTask = null),\n                (currentPriorityLevel = previousPriorityLevel),\n                (isPerformingWork = !1);\n            }\n            hasMoreWork = void 0;\n          }\n        } finally {\n          hasMoreWork\n            ? schedulePerformWorkUntilDeadline()\n            : (isMessageLoopRunning = !1);\n        }\n      }\n    }\n    function push(heap, node) {\n      var index = heap.length;\n      heap.push(node);\n      a: for (; 0 < index; ) {\n        var parentIndex = (index - 1) >>> 1,\n          parent = heap[parentIndex];\n        if (0 < compare(parent, node))\n          (heap[parentIndex] = node),\n            (heap[index] = parent),\n            (index = parentIndex);\n        else break a;\n      }\n    }\n    function peek(heap) {\n      return 0 === heap.length ? null : heap[0];\n    }\n    function pop(heap) {\n      if (0 === heap.length) return null;\n      var first = heap[0],\n        last = heap.pop();\n      if (last !== first) {\n        heap[0] = last;\n        a: for (\n          var index = 0, length = heap.length, halfLength = length >>> 1;\n          index < halfLength;\n\n        ) {\n          var leftIndex = 2 * (index + 1) - 1,\n            left = heap[leftIndex],\n            rightIndex = leftIndex + 1,\n            right = heap[rightIndex];\n          if (0 > compare(left, last))\n            rightIndex < length && 0 > compare(right, left)\n              ? ((heap[index] = right),\n                (heap[rightIndex] = last),\n                (index = rightIndex))\n              : ((heap[index] = left),\n                (heap[leftIndex] = last),\n                (index = leftIndex));\n          else if (rightIndex < length && 0 > compare(right, last))\n            (heap[index] = right),\n              (heap[rightIndex] = last),\n              (index = rightIndex);\n          else break a;\n        }\n      }\n      return first;\n    }\n    function compare(a, b) {\n      var diff = a.sortIndex - b.sortIndex;\n      return 0 !== diff ? diff : a.id - b.id;\n    }\n    function advanceTimers(currentTime) {\n      for (var timer = peek(timerQueue); null !== timer; ) {\n        if (null === timer.callback) pop(timerQueue);\n        else if (timer.startTime <= currentTime)\n          pop(timerQueue),\n            (timer.sortIndex = timer.expirationTime),\n            push(taskQueue, timer);\n        else break;\n        timer = peek(timerQueue);\n      }\n    }\n    function handleTimeout(currentTime) {\n      isHostTimeoutScheduled = !1;\n      advanceTimers(currentTime);\n      if (!isHostCallbackScheduled)\n        if (null !== peek(taskQueue))\n          (isHostCallbackScheduled = !0), requestHostCallback();\n        else {\n          var firstTimer = peek(timerQueue);\n          null !== firstTimer &&\n            requestHostTimeout(\n              handleTimeout,\n              firstTimer.startTime - currentTime\n            );\n        }\n    }\n    function shouldYieldToHost() {\n      return exports.unstable_now() - startTime < frameInterval ? !1 : !0;\n    }\n    function requestHostCallback() {\n      isMessageLoopRunning ||\n        ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n    }\n    function requestHostTimeout(callback, ms) {\n      taskTimeoutID = localSetTimeout(function () {\n        callback(exports.unstable_now());\n      }, ms);\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    exports.unstable_now = void 0;\n    if (\n      \"object\" === typeof performance &&\n      \"function\" === typeof performance.now\n    ) {\n      var localPerformance = performance;\n      exports.unstable_now = function () {\n        return localPerformance.now();\n      };\n    } else {\n      var localDate = Date,\n        initialTime = localDate.now();\n      exports.unstable_now = function () {\n        return localDate.now() - initialTime;\n      };\n    }\n    var taskQueue = [],\n      timerQueue = [],\n      taskIdCounter = 1,\n      currentTask = null,\n      currentPriorityLevel = 3,\n      isPerformingWork = !1,\n      isHostCallbackScheduled = !1,\n      isHostTimeoutScheduled = !1,\n      localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n      localClearTimeout =\n        \"function\" === typeof clearTimeout ? clearTimeout : null,\n      localSetImmediate =\n        \"undefined\" !== typeof setImmediate ? setImmediate : null,\n      isMessageLoopRunning = !1,\n      taskTimeoutID = -1,\n      frameInterval = 5,\n      startTime = -1;\n    if (\"function\" === typeof localSetImmediate)\n      var schedulePerformWorkUntilDeadline = function () {\n        localSetImmediate(performWorkUntilDeadline);\n      };\n    else if (\"undefined\" !== typeof MessageChannel) {\n      var channel = new MessageChannel(),\n        port = channel.port2;\n      channel.port1.onmessage = performWorkUntilDeadline;\n      schedulePerformWorkUntilDeadline = function () {\n        port.postMessage(null);\n      };\n    } else\n      schedulePerformWorkUntilDeadline = function () {\n        localSetTimeout(performWorkUntilDeadline, 0);\n      };\n    exports.unstable_IdlePriority = 5;\n    exports.unstable_ImmediatePriority = 1;\n    exports.unstable_LowPriority = 4;\n    exports.unstable_NormalPriority = 3;\n    exports.unstable_Profiling = null;\n    exports.unstable_UserBlockingPriority = 2;\n    exports.unstable_cancelCallback = function (task) {\n      task.callback = null;\n    };\n    exports.unstable_continueExecution = function () {\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0), requestHostCallback());\n    };\n    exports.unstable_forceFrameRate = function (fps) {\n      0 > fps || 125 < fps\n        ? console.error(\n            \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n          )\n        : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n    };\n    exports.unstable_getCurrentPriorityLevel = function () {\n      return currentPriorityLevel;\n    };\n    exports.unstable_getFirstCallbackNode = function () {\n      return peek(taskQueue);\n    };\n    exports.unstable_next = function (eventHandler) {\n      switch (currentPriorityLevel) {\n        case 1:\n        case 2:\n        case 3:\n          var priorityLevel = 3;\n          break;\n        default:\n          priorityLevel = currentPriorityLevel;\n      }\n      var previousPriorityLevel = currentPriorityLevel;\n      currentPriorityLevel = priorityLevel;\n      try {\n        return eventHandler();\n      } finally {\n        currentPriorityLevel = previousPriorityLevel;\n      }\n    };\n    exports.unstable_pauseExecution = function () {};\n    exports.unstable_requestPaint = function () {};\n    exports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n      switch (priorityLevel) {\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n          break;\n        default:\n          priorityLevel = 3;\n      }\n      var previousPriorityLevel = currentPriorityLevel;\n      currentPriorityLevel = priorityLevel;\n      try {\n        return eventHandler();\n      } finally {\n        currentPriorityLevel = previousPriorityLevel;\n      }\n    };\n    exports.unstable_scheduleCallback = function (\n      priorityLevel,\n      callback,\n      options\n    ) {\n      var currentTime = exports.unstable_now();\n      \"object\" === typeof options && null !== options\n        ? ((options = options.delay),\n          (options =\n            \"number\" === typeof options && 0 < options\n              ? currentTime + options\n              : currentTime))\n        : (options = currentTime);\n      switch (priorityLevel) {\n        case 1:\n          var timeout = -1;\n          break;\n        case 2:\n          timeout = 250;\n          break;\n        case 5:\n          timeout = 1073741823;\n          break;\n        case 4:\n          timeout = 1e4;\n          break;\n        default:\n          timeout = 5e3;\n      }\n      timeout = options + timeout;\n      priorityLevel = {\n        id: taskIdCounter++,\n        callback: callback,\n        priorityLevel: priorityLevel,\n        startTime: options,\n        expirationTime: timeout,\n        sortIndex: -1\n      };\n      options > currentTime\n        ? ((priorityLevel.sortIndex = options),\n          push(timerQueue, priorityLevel),\n          null === peek(taskQueue) &&\n            priorityLevel === peek(timerQueue) &&\n            (isHostTimeoutScheduled\n              ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n              : (isHostTimeoutScheduled = !0),\n            requestHostTimeout(handleTimeout, options - currentTime)))\n        : ((priorityLevel.sortIndex = timeout),\n          push(taskQueue, priorityLevel),\n          isHostCallbackScheduled ||\n            isPerformingWork ||\n            ((isHostCallbackScheduled = !0), requestHostCallback()));\n      return priorityLevel;\n    };\n    exports.unstable_shouldYield = shouldYieldToHost;\n    exports.unstable_wrapCallback = function (callback) {\n      var parentPriorityLevel = currentPriorityLevel;\n      return function () {\n        var previousPriorityLevel = currentPriorityLevel;\n        currentPriorityLevel = parentPriorityLevel;\n        try {\n          return callback.apply(this, arguments);\n        } finally {\n          currentPriorityLevel = previousPriorityLevel;\n        }\n      };\n    };\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2ZpYmVyL25vZGVfbW9kdWxlcy9zY2hlZHVsZXIvY2pzL3NjaGVkdWxlci5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixLQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsZ0JBQWdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9CQUFvQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvQkFBb0I7QUFDMUI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTSxvQkFBb0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSSw2QkFBNkI7QUFDakMsSUFBSSxrQ0FBa0M7QUFDdEMsSUFBSSw0QkFBNEI7QUFDaEMsSUFBSSwrQkFBK0I7QUFDbkMsSUFBSSwwQkFBMEI7QUFDOUIsSUFBSSxxQ0FBcUM7QUFDekMsSUFBSSwrQkFBK0I7QUFDbkM7QUFDQTtBQUNBLElBQUksa0NBQWtDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrQkFBK0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3Q0FBd0M7QUFDNUM7QUFDQTtBQUNBLElBQUkscUNBQXFDO0FBQ3pDO0FBQ0E7QUFDQSxJQUFJLHFCQUFxQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLDZCQUE2QjtBQUNqQyxJQUFJLGdDQUFnQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLElBQUksaUNBQWlDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRCQUE0QjtBQUNoQyxJQUFJLDZCQUE2QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXHBhcmVudGx5dGljc1xcbm9kZV9tb2R1bGVzXFxAcmVhY3QtdGhyZWVcXGZpYmVyXFxub2RlX21vZHVsZXNcXHNjaGVkdWxlclxcY2pzXFxzY2hlZHVsZXIuZGV2ZWxvcG1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogc2NoZWR1bGVyLmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSgpIHtcbiAgICAgIGlmIChpc01lc3NhZ2VMb29wUnVubmluZykge1xuICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBleHBvcnRzLnVuc3RhYmxlX25vdygpO1xuICAgICAgICBzdGFydFRpbWUgPSBjdXJyZW50VGltZTtcbiAgICAgICAgdmFyIGhhc01vcmVXb3JrID0gITA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYToge1xuICAgICAgICAgICAgaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgPSAhMTtcbiAgICAgICAgICAgIGlzSG9zdFRpbWVvdXRTY2hlZHVsZWQgJiZcbiAgICAgICAgICAgICAgKChpc0hvc3RUaW1lb3V0U2NoZWR1bGVkID0gITEpLFxuICAgICAgICAgICAgICBsb2NhbENsZWFyVGltZW91dCh0YXNrVGltZW91dElEKSxcbiAgICAgICAgICAgICAgKHRhc2tUaW1lb3V0SUQgPSAtMSkpO1xuICAgICAgICAgICAgaXNQZXJmb3JtaW5nV29yayA9ICEwO1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHlMZXZlbCA9IGN1cnJlbnRQcmlvcml0eUxldmVsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYjoge1xuICAgICAgICAgICAgICAgIGFkdmFuY2VUaW1lcnMoY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICBjdXJyZW50VGFzayA9IHBlZWsodGFza1F1ZXVlKTtcbiAgICAgICAgICAgICAgICAgIG51bGwgIT09IGN1cnJlbnRUYXNrICYmXG4gICAgICAgICAgICAgICAgICAhKFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFzay5leHBpcmF0aW9uVGltZSA+IGN1cnJlbnRUaW1lICYmXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFlpZWxkVG9Ib3N0KClcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGN1cnJlbnRUYXNrLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrLmNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFByaW9yaXR5TGV2ZWwgPSBjdXJyZW50VGFzay5wcmlvcml0eUxldmVsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGludWF0aW9uQ2FsbGJhY2sgPSBjYWxsYmFjayhcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFzay5leHBpcmF0aW9uVGltZSA8PSBjdXJyZW50VGltZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IGV4cG9ydHMudW5zdGFibGVfbm93KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBjb250aW51YXRpb25DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrLmNhbGxiYWNrID0gY29udGludWF0aW9uQ2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZVRpbWVycyhjdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgaGFzTW9yZVdvcmsgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhayBiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrID09PSBwZWVrKHRhc2tRdWV1ZSkgJiYgcG9wKHRhc2tRdWV1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VUaW1lcnMoY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHBvcCh0YXNrUXVldWUpO1xuICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2sgPSBwZWVrKHRhc2tRdWV1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50VGFzaykgaGFzTW9yZVdvcmsgPSAhMDtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFRpbWVyID0gcGVlayh0aW1lclF1ZXVlKTtcbiAgICAgICAgICAgICAgICAgIG51bGwgIT09IGZpcnN0VGltZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEhvc3RUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgZmlyc3RUaW1lci5zdGFydFRpbWUgLSBjdXJyZW50VGltZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgaGFzTW9yZVdvcmsgPSAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIChjdXJyZW50VGFzayA9IG51bGwpLFxuICAgICAgICAgICAgICAgIChjdXJyZW50UHJpb3JpdHlMZXZlbCA9IHByZXZpb3VzUHJpb3JpdHlMZXZlbCksXG4gICAgICAgICAgICAgICAgKGlzUGVyZm9ybWluZ1dvcmsgPSAhMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXNNb3JlV29yayA9IHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaGFzTW9yZVdvcmtcbiAgICAgICAgICAgID8gc2NoZWR1bGVQZXJmb3JtV29ya1VudGlsRGVhZGxpbmUoKVxuICAgICAgICAgICAgOiAoaXNNZXNzYWdlTG9vcFJ1bm5pbmcgPSAhMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcHVzaChoZWFwLCBub2RlKSB7XG4gICAgICB2YXIgaW5kZXggPSBoZWFwLmxlbmd0aDtcbiAgICAgIGhlYXAucHVzaChub2RlKTtcbiAgICAgIGE6IGZvciAoOyAwIDwgaW5kZXg7ICkge1xuICAgICAgICB2YXIgcGFyZW50SW5kZXggPSAoaW5kZXggLSAxKSA+Pj4gMSxcbiAgICAgICAgICBwYXJlbnQgPSBoZWFwW3BhcmVudEluZGV4XTtcbiAgICAgICAgaWYgKDAgPCBjb21wYXJlKHBhcmVudCwgbm9kZSkpXG4gICAgICAgICAgKGhlYXBbcGFyZW50SW5kZXhdID0gbm9kZSksXG4gICAgICAgICAgICAoaGVhcFtpbmRleF0gPSBwYXJlbnQpLFxuICAgICAgICAgICAgKGluZGV4ID0gcGFyZW50SW5kZXgpO1xuICAgICAgICBlbHNlIGJyZWFrIGE7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBlZWsoaGVhcCkge1xuICAgICAgcmV0dXJuIDAgPT09IGhlYXAubGVuZ3RoID8gbnVsbCA6IGhlYXBbMF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvcChoZWFwKSB7XG4gICAgICBpZiAoMCA9PT0gaGVhcC5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgdmFyIGZpcnN0ID0gaGVhcFswXSxcbiAgICAgICAgbGFzdCA9IGhlYXAucG9wKCk7XG4gICAgICBpZiAobGFzdCAhPT0gZmlyc3QpIHtcbiAgICAgICAgaGVhcFswXSA9IGxhc3Q7XG4gICAgICAgIGE6IGZvciAoXG4gICAgICAgICAgdmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gaGVhcC5sZW5ndGgsIGhhbGZMZW5ndGggPSBsZW5ndGggPj4+IDE7XG4gICAgICAgICAgaW5kZXggPCBoYWxmTGVuZ3RoO1xuXG4gICAgICAgICkge1xuICAgICAgICAgIHZhciBsZWZ0SW5kZXggPSAyICogKGluZGV4ICsgMSkgLSAxLFxuICAgICAgICAgICAgbGVmdCA9IGhlYXBbbGVmdEluZGV4XSxcbiAgICAgICAgICAgIHJpZ2h0SW5kZXggPSBsZWZ0SW5kZXggKyAxLFxuICAgICAgICAgICAgcmlnaHQgPSBoZWFwW3JpZ2h0SW5kZXhdO1xuICAgICAgICAgIGlmICgwID4gY29tcGFyZShsZWZ0LCBsYXN0KSlcbiAgICAgICAgICAgIHJpZ2h0SW5kZXggPCBsZW5ndGggJiYgMCA+IGNvbXBhcmUocmlnaHQsIGxlZnQpXG4gICAgICAgICAgICAgID8gKChoZWFwW2luZGV4XSA9IHJpZ2h0KSxcbiAgICAgICAgICAgICAgICAoaGVhcFtyaWdodEluZGV4XSA9IGxhc3QpLFxuICAgICAgICAgICAgICAgIChpbmRleCA9IHJpZ2h0SW5kZXgpKVxuICAgICAgICAgICAgICA6ICgoaGVhcFtpbmRleF0gPSBsZWZ0KSxcbiAgICAgICAgICAgICAgICAoaGVhcFtsZWZ0SW5kZXhdID0gbGFzdCksXG4gICAgICAgICAgICAgICAgKGluZGV4ID0gbGVmdEluZGV4KSk7XG4gICAgICAgICAgZWxzZSBpZiAocmlnaHRJbmRleCA8IGxlbmd0aCAmJiAwID4gY29tcGFyZShyaWdodCwgbGFzdCkpXG4gICAgICAgICAgICAoaGVhcFtpbmRleF0gPSByaWdodCksXG4gICAgICAgICAgICAgIChoZWFwW3JpZ2h0SW5kZXhdID0gbGFzdCksXG4gICAgICAgICAgICAgIChpbmRleCA9IHJpZ2h0SW5kZXgpO1xuICAgICAgICAgIGVsc2UgYnJlYWsgYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZpcnN0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgICAgIHZhciBkaWZmID0gYS5zb3J0SW5kZXggLSBiLnNvcnRJbmRleDtcbiAgICAgIHJldHVybiAwICE9PSBkaWZmID8gZGlmZiA6IGEuaWQgLSBiLmlkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZHZhbmNlVGltZXJzKGN1cnJlbnRUaW1lKSB7XG4gICAgICBmb3IgKHZhciB0aW1lciA9IHBlZWsodGltZXJRdWV1ZSk7IG51bGwgIT09IHRpbWVyOyApIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHRpbWVyLmNhbGxiYWNrKSBwb3AodGltZXJRdWV1ZSk7XG4gICAgICAgIGVsc2UgaWYgKHRpbWVyLnN0YXJ0VGltZSA8PSBjdXJyZW50VGltZSlcbiAgICAgICAgICBwb3AodGltZXJRdWV1ZSksXG4gICAgICAgICAgICAodGltZXIuc29ydEluZGV4ID0gdGltZXIuZXhwaXJhdGlvblRpbWUpLFxuICAgICAgICAgICAgcHVzaCh0YXNrUXVldWUsIHRpbWVyKTtcbiAgICAgICAgZWxzZSBicmVhaztcbiAgICAgICAgdGltZXIgPSBwZWVrKHRpbWVyUXVldWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KGN1cnJlbnRUaW1lKSB7XG4gICAgICBpc0hvc3RUaW1lb3V0U2NoZWR1bGVkID0gITE7XG4gICAgICBhZHZhbmNlVGltZXJzKGN1cnJlbnRUaW1lKTtcbiAgICAgIGlmICghaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQpXG4gICAgICAgIGlmIChudWxsICE9PSBwZWVrKHRhc2tRdWV1ZSkpXG4gICAgICAgICAgKGlzSG9zdENhbGxiYWNrU2NoZWR1bGVkID0gITApLCByZXF1ZXN0SG9zdENhbGxiYWNrKCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBmaXJzdFRpbWVyID0gcGVlayh0aW1lclF1ZXVlKTtcbiAgICAgICAgICBudWxsICE9PSBmaXJzdFRpbWVyICYmXG4gICAgICAgICAgICByZXF1ZXN0SG9zdFRpbWVvdXQoXG4gICAgICAgICAgICAgIGhhbmRsZVRpbWVvdXQsXG4gICAgICAgICAgICAgIGZpcnN0VGltZXIuc3RhcnRUaW1lIC0gY3VycmVudFRpbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2hvdWxkWWllbGRUb0hvc3QoKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy51bnN0YWJsZV9ub3coKSAtIHN0YXJ0VGltZSA8IGZyYW1lSW50ZXJ2YWwgPyAhMSA6ICEwO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXF1ZXN0SG9zdENhbGxiYWNrKCkge1xuICAgICAgaXNNZXNzYWdlTG9vcFJ1bm5pbmcgfHxcbiAgICAgICAgKChpc01lc3NhZ2VMb29wUnVubmluZyA9ICEwKSwgc2NoZWR1bGVQZXJmb3JtV29ya1VudGlsRGVhZGxpbmUoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlcXVlc3RIb3N0VGltZW91dChjYWxsYmFjaywgbXMpIHtcbiAgICAgIHRhc2tUaW1lb3V0SUQgPSBsb2NhbFNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhleHBvcnRzLnVuc3RhYmxlX25vdygpKTtcbiAgICAgIH0sIG1zKTtcbiAgICB9XG4gICAgXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAmJlxuICAgICAgXCJmdW5jdGlvblwiID09PVxuICAgICAgICB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdGFydCAmJlxuICAgICAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdGFydChFcnJvcigpKTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX25vdyA9IHZvaWQgMDtcbiAgICBpZiAoXG4gICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgcGVyZm9ybWFuY2UgJiZcbiAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHBlcmZvcm1hbmNlLm5vd1xuICAgICkge1xuICAgICAgdmFyIGxvY2FsUGVyZm9ybWFuY2UgPSBwZXJmb3JtYW5jZTtcbiAgICAgIGV4cG9ydHMudW5zdGFibGVfbm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbG9jYWxQZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsb2NhbERhdGUgPSBEYXRlLFxuICAgICAgICBpbml0aWFsVGltZSA9IGxvY2FsRGF0ZS5ub3coKTtcbiAgICAgIGV4cG9ydHMudW5zdGFibGVfbm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbG9jYWxEYXRlLm5vdygpIC0gaW5pdGlhbFRpbWU7XG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgdGFza1F1ZXVlID0gW10sXG4gICAgICB0aW1lclF1ZXVlID0gW10sXG4gICAgICB0YXNrSWRDb3VudGVyID0gMSxcbiAgICAgIGN1cnJlbnRUYXNrID0gbnVsbCxcbiAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gMyxcbiAgICAgIGlzUGVyZm9ybWluZ1dvcmsgPSAhMSxcbiAgICAgIGlzSG9zdENhbGxiYWNrU2NoZWR1bGVkID0gITEsXG4gICAgICBpc0hvc3RUaW1lb3V0U2NoZWR1bGVkID0gITEsXG4gICAgICBsb2NhbFNldFRpbWVvdXQgPSBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBzZXRUaW1lb3V0ID8gc2V0VGltZW91dCA6IG51bGwsXG4gICAgICBsb2NhbENsZWFyVGltZW91dCA9XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGNsZWFyVGltZW91dCA/IGNsZWFyVGltZW91dCA6IG51bGwsXG4gICAgICBsb2NhbFNldEltbWVkaWF0ZSA9XG4gICAgICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBzZXRJbW1lZGlhdGUgPyBzZXRJbW1lZGlhdGUgOiBudWxsLFxuICAgICAgaXNNZXNzYWdlTG9vcFJ1bm5pbmcgPSAhMSxcbiAgICAgIHRhc2tUaW1lb3V0SUQgPSAtMSxcbiAgICAgIGZyYW1lSW50ZXJ2YWwgPSA1LFxuICAgICAgc3RhcnRUaW1lID0gLTE7XG4gICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGxvY2FsU2V0SW1tZWRpYXRlKVxuICAgICAgdmFyIHNjaGVkdWxlUGVyZm9ybVdvcmtVbnRpbERlYWRsaW5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2NhbFNldEltbWVkaWF0ZShwZXJmb3JtV29ya1VudGlsRGVhZGxpbmUpO1xuICAgICAgfTtcbiAgICBlbHNlIGlmIChcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCksXG4gICAgICAgIHBvcnQgPSBjaGFubmVsLnBvcnQyO1xuICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBwZXJmb3JtV29ya1VudGlsRGVhZGxpbmU7XG4gICAgICBzY2hlZHVsZVBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcG9ydC5wb3N0TWVzc2FnZShudWxsKTtcbiAgICAgIH07XG4gICAgfSBlbHNlXG4gICAgICBzY2hlZHVsZVBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbG9jYWxTZXRUaW1lb3V0KHBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSwgMCk7XG4gICAgICB9O1xuICAgIGV4cG9ydHMudW5zdGFibGVfSWRsZVByaW9yaXR5ID0gNTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX0ltbWVkaWF0ZVByaW9yaXR5ID0gMTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX0xvd1ByaW9yaXR5ID0gNDtcbiAgICBleHBvcnRzLnVuc3RhYmxlX05vcm1hbFByaW9yaXR5ID0gMztcbiAgICBleHBvcnRzLnVuc3RhYmxlX1Byb2ZpbGluZyA9IG51bGw7XG4gICAgZXhwb3J0cy51bnN0YWJsZV9Vc2VyQmxvY2tpbmdQcmlvcml0eSA9IDI7XG4gICAgZXhwb3J0cy51bnN0YWJsZV9jYW5jZWxDYWxsYmFjayA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICB0YXNrLmNhbGxiYWNrID0gbnVsbDtcbiAgICB9O1xuICAgIGV4cG9ydHMudW5zdGFibGVfY29udGludWVFeGVjdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpc0hvc3RDYWxsYmFja1NjaGVkdWxlZCB8fFxuICAgICAgICBpc1BlcmZvcm1pbmdXb3JrIHx8XG4gICAgICAgICgoaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgPSAhMCksIHJlcXVlc3RIb3N0Q2FsbGJhY2soKSk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX2ZvcmNlRnJhbWVSYXRlID0gZnVuY3Rpb24gKGZwcykge1xuICAgICAgMCA+IGZwcyB8fCAxMjUgPCBmcHNcbiAgICAgICAgPyBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJmb3JjZUZyYW1lUmF0ZSB0YWtlcyBhIHBvc2l0aXZlIGludCBiZXR3ZWVuIDAgYW5kIDEyNSwgZm9yY2luZyBmcmFtZSByYXRlcyBoaWdoZXIgdGhhbiAxMjUgZnBzIGlzIG5vdCBzdXBwb3J0ZWRcIlxuICAgICAgICAgIClcbiAgICAgICAgOiAoZnJhbWVJbnRlcnZhbCA9IDAgPCBmcHMgPyBNYXRoLmZsb29yKDFlMyAvIGZwcykgOiA1KTtcbiAgICB9O1xuICAgIGV4cG9ydHMudW5zdGFibGVfZ2V0Q3VycmVudFByaW9yaXR5TGV2ZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY3VycmVudFByaW9yaXR5TGV2ZWw7XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX2dldEZpcnN0Q2FsbGJhY2tOb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHBlZWsodGFza1F1ZXVlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudW5zdGFibGVfbmV4dCA9IGZ1bmN0aW9uIChldmVudEhhbmRsZXIpIHtcbiAgICAgIHN3aXRjaCAoY3VycmVudFByaW9yaXR5TGV2ZWwpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICB2YXIgcHJpb3JpdHlMZXZlbCA9IDM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcHJpb3JpdHlMZXZlbCA9IGN1cnJlbnRQcmlvcml0eUxldmVsO1xuICAgICAgfVxuICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHlMZXZlbCA9IGN1cnJlbnRQcmlvcml0eUxldmVsO1xuICAgICAgY3VycmVudFByaW9yaXR5TGV2ZWwgPSBwcmlvcml0eUxldmVsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGV2ZW50SGFuZGxlcigpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY3VycmVudFByaW9yaXR5TGV2ZWwgPSBwcmV2aW91c1ByaW9yaXR5TGV2ZWw7XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX3BhdXNlRXhlY3V0aW9uID0gZnVuY3Rpb24gKCkge307XG4gICAgZXhwb3J0cy51bnN0YWJsZV9yZXF1ZXN0UGFpbnQgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX3J1bldpdGhQcmlvcml0eSA9IGZ1bmN0aW9uIChwcmlvcml0eUxldmVsLCBldmVudEhhbmRsZXIpIHtcbiAgICAgIHN3aXRjaCAocHJpb3JpdHlMZXZlbCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcmlvcml0eUxldmVsID0gMztcbiAgICAgIH1cbiAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5TGV2ZWwgPSBjdXJyZW50UHJpb3JpdHlMZXZlbDtcbiAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gcHJpb3JpdHlMZXZlbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBldmVudEhhbmRsZXIoKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gcHJldmlvdXNQcmlvcml0eUxldmVsO1xuICAgICAgfVxuICAgIH07XG4gICAgZXhwb3J0cy51bnN0YWJsZV9zY2hlZHVsZUNhbGxiYWNrID0gZnVuY3Rpb24gKFxuICAgICAgcHJpb3JpdHlMZXZlbCxcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgb3B0aW9uc1xuICAgICkge1xuICAgICAgdmFyIGN1cnJlbnRUaW1lID0gZXhwb3J0cy51bnN0YWJsZV9ub3coKTtcbiAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiBvcHRpb25zICYmIG51bGwgIT09IG9wdGlvbnNcbiAgICAgICAgPyAoKG9wdGlvbnMgPSBvcHRpb25zLmRlbGF5KSxcbiAgICAgICAgICAob3B0aW9ucyA9XG4gICAgICAgICAgICBcIm51bWJlclwiID09PSB0eXBlb2Ygb3B0aW9ucyAmJiAwIDwgb3B0aW9uc1xuICAgICAgICAgICAgICA/IGN1cnJlbnRUaW1lICsgb3B0aW9uc1xuICAgICAgICAgICAgICA6IGN1cnJlbnRUaW1lKSlcbiAgICAgICAgOiAob3B0aW9ucyA9IGN1cnJlbnRUaW1lKTtcbiAgICAgIHN3aXRjaCAocHJpb3JpdHlMZXZlbCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdmFyIHRpbWVvdXQgPSAtMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHRpbWVvdXQgPSAyNTA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICB0aW1lb3V0ID0gMTA3Mzc0MTgyMztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRpbWVvdXQgPSAxZTQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGltZW91dCA9IDVlMztcbiAgICAgIH1cbiAgICAgIHRpbWVvdXQgPSBvcHRpb25zICsgdGltZW91dDtcbiAgICAgIHByaW9yaXR5TGV2ZWwgPSB7XG4gICAgICAgIGlkOiB0YXNrSWRDb3VudGVyKyssXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgcHJpb3JpdHlMZXZlbDogcHJpb3JpdHlMZXZlbCxcbiAgICAgICAgc3RhcnRUaW1lOiBvcHRpb25zLFxuICAgICAgICBleHBpcmF0aW9uVGltZTogdGltZW91dCxcbiAgICAgICAgc29ydEluZGV4OiAtMVxuICAgICAgfTtcbiAgICAgIG9wdGlvbnMgPiBjdXJyZW50VGltZVxuICAgICAgICA/ICgocHJpb3JpdHlMZXZlbC5zb3J0SW5kZXggPSBvcHRpb25zKSxcbiAgICAgICAgICBwdXNoKHRpbWVyUXVldWUsIHByaW9yaXR5TGV2ZWwpLFxuICAgICAgICAgIG51bGwgPT09IHBlZWsodGFza1F1ZXVlKSAmJlxuICAgICAgICAgICAgcHJpb3JpdHlMZXZlbCA9PT0gcGVlayh0aW1lclF1ZXVlKSAmJlxuICAgICAgICAgICAgKGlzSG9zdFRpbWVvdXRTY2hlZHVsZWRcbiAgICAgICAgICAgICAgPyAobG9jYWxDbGVhclRpbWVvdXQodGFza1RpbWVvdXRJRCksICh0YXNrVGltZW91dElEID0gLTEpKVxuICAgICAgICAgICAgICA6IChpc0hvc3RUaW1lb3V0U2NoZWR1bGVkID0gITApLFxuICAgICAgICAgICAgcmVxdWVzdEhvc3RUaW1lb3V0KGhhbmRsZVRpbWVvdXQsIG9wdGlvbnMgLSBjdXJyZW50VGltZSkpKVxuICAgICAgICA6ICgocHJpb3JpdHlMZXZlbC5zb3J0SW5kZXggPSB0aW1lb3V0KSxcbiAgICAgICAgICBwdXNoKHRhc2tRdWV1ZSwgcHJpb3JpdHlMZXZlbCksXG4gICAgICAgICAgaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgfHxcbiAgICAgICAgICAgIGlzUGVyZm9ybWluZ1dvcmsgfHxcbiAgICAgICAgICAgICgoaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgPSAhMCksIHJlcXVlc3RIb3N0Q2FsbGJhY2soKSkpO1xuICAgICAgcmV0dXJuIHByaW9yaXR5TGV2ZWw7XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX3Nob3VsZFlpZWxkID0gc2hvdWxkWWllbGRUb0hvc3Q7XG4gICAgZXhwb3J0cy51bnN0YWJsZV93cmFwQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBwYXJlbnRQcmlvcml0eUxldmVsID0gY3VycmVudFByaW9yaXR5TGV2ZWw7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJldmlvdXNQcmlvcml0eUxldmVsID0gY3VycmVudFByaW9yaXR5TGV2ZWw7XG4gICAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gcGFyZW50UHJpb3JpdHlMZXZlbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjdXJyZW50UHJpb3JpdHlMZXZlbCA9IHByZXZpb3VzUHJpb3JpdHlMZXZlbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiZcbiAgICAgIFwiZnVuY3Rpb25cIiA9PT1cbiAgICAgICAgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcCAmJlxuICAgICAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdG9wKEVycm9yKCkpO1xuICB9KSgpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/cjs/scheduler.development.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@react-three/fiber/node_modules/scheduler/index.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/scheduler.development.js */ \"(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/cjs/scheduler.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2ZpYmVyL25vZGVfbW9kdWxlcy9zY2hlZHVsZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsSUFBSSxLQUFxQyxFQUFFLEVBRTFDLENBQUM7QUFDRixFQUFFLHlLQUEwRDtBQUM1RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxccGFyZW50bHl0aWNzXFxub2RlX21vZHVsZXNcXEByZWFjdC10aHJlZVxcZmliZXJcXG5vZGVfbW9kdWxlc1xcc2NoZWR1bGVyXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvc2NoZWR1bGVyLnByb2R1Y3Rpb24uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvc2NoZWR1bGVyLmRldmVsb3BtZW50LmpzJyk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/fiber/node_modules/scheduler/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/dist/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/dist/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ASCII: () => (/* binding */ eo),\n/* harmony export */   Autofocus: () => (/* binding */ ht),\n/* harmony export */   Bloom: () => (/* binding */ wt),\n/* harmony export */   BrightnessContrast: () => (/* binding */ St),\n/* harmony export */   ChromaticAberration: () => (/* binding */ yt),\n/* harmony export */   ColorAverage: () => (/* binding */ Pt),\n/* harmony export */   ColorDepth: () => (/* binding */ bt),\n/* harmony export */   Depth: () => (/* binding */ Et),\n/* harmony export */   DepthOfField: () => (/* binding */ ce),\n/* harmony export */   DotScreen: () => (/* binding */ Rt),\n/* harmony export */   EffectComposer: () => (/* binding */ dt),\n/* harmony export */   EffectComposerContext: () => (/* binding */ D),\n/* harmony export */   FXAA: () => (/* binding */ Nt),\n/* harmony export */   Glitch: () => (/* binding */ Ut),\n/* harmony export */   GodRays: () => (/* binding */ Ct),\n/* harmony export */   Grid: () => (/* binding */ zt),\n/* harmony export */   HueSaturation: () => (/* binding */ Tt),\n/* harmony export */   LUT: () => (/* binding */ Zt),\n/* harmony export */   LensFlare: () => (/* binding */ gt),\n/* harmony export */   LensFlareEffect: () => (/* binding */ fe),\n/* harmony export */   N8AO: () => (/* binding */ ao),\n/* harmony export */   Noise: () => (/* binding */ At),\n/* harmony export */   Outline: () => (/* binding */ Bt),\n/* harmony export */   Pixelation: () => (/* binding */ Vt),\n/* harmony export */   Ramp: () => (/* binding */ Ot),\n/* harmony export */   RampEffect: () => (/* binding */ pe),\n/* harmony export */   RampType: () => (/* binding */ ue),\n/* harmony export */   SMAA: () => (/* binding */ Lt),\n/* harmony export */   SSAO: () => (/* binding */ It),\n/* harmony export */   Scanline: () => (/* binding */ Ft),\n/* harmony export */   Select: () => (/* binding */ mt),\n/* harmony export */   Selection: () => (/* binding */ pt),\n/* harmony export */   SelectiveBloom: () => (/* binding */ kt),\n/* harmony export */   Sepia: () => (/* binding */ Gt),\n/* harmony export */   ShockWave: () => (/* binding */ Ht),\n/* harmony export */   Texture: () => (/* binding */ Wt),\n/* harmony export */   TiltShift: () => (/* binding */ $t),\n/* harmony export */   TiltShift2: () => (/* binding */ Yt),\n/* harmony export */   TiltShiftEffect: () => (/* binding */ me),\n/* harmony export */   ToneMapping: () => (/* binding */ Xt),\n/* harmony export */   Vignette: () => (/* binding */ qt),\n/* harmony export */   WaterEffect: () => (/* binding */ oo),\n/* harmony export */   WaterEffectImpl: () => (/* binding */ de),\n/* harmony export */   resolveRef: () => (/* binding */ k),\n/* harmony export */   selectionContext: () => (/* binding */ H),\n/* harmony export */   useVector2: () => (/* binding */ Z),\n/* harmony export */   wrapEffect: () => (/* binding */ P)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/events-cf57b220.esm.js\");\n/* harmony import */ var postprocessing__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! postprocessing */ \"(ssr)/./node_modules/postprocessing/build/index.js\");\n/* harmony import */ var maath__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! maath */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/maath.esm.js\");\n/* harmony import */ var n8ao__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! n8ao */ \"(ssr)/./node_modules/n8ao/dist/N8AO.js\");\nconst H=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);function pt({children:e,enabled:t=!0}){const[o,r]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),a=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({selected:o,select:r,enabled:t}),[o,r,t]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(H.Provider,{value:a,children:e})}function mt({enabled:e=!1,children:t,...o}){const r=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),a=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(H);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(a&&e){let n=!1;const i=[];if(r.current.traverse(s=>{s.type===\"Mesh\"&&i.push(s),a.selected.indexOf(s)===-1&&(n=!0)}),n)return a.select(s=>[...s,...i]),()=>{a.select(s=>s.filter(l=>!i.includes(l)))}}},[e,t,a]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"group\",{ref:r,...o,children:t})}const D=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null),ie=e=>(e.getAttributes()&2)===2,dt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({children:e,camera:t,scene:o,resolutionScale:r,enabled:a=!0,renderPriority:n=1,autoClear:i=!0,depthBuffer:s,enableNormalPass:l,stencilBuffer:p,multisampling:_=8,frameBufferType:S=three__WEBPACK_IMPORTED_MODULE_4__.HalfFloatType},g)=>{const{gl:d,scene:m,camera:v,size:x}=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(),f=o||m,u=t||v,[c,U,b]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const C=new postprocessing__WEBPACK_IMPORTED_MODULE_6__.EffectComposer(d,{depthBuffer:s,stencilBuffer:p,multisampling:_,frameBufferType:S});C.addPass(new postprocessing__WEBPACK_IMPORTED_MODULE_6__.RenderPass(f,u));let R=null,E=null;return l&&(E=new postprocessing__WEBPACK_IMPORTED_MODULE_6__.NormalPass(f,u),E.enabled=!1,C.addPass(E),r!==void 0&&(R=new postprocessing__WEBPACK_IMPORTED_MODULE_6__.DepthDownsamplingPass({normalBuffer:E.texture,resolutionScale:r}),R.enabled=!1,C.addPass(R))),[C,E,R]},[u,d,s,p,_,S,f,l,r]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>c?.setSize(x.width,x.height),[c,x]),(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.D)((C,R)=>{if(a){const E=d.autoClear;d.autoClear=i,p&&!i&&d.clearStencil(),c.render(R),d.autoClear=E}},a?n:0);const F=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{const C=[],R=F.current.__r3f;if(R&&c){const E=R.children;for(let T=0;T<E.length;T++){const N=E[T].object;if(N instanceof postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect){const q=[N];if(!ie(N)){let G=null;for(;(G=E[T+1]?.object)instanceof postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect&&!ie(G);)q.push(G),T++}const $=new postprocessing__WEBPACK_IMPORTED_MODULE_6__.EffectPass(u,...q);C.push($)}else N instanceof postprocessing__WEBPACK_IMPORTED_MODULE_6__.Pass&&C.push(N)}for(const T of C)c?.addPass(T);U&&(U.enabled=!0),b&&(b.enabled=!0)}return()=>{for(const E of C)c?.removePass(E);U&&(U.enabled=!1),b&&(b.enabled=!1)}},[c,e,u,U,b]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{const C=d.toneMapping;return d.toneMapping=three__WEBPACK_IMPORTED_MODULE_4__.NoToneMapping,()=>{d.toneMapping=C}},[d]);const X=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({composer:c,normalPass:U,downSamplingPass:b,resolutionScale:r,camera:u,scene:f}),[c,U,b,r,u,f]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(g,()=>c,[c]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(D.Provider,{value:X,children:/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"group\",{ref:F,children:e})})})),k=e=>typeof e==\"object\"&&e!=null&&\"current\"in e?e.current:e;let vt=0;const le=/*@__PURE__*/new WeakMap,P=(e,t)=>function({blendFunction:o=t?.blendFunction,opacity:r=t?.opacity,...a}){let n=le.get(e);if(!n){const l=`@react-three/postprocessing/${e.name}-${vt++}`;(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.e)({[l]:e}),le.set(e,n=l)}const i=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(l=>l.camera),s=react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>[...t?.args??[],...a.args??[{...t,...a}]],[JSON.stringify(a)]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(n,{camera:i,\"blendMode-blendFunction\":o,\"blendMode-opacity-value\":r,...a,args:s})},Z=(e,t)=>{const o=e[t];return react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>typeof o==\"number\"?new three__WEBPACK_IMPORTED_MODULE_4__.Vector2(o,o):o?new three__WEBPACK_IMPORTED_MODULE_4__.Vector2(...o):new three__WEBPACK_IMPORTED_MODULE_4__.Vector2,[o])},ce=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({blendFunction:e,worldFocusDistance:t,worldFocusRange:o,focusDistance:r,focusRange:a,focalLength:n,bokehScale:i,resolutionScale:s,resolutionX:l,resolutionY:p,width:_,height:S,target:g,depthTexture:d,...m},v){const{camera:x}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),f=g!=null,u=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const c=new postprocessing__WEBPACK_IMPORTED_MODULE_6__.DepthOfFieldEffect(x,{blendFunction:e,worldFocusDistance:t,worldFocusRange:o,focusDistance:r,focusRange:a,focalLength:n,bokehScale:i,resolutionScale:s,resolutionX:l,resolutionY:p,width:_,height:S});f&&(c.target=new three__WEBPACK_IMPORTED_MODULE_4__.Vector3),d&&c.setDepthTexture(d.texture,d.packing);const U=c.maskPass;return U.maskFunction=postprocessing__WEBPACK_IMPORTED_MODULE_6__.MaskFunction.MULTIPLY_RGB_SET_ALPHA,c},[x,e,t,o,r,a,n,i,s,l,p,_,S,f,d]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>()=>{u.dispose()},[u]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{...m,ref:v,object:u,target:g})}),ht=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({target:e=void 0,mouse:t=!1,debug:o=void 0,manual:r=!1,smoothTime:a=.25,...n},i)=>{const s=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),l=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),p=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),_=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(({scene:b})=>b),S=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(({pointer:b})=>b),{composer:g,camera:d}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),[m]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.DepthPickingPass),[v]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.CopyPass);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>(g.addPass(m),g.addPass(v),()=>{g.removePass(m),g.removePass(v)}),[g,m,v]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>()=>{m.dispose(),v.dispose()},[m,v]);const[x]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new three__WEBPACK_IMPORTED_MODULE_4__.Vector3(0,0,0)),[f]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new three__WEBPACK_IMPORTED_MODULE_4__.Vector3(0,0,0)),u=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async(b,F)=>(f.x=b,f.y=F,f.z=await m.readDepth(f),f.z=f.z*2-1,1-f.z>1e-7?f.unproject(d):!1),[f,m,d]),c=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async(b,F=!0)=>{if(e)x.set(...e);else{const{x:X,y:C}=t?S:{x:0,y:0},R=await u(X,C);R&&x.copy(R)}F&&s.current?.target&&(a>0&&b>0?maath__WEBPACK_IMPORTED_MODULE_2__.easing.damp3(s.current.target,x,a,b):s.current.target.copy(x))},[e,x,t,u,a,S]);(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.D)(async(b,F)=>{r||c(F),l.current&&l.current.position.copy(x),p.current&&s.current?.target&&p.current.position.copy(s.current.target)});const U=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({dofRef:s,hitpoint:x,update:c}),[x,c]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(i,()=>U,[U]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[o?(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.o)(/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"mesh\",{ref:l,children:[/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"sphereGeometry\",{args:[o,16,16]}),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"meshBasicMaterial\",{color:\"#00ff00\",opacity:1,transparent:!0,depthWrite:!1})]}),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"mesh\",{ref:p,children:[/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"sphereGeometry\",{args:[o/2,16,16]}),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"meshBasicMaterial\",{color:\"#00ff00\",opacity:.5,transparent:!0,depthWrite:!1})]})]}),_):null,/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ce,{ref:s,...n,target:x})]})}),_t={fragmentShader:`\n    uniform float time;\n    uniform vec2 lensPosition;\n    uniform vec2 screenRes;\n    uniform vec3 colorGain;\n    uniform float starPoints;\n    uniform float glareSize;\n    uniform float flareSize;\n    uniform float flareSpeed;\n    uniform float flareShape;\n    uniform float haloScale;\n    uniform float opacity;\n    uniform bool animated;\n    uniform bool anamorphic;\n    uniform bool enabled;\n    uniform bool secondaryGhosts;\n    uniform bool starBurst;\n    uniform float ghostScale;\n    uniform bool aditionalStreaks;\n    uniform sampler2D lensDirtTexture;\n    vec2 vTexCoord;\n    \n    float rand(float n){return fract(sin(n) * 43758.5453123);}\n\n    float noise(float p){\n      float fl = floor(p);\n      float fc = fract(p);\n      return mix(rand(fl),rand(fl + 1.0), fc);\n    }\n\n    vec3 hsv2rgb(vec3 c)\n    {\n      vec4 k = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + k.xyz) * 6.0 - k.www);\n      return c.z * mix(k.xxx, clamp(p - k.xxx, 0.0, 1.0), c.y);\n    }\n\n    float saturate(float x)\n    {\n      return clamp(x, 0.,1.);\n    }\n\n    vec2 rotateUV(vec2 uv, float rotation)\n    {\n      return vec2(\n          cos(rotation) * uv.x + sin(rotation) * uv.y,\n          cos(rotation) * uv.y - sin(rotation) * uv.x\n      );\n    }\n\n    // Based on https://www.shadertoy.com/view/XtKfRV\n    vec3 drawflare(vec2 p, float intensity, float rnd, float speed, int id)\n    {\n      float flarehueoffset = (1. / 32.) * float(id) * 0.1;\n      float lingrad = distance(vec2(0.), p);\n      float expgrad = 1. / exp(lingrad * (fract(rnd) * 0.66 + 0.33));\n      vec3 colgrad = hsv2rgb(vec3( fract( (expgrad * 8.) + speed * flareSpeed + flarehueoffset), pow(1.-abs(expgrad*2.-1.), 0.45), 20.0 * expgrad * intensity)); //rainbow spectrum effect\n\n      float internalStarPoints;\n\n      if(anamorphic){\n        internalStarPoints = 1.0;\n      } else{\n        internalStarPoints = starPoints;\n      }\n      \n      float blades = length(p * flareShape * sin(internalStarPoints * atan(p.x, p.y)));\n      \n      float comp = pow(1.-saturate(blades), ( anamorphic ? 100. : 12.));\n      comp += saturate(expgrad-0.9) * 3.;\n      comp = pow(comp * expgrad, 8. + (1.-intensity) * 5.);\n      \n      if(flareSpeed > 0.0){\n        return vec3(comp) * colgrad;\n      } else{\n        return vec3(comp) * flareSize * 15.;\n      }\n    }\n\n    float dist(vec3 a, vec3 b) { return abs(a.x - b.x) + abs(a.y - b.y) + abs(a.z - b.z); }\n\n    vec3 saturate(vec3 x)\n    {\n      return clamp(x, vec3(0.0), vec3(1.0));\n    }\n\n    // Based on https://www.shadertoy.com/view/XtKfRV\n    float glare(vec2 uv, vec2 pos, float size)\n    {\n      vec2 main;\n\n      if(animated){\n        main = rotateUV(uv-pos, time * 0.1);      \n      } else{\n        main = uv-pos;     \n      }\n      \n      float ang = atan(main.y, main.x) * (anamorphic ? 1.0 : starPoints);\n      float dist = length(main); \n      dist = pow(dist, .9);\n      \n      float f0 = 1.0/(length(uv-pos)*(1.0/size*16.0)+.2);\n\n      return f0+f0*(sin((ang))*.2 +.3);\n    }\n\n    float sdHex(vec2 p){\n      p = abs(p);\n      vec2 q = vec2(p.x*2.0*0.5773503, p.y + p.x*0.5773503);\n      return dot(step(q.xy,q.yx), 1.0-q.yx);\n    }\n\n    //Based on https://www.shadertoy.com/view/dllSRX\n    float fpow(float x, float k){\n      return x > k ? pow((x-k)/(1.0-k),2.0) : 0.0;\n    }\n\n    vec3 renderhex(vec2 uv, vec2 p, float s, vec3 col){\n      uv -= p;\n      if (abs(uv.x) < 0.2*s && abs(uv.y) < 0.2*s){\n          return mix(vec3(0),mix(vec3(0),col,0.1 + fpow(length(uv/s),0.1)*10.0),smoothstep(0.0,0.1,sdHex(uv*20.0/s)));\n      }\n      return vec3(0);\n    }\n\n    // Based on https://www.shadertoy.com/view/4sX3Rs\n    vec3 LensFlare(vec2 uv, vec2 pos)\n    {\n      vec2 main = uv-pos;\n      vec2 uvd = uv*(length(uv));\n      \n      float ang = atan(main.x,main.y);\n      \n      float f0 = .3/(length(uv-pos)*16.0+1.0);\n      \n      f0 = f0*(sin(noise(sin(ang*3.9-(animated ? time : 0.0) * 0.3) * starPoints))*.2 );\n      \n      float f1 = max(0.01-pow(length(uv+1.2*pos),1.9),.0)*7.0;\n\n      float f2 = max(.9/(10.0+32.0*pow(length(uvd+0.99*pos),2.0)),.0)*0.35;\n      float f22 = max(.9/(11.0+32.0*pow(length(uvd+0.85*pos),2.0)),.0)*0.23;\n      float f23 = max(.9/(12.0+32.0*pow(length(uvd+0.95*pos),2.0)),.0)*0.6;\n      \n      vec2 uvx = mix(uv,uvd, 0.1);\n      \n      float f4 = max(0.01-pow(length(uvx+0.4*pos),2.9),.0)*4.02;\n      float f42 = max(0.0-pow(length(uvx+0.45*pos),2.9),.0)*4.1;\n      float f43 = max(0.01-pow(length(uvx+0.5*pos),2.9),.0)*4.6;\n      \n      uvx = mix(uv,uvd,-.4);\n      \n      float f5 = max(0.01-pow(length(uvx+0.1*pos),5.5),.0)*2.0;\n      float f52 = max(0.01-pow(length(uvx+0.2*pos),5.5),.0)*2.0;\n      float f53 = max(0.01-pow(length(uvx+0.1*pos),5.5),.0)*2.0;\n      \n      uvx = mix(uv,uvd, 2.1);\n      \n      float f6 = max(0.01-pow(length(uvx-0.3*pos),1.61),.0)*3.159;\n      float f62 = max(0.01-pow(length(uvx-0.325*pos),1.614),.0)*3.14;\n      float f63 = max(0.01-pow(length(uvx-0.389*pos),1.623),.0)*3.12;\n      \n      vec3 c = vec3(glare(uv,pos, glareSize));\n\n      vec2 prot;\n\n      if(animated){\n        prot = rotateUV(uv - pos, (time * 0.1));  \n      } else if(anamorphic){\n        prot = rotateUV(uv - pos, 1.570796);     \n      } else {\n        prot = uv - pos;\n      }\n\n      c += drawflare(prot, (anamorphic ? flareSize * 10. : flareSize), 0.1, time, 1);\n      \n      c.r+=f1+f2+f4+f5+f6; c.g+=f1+f22+f42+f52+f62; c.b+=f1+f23+f43+f53+f63;\n      c = c*1.3 * vec3(length(uvd)+.09);\n      c+=vec3(f0);\n      \n      return c;\n    }\n\n    vec3 cc(vec3 color, float factor,float factor2)\n    {\n      float w = color.x+color.y+color.z;\n      return mix(color,vec3(w)*factor,w*factor2);\n    }    \n\n    float rnd(vec2 p)\n    {\n      float f = fract(sin(dot(p, vec2(12.1234, 72.8392) )*45123.2));\n      return f;   \n    }\n\n    float rnd(float w)\n    {\n      float f = fract(sin(w)*1000.);\n      return f;   \n    }\n\n    float regShape(vec2 p, int N)\n    {\n      float f;\n      \n      float a=atan(p.x,p.y)+.2;\n      float b=6.28319/float(N);\n      f=smoothstep(.5,.51, cos(floor(.5+a/b)*b-a)*length(p.xy)* 2.0  -ghostScale);\n          \n      return f;\n    }\n\n    // Based on https://www.shadertoy.com/view/Xlc3D2\n    vec3 circle(vec2 p, float size, float decay, vec3 color, vec3 color2, float dist, vec2 position)\n    {\n      float l = length(p + position*(dist*2.))+size/2.;\n      float l2 = length(p + position*(dist*4.))+size/3.;\n      \n      float c = max(0.01-pow(length(p + position*dist), size*ghostScale), 0.0)*10.;\n      float c1 = max(0.001-pow(l-0.3, 1./40.)+sin(l*20.), 0.0)*3.;\n      float c2 =  max(0.09/pow(length(p-position*dist/.5)*1., .95), 0.0)/20.;\n      float s = max(0.02-pow(regShape(p*5. + position*dist*5. + decay, 6) , 1.), 0.0)*1.5;\n      \n      color = cos(vec3(0.44, .24, .2)*16. + dist/8.)*0.5+.5;\n      vec3 f = c*color;\n      f += c1*color;\n      f += c2*color;  \n      f +=  s*color;\n      return f;\n    }\n\n    vec4 getLensColor(float x){\n      return vec4(vec3(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(vec3(0., 0., 0.),\n        vec3(0., 0., 0.), smoothstep(0.0, 0.063, x)),\n        vec3(0., 0., 0.), smoothstep(0.063, 0.125, x)),\n        vec3(0.0, 0., 0.), smoothstep(0.125, 0.188, x)),\n        vec3(0.188, 0.131, 0.116), smoothstep(0.188, 0.227, x)),\n        vec3(0.31, 0.204, 0.537), smoothstep(0.227, 0.251, x)),\n        vec3(0.192, 0.106, 0.286), smoothstep(0.251, 0.314, x)),\n        vec3(0.102, 0.008, 0.341), smoothstep(0.314, 0.392, x)),\n        vec3(0.086, 0.0, 0.141), smoothstep(0.392, 0.502, x)),\n        vec3(1.0, 0.31, 0.0), smoothstep(0.502, 0.604, x)),\n        vec3(.1, 0.1, 0.1), smoothstep(0.604, 0.643, x)),\n        vec3(1.0, 0.929, 0.0), smoothstep(0.643, 0.761, x)),\n        vec3(1.0, 0.086, 0.424), smoothstep(0.761, 0.847, x)),\n        vec3(1.0, 0.49, 0.0), smoothstep(0.847, 0.89, x)),\n        vec3(0.945, 0.275, 0.475), smoothstep(0.89, 0.941, x)),\n        vec3(0.251, 0.275, 0.796), smoothstep(0.941, 1.0, x))),\n      1.0);\n    }\n\n    float dirtNoise(vec2 p){\n      vec2 f = fract(p);\n      f = (f * f) * (3.0 - (2.0 * f));    \n      float n = dot(floor(p), vec2(1.0, 157.0));\n      vec4 a = fract(sin(vec4(n + 0.0, n + 1.0, n + 157.0, n + 158.0)) * 43758.5453123);\n      return mix(mix(a.x, a.y, f.x), mix(a.z, a.w, f.x), f.y);\n    } \n\n    float fbm(vec2 p){\n      const mat2 m = mat2(0.80, -0.60, 0.60, 0.80);\n      float f = 0.0;\n      f += 0.5000*dirtNoise(p); p = m*p*2.02;\n      f += 0.2500*dirtNoise(p); p = m*p*2.03;\n      f += 0.1250*dirtNoise(p); p = m*p*2.01;\n      f += 0.0625*dirtNoise(p);\n      return f/0.9375;\n    }\n\n    vec4 getLensStar(vec2 p){\n      vec2 pp = (p - vec2(0.5)) * 2.0;\n      float a = atan(pp.y, pp.x);\n      vec4 cp = vec4(sin(a * 1.0), length(pp), sin(a * 13.0), sin(a * 53.0));\n      float d = sin(clamp(pow(length(vec2(0.5) - p) * 0.5 + haloScale /2., 5.0), 0.0, 1.0) * 3.14159);\n      vec3 c = vec3(d) * vec3(fbm(cp.xy * 16.0) * fbm(cp.zw * 9.0) * max(max(max(max(0.5, sin(a * 1.0)), sin(a * 3.0) * 0.8), sin(a * 7.0) * 0.8), sin(a * 9.0) * 10.6));\n      c *= vec3(mix(2.0, (sin(length(pp.xy) * 256.0) * 0.5) + 0.5, sin((clamp((length(pp.xy) - 0.875) / 0.1, 0.0, 1.0) + 0.0) * 2.0 * 3.14159) * 1.5) + 0.5) * 0.3275;\n      return vec4(vec3(c * 1.0), d);\t\n    }\n\n    vec4 getLensDirt(vec2 p){\n      p.xy += vec2(fbm(p.yx * 3.0), fbm(p.yx * 2.0)) * 0.0825;\n      vec3 o = vec3(mix(0.125, 0.25, max(max(smoothstep(0.1, 0.0, length(p - vec2(0.25))),\n                                            smoothstep(0.4, 0.0, length(p - vec2(0.75)))),\n                                            smoothstep(0.8, 0.0, length(p - vec2(0.875, 0.125))))));\n      o += vec3(max(fbm(p * 1.0) - 0.5, 0.0)) * 0.5;\n      o += vec3(max(fbm(p * 2.0) - 0.5, 0.0)) * 0.5;\n      o += vec3(max(fbm(p * 4.0) - 0.5, 0.0)) * 0.25;\n      o += vec3(max(fbm(p * 8.0) - 0.75, 0.0)) * 1.0;\n      o += vec3(max(fbm(p * 16.0) - 0.75, 0.0)) * 0.75;\n      o += vec3(max(fbm(p * 64.0) - 0.75, 0.0)) * 0.5;\n      return vec4(clamp(o, vec3(0.15), vec3(1.0)), 1.0);\t\n    }\n\n    vec4 textureLimited(sampler2D tex, vec2 texCoord){\n      if(((texCoord.x < 0.) || (texCoord.y < 0.)) || ((texCoord.x > 1.) || (texCoord.y > 1.))){\n        return vec4(0.0);\n      }else{\n        return texture(tex, texCoord); \n      }\n    }\n\n    vec4 textureDistorted(sampler2D tex, vec2 texCoord, vec2 direction, vec3 distortion) {\n      return vec4(textureLimited(tex, (texCoord + (direction * distortion.r))).r,\n                  textureLimited(tex, (texCoord + (direction * distortion.g))).g,\n                  textureLimited(tex, (texCoord + (direction * distortion.b))).b,\n                  1.0);\n    }\n\n    // Based on https://www.shadertoy.com/view/4sK3W3\n    vec4 getStartBurst(){\n      vec2 aspectTexCoord = vec2(1.0) - (((vTexCoord - vec2(0.5)) * vec2(1.0)) + vec2(0.5)); \n      vec2 texCoord = vec2(1.0) - vTexCoord; \n      vec2 ghostVec = (vec2(0.5) - texCoord) * 0.3 - lensPosition;\n      vec2 ghostVecAspectNormalized = normalize(ghostVec * vec2(1.0)) * vec2(1.0);\n      vec2 haloVec = normalize(ghostVec) * 0.6;\n      vec2 haloVecAspectNormalized = ghostVecAspectNormalized * 0.6;\n      vec2 texelSize = vec2(1.0) / vec2(screenRes.xy);\n      vec3 distortion = vec3(-(texelSize.x * 1.5), 0.2, texelSize.x * 1.5);\n      vec4 c = vec4(0.0);\n      for (int i = 0; i < 8; i++) {\n        vec2 offset = texCoord + (ghostVec * float(i));\n        c += textureDistorted(lensDirtTexture, offset, ghostVecAspectNormalized, distortion) * pow(max(0.0, 1.0 - (length(vec2(0.5) - offset) / length(vec2(0.5)))), 10.0);\n      }                       \n      vec2 haloOffset = texCoord + haloVecAspectNormalized; \n      return (c * getLensColor((length(vec2(0.5) - aspectTexCoord) / length(vec2(haloScale))))) + \n            (textureDistorted(lensDirtTexture, haloOffset, ghostVecAspectNormalized, distortion) * pow(max(0.0, 1.0 - (length(vec2(0.5) - haloOffset) / length(vec2(0.5)))), 10.0));\n    } \n\n    void mainImage(vec4 inputColor, vec2 uv, out vec4 outputColor)\n    {\n      vec2 myUV = uv -0.5;\n      myUV.y *= screenRes.y/screenRes.x;\n      vec2 finalLensPosition = lensPosition * 0.5;\n      finalLensPosition.y *= screenRes.y/screenRes.x;\n      \n      //First Lens flare pass\n      vec3 finalColor = LensFlare(myUV, finalLensPosition) * 20.0 * colorGain / 256.;\n\n      //Aditional streaks\n      if(aditionalStreaks){\n        vec3 circColor = vec3(0.9, 0.2, 0.1);\n        vec3 circColor2 = vec3(0.3, 0.1, 0.9);\n\n        for(float i=0.;i<10.;i++){\n          finalColor += circle(myUV, pow(rnd(i*2000.)*2.8, .1)+1.41, 0.0, circColor+i , circColor2+i, rnd(i*20.)*3.+0.2-.5, lensPosition);\n        }\n      }\n\n      //Alternative ghosts\n      if(secondaryGhosts){\n        vec3 altGhosts = vec3(0);\n        altGhosts += renderhex(myUV, -lensPosition*0.25, ghostScale * 1.4, vec3(0.25,0.35,0));\n        altGhosts += renderhex(myUV, lensPosition*0.25, ghostScale * 0.5, vec3(1,0.5,0.5));\n        altGhosts += renderhex(myUV, lensPosition*0.1, ghostScale * 1.6, vec3(1,1,1));\n        altGhosts += renderhex(myUV, lensPosition*1.8, ghostScale * 2.0, vec3(0,0.5,0.75));\n        altGhosts += renderhex(myUV, lensPosition*1.25, ghostScale * 0.8, vec3(1,1,0.5));\n        altGhosts += renderhex(myUV, -lensPosition*1.25, ghostScale * 5.0, vec3(0.5,0.5,0.25));\n        \n        //Circular ghosts\n        altGhosts += fpow(1.0 - abs(distance(lensPosition*0.8,myUV) - 0.7),0.985)*colorGain / 2100.;\n        finalColor += altGhosts;\n      }\n      \n\n      //Starburst                     \n      if(starBurst){\n        vTexCoord = myUV + 0.5;\n        vec4 lensMod = getLensDirt(myUV);\n        float tooBright = 1.0 - (clamp(0.5, 0.0, 0.5) * 2.0); \n        float tooDark = clamp(0.5 - 0.5, 0.0, 0.5) * 2.0;\n        lensMod += mix(lensMod, pow(lensMod * 2.0, vec4(2.0)) * 0.5, tooBright);\n        float lensStarRotationAngle = ((myUV.x + myUV.y)) * (1.0 / 6.0);\n        vec2 lensStarTexCoord = (mat2(cos(lensStarRotationAngle), -sin(lensStarRotationAngle), sin(lensStarRotationAngle), cos(lensStarRotationAngle)) * vTexCoord);\n        lensMod += getLensStar(lensStarTexCoord) * 2.;\n        \n        finalColor += clamp((lensMod.rgb * getStartBurst().rgb ), 0.01, 1.0);\n      }\n\n      //Final composed output\n      if(enabled){\n        outputColor = vec4(mix(finalColor, vec3(.0), opacity) + inputColor.rgb, inputColor.a);\n      } else {\n        outputColor = vec4(inputColor);\n      }\n    }\n  `};class fe extends postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect{constructor({blendFunction:t,enabled:o,glareSize:r,lensPosition:a,screenRes:n,starPoints:i,flareSize:s,flareSpeed:l,flareShape:p,animated:_,anamorphic:S,colorGain:g,lensDirtTexture:d,haloScale:m,secondaryGhosts:v,aditionalStreaks:x,ghostScale:f,opacity:u,starBurst:c}){super(\"LensFlareEffect\",_t.fragmentShader,{blendFunction:t,uniforms:/*@__PURE__*/new Map([[\"enabled\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(o)],[\"glareSize\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(r)],[\"lensPosition\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(a)],[\"time\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(0)],[\"screenRes\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(n)],[\"starPoints\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(i)],[\"flareSize\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(s)],[\"flareSpeed\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(l)],[\"flareShape\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(p)],[\"animated\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(_)],[\"anamorphic\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(S)],[\"colorGain\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(g)],[\"lensDirtTexture\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(d)],[\"haloScale\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(m)],[\"secondaryGhosts\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(v)],[\"aditionalStreaks\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(x)],[\"ghostScale\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(f)],[\"starBurst\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(c)],[\"opacity\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(u)]])})}update(t,o,r){const a=this.uniforms.get(\"time\");a&&(a.value+=r)}}const xt=/*@__PURE__*/P(fe),gt=({smoothTime:e=.07,blendFunction:t=23,enabled:o=!0,glareSize:r=.2,lensPosition:a=new three__WEBPACK_IMPORTED_MODULE_4__.Vector3(-25,6,-60),screenRes:n=new three__WEBPACK_IMPORTED_MODULE_4__.Vector2(0,0),starPoints:i=6,flareSize:s=.01,flareSpeed:l=.01,flareShape:p=.01,animated:_=!0,anamorphic:S=!1,colorGain:g=new three__WEBPACK_IMPORTED_MODULE_4__.Color(20,20,20),lensDirtTexture:d=null,haloScale:m=.5,secondaryGhosts:v=!0,aditionalStreaks:x=!0,ghostScale:f=0,opacity:u=1,starBurst:c=!1})=>{const U=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(({viewport:T})=>T),b=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(({raycaster:T})=>T),{scene:F,camera:X}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),[C]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new three__WEBPACK_IMPORTED_MODULE_4__.Vector2),[R]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>new three__WEBPACK_IMPORTED_MODULE_4__.Vector3),E=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);return (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.D)((T,N)=>{if(!E?.current)return;const q=E.current.uniforms.get(\"lensPosition\"),$=E.current.uniforms.get(\"opacity\");if(!q||!$)return;let G=1;if(R.copy(a).project(X),R.z>1)return;q.value.x=R.x,q.value.y=R.y,C.x=R.x,C.y=R.y,b.setFromCamera(C,X);const ve=b.intersectObjects(F.children,!0),{object:I}=ve[0]||{};I&&(I.userData?.lensflare===\"no-occlusion\"?G=0:I instanceof three__WEBPACK_IMPORTED_MODULE_4__.Mesh&&(I.material.uniforms?._transmission?.value>.2||I.material._transmission&&I.material._transmission>.2?G=.2:I.material.transparent&&(G=I.material.opacity))),maath__WEBPACK_IMPORTED_MODULE_2__.easing.damp($,\"value\",G,e,N)}),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!E?.current)return;const T=E.current.uniforms.get(\"screenRes\");T&&(T.value.x=U.width,T.value.y=U.height)},[U]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(xt,{ref:E,blendFunction:t,enabled:o,glareSize:r,lensPosition:a,screenRes:n,starPoints:i,flareSize:s,flareSpeed:l,flareShape:p,animated:_,anamorphic:S,colorGain:g,lensDirtTexture:d,haloScale:m,secondaryGhosts:v,aditionalStreaks:x,ghostScale:f,opacity:u,starBurst:c})},wt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.BloomEffect,{blendFunction:0}),St=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.BrightnessContrastEffect),yt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.ChromaticAberrationEffect),Pt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({blendFunction:e=23},t){const o=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.ColorAverageEffect(e),[e]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:t,object:o,dispose:null})}),bt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.ColorDepthEffect),Et=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.DepthEffect),Rt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.DotScreenEffect),Ut=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({active:e=!0,...t},o){const r=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(p=>p.invalidate),a=Z(t,\"delay\"),n=Z(t,\"duration\"),i=Z(t,\"strength\"),s=Z(t,\"chromaticAberrationOffset\"),l=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.GlitchEffect({...t,delay:a,duration:n,strength:i,chromaticAberrationOffset:s}),[a,n,t,i,s]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{l.mode=e?t.mode||postprocessing__WEBPACK_IMPORTED_MODULE_6__.GlitchMode.SPORADIC:postprocessing__WEBPACK_IMPORTED_MODULE_6__.GlitchMode.DISABLED,r()},[e,l,r,t.mode]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>()=>{l.dispose?.()},[l]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:o,object:l,dispose:null})}),Ct=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function(e,t){const{camera:o}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),r=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.GodRaysEffect(o,k(e.sun),e),[o,e]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>void(r.lightSource=k(e.sun)),[r,e.sun]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:t,object:r,dispose:null})}),zt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({size:e,...t},o){const r=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(n=>n.invalidate),a=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.GridEffect(t),[t]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{e&&a.setSize(e.width,e.height),r()},[a,e,r]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:o,object:a,dispose:null})}),Tt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.HueSaturationEffect),At=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.NoiseEffect,{blendFunction:5}),Bt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({selection:e=[],selectionLayer:t=10,blendFunction:o,patternTexture:r,edgeStrength:a,pulseSpeed:n,visibleEdgeColor:i,hiddenEdgeColor:s,width:l,height:p,kernelSize:_,blur:S,xRay:g,...d},m){const v=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(U=>U.invalidate),{scene:x,camera:f}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),u=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.OutlineEffect(x,f,{blendFunction:o,patternTexture:r,edgeStrength:a,pulseSpeed:n,visibleEdgeColor:i,hiddenEdgeColor:s,width:l,height:p,kernelSize:_,blur:S,xRay:g,...d}),[o,S,f,a,p,s,_,r,n,x,i,l,g]),c=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(H);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!c&&e)return u.selection.set(Array.isArray(e)?e.map(k):[k(e)]),v(),()=>{u.selection.clear(),v()}},[u,e,c,v]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{u.selectionLayer=t,v()},[u,v,t]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(void 0),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(c&&c.enabled&&c.selected?.length)return u.selection.set(c.selected),v(),()=>{u.selection.clear(),v()}},[c,u.selection,v]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>()=>{u.dispose()},[u]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:m,object:u})}),Vt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({granularity:e=5},t){const o=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.PixelationEffect(e),[e]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:t,object:o,dispose:null})}),Ft=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.ScanlineEffect,{blendFunction:24,density:1.25}),Mt=(e,t)=>e.layers.enable(t.selection.layer),Dt=(e,t)=>e.layers.disable(t.selection.layer),kt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({selection:e=[],selectionLayer:t=10,lights:o=[],inverted:r=!1,ignoreBackground:a=!1,luminanceThreshold:n,luminanceSmoothing:i,intensity:s,width:l,height:p,kernelSize:_,mipmapBlur:S,...g},d){o.length===0&&console.warn(\"SelectiveBloom requires lights to work.\");const m=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(c=>c.invalidate),{scene:v,camera:x}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),f=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{const c=new postprocessing__WEBPACK_IMPORTED_MODULE_6__.SelectiveBloomEffect(v,x,{blendFunction:0,luminanceThreshold:n,luminanceSmoothing:i,intensity:s,width:l,height:p,kernelSize:_,mipmapBlur:S,...g});return c.inverted=r,c.ignoreBackground=a,c},[v,x,n,i,s,l,p,_,S,r,a,g]),u=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(H);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(!u&&e)return f.selection.set(Array.isArray(e)?e.map(k):[k(e)]),m(),()=>{f.selection.clear(),m()}},[f,e,u,m]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{f.selection.layer=t,m()},[f,m,t]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(o&&o.length>0)return o.forEach(c=>Mt(k(c),f)),m(),()=>{o.forEach(c=>Dt(k(c),f)),m()}},[f,m,o,t]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(u&&u.enabled&&u.selected?.length)return f.selection.set(u.selected),m(),()=>{f.selection.clear(),m()}},[u,f.selection,m]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:d,object:f,dispose:null})}),Gt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.SepiaEffect),It=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function(e,t){const{camera:o,normalPass:r,downSamplingPass:a,resolutionScale:n}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(D),i=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>r===null&&a===null?(console.error(\"Please enable the NormalPass in the EffectComposer in order to use SSAO.\"),{}):new postprocessing__WEBPACK_IMPORTED_MODULE_6__.SSAOEffect(o,r&&!a?r.texture:null,{blendFunction:21,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:a?a.texture:null,resolutionScale:n??1,depthAwareUpsampling:!0,...e}),[o,a,r,n]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:t,object:i,dispose:null})}),Lt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.SMAAEffect),Nt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.FXAAEffect),jt={fragmentShader:`\n    uniform int rampType;\n\n    uniform vec2 rampStart;\n    uniform vec2 rampEnd;\n\n    uniform vec4 startColor;\n    uniform vec4 endColor;\n\n    uniform float rampBias;\n    uniform float rampGain;\n\n    uniform bool rampMask;\n    uniform bool rampInvert;\n\n    float getBias(float time, float bias) {\n      return time / (((1.0 / bias) - 2.0) * (1.0 - time) + 1.0);\n    }\n\n    float getGain(float time, float gain) {\n      if (time < 0.5)\n        return getBias(time * 2.0, gain) / 2.0;\n      else\n        return getBias(time * 2.0 - 1.0, 1.0 - gain) / 2.0 + 0.5;\n    }\n\n    void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n      vec2 centerPixel = uv * resolution;\n      vec2 startPixel = rampStart * resolution;\n      vec2 endPixel = rampEnd * resolution;\n\n      float rampAlpha;\n\n      if (rampType == 1) {\n        vec2 fuv = centerPixel / resolution.y;\n        vec2 suv = startPixel / resolution.y;\n        vec2 euv = endPixel / resolution.y;\n\n        float radius = length(suv - euv);\n        float falloff = length(fuv - suv);\n        rampAlpha = smoothstep(0.0, radius, falloff);\n      } else {\n        float radius = length(startPixel - endPixel);\n        vec2 direction = normalize(vec2(endPixel.x - startPixel.x, -(startPixel.y - endPixel.y)));\n\n        float fade = dot(centerPixel - startPixel, direction);\n        if (rampType == 2) fade = abs(fade);\n\n        rampAlpha = smoothstep(0.0, 1.0, fade / radius);\n      }\n\n      rampAlpha = abs((rampInvert ? 1.0 : 0.0) - getBias(rampAlpha, rampBias) * getGain(rampAlpha, rampGain));\n\n      if (rampMask) {\n        vec4 inputBuff = texture2D(inputBuffer, uv);\n        outputColor = mix(inputBuff, inputColor, rampAlpha);\n      } else {\n        outputColor = mix(startColor, endColor, rampAlpha);\n      }\n    }\n  `};var ue=/*@__PURE__*/(e=>(e[e.Linear=0]=\"Linear\",e[e.Radial=1]=\"Radial\",e[e.MirroredLinear=2]=\"MirroredLinear\",e))(ue||{});class pe extends postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect{constructor({rampType:t=0,rampStart:o=[.5,.5],rampEnd:r=[1,1],startColor:a=[0,0,0,1],endColor:n=[1,1,1,1],rampBias:i=.5,rampGain:s=.5,rampMask:l=!1,rampInvert:p=!1,..._}={}){super(\"RampEffect\",jt.fragmentShader,{..._,uniforms:/*@__PURE__*/new Map([[\"rampType\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(t)],[\"rampStart\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(o)],[\"rampEnd\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(r)],[\"startColor\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(a)],[\"endColor\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(n)],[\"rampBias\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(i)],[\"rampGain\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(s)],[\"rampMask\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(l)],[\"rampInvert\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(p)]])})}}const Ot=/*@__PURE__*/P(pe),Wt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({textureSrc:e,texture:t,opacity:o=1,...r},a){const n=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.G)(three__WEBPACK_IMPORTED_MODULE_4__.TextureLoader,e);(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{n.colorSpace=three__WEBPACK_IMPORTED_MODULE_4__.SRGBColorSpace,n.wrapS=n.wrapT=three__WEBPACK_IMPORTED_MODULE_4__.RepeatWrapping},[n]);const i=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.TextureEffect({...r,texture:n||t}),[r,n,t]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:a,object:i,\"blendMode-opacity-value\":o,dispose:null})}),Xt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.ToneMappingEffect),qt=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.VignetteEffect),Ht=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.ShockWaveEffect),Zt=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function({lut:e,tetrahedralInterpolation:t,...o},r){const a=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new postprocessing__WEBPACK_IMPORTED_MODULE_6__.LUT3DEffect(e,o),[e,o]),n=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(i=>i.invalidate);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{t&&(a.tetrahedralInterpolation=t),e&&(a.lut=e),n()},[a,n,e,t]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:r,object:a,dispose:null})}),$t=/*@__PURE__*/P(postprocessing__WEBPACK_IMPORTED_MODULE_6__.TiltShiftEffect,{blendFunction:0}),Kt={fragmentShader:`\n\n    // original shader by Evan Wallace\n\n    #define MAX_ITERATIONS 100\n\n    uniform float blur;\n    uniform float taper;\n    uniform vec2 start;\n    uniform vec2 end;\n    uniform vec2 direction;\n    uniform int samples;\n\n    float random(vec3 scale, float seed) {\n        /* use the fragment position for a different seed per-pixel */\n        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n    }\n\n    void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n        vec4 color = vec4(0.0);\n        float total = 0.0;\n        vec2 startPixel = vec2(start.x * resolution.x, start.y * resolution.y);\n        vec2 endPixel = vec2(end.x * resolution.x, end.y * resolution.y);\n        float f_samples = float(samples);\n        float half_samples = f_samples / 2.0;\n\n        // use screen diagonal to normalize blur radii\n        float maxScreenDistance = distance(vec2(0.0), resolution); // diagonal distance\n        float gradientRadius = taper * (maxScreenDistance);\n        float blurRadius = blur * (maxScreenDistance / 16.0);\n\n        /* randomize the lookup values to hide the fixed number of samples */\n        float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n        vec2 normal = normalize(vec2(startPixel.y - endPixel.y, endPixel.x - startPixel.x));\n        float radius = smoothstep(0.0, 1.0, abs(dot(uv * resolution - startPixel, normal)) / gradientRadius) * blurRadius;\n\n        #pragma unroll_loop_start\n        for (int i = 0; i <= MAX_ITERATIONS; i++) {\n            if (i >= samples) { break; } // return early if over sample count\n            float f_i = float(i);\n            float s_i = -half_samples + f_i;\n            float percent = (s_i + offset - 0.5) / half_samples;\n            float weight = 1.0 - abs(percent);\n            vec4 sample_i = texture2D(inputBuffer, uv + normalize(direction) / resolution * percent * radius);\n            /* switch to pre-multiplied alpha to correctly blur transparent images */\n            sample_i.rgb *= sample_i.a;\n            color += sample_i * weight;\n            total += weight;\n        }\n        #pragma unroll_loop_end\n\n        outputColor = color / total;\n\n        /* switch back from pre-multiplied alpha */\n        outputColor.rgb /= outputColor.a + 0.00001;\n    }\n    `};class me extends postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect{constructor({blendFunction:t=23,blur:o=.15,taper:r=.5,start:a=[.5,0],end:n=[.5,1],samples:i=10,direction:s=[1,1]}={}){super(\"TiltShiftEffect\",Kt.fragmentShader,{blendFunction:t,attributes:2,uniforms:/*@__PURE__*/new Map([[\"blur\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(o)],[\"taper\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(r)],[\"start\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(a)],[\"end\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(n)],[\"samples\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(i)],[\"direction\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(s)]])})}}const Yt=/*@__PURE__*/P(me,{blendFunction:23}),Jt=`\nuniform sampler2D uCharacters;\nuniform float uCharactersCount;\nuniform float uCellSize;\nuniform bool uInvert;\nuniform vec3 uColor;\n\nconst vec2 SIZE = vec2(16.);\n\nvec3 greyscale(vec3 color, float strength) {\n    float g = dot(color, vec3(0.299, 0.587, 0.114));\n    return mix(color, vec3(g), strength);\n}\n\nvec3 greyscale(vec3 color) {\n    return greyscale(color, 1.0);\n}\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n    vec2 cell = resolution / uCellSize;\n    vec2 grid = 1.0 / cell;\n    vec2 pixelizedUV = grid * (0.5 + floor(uv / grid));\n    vec4 pixelized = texture2D(inputBuffer, pixelizedUV);\n    float greyscaled = greyscale(pixelized.rgb).r;\n\n    if (uInvert) {\n        greyscaled = 1.0 - greyscaled;\n    }\n\n    float characterIndex = floor((uCharactersCount - 1.0) * greyscaled);\n    vec2 characterPosition = vec2(mod(characterIndex, SIZE.x), floor(characterIndex / SIZE.y));\n    vec2 offset = vec2(characterPosition.x, -characterPosition.y) / SIZE;\n    vec2 charUV = mod(uv * (cell / SIZE), 1.0 / SIZE) - vec2(0., 1.0 / SIZE) + offset;\n    vec4 asciiCharacter = texture2D(uCharacters, charUV);\n\n    asciiCharacter.rgb = uColor * asciiCharacter.r;\n    asciiCharacter.a = pixelized.a;\n    outputColor = asciiCharacter;\n}\n`;class Qt extends postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect{constructor({font:t=\"arial\",characters:o=\" .:,'-^=*+?!|0#X%WM@\",fontSize:r=54,cellSize:a=16,color:n=\"#ffffff\",invert:i=!1}={}){const s=/*@__PURE__*/new Map([[\"uCharacters\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(new three__WEBPACK_IMPORTED_MODULE_4__.Texture)],[\"uCellSize\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(a)],[\"uCharactersCount\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(o.length)],[\"uColor\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(new three__WEBPACK_IMPORTED_MODULE_4__.Color(n))],[\"uInvert\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(i)]]);super(\"ASCIIEffect\",Jt,{uniforms:s});const l=this.uniforms.get(\"uCharacters\");l&&(l.value=this.createCharactersTexture(o,t,r))}createCharactersTexture(t,o,r){const a=document.createElement(\"canvas\"),n=1024,i=16,s=n/i;a.width=a.height=n;const l=new three__WEBPACK_IMPORTED_MODULE_4__.CanvasTexture(a,void 0,three__WEBPACK_IMPORTED_MODULE_4__.RepeatWrapping,three__WEBPACK_IMPORTED_MODULE_4__.RepeatWrapping,three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter,three__WEBPACK_IMPORTED_MODULE_4__.NearestFilter),p=a.getContext(\"2d\");if(!p)throw new Error(\"Context not available\");p.clearRect(0,0,n,n),p.font=`${r}px ${o}`,p.textAlign=\"center\",p.textBaseline=\"middle\",p.fillStyle=\"#fff\";for(let _=0;_<t.length;_++){const S=t[_],g=_%i,d=Math.floor(_/i);p.fillText(S,g*s+s/2,d*s+s/2)}return l.needsUpdate=!0,l}}const eo=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({font:e=\"arial\",characters:t=\" .:,'-^=*+?!|0#X%WM@\",fontSize:o=54,cellSize:r=16,color:a=\"#ffffff\",invert:n=!1},i)=>{const s=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new Qt({characters:t,font:e,fontSize:o,cellSize:r,color:a,invert:n}),[t,o,r,a,n,e]);return /*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:i,object:s})}),to={fragmentShader:`\n    uniform float factor;\n\n    void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n      vec2 vUv = uv;\n      float frequency = 6.0 * factor;\n      float amplitude = 0.015 * factor;\n      float x = vUv.y * frequency + time * 0.7; \n      float y = vUv.x * frequency + time * 0.3;\n      vUv.x += cos(x + y) * amplitude * cos(y);\n      vUv.y += sin(x - y) * amplitude * cos(y);\n      vec4 rgba = texture(inputBuffer, vUv);\n      outputColor = rgba;\n    }\n  `};class de extends postprocessing__WEBPACK_IMPORTED_MODULE_6__.Effect{constructor({blendFunction:t=23,factor:o=0}={}){super(\"WaterEffect\",to.fragmentShader,{blendFunction:t,attributes:2,uniforms:/*@__PURE__*/new Map([[\"factor\",new three__WEBPACK_IMPORTED_MODULE_4__.Uniform(o)]])})}}const oo=/*@__PURE__*/P(de,{blendFunction:23}),ao=/*@__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({halfRes:e,screenSpaceRadius:t,quality:o,depthAwareUpsampling:r=!0,aoRadius:a=5,aoSamples:n=16,denoiseSamples:i=4,denoiseRadius:s=12,distanceFalloff:l=1,intensity:p=1,color:_,renderMode:S=0},g)=>{const{camera:d,scene:m}=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.C)(),v=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new n8ao__WEBPACK_IMPORTED_MODULE_3__.N8AOPostPass(m,d),[d,m]);return (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.s)(v.configuration,{color:_,aoRadius:a,distanceFalloff:l,intensity:p,aoSamples:n,denoiseSamples:i,denoiseRadius:s,screenSpaceRadius:t,renderMode:S,halfRes:e,depthAwareUpsampling:r})},[t,_,a,l,p,n,i,s,S,e,r,v]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{o&&v.setQualityMode(o.charAt(0).toUpperCase()+o.slice(1))},[v,o]),/*@__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"primitive\",{ref:g,object:v})});\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWsrQyxxQkFBcUIsb0RBQUUsT0FBTyxhQUFhLHdCQUF3QixFQUFFLFdBQVcsK0NBQUMsT0FBTyw4Q0FBQyxPQUFPLDhCQUE4QixXQUFXLG9CQUFvQixzREFBQyxhQUFhLG1CQUFtQixFQUFFLGFBQWEsNkJBQTZCLEVBQUUsUUFBUSw2Q0FBQyxTQUFTLGlEQUFDLElBQUksT0FBTyxnREFBQyxNQUFNLFNBQVMsU0FBUyxXQUFXLDBCQUEwQiw4REFBOEQseUNBQXlDLDJDQUEyQyx1QkFBdUIsc0RBQUMsVUFBVSxzQkFBc0IsRUFBRSxxQkFBcUIsb0RBQUUsdURBQXVELDJDQUFFLGNBQWMsaURBQUMsR0FBRyxrTEFBa0wsZ0RBQUUsQ0FBQyxNQUFNLE1BQU0sNkJBQTZCLENBQUMscURBQUMseUJBQXlCLDhDQUFDLE1BQU0sWUFBWSwwREFBRSxJQUFJLGdFQUFnRSxFQUFFLGNBQWMsc0RBQUUsT0FBTyxrQkFBa0IsaUJBQWlCLHNEQUFFLG1EQUFtRCxpRUFBRSxFQUFFLHlDQUF5QyxzQ0FBc0Msc0JBQXNCLGdEQUFDLHlDQUF5QyxxREFBQyxTQUFTLE1BQU0sb0JBQW9CLGlFQUFpRSxRQUFRLFFBQVEsNkNBQUMsT0FBTyxzREFBQyxNQUFNLDZCQUE2QixTQUFTLG1CQUFtQixZQUFZLFdBQVcsS0FBSyxvQkFBb0IsZ0JBQWdCLGtEQUFDLEVBQUUsWUFBWSxXQUFXLFdBQVcsS0FBSyw2QkFBNkIsa0RBQUMsU0FBUyxlQUFlLFlBQVksc0RBQUUsU0FBUyxVQUFVLGtCQUFrQixnREFBRSxZQUFZLCtCQUErQixvQ0FBb0MsV0FBVyxrQ0FBa0MscUNBQXFDLGNBQWMsZ0RBQUMsTUFBTSxzQkFBc0IscUJBQXFCLGdEQUFFLE1BQU0saUJBQWlCLE1BQU0sUUFBUSw4Q0FBQyxPQUFPLDhFQUE4RSxpQkFBaUIsT0FBTywwREFBRSwyQkFBMkIsc0RBQUMsYUFBYSw4QkFBOEIsc0RBQUMsVUFBVSxpQkFBaUIsRUFBRSxFQUFFLCtEQUErRCxTQUFTLHFEQUFxRCwyREFBMkQsRUFBRSxnQkFBZ0IsT0FBTyx1Q0FBdUMsT0FBTyxHQUFHLEtBQUssRUFBRSxxREFBRSxFQUFFLE1BQU0sZ0JBQWdCLFFBQVEscURBQUMsZ0JBQWdCLDBDQUFVLGtDQUFrQyxVQUFVLHdCQUF3QixvQkFBb0Isc0RBQUMsSUFBSSw2RUFBNkUsRUFBRSxXQUFXLGFBQWEsT0FBTywwQ0FBVSw0QkFBNEIsMENBQVMsWUFBWSwwQ0FBUyxXQUFXLDBDQUFTLE1BQU0saUJBQWlCLGlEQUFDLFdBQVcsMk1BQTJNLElBQUksTUFBTSxTQUFTLENBQUMsaURBQUMsZ0JBQWdCLDhDQUFDLE1BQU0sWUFBWSw4REFBRSxJQUFJLDhLQUE4SyxFQUFFLGlCQUFpQiwwQ0FBRSw0Q0FBNEMsbUJBQW1CLHNCQUFzQix3REFBRSwwQkFBMEIsa0NBQWtDLE9BQU8sZ0RBQUMsVUFBVSxZQUFZLG1CQUFtQixzREFBQyxjQUFjLDZCQUE2QixFQUFFLGtCQUFrQixpREFBQyxHQUFHLDRFQUE0RSxNQUFNLFFBQVEsNkNBQUMsU0FBUyw2Q0FBQyxTQUFTLDZDQUFDLFNBQVMscURBQUMsR0FBRyxRQUFRLFFBQVEscURBQUMsR0FBRyxVQUFVLE9BQU8sb0JBQW9CLENBQUMsaURBQUMsUUFBUSwrQ0FBQyxTQUFTLDREQUFFLE1BQU0sK0NBQUMsU0FBUyxvREFBRSxFQUFFLGdEQUFDLHFDQUFxQyxnQ0FBZ0MsV0FBVyxnREFBQyxVQUFVLHdCQUF3QixRQUFRLFNBQVMsK0NBQUMsU0FBUywwQ0FBUyxhQUFhLCtDQUFDLFNBQVMsMENBQVMsV0FBVyxrREFBRSx3R0FBd0csa0RBQUUsaUJBQWlCLGlCQUFpQixLQUFLLE1BQU0sUUFBUSxNQUFNLFFBQVEsZ0JBQWdCLGFBQWEsZ0NBQWdDLHlDQUFFLHlEQUF5RCxnQkFBZ0IscURBQUMsY0FBYyxzSEFBc0gsRUFBRSxRQUFRLDhDQUFDLE9BQU8sNkJBQTZCLFNBQVMsT0FBTywwREFBRSwyQkFBMkIsdURBQUMsQ0FBQyx1REFBQyxFQUFFLFlBQVkscURBQUUsY0FBYyx1REFBQyxDQUFDLHVEQUFDLEVBQUUsdUJBQXVCLHVEQUFDLFNBQVMsNkJBQTZCLHNEQUFDLG1CQUFtQixlQUFlLGVBQWUsc0RBQUMsc0JBQXNCLHVEQUF1RCxHQUFHLGVBQWUsdURBQUMsU0FBUyw2QkFBNkIsc0RBQUMsbUJBQW1CLGlCQUFpQixlQUFlLHNEQUFDLHNCQUFzQix3REFBd0QsR0FBRyxHQUFHLHVCQUF1QixzREFBQyxLQUFLLG9CQUFvQixHQUFHLEVBQUUsTUFBTTtBQUMzeE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpS0FBaUs7O0FBRWpLOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIseUJBQXlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQyxnQ0FBZ0M7QUFDaEMsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsTUFBTTtBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxLQUFLLGlCQUFpQixrREFBQyxDQUFDLGFBQWEsOFBBQThQLEVBQUUsMkNBQTJDLDhEQUE4RCwwQ0FBUyxzQkFBc0IsMENBQVMseUJBQXlCLDBDQUFTLGlCQUFpQiwwQ0FBUyxzQkFBc0IsMENBQVMsdUJBQXVCLDBDQUFTLHNCQUFzQiwwQ0FBUyx1QkFBdUIsMENBQVMsdUJBQXVCLDBDQUFTLHFCQUFxQiwwQ0FBUyx1QkFBdUIsMENBQVMsc0JBQXNCLDBDQUFTLDRCQUE0QiwwQ0FBUyxzQkFBc0IsMENBQVMsNEJBQTRCLDBDQUFTLDZCQUE2QiwwQ0FBUyx1QkFBdUIsMENBQVMsc0JBQXNCLDBDQUFTLG9CQUFvQiwwQ0FBUyxPQUFPLEVBQUUsY0FBYyxrQ0FBa0MsaUJBQWlCLGlDQUFpQyxtRkFBbUYsMENBQVMsNEJBQTRCLDBDQUFTLHFIQUFxSCx3Q0FBTyxzSUFBc0ksSUFBSSxRQUFRLHFEQUFDLEdBQUcsV0FBVyxRQUFRLHFEQUFDLEdBQUcsWUFBWSxPQUFPLGlCQUFpQixDQUFDLGlEQUFDLFFBQVEsK0NBQUMsU0FBUywwQ0FBUyxNQUFNLCtDQUFDLFNBQVMsMENBQVMsSUFBSSw2Q0FBQyxPQUFPLE9BQU8scURBQUMsU0FBUyxzQkFBc0IsbUZBQW1GLGlCQUFpQixRQUFRLHFDQUFxQyxpRUFBaUUsNENBQTRDLFNBQVMsV0FBVyw0REFBNEQsdUNBQU0sNkpBQTZKLHlDQUFFLHVCQUF1QixFQUFFLGdEQUFDLE1BQU0sc0JBQXNCLDRDQUE0QywwQ0FBMEMsbUJBQW1CLHNEQUFDLEtBQUssb1FBQW9RLEVBQUUsbUJBQW1CLHVEQUFFLEVBQUUsZ0JBQWdCLG9CQUFvQixvRUFBRSxvQkFBb0IscUVBQUUsa0JBQWtCLGlEQUFDLFdBQVcsbUJBQW1CLElBQUksUUFBUSw4Q0FBQyxTQUFTLDhEQUFFLFNBQVMsb0JBQW9CLHNEQUFDLGNBQWMsNEJBQTRCLEVBQUUsb0JBQW9CLDREQUFFLG9CQUFvQix1REFBRSxvQkFBb0IsMkRBQUUsa0JBQWtCLGlEQUFDLFdBQVcsaUJBQWlCLElBQUksUUFBUSxxREFBQywwR0FBMEcsOENBQUMsU0FBUyx3REFBRSxFQUFFLCtEQUErRCxlQUFlLE9BQU8sc0RBQUMsTUFBTSxpQkFBaUIsc0RBQUUsVUFBVSxzREFBRSxjQUFjLGlCQUFpQixnREFBQyxVQUFVLGNBQWMsbUJBQW1CLHNEQUFDLGNBQWMsNEJBQTRCLEVBQUUsa0JBQWtCLGlEQUFDLGVBQWUsTUFBTSxTQUFTLENBQUMsaURBQUMsTUFBTSw4Q0FBQyxTQUFTLHlEQUFFLHNCQUFzQixPQUFPLHNEQUFDLDBEQUEwRCxzREFBQyxjQUFjLDRCQUE0QixFQUFFLGtCQUFrQixpREFBQyxXQUFXLFlBQVksSUFBSSxRQUFRLHFEQUFDLG9CQUFvQiw4Q0FBQyxTQUFTLHNEQUFFLFNBQVMsT0FBTyxzREFBQyxNQUFNLG1DQUFtQyx1QkFBdUIsc0RBQUMsY0FBYyw0QkFBNEIsRUFBRSxvQkFBb0IsK0RBQUUsb0JBQW9CLHVEQUFFLEVBQUUsZ0JBQWdCLGtCQUFrQixpREFBQyxXQUFXLHNMQUFzTCxJQUFJLFFBQVEscURBQUMsbUJBQW1CLGlCQUFpQixDQUFDLGlEQUFDLE1BQU0sOENBQUMsU0FBUyx5REFBRSxNQUFNLG1KQUFtSixpQ0FBaUMsaURBQUMsSUFBSSxPQUFPLGdEQUFDLE1BQU0sMkVBQTJFLHlCQUF5QixZQUFZLGdEQUFDLE1BQU0sdUJBQXVCLFVBQVUsNkNBQUMsU0FBUyxnREFBQyxNQUFNLGdGQUFnRix5QkFBeUIsb0JBQW9CLGdEQUFDLFVBQVUsWUFBWSxtQkFBbUIsc0RBQUMsY0FBYyxlQUFlLEVBQUUsa0JBQWtCLGlEQUFDLFdBQVcsZ0JBQWdCLElBQUksUUFBUSw4Q0FBQyxTQUFTLDREQUFFLFNBQVMsb0JBQW9CLHNEQUFDLGNBQWMsNEJBQTRCLEVBQUUsb0JBQW9CLDBEQUFFLEVBQUUsOEJBQThCLDZHQUE2RyxpREFBQyxXQUFXLHlMQUF5TCxJQUFJLHNFQUFzRSxRQUFRLHFEQUFDLG1CQUFtQixpQkFBaUIsQ0FBQyxpREFBQyxNQUFNLDhDQUFDLE1BQU0sWUFBWSxnRUFBRSxNQUFNLHNIQUFzSCxFQUFFLDJDQUEyQyw4QkFBOEIsaURBQUMsSUFBSSxPQUFPLGdEQUFDLE1BQU0sMkVBQTJFLHlCQUF5QixZQUFZLGdEQUFDLE1BQU0sd0JBQXdCLFVBQVUsZ0RBQUMsTUFBTSwwREFBMEQsOEJBQThCLFlBQVksZ0RBQUMsTUFBTSxnRkFBZ0YseUJBQXlCLGlDQUFpQyxzREFBQyxjQUFjLDRCQUE0QixFQUFFLG9CQUFvQix1REFBRSxrQkFBa0IsaURBQUMsZUFBZSxNQUFNLDJEQUEyRCxDQUFDLGlEQUFDLE1BQU0sOENBQUMscUhBQXFILE1BQU0sc0RBQUUseUJBQXlCLGtRQUFrUSxhQUFhLG9CQUFvQixzREFBQyxjQUFjLDRCQUE0QixFQUFFLG9CQUFvQixzREFBRSxvQkFBb0Isc0RBQUUsTUFBTTtBQUM1OU07O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsS0FBSyx3SEFBd0gsRUFBRSxpQkFBaUIsa0RBQUMsQ0FBQyxhQUFhLDRKQUE0SixHQUFHLEVBQUUsc0NBQXNDLG9EQUFvRCwwQ0FBQyxzQkFBc0IsMENBQUMsb0JBQW9CLDBDQUFDLHVCQUF1QiwwQ0FBQyxxQkFBcUIsMENBQUMscUJBQXFCLDBDQUFDLHFCQUFxQiwwQ0FBQyxxQkFBcUIsMENBQUMsdUJBQXVCLDBDQUFDLE9BQU8sR0FBRyw0Q0FBNEMsaURBQUMsV0FBVyx3Q0FBd0MsSUFBSSxRQUFRLHFEQUFFLENBQUMsZ0RBQUUsSUFBSSxzREFBQyxNQUFNLGFBQWEsaURBQUUsaUJBQWlCLGlEQUFDLENBQUMsTUFBTSxRQUFRLDhDQUFDLFNBQVMseURBQUUsRUFBRSxrQkFBa0IsV0FBVyxvQkFBb0Isc0RBQUMsY0FBYyx3REFBd0QsRUFBRSxvQkFBb0IsNkRBQUUsb0JBQW9CLDBEQUFFLG9CQUFvQiwyREFBRSxrQkFBa0IsaURBQUMsV0FBVyxzQ0FBc0MsSUFBSSxRQUFRLDhDQUFDLFNBQVMsdURBQUUsZUFBZSxxREFBQyxrQkFBa0IsT0FBTyxzREFBQyxNQUFNLG1EQUFtRCx5QkFBeUIsc0RBQUMsY0FBYyw0QkFBNEIsRUFBRSxvQkFBb0IsMkRBQUUsRUFBRSxnQkFBZ0IsTUFBTTs7QUFFbHdDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLHFCQUFxQjtBQUM3QyxnQ0FBZ0MsU0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU8saUJBQWlCLGtEQUFDLENBQUMsYUFBYSxvR0FBb0csR0FBRyxFQUFFLDJDQUEyQyx3RUFBd0UsMENBQUMsa0JBQWtCLDBDQUFDLGtCQUFrQiwwQ0FBQyxnQkFBZ0IsMENBQUMsb0JBQW9CLDBDQUFDLHNCQUFzQiwwQ0FBQyxPQUFPLEdBQUcsNEJBQTRCLGlCQUFpQjtBQUM5WjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlCQUFpQixrREFBQyxDQUFDLGFBQWEsNkdBQTZHLEdBQUcsRUFBRSxpREFBaUQsMENBQUMsS0FBSywwQ0FBRSxvQkFBb0IsMENBQUMsNkJBQTZCLDBDQUFDLDBCQUEwQiwwQ0FBQyxLQUFLLHdDQUFFLHFCQUFxQiwwQ0FBQyxPQUFPLHdCQUF3QixXQUFXLEVBQUUseUNBQXlDLGlEQUFpRCwrQkFBK0IsMkRBQTJELG1CQUFtQixZQUFZLGdEQUFFLFVBQVUsaURBQUMsQ0FBQyxpREFBQyxDQUFDLGdEQUFFLENBQUMsZ0RBQUUsdUJBQXVCLCtDQUErQywrQkFBK0IsRUFBRSxLQUFLLEVBQUUsa0VBQWtFLFlBQVksV0FBVyxLQUFLLHFDQUFxQyw4QkFBOEIsMkJBQTJCLHNCQUFzQixpREFBQyxHQUFHLDZHQUE2RyxNQUFNLFFBQVEsOENBQUMsYUFBYSwyREFBMkQsaUJBQWlCLG9CQUFvQixzREFBQyxjQUFjLGVBQWUsRUFBRSxNQUFNO0FBQy9wQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxpQkFBaUIsa0RBQUMsQ0FBQyxhQUFhLDhCQUE4QixHQUFHLEVBQUUsdUNBQXVDLDBFQUEwRSwwQ0FBQyxPQUFPLEdBQUcsNEJBQTRCLGlCQUFpQixrQkFBa0IsaURBQUMsR0FBRyw2TEFBNkwsTUFBTSxNQUFNLGlCQUFpQixDQUFDLHFEQUFDLEtBQUssOENBQUMsU0FBUyw4Q0FBRSxhQUFhLE9BQU8sc0RBQUMsTUFBTSxxREFBRSxrQkFBa0IsZ0tBQWdLLEVBQUUsNEJBQTRCLHNEQUFDLE1BQU0sMERBQTBELHFCQUFxQixzREFBQyxjQUFjLGVBQWUsRUFBRSxFQUFxd0I7QUFDNWxEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcZGlzdFxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e2pzeCBhcyB3LGpzeHMgYXMgSyxGcmFnbWVudCBhcyBRfWZyb21cInJlYWN0L2pzeC1ydW50aW1lXCI7aW1wb3J0IGVlLHtjcmVhdGVDb250ZXh0IGFzIHRlLHVzZVN0YXRlIGFzIGosdXNlTWVtbyBhcyB6LHVzZVJlZiBhcyBPLHVzZUNvbnRleHQgYXMgTSx1c2VFZmZlY3QgYXMgQSxtZW1vIGFzIGhlLGZvcndhcmRSZWYgYXMgQix1c2VMYXlvdXRFZmZlY3QgYXMgTCx1c2VJbXBlcmF0aXZlSGFuZGxlIGFzIG9lLHVzZUNhbGxiYWNrIGFzIGFlfWZyb21cInJlYWN0XCI7aW1wb3J0KmFzIGggZnJvbVwidGhyZWVcIjtpbXBvcnR7Tm9Ub25lTWFwcGluZyBhcyBfZSxIYWxmRmxvYXRUeXBlIGFzIHhlLFZlY3RvcjMgYXMgZ2UsVW5pZm9ybSBhcyB5LFRleHR1cmVMb2FkZXIgYXMgd2UsU1JHQkNvbG9yU3BhY2UgYXMgU2UsUmVwZWF0V3JhcHBpbmcgYXMgWSxUZXh0dXJlIGFzIHllLENvbG9yIGFzIFBlLENhbnZhc1RleHR1cmUgYXMgYmUsTmVhcmVzdEZpbHRlciBhcyByZX1mcm9tXCJ0aHJlZVwiO2ltcG9ydHt1c2VUaHJlZSBhcyBWLHVzZUZyYW1lIGFzIEosZXh0ZW5kIGFzIEVlLGNyZWF0ZVBvcnRhbCBhcyBSZSx1c2VMb2FkZXIgYXMgVWUsYXBwbHlQcm9wcyBhcyBDZX1mcm9tXCJAcmVhY3QtdGhyZWUvZmliZXJcIjtpbXBvcnR7RWZmZWN0Q29tcG9zZXIgYXMgemUsUmVuZGVyUGFzcyBhcyBUZSxOb3JtYWxQYXNzIGFzIEFlLERlcHRoRG93bnNhbXBsaW5nUGFzcyBhcyBCZSxFZmZlY3QgYXMgVyxFZmZlY3RQYXNzIGFzIFZlLFBhc3MgYXMgRmUsRGVwdGhPZkZpZWxkRWZmZWN0IGFzIE1lLE1hc2tGdW5jdGlvbiBhcyBEZSxEZXB0aFBpY2tpbmdQYXNzIGFzIGtlLENvcHlQYXNzIGFzIEdlLEJsb29tRWZmZWN0IGFzIEllLEJyaWdodG5lc3NDb250cmFzdEVmZmVjdCBhcyBMZSxDaHJvbWF0aWNBYmVycmF0aW9uRWZmZWN0IGFzIE5lLENvbG9yQXZlcmFnZUVmZmVjdCBhcyBqZSxDb2xvckRlcHRoRWZmZWN0IGFzIE9lLERlcHRoRWZmZWN0IGFzIFdlLERvdFNjcmVlbkVmZmVjdCBhcyBYZSxHbGl0Y2hFZmZlY3QgYXMgcWUsR2xpdGNoTW9kZSBhcyBuZSxHb2RSYXlzRWZmZWN0IGFzIEhlLEdyaWRFZmZlY3QgYXMgWmUsSHVlU2F0dXJhdGlvbkVmZmVjdCBhcyAkZSxOb2lzZUVmZmVjdCBhcyBLZSxPdXRsaW5lRWZmZWN0IGFzIFllLFBpeGVsYXRpb25FZmZlY3QgYXMgSmUsU2NhbmxpbmVFZmZlY3QgYXMgUWUsU2VsZWN0aXZlQmxvb21FZmZlY3QgYXMgZXQsU2VwaWFFZmZlY3QgYXMgdHQsU1NBT0VmZmVjdCBhcyBvdCxTTUFBRWZmZWN0IGFzIGF0LEZYQUFFZmZlY3QgYXMgcnQsVGV4dHVyZUVmZmVjdCBhcyBudCxUb25lTWFwcGluZ0VmZmVjdCBhcyBzdCxWaWduZXR0ZUVmZmVjdCBhcyBpdCxTaG9ja1dhdmVFZmZlY3QgYXMgbHQsTFVUM0RFZmZlY3QgYXMgY3QsVGlsdFNoaWZ0RWZmZWN0IGFzIGZ0fWZyb21cInBvc3Rwcm9jZXNzaW5nXCI7aW1wb3J0e2Vhc2luZyBhcyBzZX1mcm9tXCJtYWF0aFwiO2ltcG9ydHtOOEFPUG9zdFBhc3MgYXMgdXR9ZnJvbVwibjhhb1wiO2NvbnN0IEg9LypAX19QVVJFX18qL3RlKG51bGwpO2Z1bmN0aW9uIHB0KHtjaGlsZHJlbjplLGVuYWJsZWQ6dD0hMH0pe2NvbnN0W28scl09aihbXSksYT16KCgpPT4oe3NlbGVjdGVkOm8sc2VsZWN0OnIsZW5hYmxlZDp0fSksW28scix0XSk7cmV0dXJuIC8qQF9fUFVSRV9fKi93KEguUHJvdmlkZXIse3ZhbHVlOmEsY2hpbGRyZW46ZX0pfWZ1bmN0aW9uIG10KHtlbmFibGVkOmU9ITEsY2hpbGRyZW46dCwuLi5vfSl7Y29uc3Qgcj1PKG51bGwpLGE9TShIKTtyZXR1cm4gQSgoKT0+e2lmKGEmJmUpe2xldCBuPSExO2NvbnN0IGk9W107aWYoci5jdXJyZW50LnRyYXZlcnNlKHM9PntzLnR5cGU9PT1cIk1lc2hcIiYmaS5wdXNoKHMpLGEuc2VsZWN0ZWQuaW5kZXhPZihzKT09PS0xJiYobj0hMCl9KSxuKXJldHVybiBhLnNlbGVjdChzPT5bLi4ucywuLi5pXSksKCk9PnthLnNlbGVjdChzPT5zLmZpbHRlcihsPT4haS5pbmNsdWRlcyhsKSkpfX19LFtlLHQsYV0pLC8qQF9fUFVSRV9fKi93KFwiZ3JvdXBcIix7cmVmOnIsLi4ubyxjaGlsZHJlbjp0fSl9Y29uc3QgRD0vKkBfX1BVUkVfXyovdGUobnVsbCksaWU9ZT0+KGUuZ2V0QXR0cmlidXRlcygpJjIpPT09MixkdD0vKkBfX1BVUkVfXyovaGUoLypAX19QVVJFX18qL0IoKHtjaGlsZHJlbjplLGNhbWVyYTp0LHNjZW5lOm8scmVzb2x1dGlvblNjYWxlOnIsZW5hYmxlZDphPSEwLHJlbmRlclByaW9yaXR5Om49MSxhdXRvQ2xlYXI6aT0hMCxkZXB0aEJ1ZmZlcjpzLGVuYWJsZU5vcm1hbFBhc3M6bCxzdGVuY2lsQnVmZmVyOnAsbXVsdGlzYW1wbGluZzpfPTgsZnJhbWVCdWZmZXJUeXBlOlM9eGV9LGcpPT57Y29uc3R7Z2w6ZCxzY2VuZTptLGNhbWVyYTp2LHNpemU6eH09VigpLGY9b3x8bSx1PXR8fHYsW2MsVSxiXT16KCgpPT57Y29uc3QgQz1uZXcgemUoZCx7ZGVwdGhCdWZmZXI6cyxzdGVuY2lsQnVmZmVyOnAsbXVsdGlzYW1wbGluZzpfLGZyYW1lQnVmZmVyVHlwZTpTfSk7Qy5hZGRQYXNzKG5ldyBUZShmLHUpKTtsZXQgUj1udWxsLEU9bnVsbDtyZXR1cm4gbCYmKEU9bmV3IEFlKGYsdSksRS5lbmFibGVkPSExLEMuYWRkUGFzcyhFKSxyIT09dm9pZCAwJiYoUj1uZXcgQmUoe25vcm1hbEJ1ZmZlcjpFLnRleHR1cmUscmVzb2x1dGlvblNjYWxlOnJ9KSxSLmVuYWJsZWQ9ITEsQy5hZGRQYXNzKFIpKSksW0MsRSxSXX0sW3UsZCxzLHAsXyxTLGYsbCxyXSk7QSgoKT0+Yz8uc2V0U2l6ZSh4LndpZHRoLHguaGVpZ2h0KSxbYyx4XSksSigoQyxSKT0+e2lmKGEpe2NvbnN0IEU9ZC5hdXRvQ2xlYXI7ZC5hdXRvQ2xlYXI9aSxwJiYhaSYmZC5jbGVhclN0ZW5jaWwoKSxjLnJlbmRlcihSKSxkLmF1dG9DbGVhcj1FfX0sYT9uOjApO2NvbnN0IEY9TyhudWxsKTtMKCgpPT57Y29uc3QgQz1bXSxSPUYuY3VycmVudC5fX3IzZjtpZihSJiZjKXtjb25zdCBFPVIuY2hpbGRyZW47Zm9yKGxldCBUPTA7VDxFLmxlbmd0aDtUKyspe2NvbnN0IE49RVtUXS5vYmplY3Q7aWYoTiBpbnN0YW5jZW9mIFcpe2NvbnN0IHE9W05dO2lmKCFpZShOKSl7bGV0IEc9bnVsbDtmb3IoOyhHPUVbVCsxXT8ub2JqZWN0KWluc3RhbmNlb2YgVyYmIWllKEcpOylxLnB1c2goRyksVCsrfWNvbnN0ICQ9bmV3IFZlKHUsLi4ucSk7Qy5wdXNoKCQpfWVsc2UgTiBpbnN0YW5jZW9mIEZlJiZDLnB1c2goTil9Zm9yKGNvbnN0IFQgb2YgQyljPy5hZGRQYXNzKFQpO1UmJihVLmVuYWJsZWQ9ITApLGImJihiLmVuYWJsZWQ9ITApfXJldHVybigpPT57Zm9yKGNvbnN0IEUgb2YgQyljPy5yZW1vdmVQYXNzKEUpO1UmJihVLmVuYWJsZWQ9ITEpLGImJihiLmVuYWJsZWQ9ITEpfX0sW2MsZSx1LFUsYl0pLEEoKCk9Pntjb25zdCBDPWQudG9uZU1hcHBpbmc7cmV0dXJuIGQudG9uZU1hcHBpbmc9X2UsKCk9PntkLnRvbmVNYXBwaW5nPUN9fSxbZF0pO2NvbnN0IFg9eigoKT0+KHtjb21wb3NlcjpjLG5vcm1hbFBhc3M6VSxkb3duU2FtcGxpbmdQYXNzOmIscmVzb2x1dGlvblNjYWxlOnIsY2FtZXJhOnUsc2NlbmU6Zn0pLFtjLFUsYixyLHUsZl0pO3JldHVybiBvZShnLCgpPT5jLFtjXSksLypAX19QVVJFX18qL3coRC5Qcm92aWRlcix7dmFsdWU6WCxjaGlsZHJlbjovKkBfX1BVUkVfXyovdyhcImdyb3VwXCIse3JlZjpGLGNoaWxkcmVuOmV9KX0pfSkpLGs9ZT0+dHlwZW9mIGU9PVwib2JqZWN0XCImJmUhPW51bGwmJlwiY3VycmVudFwiaW4gZT9lLmN1cnJlbnQ6ZTtsZXQgdnQ9MDtjb25zdCBsZT0vKkBfX1BVUkVfXyovbmV3IFdlYWtNYXAsUD0oZSx0KT0+ZnVuY3Rpb24oe2JsZW5kRnVuY3Rpb246bz10Py5ibGVuZEZ1bmN0aW9uLG9wYWNpdHk6cj10Py5vcGFjaXR5LC4uLmF9KXtsZXQgbj1sZS5nZXQoZSk7aWYoIW4pe2NvbnN0IGw9YEByZWFjdC10aHJlZS9wb3N0cHJvY2Vzc2luZy8ke2UubmFtZX0tJHt2dCsrfWA7RWUoe1tsXTplfSksbGUuc2V0KGUsbj1sKX1jb25zdCBpPVYobD0+bC5jYW1lcmEpLHM9ZWUudXNlTWVtbygoKT0+Wy4uLnQ/LmFyZ3M/P1tdLC4uLmEuYXJncz8/W3suLi50LC4uLmF9XV0sW0pTT04uc3RyaW5naWZ5KGEpXSk7cmV0dXJuIC8qQF9fUFVSRV9fKi93KG4se2NhbWVyYTppLFwiYmxlbmRNb2RlLWJsZW5kRnVuY3Rpb25cIjpvLFwiYmxlbmRNb2RlLW9wYWNpdHktdmFsdWVcIjpyLC4uLmEsYXJnczpzfSl9LFo9KGUsdCk9Pntjb25zdCBvPWVbdF07cmV0dXJuIGVlLnVzZU1lbW8oKCk9PnR5cGVvZiBvPT1cIm51bWJlclwiP25ldyBoLlZlY3RvcjIobyxvKTpvP25ldyBoLlZlY3RvcjIoLi4ubyk6bmV3IGguVmVjdG9yMixbb10pfSxjZT0vKkBfX1BVUkVfXyovQihmdW5jdGlvbih7YmxlbmRGdW5jdGlvbjplLHdvcmxkRm9jdXNEaXN0YW5jZTp0LHdvcmxkRm9jdXNSYW5nZTpvLGZvY3VzRGlzdGFuY2U6cixmb2N1c1JhbmdlOmEsZm9jYWxMZW5ndGg6bixib2tlaFNjYWxlOmkscmVzb2x1dGlvblNjYWxlOnMscmVzb2x1dGlvblg6bCxyZXNvbHV0aW9uWTpwLHdpZHRoOl8saGVpZ2h0OlMsdGFyZ2V0OmcsZGVwdGhUZXh0dXJlOmQsLi4ubX0sdil7Y29uc3R7Y2FtZXJhOnh9PU0oRCksZj1nIT1udWxsLHU9eigoKT0+e2NvbnN0IGM9bmV3IE1lKHgse2JsZW5kRnVuY3Rpb246ZSx3b3JsZEZvY3VzRGlzdGFuY2U6dCx3b3JsZEZvY3VzUmFuZ2U6byxmb2N1c0Rpc3RhbmNlOnIsZm9jdXNSYW5nZTphLGZvY2FsTGVuZ3RoOm4sYm9rZWhTY2FsZTppLHJlc29sdXRpb25TY2FsZTpzLHJlc29sdXRpb25YOmwscmVzb2x1dGlvblk6cCx3aWR0aDpfLGhlaWdodDpTfSk7ZiYmKGMudGFyZ2V0PW5ldyBnZSksZCYmYy5zZXREZXB0aFRleHR1cmUoZC50ZXh0dXJlLGQucGFja2luZyk7Y29uc3QgVT1jLm1hc2tQYXNzO3JldHVybiBVLm1hc2tGdW5jdGlvbj1EZS5NVUxUSVBMWV9SR0JfU0VUX0FMUEhBLGN9LFt4LGUsdCxvLHIsYSxuLGkscyxsLHAsXyxTLGYsZF0pO3JldHVybiBBKCgpPT4oKT0+e3UuZGlzcG9zZSgpfSxbdV0pLC8qQF9fUFVSRV9fKi93KFwicHJpbWl0aXZlXCIsey4uLm0scmVmOnYsb2JqZWN0OnUsdGFyZ2V0Omd9KX0pLGh0PS8qQF9fUFVSRV9fKi9CKCh7dGFyZ2V0OmU9dm9pZCAwLG1vdXNlOnQ9ITEsZGVidWc6bz12b2lkIDAsbWFudWFsOnI9ITEsc21vb3RoVGltZTphPS4yNSwuLi5ufSxpKT0+e2NvbnN0IHM9TyhudWxsKSxsPU8obnVsbCkscD1PKG51bGwpLF89Vigoe3NjZW5lOmJ9KT0+YiksUz1WKCh7cG9pbnRlcjpifSk9PmIpLHtjb21wb3NlcjpnLGNhbWVyYTpkfT1NKEQpLFttXT1qKCgpPT5uZXcga2UpLFt2XT1qKCgpPT5uZXcgR2UpO0EoKCk9PihnLmFkZFBhc3MobSksZy5hZGRQYXNzKHYpLCgpPT57Zy5yZW1vdmVQYXNzKG0pLGcucmVtb3ZlUGFzcyh2KX0pLFtnLG0sdl0pLEEoKCk9PigpPT57bS5kaXNwb3NlKCksdi5kaXNwb3NlKCl9LFttLHZdKTtjb25zdFt4XT1qKCgpPT5uZXcgaC5WZWN0b3IzKDAsMCwwKSksW2ZdPWooKCk9Pm5ldyBoLlZlY3RvcjMoMCwwLDApKSx1PWFlKGFzeW5jKGIsRik9PihmLng9YixmLnk9RixmLno9YXdhaXQgbS5yZWFkRGVwdGgoZiksZi56PWYueioyLTEsMS1mLno+MWUtNz9mLnVucHJvamVjdChkKTohMSksW2YsbSxkXSksYz1hZShhc3luYyhiLEY9ITApPT57aWYoZSl4LnNldCguLi5lKTtlbHNle2NvbnN0e3g6WCx5OkN9PXQ/Uzp7eDowLHk6MH0sUj1hd2FpdCB1KFgsQyk7UiYmeC5jb3B5KFIpfUYmJnMuY3VycmVudD8udGFyZ2V0JiYoYT4wJiZiPjA/c2UuZGFtcDMocy5jdXJyZW50LnRhcmdldCx4LGEsYik6cy5jdXJyZW50LnRhcmdldC5jb3B5KHgpKX0sW2UseCx0LHUsYSxTXSk7Sihhc3luYyhiLEYpPT57cnx8YyhGKSxsLmN1cnJlbnQmJmwuY3VycmVudC5wb3NpdGlvbi5jb3B5KHgpLHAuY3VycmVudCYmcy5jdXJyZW50Py50YXJnZXQmJnAuY3VycmVudC5wb3NpdGlvbi5jb3B5KHMuY3VycmVudC50YXJnZXQpfSk7Y29uc3QgVT16KCgpPT4oe2RvZlJlZjpzLGhpdHBvaW50OngsdXBkYXRlOmN9KSxbeCxjXSk7cmV0dXJuIG9lKGksKCk9PlUsW1VdKSwvKkBfX1BVUkVfXyovSyhRLHtjaGlsZHJlbjpbbz9SZSgvKkBfX1BVUkVfXyovSyhRLHtjaGlsZHJlbjpbLypAX19QVVJFX18qL0soXCJtZXNoXCIse3JlZjpsLGNoaWxkcmVuOlsvKkBfX1BVUkVfXyovdyhcInNwaGVyZUdlb21ldHJ5XCIse2FyZ3M6W28sMTYsMTZdfSksLypAX19QVVJFX18qL3coXCJtZXNoQmFzaWNNYXRlcmlhbFwiLHtjb2xvcjpcIiMwMGZmMDBcIixvcGFjaXR5OjEsdHJhbnNwYXJlbnQ6ITAsZGVwdGhXcml0ZTohMX0pXX0pLC8qQF9fUFVSRV9fKi9LKFwibWVzaFwiLHtyZWY6cCxjaGlsZHJlbjpbLypAX19QVVJFX18qL3coXCJzcGhlcmVHZW9tZXRyeVwiLHthcmdzOltvLzIsMTYsMTZdfSksLypAX19QVVJFX18qL3coXCJtZXNoQmFzaWNNYXRlcmlhbFwiLHtjb2xvcjpcIiMwMGZmMDBcIixvcGFjaXR5Oi41LHRyYW5zcGFyZW50OiEwLGRlcHRoV3JpdGU6ITF9KV19KV19KSxfKTpudWxsLC8qQF9fUFVSRV9fKi93KGNlLHtyZWY6cywuLi5uLHRhcmdldDp4fSldfSl9KSxfdD17ZnJhZ21lbnRTaGFkZXI6YFxuICAgIHVuaWZvcm0gZmxvYXQgdGltZTtcbiAgICB1bmlmb3JtIHZlYzIgbGVuc1Bvc2l0aW9uO1xuICAgIHVuaWZvcm0gdmVjMiBzY3JlZW5SZXM7XG4gICAgdW5pZm9ybSB2ZWMzIGNvbG9yR2FpbjtcbiAgICB1bmlmb3JtIGZsb2F0IHN0YXJQb2ludHM7XG4gICAgdW5pZm9ybSBmbG9hdCBnbGFyZVNpemU7XG4gICAgdW5pZm9ybSBmbG9hdCBmbGFyZVNpemU7XG4gICAgdW5pZm9ybSBmbG9hdCBmbGFyZVNwZWVkO1xuICAgIHVuaWZvcm0gZmxvYXQgZmxhcmVTaGFwZTtcbiAgICB1bmlmb3JtIGZsb2F0IGhhbG9TY2FsZTtcbiAgICB1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XG4gICAgdW5pZm9ybSBib29sIGFuaW1hdGVkO1xuICAgIHVuaWZvcm0gYm9vbCBhbmFtb3JwaGljO1xuICAgIHVuaWZvcm0gYm9vbCBlbmFibGVkO1xuICAgIHVuaWZvcm0gYm9vbCBzZWNvbmRhcnlHaG9zdHM7XG4gICAgdW5pZm9ybSBib29sIHN0YXJCdXJzdDtcbiAgICB1bmlmb3JtIGZsb2F0IGdob3N0U2NhbGU7XG4gICAgdW5pZm9ybSBib29sIGFkaXRpb25hbFN0cmVha3M7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbGVuc0RpcnRUZXh0dXJlO1xuICAgIHZlYzIgdlRleENvb3JkO1xuICAgIFxuICAgIGZsb2F0IHJhbmQoZmxvYXQgbil7cmV0dXJuIGZyYWN0KHNpbihuKSAqIDQzNzU4LjU0NTMxMjMpO31cblxuICAgIGZsb2F0IG5vaXNlKGZsb2F0IHApe1xuICAgICAgZmxvYXQgZmwgPSBmbG9vcihwKTtcbiAgICAgIGZsb2F0IGZjID0gZnJhY3QocCk7XG4gICAgICByZXR1cm4gbWl4KHJhbmQoZmwpLHJhbmQoZmwgKyAxLjApLCBmYyk7XG4gICAgfVxuXG4gICAgdmVjMyBoc3YycmdiKHZlYzMgYylcbiAgICB7XG4gICAgICB2ZWM0IGsgPSB2ZWM0KDEuMCwgMi4wIC8gMy4wLCAxLjAgLyAzLjAsIDMuMCk7XG4gICAgICB2ZWMzIHAgPSBhYnMoZnJhY3QoYy54eHggKyBrLnh5eikgKiA2LjAgLSBrLnd3dyk7XG4gICAgICByZXR1cm4gYy56ICogbWl4KGsueHh4LCBjbGFtcChwIC0gay54eHgsIDAuMCwgMS4wKSwgYy55KTtcbiAgICB9XG5cbiAgICBmbG9hdCBzYXR1cmF0ZShmbG9hdCB4KVxuICAgIHtcbiAgICAgIHJldHVybiBjbGFtcCh4LCAwLiwxLik7XG4gICAgfVxuXG4gICAgdmVjMiByb3RhdGVVVih2ZWMyIHV2LCBmbG9hdCByb3RhdGlvbilcbiAgICB7XG4gICAgICByZXR1cm4gdmVjMihcbiAgICAgICAgICBjb3Mocm90YXRpb24pICogdXYueCArIHNpbihyb3RhdGlvbikgKiB1di55LFxuICAgICAgICAgIGNvcyhyb3RhdGlvbikgKiB1di55IC0gc2luKHJvdGF0aW9uKSAqIHV2LnhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQmFzZWQgb24gaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3L1h0S2ZSVlxuICAgIHZlYzMgZHJhd2ZsYXJlKHZlYzIgcCwgZmxvYXQgaW50ZW5zaXR5LCBmbG9hdCBybmQsIGZsb2F0IHNwZWVkLCBpbnQgaWQpXG4gICAge1xuICAgICAgZmxvYXQgZmxhcmVodWVvZmZzZXQgPSAoMS4gLyAzMi4pICogZmxvYXQoaWQpICogMC4xO1xuICAgICAgZmxvYXQgbGluZ3JhZCA9IGRpc3RhbmNlKHZlYzIoMC4pLCBwKTtcbiAgICAgIGZsb2F0IGV4cGdyYWQgPSAxLiAvIGV4cChsaW5ncmFkICogKGZyYWN0KHJuZCkgKiAwLjY2ICsgMC4zMykpO1xuICAgICAgdmVjMyBjb2xncmFkID0gaHN2MnJnYih2ZWMzKCBmcmFjdCggKGV4cGdyYWQgKiA4LikgKyBzcGVlZCAqIGZsYXJlU3BlZWQgKyBmbGFyZWh1ZW9mZnNldCksIHBvdygxLi1hYnMoZXhwZ3JhZCoyLi0xLiksIDAuNDUpLCAyMC4wICogZXhwZ3JhZCAqIGludGVuc2l0eSkpOyAvL3JhaW5ib3cgc3BlY3RydW0gZWZmZWN0XG5cbiAgICAgIGZsb2F0IGludGVybmFsU3RhclBvaW50cztcblxuICAgICAgaWYoYW5hbW9ycGhpYyl7XG4gICAgICAgIGludGVybmFsU3RhclBvaW50cyA9IDEuMDtcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgaW50ZXJuYWxTdGFyUG9pbnRzID0gc3RhclBvaW50cztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZmxvYXQgYmxhZGVzID0gbGVuZ3RoKHAgKiBmbGFyZVNoYXBlICogc2luKGludGVybmFsU3RhclBvaW50cyAqIGF0YW4ocC54LCBwLnkpKSk7XG4gICAgICBcbiAgICAgIGZsb2F0IGNvbXAgPSBwb3coMS4tc2F0dXJhdGUoYmxhZGVzKSwgKCBhbmFtb3JwaGljID8gMTAwLiA6IDEyLikpO1xuICAgICAgY29tcCArPSBzYXR1cmF0ZShleHBncmFkLTAuOSkgKiAzLjtcbiAgICAgIGNvbXAgPSBwb3coY29tcCAqIGV4cGdyYWQsIDguICsgKDEuLWludGVuc2l0eSkgKiA1Lik7XG4gICAgICBcbiAgICAgIGlmKGZsYXJlU3BlZWQgPiAwLjApe1xuICAgICAgICByZXR1cm4gdmVjMyhjb21wKSAqIGNvbGdyYWQ7XG4gICAgICB9IGVsc2V7XG4gICAgICAgIHJldHVybiB2ZWMzKGNvbXApICogZmxhcmVTaXplICogMTUuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZsb2F0IGRpc3QodmVjMyBhLCB2ZWMzIGIpIHsgcmV0dXJuIGFicyhhLnggLSBiLngpICsgYWJzKGEueSAtIGIueSkgKyBhYnMoYS56IC0gYi56KTsgfVxuXG4gICAgdmVjMyBzYXR1cmF0ZSh2ZWMzIHgpXG4gICAge1xuICAgICAgcmV0dXJuIGNsYW1wKHgsIHZlYzMoMC4wKSwgdmVjMygxLjApKTtcbiAgICB9XG5cbiAgICAvLyBCYXNlZCBvbiBodHRwczovL3d3dy5zaGFkZXJ0b3kuY29tL3ZpZXcvWHRLZlJWXG4gICAgZmxvYXQgZ2xhcmUodmVjMiB1diwgdmVjMiBwb3MsIGZsb2F0IHNpemUpXG4gICAge1xuICAgICAgdmVjMiBtYWluO1xuXG4gICAgICBpZihhbmltYXRlZCl7XG4gICAgICAgIG1haW4gPSByb3RhdGVVVih1di1wb3MsIHRpbWUgKiAwLjEpOyAgICAgIFxuICAgICAgfSBlbHNle1xuICAgICAgICBtYWluID0gdXYtcG9zOyAgICAgXG4gICAgICB9XG4gICAgICBcbiAgICAgIGZsb2F0IGFuZyA9IGF0YW4obWFpbi55LCBtYWluLngpICogKGFuYW1vcnBoaWMgPyAxLjAgOiBzdGFyUG9pbnRzKTtcbiAgICAgIGZsb2F0IGRpc3QgPSBsZW5ndGgobWFpbik7IFxuICAgICAgZGlzdCA9IHBvdyhkaXN0LCAuOSk7XG4gICAgICBcbiAgICAgIGZsb2F0IGYwID0gMS4wLyhsZW5ndGgodXYtcG9zKSooMS4wL3NpemUqMTYuMCkrLjIpO1xuXG4gICAgICByZXR1cm4gZjArZjAqKHNpbigoYW5nKSkqLjIgKy4zKTtcbiAgICB9XG5cbiAgICBmbG9hdCBzZEhleCh2ZWMyIHApe1xuICAgICAgcCA9IGFicyhwKTtcbiAgICAgIHZlYzIgcSA9IHZlYzIocC54KjIuMCowLjU3NzM1MDMsIHAueSArIHAueCowLjU3NzM1MDMpO1xuICAgICAgcmV0dXJuIGRvdChzdGVwKHEueHkscS55eCksIDEuMC1xLnl4KTtcbiAgICB9XG5cbiAgICAvL0Jhc2VkIG9uIGh0dHBzOi8vd3d3LnNoYWRlcnRveS5jb20vdmlldy9kbGxTUlhcbiAgICBmbG9hdCBmcG93KGZsb2F0IHgsIGZsb2F0IGspe1xuICAgICAgcmV0dXJuIHggPiBrID8gcG93KCh4LWspLygxLjAtayksMi4wKSA6IDAuMDtcbiAgICB9XG5cbiAgICB2ZWMzIHJlbmRlcmhleCh2ZWMyIHV2LCB2ZWMyIHAsIGZsb2F0IHMsIHZlYzMgY29sKXtcbiAgICAgIHV2IC09IHA7XG4gICAgICBpZiAoYWJzKHV2LngpIDwgMC4yKnMgJiYgYWJzKHV2LnkpIDwgMC4yKnMpe1xuICAgICAgICAgIHJldHVybiBtaXgodmVjMygwKSxtaXgodmVjMygwKSxjb2wsMC4xICsgZnBvdyhsZW5ndGgodXYvcyksMC4xKSoxMC4wKSxzbW9vdGhzdGVwKDAuMCwwLjEsc2RIZXgodXYqMjAuMC9zKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZlYzMoMCk7XG4gICAgfVxuXG4gICAgLy8gQmFzZWQgb24gaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3LzRzWDNSc1xuICAgIHZlYzMgTGVuc0ZsYXJlKHZlYzIgdXYsIHZlYzIgcG9zKVxuICAgIHtcbiAgICAgIHZlYzIgbWFpbiA9IHV2LXBvcztcbiAgICAgIHZlYzIgdXZkID0gdXYqKGxlbmd0aCh1dikpO1xuICAgICAgXG4gICAgICBmbG9hdCBhbmcgPSBhdGFuKG1haW4ueCxtYWluLnkpO1xuICAgICAgXG4gICAgICBmbG9hdCBmMCA9IC4zLyhsZW5ndGgodXYtcG9zKSoxNi4wKzEuMCk7XG4gICAgICBcbiAgICAgIGYwID0gZjAqKHNpbihub2lzZShzaW4oYW5nKjMuOS0oYW5pbWF0ZWQgPyB0aW1lIDogMC4wKSAqIDAuMykgKiBzdGFyUG9pbnRzKSkqLjIgKTtcbiAgICAgIFxuICAgICAgZmxvYXQgZjEgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHV2KzEuMipwb3MpLDEuOSksLjApKjcuMDtcblxuICAgICAgZmxvYXQgZjIgPSBtYXgoLjkvKDEwLjArMzIuMCpwb3cobGVuZ3RoKHV2ZCswLjk5KnBvcyksMi4wKSksLjApKjAuMzU7XG4gICAgICBmbG9hdCBmMjIgPSBtYXgoLjkvKDExLjArMzIuMCpwb3cobGVuZ3RoKHV2ZCswLjg1KnBvcyksMi4wKSksLjApKjAuMjM7XG4gICAgICBmbG9hdCBmMjMgPSBtYXgoLjkvKDEyLjArMzIuMCpwb3cobGVuZ3RoKHV2ZCswLjk1KnBvcyksMi4wKSksLjApKjAuNjtcbiAgICAgIFxuICAgICAgdmVjMiB1dnggPSBtaXgodXYsdXZkLCAwLjEpO1xuICAgICAgXG4gICAgICBmbG9hdCBmNCA9IG1heCgwLjAxLXBvdyhsZW5ndGgodXZ4KzAuNCpwb3MpLDIuOSksLjApKjQuMDI7XG4gICAgICBmbG9hdCBmNDIgPSBtYXgoMC4wLXBvdyhsZW5ndGgodXZ4KzAuNDUqcG9zKSwyLjkpLC4wKSo0LjE7XG4gICAgICBmbG9hdCBmNDMgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHV2eCswLjUqcG9zKSwyLjkpLC4wKSo0LjY7XG4gICAgICBcbiAgICAgIHV2eCA9IG1peCh1dix1dmQsLS40KTtcbiAgICAgIFxuICAgICAgZmxvYXQgZjUgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHV2eCswLjEqcG9zKSw1LjUpLC4wKSoyLjA7XG4gICAgICBmbG9hdCBmNTIgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHV2eCswLjIqcG9zKSw1LjUpLC4wKSoyLjA7XG4gICAgICBmbG9hdCBmNTMgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHV2eCswLjEqcG9zKSw1LjUpLC4wKSoyLjA7XG4gICAgICBcbiAgICAgIHV2eCA9IG1peCh1dix1dmQsIDIuMSk7XG4gICAgICBcbiAgICAgIGZsb2F0IGY2ID0gbWF4KDAuMDEtcG93KGxlbmd0aCh1dngtMC4zKnBvcyksMS42MSksLjApKjMuMTU5O1xuICAgICAgZmxvYXQgZjYyID0gbWF4KDAuMDEtcG93KGxlbmd0aCh1dngtMC4zMjUqcG9zKSwxLjYxNCksLjApKjMuMTQ7XG4gICAgICBmbG9hdCBmNjMgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHV2eC0wLjM4OSpwb3MpLDEuNjIzKSwuMCkqMy4xMjtcbiAgICAgIFxuICAgICAgdmVjMyBjID0gdmVjMyhnbGFyZSh1dixwb3MsIGdsYXJlU2l6ZSkpO1xuXG4gICAgICB2ZWMyIHByb3Q7XG5cbiAgICAgIGlmKGFuaW1hdGVkKXtcbiAgICAgICAgcHJvdCA9IHJvdGF0ZVVWKHV2IC0gcG9zLCAodGltZSAqIDAuMSkpOyAgXG4gICAgICB9IGVsc2UgaWYoYW5hbW9ycGhpYyl7XG4gICAgICAgIHByb3QgPSByb3RhdGVVVih1diAtIHBvcywgMS41NzA3OTYpOyAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm90ID0gdXYgLSBwb3M7XG4gICAgICB9XG5cbiAgICAgIGMgKz0gZHJhd2ZsYXJlKHByb3QsIChhbmFtb3JwaGljID8gZmxhcmVTaXplICogMTAuIDogZmxhcmVTaXplKSwgMC4xLCB0aW1lLCAxKTtcbiAgICAgIFxuICAgICAgYy5yKz1mMStmMitmNCtmNStmNjsgYy5nKz1mMStmMjIrZjQyK2Y1MitmNjI7IGMuYis9ZjErZjIzK2Y0MytmNTMrZjYzO1xuICAgICAgYyA9IGMqMS4zICogdmVjMyhsZW5ndGgodXZkKSsuMDkpO1xuICAgICAgYys9dmVjMyhmMCk7XG4gICAgICBcbiAgICAgIHJldHVybiBjO1xuICAgIH1cblxuICAgIHZlYzMgY2ModmVjMyBjb2xvciwgZmxvYXQgZmFjdG9yLGZsb2F0IGZhY3RvcjIpXG4gICAge1xuICAgICAgZmxvYXQgdyA9IGNvbG9yLngrY29sb3IueStjb2xvci56O1xuICAgICAgcmV0dXJuIG1peChjb2xvcix2ZWMzKHcpKmZhY3Rvcix3KmZhY3RvcjIpO1xuICAgIH0gICAgXG5cbiAgICBmbG9hdCBybmQodmVjMiBwKVxuICAgIHtcbiAgICAgIGZsb2F0IGYgPSBmcmFjdChzaW4oZG90KHAsIHZlYzIoMTIuMTIzNCwgNzIuODM5MikgKSo0NTEyMy4yKSk7XG4gICAgICByZXR1cm4gZjsgICBcbiAgICB9XG5cbiAgICBmbG9hdCBybmQoZmxvYXQgdylcbiAgICB7XG4gICAgICBmbG9hdCBmID0gZnJhY3Qoc2luKHcpKjEwMDAuKTtcbiAgICAgIHJldHVybiBmOyAgIFxuICAgIH1cblxuICAgIGZsb2F0IHJlZ1NoYXBlKHZlYzIgcCwgaW50IE4pXG4gICAge1xuICAgICAgZmxvYXQgZjtcbiAgICAgIFxuICAgICAgZmxvYXQgYT1hdGFuKHAueCxwLnkpKy4yO1xuICAgICAgZmxvYXQgYj02LjI4MzE5L2Zsb2F0KE4pO1xuICAgICAgZj1zbW9vdGhzdGVwKC41LC41MSwgY29zKGZsb29yKC41K2EvYikqYi1hKSpsZW5ndGgocC54eSkqIDIuMCAgLWdob3N0U2NhbGUpO1xuICAgICAgICAgIFxuICAgICAgcmV0dXJuIGY7XG4gICAgfVxuXG4gICAgLy8gQmFzZWQgb24gaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3L1hsYzNEMlxuICAgIHZlYzMgY2lyY2xlKHZlYzIgcCwgZmxvYXQgc2l6ZSwgZmxvYXQgZGVjYXksIHZlYzMgY29sb3IsIHZlYzMgY29sb3IyLCBmbG9hdCBkaXN0LCB2ZWMyIHBvc2l0aW9uKVxuICAgIHtcbiAgICAgIGZsb2F0IGwgPSBsZW5ndGgocCArIHBvc2l0aW9uKihkaXN0KjIuKSkrc2l6ZS8yLjtcbiAgICAgIGZsb2F0IGwyID0gbGVuZ3RoKHAgKyBwb3NpdGlvbiooZGlzdCo0LikpK3NpemUvMy47XG4gICAgICBcbiAgICAgIGZsb2F0IGMgPSBtYXgoMC4wMS1wb3cobGVuZ3RoKHAgKyBwb3NpdGlvbipkaXN0KSwgc2l6ZSpnaG9zdFNjYWxlKSwgMC4wKSoxMC47XG4gICAgICBmbG9hdCBjMSA9IG1heCgwLjAwMS1wb3cobC0wLjMsIDEuLzQwLikrc2luKGwqMjAuKSwgMC4wKSozLjtcbiAgICAgIGZsb2F0IGMyID0gIG1heCgwLjA5L3BvdyhsZW5ndGgocC1wb3NpdGlvbipkaXN0Ly41KSoxLiwgLjk1KSwgMC4wKS8yMC47XG4gICAgICBmbG9hdCBzID0gbWF4KDAuMDItcG93KHJlZ1NoYXBlKHAqNS4gKyBwb3NpdGlvbipkaXN0KjUuICsgZGVjYXksIDYpICwgMS4pLCAwLjApKjEuNTtcbiAgICAgIFxuICAgICAgY29sb3IgPSBjb3ModmVjMygwLjQ0LCAuMjQsIC4yKSoxNi4gKyBkaXN0LzguKSowLjUrLjU7XG4gICAgICB2ZWMzIGYgPSBjKmNvbG9yO1xuICAgICAgZiArPSBjMSpjb2xvcjtcbiAgICAgIGYgKz0gYzIqY29sb3I7ICBcbiAgICAgIGYgKz0gIHMqY29sb3I7XG4gICAgICByZXR1cm4gZjtcbiAgICB9XG5cbiAgICB2ZWM0IGdldExlbnNDb2xvcihmbG9hdCB4KXtcbiAgICAgIHJldHVybiB2ZWM0KHZlYzMobWl4KG1peChtaXgobWl4KG1peChtaXgobWl4KG1peChtaXgobWl4KG1peChtaXgobWl4KG1peChtaXgodmVjMygwLiwgMC4sIDAuKSxcbiAgICAgICAgdmVjMygwLiwgMC4sIDAuKSwgc21vb3Roc3RlcCgwLjAsIDAuMDYzLCB4KSksXG4gICAgICAgIHZlYzMoMC4sIDAuLCAwLiksIHNtb290aHN0ZXAoMC4wNjMsIDAuMTI1LCB4KSksXG4gICAgICAgIHZlYzMoMC4wLCAwLiwgMC4pLCBzbW9vdGhzdGVwKDAuMTI1LCAwLjE4OCwgeCkpLFxuICAgICAgICB2ZWMzKDAuMTg4LCAwLjEzMSwgMC4xMTYpLCBzbW9vdGhzdGVwKDAuMTg4LCAwLjIyNywgeCkpLFxuICAgICAgICB2ZWMzKDAuMzEsIDAuMjA0LCAwLjUzNyksIHNtb290aHN0ZXAoMC4yMjcsIDAuMjUxLCB4KSksXG4gICAgICAgIHZlYzMoMC4xOTIsIDAuMTA2LCAwLjI4NiksIHNtb290aHN0ZXAoMC4yNTEsIDAuMzE0LCB4KSksXG4gICAgICAgIHZlYzMoMC4xMDIsIDAuMDA4LCAwLjM0MSksIHNtb290aHN0ZXAoMC4zMTQsIDAuMzkyLCB4KSksXG4gICAgICAgIHZlYzMoMC4wODYsIDAuMCwgMC4xNDEpLCBzbW9vdGhzdGVwKDAuMzkyLCAwLjUwMiwgeCkpLFxuICAgICAgICB2ZWMzKDEuMCwgMC4zMSwgMC4wKSwgc21vb3Roc3RlcCgwLjUwMiwgMC42MDQsIHgpKSxcbiAgICAgICAgdmVjMyguMSwgMC4xLCAwLjEpLCBzbW9vdGhzdGVwKDAuNjA0LCAwLjY0MywgeCkpLFxuICAgICAgICB2ZWMzKDEuMCwgMC45MjksIDAuMCksIHNtb290aHN0ZXAoMC42NDMsIDAuNzYxLCB4KSksXG4gICAgICAgIHZlYzMoMS4wLCAwLjA4NiwgMC40MjQpLCBzbW9vdGhzdGVwKDAuNzYxLCAwLjg0NywgeCkpLFxuICAgICAgICB2ZWMzKDEuMCwgMC40OSwgMC4wKSwgc21vb3Roc3RlcCgwLjg0NywgMC44OSwgeCkpLFxuICAgICAgICB2ZWMzKDAuOTQ1LCAwLjI3NSwgMC40NzUpLCBzbW9vdGhzdGVwKDAuODksIDAuOTQxLCB4KSksXG4gICAgICAgIHZlYzMoMC4yNTEsIDAuMjc1LCAwLjc5NiksIHNtb290aHN0ZXAoMC45NDEsIDEuMCwgeCkpKSxcbiAgICAgIDEuMCk7XG4gICAgfVxuXG4gICAgZmxvYXQgZGlydE5vaXNlKHZlYzIgcCl7XG4gICAgICB2ZWMyIGYgPSBmcmFjdChwKTtcbiAgICAgIGYgPSAoZiAqIGYpICogKDMuMCAtICgyLjAgKiBmKSk7ICAgIFxuICAgICAgZmxvYXQgbiA9IGRvdChmbG9vcihwKSwgdmVjMigxLjAsIDE1Ny4wKSk7XG4gICAgICB2ZWM0IGEgPSBmcmFjdChzaW4odmVjNChuICsgMC4wLCBuICsgMS4wLCBuICsgMTU3LjAsIG4gKyAxNTguMCkpICogNDM3NTguNTQ1MzEyMyk7XG4gICAgICByZXR1cm4gbWl4KG1peChhLngsIGEueSwgZi54KSwgbWl4KGEueiwgYS53LCBmLngpLCBmLnkpO1xuICAgIH0gXG5cbiAgICBmbG9hdCBmYm0odmVjMiBwKXtcbiAgICAgIGNvbnN0IG1hdDIgbSA9IG1hdDIoMC44MCwgLTAuNjAsIDAuNjAsIDAuODApO1xuICAgICAgZmxvYXQgZiA9IDAuMDtcbiAgICAgIGYgKz0gMC41MDAwKmRpcnROb2lzZShwKTsgcCA9IG0qcCoyLjAyO1xuICAgICAgZiArPSAwLjI1MDAqZGlydE5vaXNlKHApOyBwID0gbSpwKjIuMDM7XG4gICAgICBmICs9IDAuMTI1MCpkaXJ0Tm9pc2UocCk7IHAgPSBtKnAqMi4wMTtcbiAgICAgIGYgKz0gMC4wNjI1KmRpcnROb2lzZShwKTtcbiAgICAgIHJldHVybiBmLzAuOTM3NTtcbiAgICB9XG5cbiAgICB2ZWM0IGdldExlbnNTdGFyKHZlYzIgcCl7XG4gICAgICB2ZWMyIHBwID0gKHAgLSB2ZWMyKDAuNSkpICogMi4wO1xuICAgICAgZmxvYXQgYSA9IGF0YW4ocHAueSwgcHAueCk7XG4gICAgICB2ZWM0IGNwID0gdmVjNChzaW4oYSAqIDEuMCksIGxlbmd0aChwcCksIHNpbihhICogMTMuMCksIHNpbihhICogNTMuMCkpO1xuICAgICAgZmxvYXQgZCA9IHNpbihjbGFtcChwb3cobGVuZ3RoKHZlYzIoMC41KSAtIHApICogMC41ICsgaGFsb1NjYWxlIC8yLiwgNS4wKSwgMC4wLCAxLjApICogMy4xNDE1OSk7XG4gICAgICB2ZWMzIGMgPSB2ZWMzKGQpICogdmVjMyhmYm0oY3AueHkgKiAxNi4wKSAqIGZibShjcC56dyAqIDkuMCkgKiBtYXgobWF4KG1heChtYXgoMC41LCBzaW4oYSAqIDEuMCkpLCBzaW4oYSAqIDMuMCkgKiAwLjgpLCBzaW4oYSAqIDcuMCkgKiAwLjgpLCBzaW4oYSAqIDkuMCkgKiAxMC42KSk7XG4gICAgICBjICo9IHZlYzMobWl4KDIuMCwgKHNpbihsZW5ndGgocHAueHkpICogMjU2LjApICogMC41KSArIDAuNSwgc2luKChjbGFtcCgobGVuZ3RoKHBwLnh5KSAtIDAuODc1KSAvIDAuMSwgMC4wLCAxLjApICsgMC4wKSAqIDIuMCAqIDMuMTQxNTkpICogMS41KSArIDAuNSkgKiAwLjMyNzU7XG4gICAgICByZXR1cm4gdmVjNCh2ZWMzKGMgKiAxLjApLCBkKTtcdFxuICAgIH1cblxuICAgIHZlYzQgZ2V0TGVuc0RpcnQodmVjMiBwKXtcbiAgICAgIHAueHkgKz0gdmVjMihmYm0ocC55eCAqIDMuMCksIGZibShwLnl4ICogMi4wKSkgKiAwLjA4MjU7XG4gICAgICB2ZWMzIG8gPSB2ZWMzKG1peCgwLjEyNSwgMC4yNSwgbWF4KG1heChzbW9vdGhzdGVwKDAuMSwgMC4wLCBsZW5ndGgocCAtIHZlYzIoMC4yNSkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc21vb3Roc3RlcCgwLjQsIDAuMCwgbGVuZ3RoKHAgLSB2ZWMyKDAuNzUpKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbW9vdGhzdGVwKDAuOCwgMC4wLCBsZW5ndGgocCAtIHZlYzIoMC44NzUsIDAuMTI1KSkpKSkpO1xuICAgICAgbyArPSB2ZWMzKG1heChmYm0ocCAqIDEuMCkgLSAwLjUsIDAuMCkpICogMC41O1xuICAgICAgbyArPSB2ZWMzKG1heChmYm0ocCAqIDIuMCkgLSAwLjUsIDAuMCkpICogMC41O1xuICAgICAgbyArPSB2ZWMzKG1heChmYm0ocCAqIDQuMCkgLSAwLjUsIDAuMCkpICogMC4yNTtcbiAgICAgIG8gKz0gdmVjMyhtYXgoZmJtKHAgKiA4LjApIC0gMC43NSwgMC4wKSkgKiAxLjA7XG4gICAgICBvICs9IHZlYzMobWF4KGZibShwICogMTYuMCkgLSAwLjc1LCAwLjApKSAqIDAuNzU7XG4gICAgICBvICs9IHZlYzMobWF4KGZibShwICogNjQuMCkgLSAwLjc1LCAwLjApKSAqIDAuNTtcbiAgICAgIHJldHVybiB2ZWM0KGNsYW1wKG8sIHZlYzMoMC4xNSksIHZlYzMoMS4wKSksIDEuMCk7XHRcbiAgICB9XG5cbiAgICB2ZWM0IHRleHR1cmVMaW1pdGVkKHNhbXBsZXIyRCB0ZXgsIHZlYzIgdGV4Q29vcmQpe1xuICAgICAgaWYoKCh0ZXhDb29yZC54IDwgMC4pIHx8ICh0ZXhDb29yZC55IDwgMC4pKSB8fCAoKHRleENvb3JkLnggPiAxLikgfHwgKHRleENvb3JkLnkgPiAxLikpKXtcbiAgICAgICAgcmV0dXJuIHZlYzQoMC4wKTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gdGV4dHVyZSh0ZXgsIHRleENvb3JkKTsgXG4gICAgICB9XG4gICAgfVxuXG4gICAgdmVjNCB0ZXh0dXJlRGlzdG9ydGVkKHNhbXBsZXIyRCB0ZXgsIHZlYzIgdGV4Q29vcmQsIHZlYzIgZGlyZWN0aW9uLCB2ZWMzIGRpc3RvcnRpb24pIHtcbiAgICAgIHJldHVybiB2ZWM0KHRleHR1cmVMaW1pdGVkKHRleCwgKHRleENvb3JkICsgKGRpcmVjdGlvbiAqIGRpc3RvcnRpb24ucikpKS5yLFxuICAgICAgICAgICAgICAgICAgdGV4dHVyZUxpbWl0ZWQodGV4LCAodGV4Q29vcmQgKyAoZGlyZWN0aW9uICogZGlzdG9ydGlvbi5nKSkpLmcsXG4gICAgICAgICAgICAgICAgICB0ZXh0dXJlTGltaXRlZCh0ZXgsICh0ZXhDb29yZCArIChkaXJlY3Rpb24gKiBkaXN0b3J0aW9uLmIpKSkuYixcbiAgICAgICAgICAgICAgICAgIDEuMCk7XG4gICAgfVxuXG4gICAgLy8gQmFzZWQgb24gaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3LzRzSzNXM1xuICAgIHZlYzQgZ2V0U3RhcnRCdXJzdCgpe1xuICAgICAgdmVjMiBhc3BlY3RUZXhDb29yZCA9IHZlYzIoMS4wKSAtICgoKHZUZXhDb29yZCAtIHZlYzIoMC41KSkgKiB2ZWMyKDEuMCkpICsgdmVjMigwLjUpKTsgXG4gICAgICB2ZWMyIHRleENvb3JkID0gdmVjMigxLjApIC0gdlRleENvb3JkOyBcbiAgICAgIHZlYzIgZ2hvc3RWZWMgPSAodmVjMigwLjUpIC0gdGV4Q29vcmQpICogMC4zIC0gbGVuc1Bvc2l0aW9uO1xuICAgICAgdmVjMiBnaG9zdFZlY0FzcGVjdE5vcm1hbGl6ZWQgPSBub3JtYWxpemUoZ2hvc3RWZWMgKiB2ZWMyKDEuMCkpICogdmVjMigxLjApO1xuICAgICAgdmVjMiBoYWxvVmVjID0gbm9ybWFsaXplKGdob3N0VmVjKSAqIDAuNjtcbiAgICAgIHZlYzIgaGFsb1ZlY0FzcGVjdE5vcm1hbGl6ZWQgPSBnaG9zdFZlY0FzcGVjdE5vcm1hbGl6ZWQgKiAwLjY7XG4gICAgICB2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoMS4wKSAvIHZlYzIoc2NyZWVuUmVzLnh5KTtcbiAgICAgIHZlYzMgZGlzdG9ydGlvbiA9IHZlYzMoLSh0ZXhlbFNpemUueCAqIDEuNSksIDAuMiwgdGV4ZWxTaXplLnggKiAxLjUpO1xuICAgICAgdmVjNCBjID0gdmVjNCgwLjApO1xuICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgdmVjMiBvZmZzZXQgPSB0ZXhDb29yZCArIChnaG9zdFZlYyAqIGZsb2F0KGkpKTtcbiAgICAgICAgYyArPSB0ZXh0dXJlRGlzdG9ydGVkKGxlbnNEaXJ0VGV4dHVyZSwgb2Zmc2V0LCBnaG9zdFZlY0FzcGVjdE5vcm1hbGl6ZWQsIGRpc3RvcnRpb24pICogcG93KG1heCgwLjAsIDEuMCAtIChsZW5ndGgodmVjMigwLjUpIC0gb2Zmc2V0KSAvIGxlbmd0aCh2ZWMyKDAuNSkpKSksIDEwLjApO1xuICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICB2ZWMyIGhhbG9PZmZzZXQgPSB0ZXhDb29yZCArIGhhbG9WZWNBc3BlY3ROb3JtYWxpemVkOyBcbiAgICAgIHJldHVybiAoYyAqIGdldExlbnNDb2xvcigobGVuZ3RoKHZlYzIoMC41KSAtIGFzcGVjdFRleENvb3JkKSAvIGxlbmd0aCh2ZWMyKGhhbG9TY2FsZSkpKSkpICsgXG4gICAgICAgICAgICAodGV4dHVyZURpc3RvcnRlZChsZW5zRGlydFRleHR1cmUsIGhhbG9PZmZzZXQsIGdob3N0VmVjQXNwZWN0Tm9ybWFsaXplZCwgZGlzdG9ydGlvbikgKiBwb3cobWF4KDAuMCwgMS4wIC0gKGxlbmd0aCh2ZWMyKDAuNSkgLSBoYWxvT2Zmc2V0KSAvIGxlbmd0aCh2ZWMyKDAuNSkpKSksIDEwLjApKTtcbiAgICB9IFxuXG4gICAgdm9pZCBtYWluSW1hZ2UodmVjNCBpbnB1dENvbG9yLCB2ZWMyIHV2LCBvdXQgdmVjNCBvdXRwdXRDb2xvcilcbiAgICB7XG4gICAgICB2ZWMyIG15VVYgPSB1diAtMC41O1xuICAgICAgbXlVVi55ICo9IHNjcmVlblJlcy55L3NjcmVlblJlcy54O1xuICAgICAgdmVjMiBmaW5hbExlbnNQb3NpdGlvbiA9IGxlbnNQb3NpdGlvbiAqIDAuNTtcbiAgICAgIGZpbmFsTGVuc1Bvc2l0aW9uLnkgKj0gc2NyZWVuUmVzLnkvc2NyZWVuUmVzLng7XG4gICAgICBcbiAgICAgIC8vRmlyc3QgTGVucyBmbGFyZSBwYXNzXG4gICAgICB2ZWMzIGZpbmFsQ29sb3IgPSBMZW5zRmxhcmUobXlVViwgZmluYWxMZW5zUG9zaXRpb24pICogMjAuMCAqIGNvbG9yR2FpbiAvIDI1Ni47XG5cbiAgICAgIC8vQWRpdGlvbmFsIHN0cmVha3NcbiAgICAgIGlmKGFkaXRpb25hbFN0cmVha3Mpe1xuICAgICAgICB2ZWMzIGNpcmNDb2xvciA9IHZlYzMoMC45LCAwLjIsIDAuMSk7XG4gICAgICAgIHZlYzMgY2lyY0NvbG9yMiA9IHZlYzMoMC4zLCAwLjEsIDAuOSk7XG5cbiAgICAgICAgZm9yKGZsb2F0IGk9MC47aTwxMC47aSsrKXtcbiAgICAgICAgICBmaW5hbENvbG9yICs9IGNpcmNsZShteVVWLCBwb3cocm5kKGkqMjAwMC4pKjIuOCwgLjEpKzEuNDEsIDAuMCwgY2lyY0NvbG9yK2kgLCBjaXJjQ29sb3IyK2ksIHJuZChpKjIwLikqMy4rMC4yLS41LCBsZW5zUG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vQWx0ZXJuYXRpdmUgZ2hvc3RzXG4gICAgICBpZihzZWNvbmRhcnlHaG9zdHMpe1xuICAgICAgICB2ZWMzIGFsdEdob3N0cyA9IHZlYzMoMCk7XG4gICAgICAgIGFsdEdob3N0cyArPSByZW5kZXJoZXgobXlVViwgLWxlbnNQb3NpdGlvbiowLjI1LCBnaG9zdFNjYWxlICogMS40LCB2ZWMzKDAuMjUsMC4zNSwwKSk7XG4gICAgICAgIGFsdEdob3N0cyArPSByZW5kZXJoZXgobXlVViwgbGVuc1Bvc2l0aW9uKjAuMjUsIGdob3N0U2NhbGUgKiAwLjUsIHZlYzMoMSwwLjUsMC41KSk7XG4gICAgICAgIGFsdEdob3N0cyArPSByZW5kZXJoZXgobXlVViwgbGVuc1Bvc2l0aW9uKjAuMSwgZ2hvc3RTY2FsZSAqIDEuNiwgdmVjMygxLDEsMSkpO1xuICAgICAgICBhbHRHaG9zdHMgKz0gcmVuZGVyaGV4KG15VVYsIGxlbnNQb3NpdGlvbioxLjgsIGdob3N0U2NhbGUgKiAyLjAsIHZlYzMoMCwwLjUsMC43NSkpO1xuICAgICAgICBhbHRHaG9zdHMgKz0gcmVuZGVyaGV4KG15VVYsIGxlbnNQb3NpdGlvbioxLjI1LCBnaG9zdFNjYWxlICogMC44LCB2ZWMzKDEsMSwwLjUpKTtcbiAgICAgICAgYWx0R2hvc3RzICs9IHJlbmRlcmhleChteVVWLCAtbGVuc1Bvc2l0aW9uKjEuMjUsIGdob3N0U2NhbGUgKiA1LjAsIHZlYzMoMC41LDAuNSwwLjI1KSk7XG4gICAgICAgIFxuICAgICAgICAvL0NpcmN1bGFyIGdob3N0c1xuICAgICAgICBhbHRHaG9zdHMgKz0gZnBvdygxLjAgLSBhYnMoZGlzdGFuY2UobGVuc1Bvc2l0aW9uKjAuOCxteVVWKSAtIDAuNyksMC45ODUpKmNvbG9yR2FpbiAvIDIxMDAuO1xuICAgICAgICBmaW5hbENvbG9yICs9IGFsdEdob3N0cztcbiAgICAgIH1cbiAgICAgIFxuXG4gICAgICAvL1N0YXJidXJzdCAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgaWYoc3RhckJ1cnN0KXtcbiAgICAgICAgdlRleENvb3JkID0gbXlVViArIDAuNTtcbiAgICAgICAgdmVjNCBsZW5zTW9kID0gZ2V0TGVuc0RpcnQobXlVVik7XG4gICAgICAgIGZsb2F0IHRvb0JyaWdodCA9IDEuMCAtIChjbGFtcCgwLjUsIDAuMCwgMC41KSAqIDIuMCk7IFxuICAgICAgICBmbG9hdCB0b29EYXJrID0gY2xhbXAoMC41IC0gMC41LCAwLjAsIDAuNSkgKiAyLjA7XG4gICAgICAgIGxlbnNNb2QgKz0gbWl4KGxlbnNNb2QsIHBvdyhsZW5zTW9kICogMi4wLCB2ZWM0KDIuMCkpICogMC41LCB0b29CcmlnaHQpO1xuICAgICAgICBmbG9hdCBsZW5zU3RhclJvdGF0aW9uQW5nbGUgPSAoKG15VVYueCArIG15VVYueSkpICogKDEuMCAvIDYuMCk7XG4gICAgICAgIHZlYzIgbGVuc1N0YXJUZXhDb29yZCA9IChtYXQyKGNvcyhsZW5zU3RhclJvdGF0aW9uQW5nbGUpLCAtc2luKGxlbnNTdGFyUm90YXRpb25BbmdsZSksIHNpbihsZW5zU3RhclJvdGF0aW9uQW5nbGUpLCBjb3MobGVuc1N0YXJSb3RhdGlvbkFuZ2xlKSkgKiB2VGV4Q29vcmQpO1xuICAgICAgICBsZW5zTW9kICs9IGdldExlbnNTdGFyKGxlbnNTdGFyVGV4Q29vcmQpICogMi47XG4gICAgICAgIFxuICAgICAgICBmaW5hbENvbG9yICs9IGNsYW1wKChsZW5zTW9kLnJnYiAqIGdldFN0YXJ0QnVyc3QoKS5yZ2IgKSwgMC4wMSwgMS4wKTtcbiAgICAgIH1cblxuICAgICAgLy9GaW5hbCBjb21wb3NlZCBvdXRwdXRcbiAgICAgIGlmKGVuYWJsZWQpe1xuICAgICAgICBvdXRwdXRDb2xvciA9IHZlYzQobWl4KGZpbmFsQ29sb3IsIHZlYzMoLjApLCBvcGFjaXR5KSArIGlucHV0Q29sb3IucmdiLCBpbnB1dENvbG9yLmEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0Q29sb3IgPSB2ZWM0KGlucHV0Q29sb3IpO1xuICAgICAgfVxuICAgIH1cbiAgYH07Y2xhc3MgZmUgZXh0ZW5kcyBXe2NvbnN0cnVjdG9yKHtibGVuZEZ1bmN0aW9uOnQsZW5hYmxlZDpvLGdsYXJlU2l6ZTpyLGxlbnNQb3NpdGlvbjphLHNjcmVlblJlczpuLHN0YXJQb2ludHM6aSxmbGFyZVNpemU6cyxmbGFyZVNwZWVkOmwsZmxhcmVTaGFwZTpwLGFuaW1hdGVkOl8sYW5hbW9ycGhpYzpTLGNvbG9yR2FpbjpnLGxlbnNEaXJ0VGV4dHVyZTpkLGhhbG9TY2FsZTptLHNlY29uZGFyeUdob3N0czp2LGFkaXRpb25hbFN0cmVha3M6eCxnaG9zdFNjYWxlOmYsb3BhY2l0eTp1LHN0YXJCdXJzdDpjfSl7c3VwZXIoXCJMZW5zRmxhcmVFZmZlY3RcIixfdC5mcmFnbWVudFNoYWRlcix7YmxlbmRGdW5jdGlvbjp0LHVuaWZvcm1zOi8qQF9fUFVSRV9fKi9uZXcgTWFwKFtbXCJlbmFibGVkXCIsbmV3IGguVW5pZm9ybShvKV0sW1wiZ2xhcmVTaXplXCIsbmV3IGguVW5pZm9ybShyKV0sW1wibGVuc1Bvc2l0aW9uXCIsbmV3IGguVW5pZm9ybShhKV0sW1widGltZVwiLG5ldyBoLlVuaWZvcm0oMCldLFtcInNjcmVlblJlc1wiLG5ldyBoLlVuaWZvcm0obildLFtcInN0YXJQb2ludHNcIixuZXcgaC5Vbmlmb3JtKGkpXSxbXCJmbGFyZVNpemVcIixuZXcgaC5Vbmlmb3JtKHMpXSxbXCJmbGFyZVNwZWVkXCIsbmV3IGguVW5pZm9ybShsKV0sW1wiZmxhcmVTaGFwZVwiLG5ldyBoLlVuaWZvcm0ocCldLFtcImFuaW1hdGVkXCIsbmV3IGguVW5pZm9ybShfKV0sW1wiYW5hbW9ycGhpY1wiLG5ldyBoLlVuaWZvcm0oUyldLFtcImNvbG9yR2FpblwiLG5ldyBoLlVuaWZvcm0oZyldLFtcImxlbnNEaXJ0VGV4dHVyZVwiLG5ldyBoLlVuaWZvcm0oZCldLFtcImhhbG9TY2FsZVwiLG5ldyBoLlVuaWZvcm0obSldLFtcInNlY29uZGFyeUdob3N0c1wiLG5ldyBoLlVuaWZvcm0odildLFtcImFkaXRpb25hbFN0cmVha3NcIixuZXcgaC5Vbmlmb3JtKHgpXSxbXCJnaG9zdFNjYWxlXCIsbmV3IGguVW5pZm9ybShmKV0sW1wic3RhckJ1cnN0XCIsbmV3IGguVW5pZm9ybShjKV0sW1wib3BhY2l0eVwiLG5ldyBoLlVuaWZvcm0odSldXSl9KX11cGRhdGUodCxvLHIpe2NvbnN0IGE9dGhpcy51bmlmb3Jtcy5nZXQoXCJ0aW1lXCIpO2EmJihhLnZhbHVlKz1yKX19Y29uc3QgeHQ9LypAX19QVVJFX18qL1AoZmUpLGd0PSh7c21vb3RoVGltZTplPS4wNyxibGVuZEZ1bmN0aW9uOnQ9MjMsZW5hYmxlZDpvPSEwLGdsYXJlU2l6ZTpyPS4yLGxlbnNQb3NpdGlvbjphPW5ldyBoLlZlY3RvcjMoLTI1LDYsLTYwKSxzY3JlZW5SZXM6bj1uZXcgaC5WZWN0b3IyKDAsMCksc3RhclBvaW50czppPTYsZmxhcmVTaXplOnM9LjAxLGZsYXJlU3BlZWQ6bD0uMDEsZmxhcmVTaGFwZTpwPS4wMSxhbmltYXRlZDpfPSEwLGFuYW1vcnBoaWM6Uz0hMSxjb2xvckdhaW46Zz1uZXcgaC5Db2xvcigyMCwyMCwyMCksbGVuc0RpcnRUZXh0dXJlOmQ9bnVsbCxoYWxvU2NhbGU6bT0uNSxzZWNvbmRhcnlHaG9zdHM6dj0hMCxhZGl0aW9uYWxTdHJlYWtzOng9ITAsZ2hvc3RTY2FsZTpmPTAsb3BhY2l0eTp1PTEsc3RhckJ1cnN0OmM9ITF9KT0+e2NvbnN0IFU9Vigoe3ZpZXdwb3J0OlR9KT0+VCksYj1WKCh7cmF5Y2FzdGVyOlR9KT0+VCkse3NjZW5lOkYsY2FtZXJhOlh9PU0oRCksW0NdPWooKCk9Pm5ldyBoLlZlY3RvcjIpLFtSXT1qKCgpPT5uZXcgaC5WZWN0b3IzKSxFPU8obnVsbCk7cmV0dXJuIEooKFQsTik9PntpZighRT8uY3VycmVudClyZXR1cm47Y29uc3QgcT1FLmN1cnJlbnQudW5pZm9ybXMuZ2V0KFwibGVuc1Bvc2l0aW9uXCIpLCQ9RS5jdXJyZW50LnVuaWZvcm1zLmdldChcIm9wYWNpdHlcIik7aWYoIXF8fCEkKXJldHVybjtsZXQgRz0xO2lmKFIuY29weShhKS5wcm9qZWN0KFgpLFIuej4xKXJldHVybjtxLnZhbHVlLng9Ui54LHEudmFsdWUueT1SLnksQy54PVIueCxDLnk9Ui55LGIuc2V0RnJvbUNhbWVyYShDLFgpO2NvbnN0IHZlPWIuaW50ZXJzZWN0T2JqZWN0cyhGLmNoaWxkcmVuLCEwKSx7b2JqZWN0Okl9PXZlWzBdfHx7fTtJJiYoSS51c2VyRGF0YT8ubGVuc2ZsYXJlPT09XCJuby1vY2NsdXNpb25cIj9HPTA6SSBpbnN0YW5jZW9mIGguTWVzaCYmKEkubWF0ZXJpYWwudW5pZm9ybXM/Ll90cmFuc21pc3Npb24/LnZhbHVlPi4yfHxJLm1hdGVyaWFsLl90cmFuc21pc3Npb24mJkkubWF0ZXJpYWwuX3RyYW5zbWlzc2lvbj4uMj9HPS4yOkkubWF0ZXJpYWwudHJhbnNwYXJlbnQmJihHPUkubWF0ZXJpYWwub3BhY2l0eSkpKSxzZS5kYW1wKCQsXCJ2YWx1ZVwiLEcsZSxOKX0pLEEoKCk9PntpZighRT8uY3VycmVudClyZXR1cm47Y29uc3QgVD1FLmN1cnJlbnQudW5pZm9ybXMuZ2V0KFwic2NyZWVuUmVzXCIpO1QmJihULnZhbHVlLng9VS53aWR0aCxULnZhbHVlLnk9VS5oZWlnaHQpfSxbVV0pLC8qQF9fUFVSRV9fKi93KHh0LHtyZWY6RSxibGVuZEZ1bmN0aW9uOnQsZW5hYmxlZDpvLGdsYXJlU2l6ZTpyLGxlbnNQb3NpdGlvbjphLHNjcmVlblJlczpuLHN0YXJQb2ludHM6aSxmbGFyZVNpemU6cyxmbGFyZVNwZWVkOmwsZmxhcmVTaGFwZTpwLGFuaW1hdGVkOl8sYW5hbW9ycGhpYzpTLGNvbG9yR2FpbjpnLGxlbnNEaXJ0VGV4dHVyZTpkLGhhbG9TY2FsZTptLHNlY29uZGFyeUdob3N0czp2LGFkaXRpb25hbFN0cmVha3M6eCxnaG9zdFNjYWxlOmYsb3BhY2l0eTp1LHN0YXJCdXJzdDpjfSl9LHd0PS8qQF9fUFVSRV9fKi9QKEllLHtibGVuZEZ1bmN0aW9uOjB9KSxTdD0vKkBfX1BVUkVfXyovUChMZSkseXQ9LypAX19QVVJFX18qL1AoTmUpLFB0PS8qQF9fUFVSRV9fKi9CKGZ1bmN0aW9uKHtibGVuZEZ1bmN0aW9uOmU9MjN9LHQpe2NvbnN0IG89eigoKT0+bmV3IGplKGUpLFtlXSk7cmV0dXJuIC8qQF9fUFVSRV9fKi93KFwicHJpbWl0aXZlXCIse3JlZjp0LG9iamVjdDpvLGRpc3Bvc2U6bnVsbH0pfSksYnQ9LypAX19QVVJFX18qL1AoT2UpLEV0PS8qQF9fUFVSRV9fKi9QKFdlKSxSdD0vKkBfX1BVUkVfXyovUChYZSksVXQ9LypAX19QVVJFX18qL0IoZnVuY3Rpb24oe2FjdGl2ZTplPSEwLC4uLnR9LG8pe2NvbnN0IHI9VihwPT5wLmludmFsaWRhdGUpLGE9Wih0LFwiZGVsYXlcIiksbj1aKHQsXCJkdXJhdGlvblwiKSxpPVoodCxcInN0cmVuZ3RoXCIpLHM9Wih0LFwiY2hyb21hdGljQWJlcnJhdGlvbk9mZnNldFwiKSxsPXooKCk9Pm5ldyBxZSh7Li4udCxkZWxheTphLGR1cmF0aW9uOm4sc3RyZW5ndGg6aSxjaHJvbWF0aWNBYmVycmF0aW9uT2Zmc2V0OnN9KSxbYSxuLHQsaSxzXSk7cmV0dXJuIEwoKCk9PntsLm1vZGU9ZT90Lm1vZGV8fG5lLlNQT1JBRElDOm5lLkRJU0FCTEVELHIoKX0sW2UsbCxyLHQubW9kZV0pLEEoKCk9PigpPT57bC5kaXNwb3NlPy4oKX0sW2xdKSwvKkBfX1BVUkVfXyovdyhcInByaW1pdGl2ZVwiLHtyZWY6byxvYmplY3Q6bCxkaXNwb3NlOm51bGx9KX0pLEN0PS8qQF9fUFVSRV9fKi9CKGZ1bmN0aW9uKGUsdCl7Y29uc3R7Y2FtZXJhOm99PU0oRCkscj16KCgpPT5uZXcgSGUobyxrKGUuc3VuKSxlKSxbbyxlXSk7cmV0dXJuIEwoKCk9PnZvaWQoci5saWdodFNvdXJjZT1rKGUuc3VuKSksW3IsZS5zdW5dKSwvKkBfX1BVUkVfXyovdyhcInByaW1pdGl2ZVwiLHtyZWY6dCxvYmplY3Q6cixkaXNwb3NlOm51bGx9KX0pLHp0PS8qQF9fUFVSRV9fKi9CKGZ1bmN0aW9uKHtzaXplOmUsLi4udH0sbyl7Y29uc3Qgcj1WKG49Pm4uaW52YWxpZGF0ZSksYT16KCgpPT5uZXcgWmUodCksW3RdKTtyZXR1cm4gTCgoKT0+e2UmJmEuc2V0U2l6ZShlLndpZHRoLGUuaGVpZ2h0KSxyKCl9LFthLGUscl0pLC8qQF9fUFVSRV9fKi93KFwicHJpbWl0aXZlXCIse3JlZjpvLG9iamVjdDphLGRpc3Bvc2U6bnVsbH0pfSksVHQ9LypAX19QVVJFX18qL1AoJGUpLEF0PS8qQF9fUFVSRV9fKi9QKEtlLHtibGVuZEZ1bmN0aW9uOjV9KSxCdD0vKkBfX1BVUkVfXyovQihmdW5jdGlvbih7c2VsZWN0aW9uOmU9W10sc2VsZWN0aW9uTGF5ZXI6dD0xMCxibGVuZEZ1bmN0aW9uOm8scGF0dGVyblRleHR1cmU6cixlZGdlU3RyZW5ndGg6YSxwdWxzZVNwZWVkOm4sdmlzaWJsZUVkZ2VDb2xvcjppLGhpZGRlbkVkZ2VDb2xvcjpzLHdpZHRoOmwsaGVpZ2h0OnAsa2VybmVsU2l6ZTpfLGJsdXI6Uyx4UmF5OmcsLi4uZH0sbSl7Y29uc3Qgdj1WKFU9PlUuaW52YWxpZGF0ZSkse3NjZW5lOngsY2FtZXJhOmZ9PU0oRCksdT16KCgpPT5uZXcgWWUoeCxmLHtibGVuZEZ1bmN0aW9uOm8scGF0dGVyblRleHR1cmU6cixlZGdlU3RyZW5ndGg6YSxwdWxzZVNwZWVkOm4sdmlzaWJsZUVkZ2VDb2xvcjppLGhpZGRlbkVkZ2VDb2xvcjpzLHdpZHRoOmwsaGVpZ2h0OnAsa2VybmVsU2l6ZTpfLGJsdXI6Uyx4UmF5OmcsLi4uZH0pLFtvLFMsZixhLHAscyxfLHIsbix4LGksbCxnXSksYz1NKEgpO3JldHVybiBBKCgpPT57aWYoIWMmJmUpcmV0dXJuIHUuc2VsZWN0aW9uLnNldChBcnJheS5pc0FycmF5KGUpP2UubWFwKGspOltrKGUpXSksdigpLCgpPT57dS5zZWxlY3Rpb24uY2xlYXIoKSx2KCl9fSxbdSxlLGMsdl0pLEEoKCk9Pnt1LnNlbGVjdGlvbkxheWVyPXQsdigpfSxbdSx2LHRdKSxPKHZvaWQgMCksQSgoKT0+e2lmKGMmJmMuZW5hYmxlZCYmYy5zZWxlY3RlZD8ubGVuZ3RoKXJldHVybiB1LnNlbGVjdGlvbi5zZXQoYy5zZWxlY3RlZCksdigpLCgpPT57dS5zZWxlY3Rpb24uY2xlYXIoKSx2KCl9fSxbYyx1LnNlbGVjdGlvbix2XSksQSgoKT0+KCk9Pnt1LmRpc3Bvc2UoKX0sW3VdKSwvKkBfX1BVUkVfXyovdyhcInByaW1pdGl2ZVwiLHtyZWY6bSxvYmplY3Q6dX0pfSksVnQ9LypAX19QVVJFX18qL0IoZnVuY3Rpb24oe2dyYW51bGFyaXR5OmU9NX0sdCl7Y29uc3Qgbz16KCgpPT5uZXcgSmUoZSksW2VdKTtyZXR1cm4gLypAX19QVVJFX18qL3coXCJwcmltaXRpdmVcIix7cmVmOnQsb2JqZWN0Om8sZGlzcG9zZTpudWxsfSl9KSxGdD0vKkBfX1BVUkVfXyovUChRZSx7YmxlbmRGdW5jdGlvbjoyNCxkZW5zaXR5OjEuMjV9KSxNdD0oZSx0KT0+ZS5sYXllcnMuZW5hYmxlKHQuc2VsZWN0aW9uLmxheWVyKSxEdD0oZSx0KT0+ZS5sYXllcnMuZGlzYWJsZSh0LnNlbGVjdGlvbi5sYXllciksa3Q9LypAX19QVVJFX18qL0IoZnVuY3Rpb24oe3NlbGVjdGlvbjplPVtdLHNlbGVjdGlvbkxheWVyOnQ9MTAsbGlnaHRzOm89W10saW52ZXJ0ZWQ6cj0hMSxpZ25vcmVCYWNrZ3JvdW5kOmE9ITEsbHVtaW5hbmNlVGhyZXNob2xkOm4sbHVtaW5hbmNlU21vb3RoaW5nOmksaW50ZW5zaXR5OnMsd2lkdGg6bCxoZWlnaHQ6cCxrZXJuZWxTaXplOl8sbWlwbWFwQmx1cjpTLC4uLmd9LGQpe28ubGVuZ3RoPT09MCYmY29uc29sZS53YXJuKFwiU2VsZWN0aXZlQmxvb20gcmVxdWlyZXMgbGlnaHRzIHRvIHdvcmsuXCIpO2NvbnN0IG09VihjPT5jLmludmFsaWRhdGUpLHtzY2VuZTp2LGNhbWVyYTp4fT1NKEQpLGY9eigoKT0+e2NvbnN0IGM9bmV3IGV0KHYseCx7YmxlbmRGdW5jdGlvbjowLGx1bWluYW5jZVRocmVzaG9sZDpuLGx1bWluYW5jZVNtb290aGluZzppLGludGVuc2l0eTpzLHdpZHRoOmwsaGVpZ2h0OnAsa2VybmVsU2l6ZTpfLG1pcG1hcEJsdXI6UywuLi5nfSk7cmV0dXJuIGMuaW52ZXJ0ZWQ9cixjLmlnbm9yZUJhY2tncm91bmQ9YSxjfSxbdix4LG4saSxzLGwscCxfLFMscixhLGddKSx1PU0oSCk7cmV0dXJuIEEoKCk9PntpZighdSYmZSlyZXR1cm4gZi5zZWxlY3Rpb24uc2V0KEFycmF5LmlzQXJyYXkoZSk/ZS5tYXAoayk6W2soZSldKSxtKCksKCk9PntmLnNlbGVjdGlvbi5jbGVhcigpLG0oKX19LFtmLGUsdSxtXSksQSgoKT0+e2Yuc2VsZWN0aW9uLmxheWVyPXQsbSgpfSxbZixtLHRdKSxBKCgpPT57aWYobyYmby5sZW5ndGg+MClyZXR1cm4gby5mb3JFYWNoKGM9Pk10KGsoYyksZikpLG0oKSwoKT0+e28uZm9yRWFjaChjPT5EdChrKGMpLGYpKSxtKCl9fSxbZixtLG8sdF0pLEEoKCk9PntpZih1JiZ1LmVuYWJsZWQmJnUuc2VsZWN0ZWQ/Lmxlbmd0aClyZXR1cm4gZi5zZWxlY3Rpb24uc2V0KHUuc2VsZWN0ZWQpLG0oKSwoKT0+e2Yuc2VsZWN0aW9uLmNsZWFyKCksbSgpfX0sW3UsZi5zZWxlY3Rpb24sbV0pLC8qQF9fUFVSRV9fKi93KFwicHJpbWl0aXZlXCIse3JlZjpkLG9iamVjdDpmLGRpc3Bvc2U6bnVsbH0pfSksR3Q9LypAX19QVVJFX18qL1AodHQpLEl0PS8qQF9fUFVSRV9fKi9CKGZ1bmN0aW9uKGUsdCl7Y29uc3R7Y2FtZXJhOm8sbm9ybWFsUGFzczpyLGRvd25TYW1wbGluZ1Bhc3M6YSxyZXNvbHV0aW9uU2NhbGU6bn09TShEKSxpPXooKCk9PnI9PT1udWxsJiZhPT09bnVsbD8oY29uc29sZS5lcnJvcihcIlBsZWFzZSBlbmFibGUgdGhlIE5vcm1hbFBhc3MgaW4gdGhlIEVmZmVjdENvbXBvc2VyIGluIG9yZGVyIHRvIHVzZSBTU0FPLlwiKSx7fSk6bmV3IG90KG8sciYmIWE/ci50ZXh0dXJlOm51bGwse2JsZW5kRnVuY3Rpb246MjEsc2FtcGxlczozMCxyaW5nczo0LGRpc3RhbmNlVGhyZXNob2xkOjEsZGlzdGFuY2VGYWxsb2ZmOjAscmFuZ2VUaHJlc2hvbGQ6LjUscmFuZ2VGYWxsb2ZmOi4xLGx1bWluYW5jZUluZmx1ZW5jZTouOSxyYWRpdXM6MjAsYmlhczouNSxpbnRlbnNpdHk6MSxjb2xvcjp2b2lkIDAsbm9ybWFsRGVwdGhCdWZmZXI6YT9hLnRleHR1cmU6bnVsbCxyZXNvbHV0aW9uU2NhbGU6bj8/MSxkZXB0aEF3YXJlVXBzYW1wbGluZzohMCwuLi5lfSksW28sYSxyLG5dKTtyZXR1cm4gLypAX19QVVJFX18qL3coXCJwcmltaXRpdmVcIix7cmVmOnQsb2JqZWN0OmksZGlzcG9zZTpudWxsfSl9KSxMdD0vKkBfX1BVUkVfXyovUChhdCksTnQ9LypAX19QVVJFX18qL1AocnQpLGp0PXtmcmFnbWVudFNoYWRlcjpgXG4gICAgdW5pZm9ybSBpbnQgcmFtcFR5cGU7XG5cbiAgICB1bmlmb3JtIHZlYzIgcmFtcFN0YXJ0O1xuICAgIHVuaWZvcm0gdmVjMiByYW1wRW5kO1xuXG4gICAgdW5pZm9ybSB2ZWM0IHN0YXJ0Q29sb3I7XG4gICAgdW5pZm9ybSB2ZWM0IGVuZENvbG9yO1xuXG4gICAgdW5pZm9ybSBmbG9hdCByYW1wQmlhcztcbiAgICB1bmlmb3JtIGZsb2F0IHJhbXBHYWluO1xuXG4gICAgdW5pZm9ybSBib29sIHJhbXBNYXNrO1xuICAgIHVuaWZvcm0gYm9vbCByYW1wSW52ZXJ0O1xuXG4gICAgZmxvYXQgZ2V0QmlhcyhmbG9hdCB0aW1lLCBmbG9hdCBiaWFzKSB7XG4gICAgICByZXR1cm4gdGltZSAvICgoKDEuMCAvIGJpYXMpIC0gMi4wKSAqICgxLjAgLSB0aW1lKSArIDEuMCk7XG4gICAgfVxuXG4gICAgZmxvYXQgZ2V0R2FpbihmbG9hdCB0aW1lLCBmbG9hdCBnYWluKSB7XG4gICAgICBpZiAodGltZSA8IDAuNSlcbiAgICAgICAgcmV0dXJuIGdldEJpYXModGltZSAqIDIuMCwgZ2FpbikgLyAyLjA7XG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBnZXRCaWFzKHRpbWUgKiAyLjAgLSAxLjAsIDEuMCAtIGdhaW4pIC8gMi4wICsgMC41O1xuICAgIH1cblxuICAgIHZvaWQgbWFpbkltYWdlKGNvbnN0IGluIHZlYzQgaW5wdXRDb2xvciwgY29uc3QgaW4gdmVjMiB1diwgb3V0IHZlYzQgb3V0cHV0Q29sb3IpIHtcbiAgICAgIHZlYzIgY2VudGVyUGl4ZWwgPSB1diAqIHJlc29sdXRpb247XG4gICAgICB2ZWMyIHN0YXJ0UGl4ZWwgPSByYW1wU3RhcnQgKiByZXNvbHV0aW9uO1xuICAgICAgdmVjMiBlbmRQaXhlbCA9IHJhbXBFbmQgKiByZXNvbHV0aW9uO1xuXG4gICAgICBmbG9hdCByYW1wQWxwaGE7XG5cbiAgICAgIGlmIChyYW1wVHlwZSA9PSAxKSB7XG4gICAgICAgIHZlYzIgZnV2ID0gY2VudGVyUGl4ZWwgLyByZXNvbHV0aW9uLnk7XG4gICAgICAgIHZlYzIgc3V2ID0gc3RhcnRQaXhlbCAvIHJlc29sdXRpb24ueTtcbiAgICAgICAgdmVjMiBldXYgPSBlbmRQaXhlbCAvIHJlc29sdXRpb24ueTtcblxuICAgICAgICBmbG9hdCByYWRpdXMgPSBsZW5ndGgoc3V2IC0gZXV2KTtcbiAgICAgICAgZmxvYXQgZmFsbG9mZiA9IGxlbmd0aChmdXYgLSBzdXYpO1xuICAgICAgICByYW1wQWxwaGEgPSBzbW9vdGhzdGVwKDAuMCwgcmFkaXVzLCBmYWxsb2ZmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZsb2F0IHJhZGl1cyA9IGxlbmd0aChzdGFydFBpeGVsIC0gZW5kUGl4ZWwpO1xuICAgICAgICB2ZWMyIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSh2ZWMyKGVuZFBpeGVsLnggLSBzdGFydFBpeGVsLngsIC0oc3RhcnRQaXhlbC55IC0gZW5kUGl4ZWwueSkpKTtcblxuICAgICAgICBmbG9hdCBmYWRlID0gZG90KGNlbnRlclBpeGVsIC0gc3RhcnRQaXhlbCwgZGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKHJhbXBUeXBlID09IDIpIGZhZGUgPSBhYnMoZmFkZSk7XG5cbiAgICAgICAgcmFtcEFscGhhID0gc21vb3Roc3RlcCgwLjAsIDEuMCwgZmFkZSAvIHJhZGl1cyk7XG4gICAgICB9XG5cbiAgICAgIHJhbXBBbHBoYSA9IGFicygocmFtcEludmVydCA/IDEuMCA6IDAuMCkgLSBnZXRCaWFzKHJhbXBBbHBoYSwgcmFtcEJpYXMpICogZ2V0R2FpbihyYW1wQWxwaGEsIHJhbXBHYWluKSk7XG5cbiAgICAgIGlmIChyYW1wTWFzaykge1xuICAgICAgICB2ZWM0IGlucHV0QnVmZiA9IHRleHR1cmUyRChpbnB1dEJ1ZmZlciwgdXYpO1xuICAgICAgICBvdXRwdXRDb2xvciA9IG1peChpbnB1dEJ1ZmYsIGlucHV0Q29sb3IsIHJhbXBBbHBoYSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRwdXRDb2xvciA9IG1peChzdGFydENvbG9yLCBlbmRDb2xvciwgcmFtcEFscGhhKTtcbiAgICAgIH1cbiAgICB9XG4gIGB9O3ZhciB1ZT0vKkBfX1BVUkVfXyovKGU9PihlW2UuTGluZWFyPTBdPVwiTGluZWFyXCIsZVtlLlJhZGlhbD0xXT1cIlJhZGlhbFwiLGVbZS5NaXJyb3JlZExpbmVhcj0yXT1cIk1pcnJvcmVkTGluZWFyXCIsZSkpKHVlfHx7fSk7Y2xhc3MgcGUgZXh0ZW5kcyBXe2NvbnN0cnVjdG9yKHtyYW1wVHlwZTp0PTAscmFtcFN0YXJ0Om89Wy41LC41XSxyYW1wRW5kOnI9WzEsMV0sc3RhcnRDb2xvcjphPVswLDAsMCwxXSxlbmRDb2xvcjpuPVsxLDEsMSwxXSxyYW1wQmlhczppPS41LHJhbXBHYWluOnM9LjUscmFtcE1hc2s6bD0hMSxyYW1wSW52ZXJ0OnA9ITEsLi4uX309e30pe3N1cGVyKFwiUmFtcEVmZmVjdFwiLGp0LmZyYWdtZW50U2hhZGVyLHsuLi5fLHVuaWZvcm1zOi8qQF9fUFVSRV9fKi9uZXcgTWFwKFtbXCJyYW1wVHlwZVwiLG5ldyB5KHQpXSxbXCJyYW1wU3RhcnRcIixuZXcgeShvKV0sW1wicmFtcEVuZFwiLG5ldyB5KHIpXSxbXCJzdGFydENvbG9yXCIsbmV3IHkoYSldLFtcImVuZENvbG9yXCIsbmV3IHkobildLFtcInJhbXBCaWFzXCIsbmV3IHkoaSldLFtcInJhbXBHYWluXCIsbmV3IHkocyldLFtcInJhbXBNYXNrXCIsbmV3IHkobCldLFtcInJhbXBJbnZlcnRcIixuZXcgeShwKV1dKX0pfX1jb25zdCBPdD0vKkBfX1BVUkVfXyovUChwZSksV3Q9LypAX19QVVJFX18qL0IoZnVuY3Rpb24oe3RleHR1cmVTcmM6ZSx0ZXh0dXJlOnQsb3BhY2l0eTpvPTEsLi4ucn0sYSl7Y29uc3Qgbj1VZSh3ZSxlKTtMKCgpPT57bi5jb2xvclNwYWNlPVNlLG4ud3JhcFM9bi53cmFwVD1ZfSxbbl0pO2NvbnN0IGk9eigoKT0+bmV3IG50KHsuLi5yLHRleHR1cmU6bnx8dH0pLFtyLG4sdF0pO3JldHVybiAvKkBfX1BVUkVfXyovdyhcInByaW1pdGl2ZVwiLHtyZWY6YSxvYmplY3Q6aSxcImJsZW5kTW9kZS1vcGFjaXR5LXZhbHVlXCI6byxkaXNwb3NlOm51bGx9KX0pLFh0PS8qQF9fUFVSRV9fKi9QKHN0KSxxdD0vKkBfX1BVUkVfXyovUChpdCksSHQ9LypAX19QVVJFX18qL1AobHQpLFp0PS8qQF9fUFVSRV9fKi9CKGZ1bmN0aW9uKHtsdXQ6ZSx0ZXRyYWhlZHJhbEludGVycG9sYXRpb246dCwuLi5vfSxyKXtjb25zdCBhPXooKCk9Pm5ldyBjdChlLG8pLFtlLG9dKSxuPVYoaT0+aS5pbnZhbGlkYXRlKTtyZXR1cm4gTCgoKT0+e3QmJihhLnRldHJhaGVkcmFsSW50ZXJwb2xhdGlvbj10KSxlJiYoYS5sdXQ9ZSksbigpfSxbYSxuLGUsdF0pLC8qQF9fUFVSRV9fKi93KFwicHJpbWl0aXZlXCIse3JlZjpyLG9iamVjdDphLGRpc3Bvc2U6bnVsbH0pfSksJHQ9LypAX19QVVJFX18qL1AoZnQse2JsZW5kRnVuY3Rpb246MH0pLEt0PXtmcmFnbWVudFNoYWRlcjpgXG5cbiAgICAvLyBvcmlnaW5hbCBzaGFkZXIgYnkgRXZhbiBXYWxsYWNlXG5cbiAgICAjZGVmaW5lIE1BWF9JVEVSQVRJT05TIDEwMFxuXG4gICAgdW5pZm9ybSBmbG9hdCBibHVyO1xuICAgIHVuaWZvcm0gZmxvYXQgdGFwZXI7XG4gICAgdW5pZm9ybSB2ZWMyIHN0YXJ0O1xuICAgIHVuaWZvcm0gdmVjMiBlbmQ7XG4gICAgdW5pZm9ybSB2ZWMyIGRpcmVjdGlvbjtcbiAgICB1bmlmb3JtIGludCBzYW1wbGVzO1xuXG4gICAgZmxvYXQgcmFuZG9tKHZlYzMgc2NhbGUsIGZsb2F0IHNlZWQpIHtcbiAgICAgICAgLyogdXNlIHRoZSBmcmFnbWVudCBwb3NpdGlvbiBmb3IgYSBkaWZmZXJlbnQgc2VlZCBwZXItcGl4ZWwgKi9cbiAgICAgICAgcmV0dXJuIGZyYWN0KHNpbihkb3QoZ2xfRnJhZ0Nvb3JkLnh5eiArIHNlZWQsIHNjYWxlKSkgKiA0Mzc1OC41NDUzICsgc2VlZCk7XG4gICAgfVxuXG4gICAgdm9pZCBtYWluSW1hZ2UoY29uc3QgaW4gdmVjNCBpbnB1dENvbG9yLCBjb25zdCBpbiB2ZWMyIHV2LCBvdXQgdmVjNCBvdXRwdXRDb2xvcikge1xuICAgICAgICB2ZWM0IGNvbG9yID0gdmVjNCgwLjApO1xuICAgICAgICBmbG9hdCB0b3RhbCA9IDAuMDtcbiAgICAgICAgdmVjMiBzdGFydFBpeGVsID0gdmVjMihzdGFydC54ICogcmVzb2x1dGlvbi54LCBzdGFydC55ICogcmVzb2x1dGlvbi55KTtcbiAgICAgICAgdmVjMiBlbmRQaXhlbCA9IHZlYzIoZW5kLnggKiByZXNvbHV0aW9uLngsIGVuZC55ICogcmVzb2x1dGlvbi55KTtcbiAgICAgICAgZmxvYXQgZl9zYW1wbGVzID0gZmxvYXQoc2FtcGxlcyk7XG4gICAgICAgIGZsb2F0IGhhbGZfc2FtcGxlcyA9IGZfc2FtcGxlcyAvIDIuMDtcblxuICAgICAgICAvLyB1c2Ugc2NyZWVuIGRpYWdvbmFsIHRvIG5vcm1hbGl6ZSBibHVyIHJhZGlpXG4gICAgICAgIGZsb2F0IG1heFNjcmVlbkRpc3RhbmNlID0gZGlzdGFuY2UodmVjMigwLjApLCByZXNvbHV0aW9uKTsgLy8gZGlhZ29uYWwgZGlzdGFuY2VcbiAgICAgICAgZmxvYXQgZ3JhZGllbnRSYWRpdXMgPSB0YXBlciAqIChtYXhTY3JlZW5EaXN0YW5jZSk7XG4gICAgICAgIGZsb2F0IGJsdXJSYWRpdXMgPSBibHVyICogKG1heFNjcmVlbkRpc3RhbmNlIC8gMTYuMCk7XG5cbiAgICAgICAgLyogcmFuZG9taXplIHRoZSBsb29rdXAgdmFsdWVzIHRvIGhpZGUgdGhlIGZpeGVkIG51bWJlciBvZiBzYW1wbGVzICovXG4gICAgICAgIGZsb2F0IG9mZnNldCA9IHJhbmRvbSh2ZWMzKDEyLjk4OTgsIDc4LjIzMywgMTUxLjcxODIpLCAwLjApO1xuICAgICAgICB2ZWMyIG5vcm1hbCA9IG5vcm1hbGl6ZSh2ZWMyKHN0YXJ0UGl4ZWwueSAtIGVuZFBpeGVsLnksIGVuZFBpeGVsLnggLSBzdGFydFBpeGVsLngpKTtcbiAgICAgICAgZmxvYXQgcmFkaXVzID0gc21vb3Roc3RlcCgwLjAsIDEuMCwgYWJzKGRvdCh1diAqIHJlc29sdXRpb24gLSBzdGFydFBpeGVsLCBub3JtYWwpKSAvIGdyYWRpZW50UmFkaXVzKSAqIGJsdXJSYWRpdXM7XG5cbiAgICAgICAgI3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8PSBNQVhfSVRFUkFUSU9OUzsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSA+PSBzYW1wbGVzKSB7IGJyZWFrOyB9IC8vIHJldHVybiBlYXJseSBpZiBvdmVyIHNhbXBsZSBjb3VudFxuICAgICAgICAgICAgZmxvYXQgZl9pID0gZmxvYXQoaSk7XG4gICAgICAgICAgICBmbG9hdCBzX2kgPSAtaGFsZl9zYW1wbGVzICsgZl9pO1xuICAgICAgICAgICAgZmxvYXQgcGVyY2VudCA9IChzX2kgKyBvZmZzZXQgLSAwLjUpIC8gaGFsZl9zYW1wbGVzO1xuICAgICAgICAgICAgZmxvYXQgd2VpZ2h0ID0gMS4wIC0gYWJzKHBlcmNlbnQpO1xuICAgICAgICAgICAgdmVjNCBzYW1wbGVfaSA9IHRleHR1cmUyRChpbnB1dEJ1ZmZlciwgdXYgKyBub3JtYWxpemUoZGlyZWN0aW9uKSAvIHJlc29sdXRpb24gKiBwZXJjZW50ICogcmFkaXVzKTtcbiAgICAgICAgICAgIC8qIHN3aXRjaCB0byBwcmUtbXVsdGlwbGllZCBhbHBoYSB0byBjb3JyZWN0bHkgYmx1ciB0cmFuc3BhcmVudCBpbWFnZXMgKi9cbiAgICAgICAgICAgIHNhbXBsZV9pLnJnYiAqPSBzYW1wbGVfaS5hO1xuICAgICAgICAgICAgY29sb3IgKz0gc2FtcGxlX2kgKiB3ZWlnaHQ7XG4gICAgICAgICAgICB0b3RhbCArPSB3ZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgI3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcblxuICAgICAgICBvdXRwdXRDb2xvciA9IGNvbG9yIC8gdG90YWw7XG5cbiAgICAgICAgLyogc3dpdGNoIGJhY2sgZnJvbSBwcmUtbXVsdGlwbGllZCBhbHBoYSAqL1xuICAgICAgICBvdXRwdXRDb2xvci5yZ2IgLz0gb3V0cHV0Q29sb3IuYSArIDAuMDAwMDE7XG4gICAgfVxuICAgIGB9O2NsYXNzIG1lIGV4dGVuZHMgV3tjb25zdHJ1Y3Rvcih7YmxlbmRGdW5jdGlvbjp0PTIzLGJsdXI6bz0uMTUsdGFwZXI6cj0uNSxzdGFydDphPVsuNSwwXSxlbmQ6bj1bLjUsMV0sc2FtcGxlczppPTEwLGRpcmVjdGlvbjpzPVsxLDFdfT17fSl7c3VwZXIoXCJUaWx0U2hpZnRFZmZlY3RcIixLdC5mcmFnbWVudFNoYWRlcix7YmxlbmRGdW5jdGlvbjp0LGF0dHJpYnV0ZXM6Mix1bmlmb3JtczovKkBfX1BVUkVfXyovbmV3IE1hcChbW1wiYmx1clwiLG5ldyB5KG8pXSxbXCJ0YXBlclwiLG5ldyB5KHIpXSxbXCJzdGFydFwiLG5ldyB5KGEpXSxbXCJlbmRcIixuZXcgeShuKV0sW1wic2FtcGxlc1wiLG5ldyB5KGkpXSxbXCJkaXJlY3Rpb25cIixuZXcgeShzKV1dKX0pfX1jb25zdCBZdD0vKkBfX1BVUkVfXyovUChtZSx7YmxlbmRGdW5jdGlvbjoyM30pLEp0PWBcbnVuaWZvcm0gc2FtcGxlcjJEIHVDaGFyYWN0ZXJzO1xudW5pZm9ybSBmbG9hdCB1Q2hhcmFjdGVyc0NvdW50O1xudW5pZm9ybSBmbG9hdCB1Q2VsbFNpemU7XG51bmlmb3JtIGJvb2wgdUludmVydDtcbnVuaWZvcm0gdmVjMyB1Q29sb3I7XG5cbmNvbnN0IHZlYzIgU0laRSA9IHZlYzIoMTYuKTtcblxudmVjMyBncmV5c2NhbGUodmVjMyBjb2xvciwgZmxvYXQgc3RyZW5ndGgpIHtcbiAgICBmbG9hdCBnID0gZG90KGNvbG9yLCB2ZWMzKDAuMjk5LCAwLjU4NywgMC4xMTQpKTtcbiAgICByZXR1cm4gbWl4KGNvbG9yLCB2ZWMzKGcpLCBzdHJlbmd0aCk7XG59XG5cbnZlYzMgZ3JleXNjYWxlKHZlYzMgY29sb3IpIHtcbiAgICByZXR1cm4gZ3JleXNjYWxlKGNvbG9yLCAxLjApO1xufVxuXG52b2lkIG1haW5JbWFnZShjb25zdCBpbiB2ZWM0IGlucHV0Q29sb3IsIGNvbnN0IGluIHZlYzIgdXYsIG91dCB2ZWM0IG91dHB1dENvbG9yKSB7XG4gICAgdmVjMiBjZWxsID0gcmVzb2x1dGlvbiAvIHVDZWxsU2l6ZTtcbiAgICB2ZWMyIGdyaWQgPSAxLjAgLyBjZWxsO1xuICAgIHZlYzIgcGl4ZWxpemVkVVYgPSBncmlkICogKDAuNSArIGZsb29yKHV2IC8gZ3JpZCkpO1xuICAgIHZlYzQgcGl4ZWxpemVkID0gdGV4dHVyZTJEKGlucHV0QnVmZmVyLCBwaXhlbGl6ZWRVVik7XG4gICAgZmxvYXQgZ3JleXNjYWxlZCA9IGdyZXlzY2FsZShwaXhlbGl6ZWQucmdiKS5yO1xuXG4gICAgaWYgKHVJbnZlcnQpIHtcbiAgICAgICAgZ3JleXNjYWxlZCA9IDEuMCAtIGdyZXlzY2FsZWQ7XG4gICAgfVxuXG4gICAgZmxvYXQgY2hhcmFjdGVySW5kZXggPSBmbG9vcigodUNoYXJhY3RlcnNDb3VudCAtIDEuMCkgKiBncmV5c2NhbGVkKTtcbiAgICB2ZWMyIGNoYXJhY3RlclBvc2l0aW9uID0gdmVjMihtb2QoY2hhcmFjdGVySW5kZXgsIFNJWkUueCksIGZsb29yKGNoYXJhY3RlckluZGV4IC8gU0laRS55KSk7XG4gICAgdmVjMiBvZmZzZXQgPSB2ZWMyKGNoYXJhY3RlclBvc2l0aW9uLngsIC1jaGFyYWN0ZXJQb3NpdGlvbi55KSAvIFNJWkU7XG4gICAgdmVjMiBjaGFyVVYgPSBtb2QodXYgKiAoY2VsbCAvIFNJWkUpLCAxLjAgLyBTSVpFKSAtIHZlYzIoMC4sIDEuMCAvIFNJWkUpICsgb2Zmc2V0O1xuICAgIHZlYzQgYXNjaWlDaGFyYWN0ZXIgPSB0ZXh0dXJlMkQodUNoYXJhY3RlcnMsIGNoYXJVVik7XG5cbiAgICBhc2NpaUNoYXJhY3Rlci5yZ2IgPSB1Q29sb3IgKiBhc2NpaUNoYXJhY3Rlci5yO1xuICAgIGFzY2lpQ2hhcmFjdGVyLmEgPSBwaXhlbGl6ZWQuYTtcbiAgICBvdXRwdXRDb2xvciA9IGFzY2lpQ2hhcmFjdGVyO1xufVxuYDtjbGFzcyBRdCBleHRlbmRzIFd7Y29uc3RydWN0b3Ioe2ZvbnQ6dD1cImFyaWFsXCIsY2hhcmFjdGVyczpvPVwiIC46LCctXj0qKz8hfDAjWCVXTUBcIixmb250U2l6ZTpyPTU0LGNlbGxTaXplOmE9MTYsY29sb3I6bj1cIiNmZmZmZmZcIixpbnZlcnQ6aT0hMX09e30pe2NvbnN0IHM9LypAX19QVVJFX18qL25ldyBNYXAoW1tcInVDaGFyYWN0ZXJzXCIsbmV3IHkobmV3IHllKV0sW1widUNlbGxTaXplXCIsbmV3IHkoYSldLFtcInVDaGFyYWN0ZXJzQ291bnRcIixuZXcgeShvLmxlbmd0aCldLFtcInVDb2xvclwiLG5ldyB5KG5ldyBQZShuKSldLFtcInVJbnZlcnRcIixuZXcgeShpKV1dKTtzdXBlcihcIkFTQ0lJRWZmZWN0XCIsSnQse3VuaWZvcm1zOnN9KTtjb25zdCBsPXRoaXMudW5pZm9ybXMuZ2V0KFwidUNoYXJhY3RlcnNcIik7bCYmKGwudmFsdWU9dGhpcy5jcmVhdGVDaGFyYWN0ZXJzVGV4dHVyZShvLHQscikpfWNyZWF0ZUNoYXJhY3RlcnNUZXh0dXJlKHQsbyxyKXtjb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksbj0xMDI0LGk9MTYscz1uL2k7YS53aWR0aD1hLmhlaWdodD1uO2NvbnN0IGw9bmV3IGJlKGEsdm9pZCAwLFksWSxyZSxyZSkscD1hLmdldENvbnRleHQoXCIyZFwiKTtpZighcCl0aHJvdyBuZXcgRXJyb3IoXCJDb250ZXh0IG5vdCBhdmFpbGFibGVcIik7cC5jbGVhclJlY3QoMCwwLG4sbikscC5mb250PWAke3J9cHggJHtvfWAscC50ZXh0QWxpZ249XCJjZW50ZXJcIixwLnRleHRCYXNlbGluZT1cIm1pZGRsZVwiLHAuZmlsbFN0eWxlPVwiI2ZmZlwiO2ZvcihsZXQgXz0wO188dC5sZW5ndGg7XysrKXtjb25zdCBTPXRbX10sZz1fJWksZD1NYXRoLmZsb29yKF8vaSk7cC5maWxsVGV4dChTLGcqcytzLzIsZCpzK3MvMil9cmV0dXJuIGwubmVlZHNVcGRhdGU9ITAsbH19Y29uc3QgZW89LypAX19QVVJFX18qL0IoKHtmb250OmU9XCJhcmlhbFwiLGNoYXJhY3RlcnM6dD1cIiAuOiwnLV49Kis/IXwwI1glV01AXCIsZm9udFNpemU6bz01NCxjZWxsU2l6ZTpyPTE2LGNvbG9yOmE9XCIjZmZmZmZmXCIsaW52ZXJ0Om49ITF9LGkpPT57Y29uc3Qgcz16KCgpPT5uZXcgUXQoe2NoYXJhY3RlcnM6dCxmb250OmUsZm9udFNpemU6byxjZWxsU2l6ZTpyLGNvbG9yOmEsaW52ZXJ0Om59KSxbdCxvLHIsYSxuLGVdKTtyZXR1cm4gLypAX19QVVJFX18qL3coXCJwcmltaXRpdmVcIix7cmVmOmksb2JqZWN0OnN9KX0pLHRvPXtmcmFnbWVudFNoYWRlcjpgXG4gICAgdW5pZm9ybSBmbG9hdCBmYWN0b3I7XG5cbiAgICB2b2lkIG1haW5JbWFnZShjb25zdCBpbiB2ZWM0IGlucHV0Q29sb3IsIGNvbnN0IGluIHZlYzIgdXYsIG91dCB2ZWM0IG91dHB1dENvbG9yKSB7XG4gICAgICB2ZWMyIHZVdiA9IHV2O1xuICAgICAgZmxvYXQgZnJlcXVlbmN5ID0gNi4wICogZmFjdG9yO1xuICAgICAgZmxvYXQgYW1wbGl0dWRlID0gMC4wMTUgKiBmYWN0b3I7XG4gICAgICBmbG9hdCB4ID0gdlV2LnkgKiBmcmVxdWVuY3kgKyB0aW1lICogMC43OyBcbiAgICAgIGZsb2F0IHkgPSB2VXYueCAqIGZyZXF1ZW5jeSArIHRpbWUgKiAwLjM7XG4gICAgICB2VXYueCArPSBjb3MoeCArIHkpICogYW1wbGl0dWRlICogY29zKHkpO1xuICAgICAgdlV2LnkgKz0gc2luKHggLSB5KSAqIGFtcGxpdHVkZSAqIGNvcyh5KTtcbiAgICAgIHZlYzQgcmdiYSA9IHRleHR1cmUoaW5wdXRCdWZmZXIsIHZVdik7XG4gICAgICBvdXRwdXRDb2xvciA9IHJnYmE7XG4gICAgfVxuICBgfTtjbGFzcyBkZSBleHRlbmRzIFd7Y29uc3RydWN0b3Ioe2JsZW5kRnVuY3Rpb246dD0yMyxmYWN0b3I6bz0wfT17fSl7c3VwZXIoXCJXYXRlckVmZmVjdFwiLHRvLmZyYWdtZW50U2hhZGVyLHtibGVuZEZ1bmN0aW9uOnQsYXR0cmlidXRlczoyLHVuaWZvcm1zOi8qQF9fUFVSRV9fKi9uZXcgTWFwKFtbXCJmYWN0b3JcIixuZXcgeShvKV1dKX0pfX1jb25zdCBvbz0vKkBfX1BVUkVfXyovUChkZSx7YmxlbmRGdW5jdGlvbjoyM30pLGFvPS8qQF9fUFVSRV9fKi9CKCh7aGFsZlJlczplLHNjcmVlblNwYWNlUmFkaXVzOnQscXVhbGl0eTpvLGRlcHRoQXdhcmVVcHNhbXBsaW5nOnI9ITAsYW9SYWRpdXM6YT01LGFvU2FtcGxlczpuPTE2LGRlbm9pc2VTYW1wbGVzOmk9NCxkZW5vaXNlUmFkaXVzOnM9MTIsZGlzdGFuY2VGYWxsb2ZmOmw9MSxpbnRlbnNpdHk6cD0xLGNvbG9yOl8scmVuZGVyTW9kZTpTPTB9LGcpPT57Y29uc3R7Y2FtZXJhOmQsc2NlbmU6bX09VigpLHY9eigoKT0+bmV3IHV0KG0sZCksW2QsbV0pO3JldHVybiBMKCgpPT57Q2Uodi5jb25maWd1cmF0aW9uLHtjb2xvcjpfLGFvUmFkaXVzOmEsZGlzdGFuY2VGYWxsb2ZmOmwsaW50ZW5zaXR5OnAsYW9TYW1wbGVzOm4sZGVub2lzZVNhbXBsZXM6aSxkZW5vaXNlUmFkaXVzOnMsc2NyZWVuU3BhY2VSYWRpdXM6dCxyZW5kZXJNb2RlOlMsaGFsZlJlczplLGRlcHRoQXdhcmVVcHNhbXBsaW5nOnJ9KX0sW3QsXyxhLGwscCxuLGkscyxTLGUscix2XSksTCgoKT0+e28mJnYuc2V0UXVhbGl0eU1vZGUoby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStvLnNsaWNlKDEpKX0sW3Ysb10pLC8qQF9fUFVSRV9fKi93KFwicHJpbWl0aXZlXCIse3JlZjpnLG9iamVjdDp2fSl9KTtleHBvcnR7ZW8gYXMgQVNDSUksaHQgYXMgQXV0b2ZvY3VzLHd0IGFzIEJsb29tLFN0IGFzIEJyaWdodG5lc3NDb250cmFzdCx5dCBhcyBDaHJvbWF0aWNBYmVycmF0aW9uLFB0IGFzIENvbG9yQXZlcmFnZSxidCBhcyBDb2xvckRlcHRoLEV0IGFzIERlcHRoLGNlIGFzIERlcHRoT2ZGaWVsZCxSdCBhcyBEb3RTY3JlZW4sZHQgYXMgRWZmZWN0Q29tcG9zZXIsRCBhcyBFZmZlY3RDb21wb3NlckNvbnRleHQsTnQgYXMgRlhBQSxVdCBhcyBHbGl0Y2gsQ3QgYXMgR29kUmF5cyx6dCBhcyBHcmlkLFR0IGFzIEh1ZVNhdHVyYXRpb24sWnQgYXMgTFVULGd0IGFzIExlbnNGbGFyZSxmZSBhcyBMZW5zRmxhcmVFZmZlY3QsYW8gYXMgTjhBTyxBdCBhcyBOb2lzZSxCdCBhcyBPdXRsaW5lLFZ0IGFzIFBpeGVsYXRpb24sT3QgYXMgUmFtcCxwZSBhcyBSYW1wRWZmZWN0LHVlIGFzIFJhbXBUeXBlLEx0IGFzIFNNQUEsSXQgYXMgU1NBTyxGdCBhcyBTY2FubGluZSxtdCBhcyBTZWxlY3QscHQgYXMgU2VsZWN0aW9uLGt0IGFzIFNlbGVjdGl2ZUJsb29tLEd0IGFzIFNlcGlhLEh0IGFzIFNob2NrV2F2ZSxXdCBhcyBUZXh0dXJlLCR0IGFzIFRpbHRTaGlmdCxZdCBhcyBUaWx0U2hpZnQyLG1lIGFzIFRpbHRTaGlmdEVmZmVjdCxYdCBhcyBUb25lTWFwcGluZyxxdCBhcyBWaWduZXR0ZSxvbyBhcyBXYXRlckVmZmVjdCxkZSBhcyBXYXRlckVmZmVjdEltcGwsayBhcyByZXNvbHZlUmVmLEggYXMgc2VsZWN0aW9uQ29udGV4dCxaIGFzIHVzZVZlY3RvcjIsUCBhcyB3cmFwRWZmZWN0fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/buffer-d2a4726c.esm.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/buffer-d2a4726c.esm.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ addAxis),\n/* harmony export */   b: () => (/* binding */ buffer),\n/* harmony export */   c: () => (/* binding */ reduce),\n/* harmony export */   d: () => (/* binding */ center),\n/* harmony export */   e: () => (/* binding */ expand),\n/* harmony export */   f: () => (/* binding */ sort),\n/* harmony export */   l: () => (/* binding */ lerp),\n/* harmony export */   m: () => (/* binding */ map),\n/* harmony export */   r: () => (/* binding */ rotate),\n/* harmony export */   s: () => (/* binding */ swizzle),\n/* harmony export */   t: () => (/* binding */ translate)\n/* harmony export */ });\n/* harmony import */ var _objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./objectSpread2-284232a6.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/objectSpread2-284232a6.esm.js\");\n/* harmony import */ var _triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./triangle-b62b9067.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc-7d870b3c.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js\");\n/* harmony import */ var _vector2_d2bf51f1_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vector2-d2bf51f1.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector2-d2bf51f1.esm.js\");\n/* harmony import */ var _vector3_0a088b7f_esm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./vector3-0a088b7f.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector3-0a088b7f.esm.js\");\n\n\n\n\n\n\n\nfunction swizzle(buffer) {\n  var stride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  var swizzle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"xyz\";\n  var o = {\n    x: 0,\n    y: 0,\n    z: 0\n  };\n\n  for (var _i = 0; _i < buffer.length; _i += stride) {\n    o.x = buffer[_i];\n    o.y = buffer[_i + 1];\n    o.z = buffer[_i + 2];\n\n    var _swizzle$split = swizzle.split(\"\"),\n        _swizzle$split2 = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_1__._)(_swizzle$split, 3),\n        x = _swizzle$split2[0],\n        y = _swizzle$split2[1],\n        z = _swizzle$split2[2]; // TODO Fix this ugly type\n\n\n    buffer[_i] = o[x];\n    buffer[_i + 1] = o[y];\n\n    if (stride === 3) {\n      buffer[_i + 2] = o[z];\n    }\n  }\n\n  return buffer;\n}\n/**\n * @param buffer A stride 2 points buffer\n * @param valueGenerator A function that returns the value of the z axis at index i\n * @returns\n */\n\nfunction addAxis(buffer, size) {\n  var valueGenerator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n    return Math.random();\n  };\n  var newSize = size + 1;\n  var newBuffer = new Float32Array(buffer.length / size * newSize);\n\n  for (var _i2 = 0; _i2 < buffer.length; _i2 += size) {\n    var _j = _i2 / size * newSize;\n\n    newBuffer[_j] = buffer[_i2];\n    newBuffer[_j + 1] = buffer[_i2 + 1];\n\n    if (size === 2) {\n      newBuffer[_j + 2] = valueGenerator(_j);\n    }\n\n    if (size === 3) {\n      newBuffer[_j + 2] = buffer[_i2 + 2];\n      newBuffer[_j + 3] = valueGenerator(_j);\n    }\n  }\n\n  return newBuffer;\n}\n/**\n * Lerps bufferA and bufferB into final\n *\n * @param bufferA\n * @param bufferB\n * @param final\n * @param t\n */\n\nfunction lerp(bufferA, bufferB, _final, t) {\n  for (var _i3 = 0; _i3 < bufferA.length; _i3++) {\n    _final[_i3] = (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(bufferA[_i3], bufferB[_i3], t);\n  }\n} // TODO add stride\n// TODO Fix types & vectors\n\n/**\n *\n * Translate all points in the passed buffer by the passed translactionVector.\n *\n * @param buffer\n * @param translationVector\n * @returns\n */\n\nfunction translate(buffer, translationVector) {\n  var stride = translationVector.length;\n\n  for (var _i4 = 0; _i4 < buffer.length; _i4 += stride) {\n    buffer[_i4] += translationVector[0];\n    buffer[_i4 + 1] += translationVector[1];\n    buffer[_i4 + 2] += translationVector[2];\n  }\n\n  return buffer;\n} // TODO add stride\n// TODO remove quaternion & vector3 dependencies\n\nfunction rotate(buffer, rotation) {\n  var defaultRotation = {\n    center: [0, 0, 0],\n    q: new three__WEBPACK_IMPORTED_MODULE_5__.Quaternion().identity()\n  };\n  var v = new three__WEBPACK_IMPORTED_MODULE_5__.Vector3();\n\n  var _defaultRotation$rota = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultRotation), rotation),\n      q = _defaultRotation$rota.q,\n      center = _defaultRotation$rota.center;\n\n  for (var _i5 = 0; _i5 < buffer.length; _i5 += 3) {\n    v.set(buffer[_i5] - center[0], buffer[_i5 + 1] - center[1], buffer[_i5 + 2] - center[2]);\n    v.applyQuaternion(q);\n    buffer[_i5] = v.x + center[0];\n    buffer[_i5 + 1] = v.y + center[1];\n    buffer[_i5 + 2] = v.z + center[1];\n  }\n\n  return buffer;\n}\nfunction map(buffer, stride, callback) {\n  for (var _i6 = 0, _j2 = 0; _i6 < buffer.length; _i6 += stride, _j2++) {\n    if (stride === 3) {\n      var res = callback([buffer[_i6], buffer[_i6 + 1], buffer[_i6 + 2]], _j2);\n      buffer.set(res, _i6);\n    } else {\n      buffer.set(callback([buffer[_i6], buffer[_i6 + 1]], _j2), _i6);\n    }\n  }\n\n  return buffer;\n}\n/**\n * Reduces passed buffer\n */\n\nfunction reduce(b, stride, callback, acc) {\n  for (var _i7 = 0, _j3 = 0; _i7 < b.length; _i7 += stride, _j3++) {\n    if (stride === 2) {\n      acc = callback(acc, [b[_i7], b[_i7 + 1]], _j3);\n    } else {\n      acc = callback(acc, [b[_i7], b[_i7 + 1], b[_i7 + 2]], _j3);\n    }\n  }\n\n  return acc;\n}\nfunction expand(b, stride, opts) {\n  var defaultExpandOptions = {\n    center: [0, 0, 0]\n  };\n\n  var _defaultExpandOptions = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultExpandOptions), opts),\n      center = _defaultExpandOptions.center,\n      distance = _defaultExpandOptions.distance;\n\n  for (var _i8 = 0; _i8 < b.length; _i8 += stride) {\n    /**\n     * 1. translate to origin (subtract the scaling center)\n     * 2. scale by the correct amount (multiply by a constant)\n     * 2. translate from origin (add the scaling center)\n     */\n    b[_i8] = (b[_i8] - center[0]) * (1 + distance) + center[0];\n    b[_i8 + 1] = (b[_i8 + 1] - center[1]) * (1 + distance) + center[1];\n\n    if (stride === 3) {\n      b[_i8 + 2] = (b[_i8 + 2] - center[1]) * (1 + distance) + center[2];\n    }\n  }\n\n  return b;\n}\nfunction center(myBuffer, stride) {\n  return reduce(myBuffer, stride, function (acc, point) {\n    if (stride === 3) {\n      // some type hacking is necessary to avoid type errors going from [n, n] => [n, n, n]\n      // but it's not an actual problem, as this path would always get a v3\n      acc = (0,_vector3_0a088b7f_esm_js__WEBPACK_IMPORTED_MODULE_4__.a)(acc, point);\n    } else {\n      acc = (0,_vector2_d2bf51f1_esm_js__WEBPACK_IMPORTED_MODULE_3__.a)(acc, point);\n    }\n\n    return acc;\n  }, (0,_vector2_d2bf51f1_esm_js__WEBPACK_IMPORTED_MODULE_3__.z)());\n}\nfunction sort(myBuffer, stride, callback) {\n  // 1. make an array of the correct size\n  var indices = Int16Array.from({\n    length: myBuffer.length / stride\n  }, function (_, i) {\n    return i;\n  }); // 2. sort the indices array\n\n  indices.sort(function (a, b) {\n    var pa = myBuffer.slice(a * stride, a * stride + stride);\n    var pb = myBuffer.slice(b * stride, b * stride + stride);\n    return callback(pa, pb);\n  }); // 3. make a copy of the original array to fetch indices from\n\n  var prevBuffer = myBuffer.slice(0); // 4. mutate the passed array\n\n  for (var _i9 = 0; _i9 < indices.length; _i9++) {\n    var _j4 = indices[_i9];\n    myBuffer.set(prevBuffer.slice(_j4 * stride, _j4 * stride + stride), _i9 * 3);\n  }\n\n  return myBuffer;\n}\n\nvar buffer = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  swizzle: swizzle,\n  addAxis: addAxis,\n  lerp: lerp,\n  translate: translate,\n  rotate: rotate,\n  map: map,\n  reduce: reduce,\n  expand: expand,\n  center: center,\n  sort: sort\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L2J1ZmZlci1kMmE0NzI2Yy5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0U7QUFDTDtBQUNyQjtBQUNTO0FBQ2E7QUFDYjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQiw0REFBYztBQUN4QztBQUNBO0FBQ0EsZ0NBQWdDOzs7QUFHaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLHFCQUFxQjtBQUN6Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQyxrQkFBa0Isd0RBQU07QUFDeEI7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG9CQUFvQixxQkFBcUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2Q0FBVTtBQUNyQjtBQUNBLGNBQWMsMENBQU87O0FBRXJCLDhCQUE4QixpRUFBYyxDQUFDLGlFQUFjLEdBQUc7QUFDOUQ7QUFDQTs7QUFFQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscUJBQXFCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QixnQkFBZ0I7QUFDN0M7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QixpRUFBYyxDQUFDLGlFQUFjLEdBQUc7QUFDOUQ7QUFDQTs7QUFFQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyREFBRztBQUNmLE1BQU07QUFDTixZQUFZLDJEQUFLO0FBQ2pCOztBQUVBO0FBQ0EsR0FBRyxFQUFFLDJEQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUcsR0FBRzs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRzs7QUFFTixzQ0FBc0M7O0FBRXRDLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFc0oiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXHBhcmVudGx5dGljc1xcbm9kZV9tb2R1bGVzXFxAcmVhY3QtdGhyZWVcXHBvc3Rwcm9jZXNzaW5nXFxub2RlX21vZHVsZXNcXG1hYXRoXFxkaXN0XFxidWZmZXItZDJhNDcyNmMuZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF8gYXMgX29iamVjdFNwcmVhZDIgfSBmcm9tICcuL29iamVjdFNwcmVhZDItMjg0MjMyYTYuZXNtLmpzJztcbmltcG9ydCB7IF8gYXMgX3NsaWNlZFRvQXJyYXkgfSBmcm9tICcuL3RyaWFuZ2xlLWI2MmI5MDY3LmVzbS5qcyc7XG5pbXBvcnQgeyBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgbCBhcyBsZXJwJDEgfSBmcm9tICcuL21pc2MtN2Q4NzBiM2MuZXNtLmpzJztcbmltcG9ydCB7IHogYXMgemVybywgYSBhcyBhZGQkMSB9IGZyb20gJy4vdmVjdG9yMi1kMmJmNTFmMS5lc20uanMnO1xuaW1wb3J0IHsgYSBhcyBhZGQgfSBmcm9tICcuL3ZlY3RvcjMtMGEwODhiN2YuZXNtLmpzJztcblxuZnVuY3Rpb24gc3dpenpsZShidWZmZXIpIHtcbiAgdmFyIHN0cmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMztcbiAgdmFyIHN3aXp6bGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IFwieHl6XCI7XG4gIHZhciBvID0ge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB6OiAwXG4gIH07XG5cbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGJ1ZmZlci5sZW5ndGg7IF9pICs9IHN0cmlkZSkge1xuICAgIG8ueCA9IGJ1ZmZlcltfaV07XG4gICAgby55ID0gYnVmZmVyW19pICsgMV07XG4gICAgby56ID0gYnVmZmVyW19pICsgMl07XG5cbiAgICB2YXIgX3N3aXp6bGUkc3BsaXQgPSBzd2l6emxlLnNwbGl0KFwiXCIpLFxuICAgICAgICBfc3dpenpsZSRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfc3dpenpsZSRzcGxpdCwgMyksXG4gICAgICAgIHggPSBfc3dpenpsZSRzcGxpdDJbMF0sXG4gICAgICAgIHkgPSBfc3dpenpsZSRzcGxpdDJbMV0sXG4gICAgICAgIHogPSBfc3dpenpsZSRzcGxpdDJbMl07IC8vIFRPRE8gRml4IHRoaXMgdWdseSB0eXBlXG5cblxuICAgIGJ1ZmZlcltfaV0gPSBvW3hdO1xuICAgIGJ1ZmZlcltfaSArIDFdID0gb1t5XTtcblxuICAgIGlmIChzdHJpZGUgPT09IDMpIHtcbiAgICAgIGJ1ZmZlcltfaSArIDJdID0gb1t6XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufVxuLyoqXG4gKiBAcGFyYW0gYnVmZmVyIEEgc3RyaWRlIDIgcG9pbnRzIGJ1ZmZlclxuICogQHBhcmFtIHZhbHVlR2VuZXJhdG9yIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgeiBheGlzIGF0IGluZGV4IGlcbiAqIEByZXR1cm5zXG4gKi9cblxuZnVuY3Rpb24gYWRkQXhpcyhidWZmZXIsIHNpemUpIHtcbiAgdmFyIHZhbHVlR2VuZXJhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCk7XG4gIH07XG4gIHZhciBuZXdTaXplID0gc2l6ZSArIDE7XG4gIHZhciBuZXdCdWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlci5sZW5ndGggLyBzaXplICogbmV3U2l6ZSk7XG5cbiAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgYnVmZmVyLmxlbmd0aDsgX2kyICs9IHNpemUpIHtcbiAgICB2YXIgX2ogPSBfaTIgLyBzaXplICogbmV3U2l6ZTtcblxuICAgIG5ld0J1ZmZlcltfal0gPSBidWZmZXJbX2kyXTtcbiAgICBuZXdCdWZmZXJbX2ogKyAxXSA9IGJ1ZmZlcltfaTIgKyAxXTtcblxuICAgIGlmIChzaXplID09PSAyKSB7XG4gICAgICBuZXdCdWZmZXJbX2ogKyAyXSA9IHZhbHVlR2VuZXJhdG9yKF9qKTtcbiAgICB9XG5cbiAgICBpZiAoc2l6ZSA9PT0gMykge1xuICAgICAgbmV3QnVmZmVyW19qICsgMl0gPSBidWZmZXJbX2kyICsgMl07XG4gICAgICBuZXdCdWZmZXJbX2ogKyAzXSA9IHZhbHVlR2VuZXJhdG9yKF9qKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3QnVmZmVyO1xufVxuLyoqXG4gKiBMZXJwcyBidWZmZXJBIGFuZCBidWZmZXJCIGludG8gZmluYWxcbiAqXG4gKiBAcGFyYW0gYnVmZmVyQVxuICogQHBhcmFtIGJ1ZmZlckJcbiAqIEBwYXJhbSBmaW5hbFxuICogQHBhcmFtIHRcbiAqL1xuXG5mdW5jdGlvbiBsZXJwKGJ1ZmZlckEsIGJ1ZmZlckIsIF9maW5hbCwgdCkge1xuICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCBidWZmZXJBLmxlbmd0aDsgX2kzKyspIHtcbiAgICBfZmluYWxbX2kzXSA9IGxlcnAkMShidWZmZXJBW19pM10sIGJ1ZmZlckJbX2kzXSwgdCk7XG4gIH1cbn0gLy8gVE9ETyBhZGQgc3RyaWRlXG4vLyBUT0RPIEZpeCB0eXBlcyAmIHZlY3RvcnNcblxuLyoqXG4gKlxuICogVHJhbnNsYXRlIGFsbCBwb2ludHMgaW4gdGhlIHBhc3NlZCBidWZmZXIgYnkgdGhlIHBhc3NlZCB0cmFuc2xhY3Rpb25WZWN0b3IuXG4gKlxuICogQHBhcmFtIGJ1ZmZlclxuICogQHBhcmFtIHRyYW5zbGF0aW9uVmVjdG9yXG4gKiBAcmV0dXJuc1xuICovXG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShidWZmZXIsIHRyYW5zbGF0aW9uVmVjdG9yKSB7XG4gIHZhciBzdHJpZGUgPSB0cmFuc2xhdGlvblZlY3Rvci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgYnVmZmVyLmxlbmd0aDsgX2k0ICs9IHN0cmlkZSkge1xuICAgIGJ1ZmZlcltfaTRdICs9IHRyYW5zbGF0aW9uVmVjdG9yWzBdO1xuICAgIGJ1ZmZlcltfaTQgKyAxXSArPSB0cmFuc2xhdGlvblZlY3RvclsxXTtcbiAgICBidWZmZXJbX2k0ICsgMl0gKz0gdHJhbnNsYXRpb25WZWN0b3JbMl07XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufSAvLyBUT0RPIGFkZCBzdHJpZGVcbi8vIFRPRE8gcmVtb3ZlIHF1YXRlcm5pb24gJiB2ZWN0b3IzIGRlcGVuZGVuY2llc1xuXG5mdW5jdGlvbiByb3RhdGUoYnVmZmVyLCByb3RhdGlvbikge1xuICB2YXIgZGVmYXVsdFJvdGF0aW9uID0ge1xuICAgIGNlbnRlcjogWzAsIDAsIDBdLFxuICAgIHE6IG5ldyBRdWF0ZXJuaW9uKCkuaWRlbnRpdHkoKVxuICB9O1xuICB2YXIgdiA9IG5ldyBWZWN0b3IzKCk7XG5cbiAgdmFyIF9kZWZhdWx0Um90YXRpb24kcm90YSA9IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBkZWZhdWx0Um90YXRpb24pLCByb3RhdGlvbiksXG4gICAgICBxID0gX2RlZmF1bHRSb3RhdGlvbiRyb3RhLnEsXG4gICAgICBjZW50ZXIgPSBfZGVmYXVsdFJvdGF0aW9uJHJvdGEuY2VudGVyO1xuXG4gIGZvciAodmFyIF9pNSA9IDA7IF9pNSA8IGJ1ZmZlci5sZW5ndGg7IF9pNSArPSAzKSB7XG4gICAgdi5zZXQoYnVmZmVyW19pNV0gLSBjZW50ZXJbMF0sIGJ1ZmZlcltfaTUgKyAxXSAtIGNlbnRlclsxXSwgYnVmZmVyW19pNSArIDJdIC0gY2VudGVyWzJdKTtcbiAgICB2LmFwcGx5UXVhdGVybmlvbihxKTtcbiAgICBidWZmZXJbX2k1XSA9IHYueCArIGNlbnRlclswXTtcbiAgICBidWZmZXJbX2k1ICsgMV0gPSB2LnkgKyBjZW50ZXJbMV07XG4gICAgYnVmZmVyW19pNSArIDJdID0gdi56ICsgY2VudGVyWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cbmZ1bmN0aW9uIG1hcChidWZmZXIsIHN0cmlkZSwgY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgX2k2ID0gMCwgX2oyID0gMDsgX2k2IDwgYnVmZmVyLmxlbmd0aDsgX2k2ICs9IHN0cmlkZSwgX2oyKyspIHtcbiAgICBpZiAoc3RyaWRlID09PSAzKSB7XG4gICAgICB2YXIgcmVzID0gY2FsbGJhY2soW2J1ZmZlcltfaTZdLCBidWZmZXJbX2k2ICsgMV0sIGJ1ZmZlcltfaTYgKyAyXV0sIF9qMik7XG4gICAgICBidWZmZXIuc2V0KHJlcywgX2k2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyLnNldChjYWxsYmFjayhbYnVmZmVyW19pNl0sIGJ1ZmZlcltfaTYgKyAxXV0sIF9qMiksIF9pNik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cbi8qKlxuICogUmVkdWNlcyBwYXNzZWQgYnVmZmVyXG4gKi9cblxuZnVuY3Rpb24gcmVkdWNlKGIsIHN0cmlkZSwgY2FsbGJhY2ssIGFjYykge1xuICBmb3IgKHZhciBfaTcgPSAwLCBfajMgPSAwOyBfaTcgPCBiLmxlbmd0aDsgX2k3ICs9IHN0cmlkZSwgX2ozKyspIHtcbiAgICBpZiAoc3RyaWRlID09PSAyKSB7XG4gICAgICBhY2MgPSBjYWxsYmFjayhhY2MsIFtiW19pN10sIGJbX2k3ICsgMV1dLCBfajMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhY2MgPSBjYWxsYmFjayhhY2MsIFtiW19pN10sIGJbX2k3ICsgMV0sIGJbX2k3ICsgMl1dLCBfajMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhY2M7XG59XG5mdW5jdGlvbiBleHBhbmQoYiwgc3RyaWRlLCBvcHRzKSB7XG4gIHZhciBkZWZhdWx0RXhwYW5kT3B0aW9ucyA9IHtcbiAgICBjZW50ZXI6IFswLCAwLCAwXVxuICB9O1xuXG4gIHZhciBfZGVmYXVsdEV4cGFuZE9wdGlvbnMgPSBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgZGVmYXVsdEV4cGFuZE9wdGlvbnMpLCBvcHRzKSxcbiAgICAgIGNlbnRlciA9IF9kZWZhdWx0RXhwYW5kT3B0aW9ucy5jZW50ZXIsXG4gICAgICBkaXN0YW5jZSA9IF9kZWZhdWx0RXhwYW5kT3B0aW9ucy5kaXN0YW5jZTtcblxuICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBiLmxlbmd0aDsgX2k4ICs9IHN0cmlkZSkge1xuICAgIC8qKlxuICAgICAqIDEuIHRyYW5zbGF0ZSB0byBvcmlnaW4gKHN1YnRyYWN0IHRoZSBzY2FsaW5nIGNlbnRlcilcbiAgICAgKiAyLiBzY2FsZSBieSB0aGUgY29ycmVjdCBhbW91bnQgKG11bHRpcGx5IGJ5IGEgY29uc3RhbnQpXG4gICAgICogMi4gdHJhbnNsYXRlIGZyb20gb3JpZ2luIChhZGQgdGhlIHNjYWxpbmcgY2VudGVyKVxuICAgICAqL1xuICAgIGJbX2k4XSA9IChiW19pOF0gLSBjZW50ZXJbMF0pICogKDEgKyBkaXN0YW5jZSkgKyBjZW50ZXJbMF07XG4gICAgYltfaTggKyAxXSA9IChiW19pOCArIDFdIC0gY2VudGVyWzFdKSAqICgxICsgZGlzdGFuY2UpICsgY2VudGVyWzFdO1xuXG4gICAgaWYgKHN0cmlkZSA9PT0gMykge1xuICAgICAgYltfaTggKyAyXSA9IChiW19pOCArIDJdIC0gY2VudGVyWzFdKSAqICgxICsgZGlzdGFuY2UpICsgY2VudGVyWzJdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBiO1xufVxuZnVuY3Rpb24gY2VudGVyKG15QnVmZmVyLCBzdHJpZGUpIHtcbiAgcmV0dXJuIHJlZHVjZShteUJ1ZmZlciwgc3RyaWRlLCBmdW5jdGlvbiAoYWNjLCBwb2ludCkge1xuICAgIGlmIChzdHJpZGUgPT09IDMpIHtcbiAgICAgIC8vIHNvbWUgdHlwZSBoYWNraW5nIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCB0eXBlIGVycm9ycyBnb2luZyBmcm9tIFtuLCBuXSA9PiBbbiwgbiwgbl1cbiAgICAgIC8vIGJ1dCBpdCdzIG5vdCBhbiBhY3R1YWwgcHJvYmxlbSwgYXMgdGhpcyBwYXRoIHdvdWxkIGFsd2F5cyBnZXQgYSB2M1xuICAgICAgYWNjID0gYWRkKGFjYywgcG9pbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhY2MgPSBhZGQkMShhY2MsIHBvaW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCB6ZXJvKCkpO1xufVxuZnVuY3Rpb24gc29ydChteUJ1ZmZlciwgc3RyaWRlLCBjYWxsYmFjaykge1xuICAvLyAxLiBtYWtlIGFuIGFycmF5IG9mIHRoZSBjb3JyZWN0IHNpemVcbiAgdmFyIGluZGljZXMgPSBJbnQxNkFycmF5LmZyb20oe1xuICAgIGxlbmd0aDogbXlCdWZmZXIubGVuZ3RoIC8gc3RyaWRlXG4gIH0sIGZ1bmN0aW9uIChfLCBpKSB7XG4gICAgcmV0dXJuIGk7XG4gIH0pOyAvLyAyLiBzb3J0IHRoZSBpbmRpY2VzIGFycmF5XG5cbiAgaW5kaWNlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgdmFyIHBhID0gbXlCdWZmZXIuc2xpY2UoYSAqIHN0cmlkZSwgYSAqIHN0cmlkZSArIHN0cmlkZSk7XG4gICAgdmFyIHBiID0gbXlCdWZmZXIuc2xpY2UoYiAqIHN0cmlkZSwgYiAqIHN0cmlkZSArIHN0cmlkZSk7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHBhLCBwYik7XG4gIH0pOyAvLyAzLiBtYWtlIGEgY29weSBvZiB0aGUgb3JpZ2luYWwgYXJyYXkgdG8gZmV0Y2ggaW5kaWNlcyBmcm9tXG5cbiAgdmFyIHByZXZCdWZmZXIgPSBteUJ1ZmZlci5zbGljZSgwKTsgLy8gNC4gbXV0YXRlIHRoZSBwYXNzZWQgYXJyYXlcblxuICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBpbmRpY2VzLmxlbmd0aDsgX2k5KyspIHtcbiAgICB2YXIgX2o0ID0gaW5kaWNlc1tfaTldO1xuICAgIG15QnVmZmVyLnNldChwcmV2QnVmZmVyLnNsaWNlKF9qNCAqIHN0cmlkZSwgX2o0ICogc3RyaWRlICsgc3RyaWRlKSwgX2k5ICogMyk7XG4gIH1cblxuICByZXR1cm4gbXlCdWZmZXI7XG59XG5cbnZhciBidWZmZXIgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgc3dpenpsZTogc3dpenpsZSxcbiAgYWRkQXhpczogYWRkQXhpcyxcbiAgbGVycDogbGVycCxcbiAgdHJhbnNsYXRlOiB0cmFuc2xhdGUsXG4gIHJvdGF0ZTogcm90YXRlLFxuICBtYXA6IG1hcCxcbiAgcmVkdWNlOiByZWR1Y2UsXG4gIGV4cGFuZDogZXhwYW5kLFxuICBjZW50ZXI6IGNlbnRlcixcbiAgc29ydDogc29ydFxufSk7XG5cbmV4cG9ydCB7IGFkZEF4aXMgYXMgYSwgYnVmZmVyIGFzIGIsIHJlZHVjZSBhcyBjLCBjZW50ZXIgYXMgZCwgZXhwYW5kIGFzIGUsIHNvcnQgYXMgZiwgbGVycCBhcyBsLCBtYXAgYXMgbSwgcm90YXRlIGFzIHIsIHN3aXp6bGUgYXMgcywgdHJhbnNsYXRlIGFzIHQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/buffer-d2a4726c.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/classCallCheck-9098b006.esm.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/classCallCheck-9098b006.esm.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _: () => (/* binding */ _classCallCheck)\n/* harmony export */ });\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L2NsYXNzQ2FsbENoZWNrLTkwOThiMDA2LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0MiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXHBhcmVudGx5dGljc1xcbm9kZV9tb2R1bGVzXFxAcmVhY3QtdGhyZWVcXHBvc3Rwcm9jZXNzaW5nXFxub2RlX21vZHVsZXNcXG1hYXRoXFxkaXN0XFxjbGFzc0NhbGxDaGVjay05MDk4YjAwNi5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxuZXhwb3J0IHsgX2NsYXNzQ2FsbENoZWNrIGFzIF8gfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/classCallCheck-9098b006.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/easing-3be59c6d.esm.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/easing-3be59c6d.esm.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ exp),\n/* harmony export */   b: () => (/* binding */ dampAngle),\n/* harmony export */   c: () => (/* binding */ damp2),\n/* harmony export */   d: () => (/* binding */ damp),\n/* harmony export */   e: () => (/* binding */ easing),\n/* harmony export */   f: () => (/* binding */ damp3),\n/* harmony export */   g: () => (/* binding */ damp4),\n/* harmony export */   h: () => (/* binding */ dampE),\n/* harmony export */   i: () => (/* binding */ dampC),\n/* harmony export */   j: () => (/* binding */ dampQ),\n/* harmony export */   k: () => (/* binding */ dampS),\n/* harmony export */   l: () => (/* binding */ dampM),\n/* harmony export */   r: () => (/* binding */ rsqw)\n/* harmony export */ });\n/* harmony import */ var _triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./triangle-b62b9067.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc-7d870b3c.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js\");\n\n\n\n\n/**\n * Rounded square wave easing\n */\n\nvar rsqw = function rsqw(t) {\n  var delta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.01;\n  var a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var f = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1 / (2 * Math.PI);\n  return a / Math.atan(1 / delta) * Math.atan(Math.sin(2 * Math.PI * t * f) / delta);\n};\n/**\n * Exponential easing\n */\n\nvar exp = function exp(t) {\n  return 1 / (1 + t + 0.48 * t * t + 0.235 * t * t * t);\n};\n/**\n * Damp, based on Game Programming Gems 4 Chapter 1.10\n *   Return value indicates whether the animation is still running.\n */\n\nfunction damp(\n/** The object */\ncurrent,\n/** The key to animate */\nprop,\n/** To goal value */\ntarget) {\n  var smoothTime = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.25;\n  var delta = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.01;\n  var maxSpeed = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : Infinity;\n  var easing = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : exp;\n  var eps = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0.001;\n  var vel = \"velocity_\" + prop;\n  if (current.__damp === undefined) current.__damp = {};\n  if (current.__damp[vel] === undefined) current.__damp[vel] = 0;\n\n  if (Math.abs(current[prop] - target) <= eps) {\n    current[prop] = target;\n    return false;\n  }\n\n  smoothTime = Math.max(0.0001, smoothTime);\n  var omega = 2 / smoothTime;\n  var t = easing(omega * delta);\n  var change = current[prop] - target;\n  var originalTo = target; // Clamp maximum maxSpeed\n\n  var maxChange = maxSpeed * smoothTime;\n  change = Math.min(Math.max(change, -maxChange), maxChange);\n  target = current[prop] - change;\n  var temp = (current.__damp[vel] + omega * change) * delta;\n  current.__damp[vel] = (current.__damp[vel] - omega * temp) * t;\n  var output = target + (change + temp) * t; // Prevent overshooting\n\n  if (originalTo - current[prop] > 0.0 === output > originalTo) {\n    output = originalTo;\n    current.__damp[vel] = (output - originalTo) / delta;\n  }\n\n  current[prop] = output;\n  return true;\n}\n/**\n * DampAngle, based on Game Programming Gems 4 Chapter 1.10\n */\n\nfunction dampAngle(current, prop, target, smoothTime, delta, maxSpeed, easing, eps) {\n  return damp(current, prop, current[prop] + (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_1__.d)(current[prop], target), smoothTime, delta, maxSpeed, easing, eps);\n}\n/**\n * Vector2D Damp\n */\n\nvar v2d = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector2();\nvar a2, b2;\nfunction damp2(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  if (typeof target === \"number\") v2d.setScalar(target);else if (Array.isArray(target)) v2d.set(target[0], target[1]);else v2d.copy(target);\n  a2 = damp(current, \"x\", v2d.x, smoothTime, delta, maxSpeed, easing, eps);\n  b2 = damp(current, \"y\", v2d.y, smoothTime, delta, maxSpeed, easing, eps);\n  return a2 || b2;\n}\n/**\n * Vector3D Damp\n */\n\nvar v3d = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\nvar a3, b3, c3;\nfunction damp3(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  if (typeof target === \"number\") v3d.setScalar(target);else if (Array.isArray(target)) v3d.set(target[0], target[1], target[2]);else v3d.copy(target);\n  a3 = damp(current, \"x\", v3d.x, smoothTime, delta, maxSpeed, easing, eps);\n  b3 = damp(current, \"y\", v3d.y, smoothTime, delta, maxSpeed, easing, eps);\n  c3 = damp(current, \"z\", v3d.z, smoothTime, delta, maxSpeed, easing, eps);\n  return a3 || b3 || c3;\n}\n/**\n * Vector4D Damp\n */\n\nvar v4d = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector4();\nvar a4, b4, c4, d4;\nfunction damp4(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  if (typeof target === \"number\") v4d.setScalar(target);else if (Array.isArray(target)) v4d.set(target[0], target[1], target[2], target[3]);else v4d.copy(target);\n  a4 = damp(current, \"x\", v4d.x, smoothTime, delta, maxSpeed, easing, eps);\n  b4 = damp(current, \"y\", v4d.y, smoothTime, delta, maxSpeed, easing, eps);\n  c4 = damp(current, \"z\", v4d.z, smoothTime, delta, maxSpeed, easing, eps);\n  d4 = damp(current, \"w\", v4d.w, smoothTime, delta, maxSpeed, easing, eps);\n  return a4 || b4 || c4 || d4;\n}\n/**\n * Euler Damp\n */\n\nvar rot = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Euler();\nvar aE, bE, cE;\nfunction dampE(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  if (Array.isArray(target)) rot.set(target[0], target[1], target[2], target[3]);else rot.copy(target);\n  aE = dampAngle(current, \"x\", rot.x, smoothTime, delta, maxSpeed, easing, eps);\n  bE = dampAngle(current, \"y\", rot.y, smoothTime, delta, maxSpeed, easing, eps);\n  cE = dampAngle(current, \"z\", rot.z, smoothTime, delta, maxSpeed, easing, eps);\n  return aE || bE || cE;\n}\n/**\n * Color Damp\n */\n\nvar col = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Color();\nvar aC, bC, cC;\nfunction dampC(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  if (target instanceof three__WEBPACK_IMPORTED_MODULE_2__.Color) col.copy(target);else if (Array.isArray(target)) col.setRGB(target[0], target[1], target[2]);else col.set(target);\n  aC = damp(current, \"r\", col.r, smoothTime, delta, maxSpeed, easing, eps);\n  bC = damp(current, \"g\", col.g, smoothTime, delta, maxSpeed, easing, eps);\n  cC = damp(current, \"b\", col.b, smoothTime, delta, maxSpeed, easing, eps);\n  return aC || bC || cC;\n}\n/**\n * Quaternion Damp\n * https://gist.github.com/maxattack/4c7b4de00f5c1b95a33b\n * Copyright 2016 Max Kaufmann (max.kaufmann@gmail.com)\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nvar qt = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion();\nvar v4result = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector4();\nvar v4velocity = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector4();\nvar v4error = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector4();\nvar aQ, bQ, cQ, dQ;\nfunction dampQ(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  var cur = current;\n  if (Array.isArray(target)) qt.set(target[0], target[1], target[2], target[3]);else qt.copy(target);\n  var multi = current.dot(qt) > 0 ? 1 : -1;\n  qt.x *= multi;\n  qt.y *= multi;\n  qt.z *= multi;\n  qt.w *= multi;\n  aQ = damp(current, \"x\", qt.x, smoothTime, delta, maxSpeed, easing, eps);\n  bQ = damp(current, \"y\", qt.y, smoothTime, delta, maxSpeed, easing, eps);\n  cQ = damp(current, \"z\", qt.z, smoothTime, delta, maxSpeed, easing, eps);\n  dQ = damp(current, \"w\", qt.w, smoothTime, delta, maxSpeed, easing, eps); // smooth damp (nlerp approx)\n\n  v4result.set(current.x, current.y, current.z, current.w).normalize();\n  v4velocity.set(cur.__damp.velocity_x, cur.__damp.velocity_y, cur.__damp.velocity_z, cur.__damp.velocity_w); // ensure deriv is tangent\n\n  v4error.copy(v4result).multiplyScalar(v4velocity.dot(v4result) / v4result.dot(v4result));\n  cur.__damp.velocity_x -= v4error.x;\n  cur.__damp.velocity_y -= v4error.y;\n  cur.__damp.velocity_z -= v4error.z;\n  cur.__damp.velocity_w -= v4error.w;\n  current.set(v4result.x, v4result.y, v4result.z, v4result.w);\n  return aQ || bQ || cQ || dQ;\n}\n/**\n * Spherical Damp\n */\n\nvar spherical = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Spherical();\nvar aS, bS, cS;\nfunction dampS(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  if (Array.isArray(target)) spherical.set(target[0], target[1], target[2]);else spherical.copy(target);\n  aS = damp(current, \"radius\", spherical.radius, smoothTime, delta, maxSpeed, easing, eps);\n  bS = dampAngle(current, \"phi\", spherical.phi, smoothTime, delta, maxSpeed, easing, eps);\n  cS = dampAngle(current, \"theta\", spherical.theta, smoothTime, delta, maxSpeed, easing, eps);\n  return aS || bS || cS;\n}\n/**\n * Matrix4 Damp\n */\n\nvar mat = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Matrix4();\nvar mPos = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\nvar mRot = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion();\nvar mSca = /*@__PURE__*/new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\nvar aM, bM, cM;\nfunction dampM(current, target, smoothTime, delta, maxSpeed, easing, eps) {\n  var cur = current;\n\n  if (cur.__damp === undefined) {\n    cur.__damp = {\n      position: new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(),\n      rotation: new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion(),\n      scale: new three__WEBPACK_IMPORTED_MODULE_2__.Vector3()\n    };\n    current.decompose(cur.__damp.position, cur.__damp.rotation, cur.__damp.scale);\n  }\n\n  if (Array.isArray(target)) mat.set.apply(mat, (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(target));else mat.copy(target);\n  mat.decompose(mPos, mRot, mSca);\n  aM = damp3(cur.__damp.position, mPos, smoothTime, delta, maxSpeed, easing, eps);\n  bM = dampQ(cur.__damp.rotation, mRot, smoothTime, delta, maxSpeed, easing, eps);\n  cM = damp3(cur.__damp.scale, mSca, smoothTime, delta, maxSpeed, easing, eps);\n  current.compose(cur.__damp.position, cur.__damp.rotation, cur.__damp.scale);\n  return aM || bM || cM;\n}\n\nvar easing = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  rsqw: rsqw,\n  exp: exp,\n  damp: damp,\n  dampAngle: dampAngle,\n  damp2: damp2,\n  damp3: damp3,\n  damp4: damp4,\n  dampE: dampE,\n  dampC: dampC,\n  dampQ: dampQ,\n  dampS: dampS,\n  dampM: dampM\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L2Vhc2luZy0zYmU1OWM2ZC5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRTtBQUMyQjtBQUN2Qzs7QUFFekQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZDQUE2Qyx3REFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkIsMENBQU87QUFDbEM7QUFDQTtBQUNBLHdEQUF3RCw4REFBOEQ7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkJBQTJCLDBDQUFPO0FBQ2xDO0FBQ0E7QUFDQSx3REFBd0QseUVBQXlFO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkJBQTJCLDBDQUFPO0FBQ2xDO0FBQ0E7QUFDQSx3REFBd0Qsb0ZBQW9GO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkIsd0NBQUs7QUFDaEM7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJCQUEyQix3Q0FBSztBQUNoQztBQUNBO0FBQ0Esd0JBQXdCLHdDQUFLLG1CQUFtQiw0RUFBNEU7QUFDNUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLDZDQUFVO0FBQ3BDLGdDQUFnQywwQ0FBTztBQUN2QyxrQ0FBa0MsMENBQU87QUFDekMsK0JBQStCLDBDQUFPO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFOztBQUUzRTtBQUNBLDhHQUE4Rzs7QUFFOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUMsNENBQVM7QUFDMUM7QUFDQTtBQUNBLDRFQUE0RTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJCQUEyQiwwQ0FBTztBQUNsQyw0QkFBNEIsMENBQU87QUFDbkMsNEJBQTRCLDZDQUFVO0FBQ3RDLDRCQUE0QiwwQ0FBTztBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBTztBQUMzQixvQkFBb0IsNkNBQVU7QUFDOUIsaUJBQWlCLDBDQUFPO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQSxnREFBZ0QsNERBQWtCLFVBQVU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRXNLIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcZWFzaW5nLTNiZTU5YzZkLmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhIGFzIF90b0NvbnN1bWFibGVBcnJheSB9IGZyb20gJy4vdHJpYW5nbGUtYjYyYjkwNjcuZXNtLmpzJztcbmltcG9ydCB7IENvbG9yLCBWZWN0b3IzLCBRdWF0ZXJuaW9uLCBWZWN0b3IyLCBWZWN0b3I0LCBFdWxlciwgU3BoZXJpY2FsLCBNYXRyaXg0IH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgZCBhcyBkZWx0YUFuZ2xlIH0gZnJvbSAnLi9taXNjLTdkODcwYjNjLmVzbS5qcyc7XG5cbi8qKlxuICogUm91bmRlZCBzcXVhcmUgd2F2ZSBlYXNpbmdcbiAqL1xuXG52YXIgcnNxdyA9IGZ1bmN0aW9uIHJzcXcodCkge1xuICB2YXIgZGVsdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDAuMDE7XG4gIHZhciBhID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAxO1xuICB2YXIgZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMSAvICgyICogTWF0aC5QSSk7XG4gIHJldHVybiBhIC8gTWF0aC5hdGFuKDEgLyBkZWx0YSkgKiBNYXRoLmF0YW4oTWF0aC5zaW4oMiAqIE1hdGguUEkgKiB0ICogZikgLyBkZWx0YSk7XG59O1xuLyoqXG4gKiBFeHBvbmVudGlhbCBlYXNpbmdcbiAqL1xuXG52YXIgZXhwID0gZnVuY3Rpb24gZXhwKHQpIHtcbiAgcmV0dXJuIDEgLyAoMSArIHQgKyAwLjQ4ICogdCAqIHQgKyAwLjIzNSAqIHQgKiB0ICogdCk7XG59O1xuLyoqXG4gKiBEYW1wLCBiYXNlZCBvbiBHYW1lIFByb2dyYW1taW5nIEdlbXMgNCBDaGFwdGVyIDEuMTBcbiAqICAgUmV0dXJuIHZhbHVlIGluZGljYXRlcyB3aGV0aGVyIHRoZSBhbmltYXRpb24gaXMgc3RpbGwgcnVubmluZy5cbiAqL1xuXG5mdW5jdGlvbiBkYW1wKFxuLyoqIFRoZSBvYmplY3QgKi9cbmN1cnJlbnQsXG4vKiogVGhlIGtleSB0byBhbmltYXRlICovXG5wcm9wLFxuLyoqIFRvIGdvYWwgdmFsdWUgKi9cbnRhcmdldCkge1xuICB2YXIgc21vb3RoVGltZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMC4yNTtcbiAgdmFyIGRlbHRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAwLjAxO1xuICB2YXIgbWF4U3BlZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IEluZmluaXR5O1xuICB2YXIgZWFzaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiBleHA7XG4gIHZhciBlcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gNyAmJiBhcmd1bWVudHNbN10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s3XSA6IDAuMDAxO1xuICB2YXIgdmVsID0gXCJ2ZWxvY2l0eV9cIiArIHByb3A7XG4gIGlmIChjdXJyZW50Ll9fZGFtcCA9PT0gdW5kZWZpbmVkKSBjdXJyZW50Ll9fZGFtcCA9IHt9O1xuICBpZiAoY3VycmVudC5fX2RhbXBbdmVsXSA9PT0gdW5kZWZpbmVkKSBjdXJyZW50Ll9fZGFtcFt2ZWxdID0gMDtcblxuICBpZiAoTWF0aC5hYnMoY3VycmVudFtwcm9wXSAtIHRhcmdldCkgPD0gZXBzKSB7XG4gICAgY3VycmVudFtwcm9wXSA9IHRhcmdldDtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzbW9vdGhUaW1lID0gTWF0aC5tYXgoMC4wMDAxLCBzbW9vdGhUaW1lKTtcbiAgdmFyIG9tZWdhID0gMiAvIHNtb290aFRpbWU7XG4gIHZhciB0ID0gZWFzaW5nKG9tZWdhICogZGVsdGEpO1xuICB2YXIgY2hhbmdlID0gY3VycmVudFtwcm9wXSAtIHRhcmdldDtcbiAgdmFyIG9yaWdpbmFsVG8gPSB0YXJnZXQ7IC8vIENsYW1wIG1heGltdW0gbWF4U3BlZWRcblxuICB2YXIgbWF4Q2hhbmdlID0gbWF4U3BlZWQgKiBzbW9vdGhUaW1lO1xuICBjaGFuZ2UgPSBNYXRoLm1pbihNYXRoLm1heChjaGFuZ2UsIC1tYXhDaGFuZ2UpLCBtYXhDaGFuZ2UpO1xuICB0YXJnZXQgPSBjdXJyZW50W3Byb3BdIC0gY2hhbmdlO1xuICB2YXIgdGVtcCA9IChjdXJyZW50Ll9fZGFtcFt2ZWxdICsgb21lZ2EgKiBjaGFuZ2UpICogZGVsdGE7XG4gIGN1cnJlbnQuX19kYW1wW3ZlbF0gPSAoY3VycmVudC5fX2RhbXBbdmVsXSAtIG9tZWdhICogdGVtcCkgKiB0O1xuICB2YXIgb3V0cHV0ID0gdGFyZ2V0ICsgKGNoYW5nZSArIHRlbXApICogdDsgLy8gUHJldmVudCBvdmVyc2hvb3RpbmdcblxuICBpZiAob3JpZ2luYWxUbyAtIGN1cnJlbnRbcHJvcF0gPiAwLjAgPT09IG91dHB1dCA+IG9yaWdpbmFsVG8pIHtcbiAgICBvdXRwdXQgPSBvcmlnaW5hbFRvO1xuICAgIGN1cnJlbnQuX19kYW1wW3ZlbF0gPSAob3V0cHV0IC0gb3JpZ2luYWxUbykgLyBkZWx0YTtcbiAgfVxuXG4gIGN1cnJlbnRbcHJvcF0gPSBvdXRwdXQ7XG4gIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBEYW1wQW5nbGUsIGJhc2VkIG9uIEdhbWUgUHJvZ3JhbW1pbmcgR2VtcyA0IENoYXB0ZXIgMS4xMFxuICovXG5cbmZ1bmN0aW9uIGRhbXBBbmdsZShjdXJyZW50LCBwcm9wLCB0YXJnZXQsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpIHtcbiAgcmV0dXJuIGRhbXAoY3VycmVudCwgcHJvcCwgY3VycmVudFtwcm9wXSArIGRlbHRhQW5nbGUoY3VycmVudFtwcm9wXSwgdGFyZ2V0KSwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG59XG4vKipcbiAqIFZlY3RvcjJEIERhbXBcbiAqL1xuXG52YXIgdjJkID0gLypAX19QVVJFX18qL25ldyBWZWN0b3IyKCk7XG52YXIgYTIsIGIyO1xuZnVuY3Rpb24gZGFtcDIoY3VycmVudCwgdGFyZ2V0LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKSB7XG4gIGlmICh0eXBlb2YgdGFyZ2V0ID09PSBcIm51bWJlclwiKSB2MmQuc2V0U2NhbGFyKHRhcmdldCk7ZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB2MmQuc2V0KHRhcmdldFswXSwgdGFyZ2V0WzFdKTtlbHNlIHYyZC5jb3B5KHRhcmdldCk7XG4gIGEyID0gZGFtcChjdXJyZW50LCBcInhcIiwgdjJkLngsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpO1xuICBiMiA9IGRhbXAoY3VycmVudCwgXCJ5XCIsIHYyZC55LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgcmV0dXJuIGEyIHx8IGIyO1xufVxuLyoqXG4gKiBWZWN0b3IzRCBEYW1wXG4gKi9cblxudmFyIHYzZCA9IC8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO1xudmFyIGEzLCBiMywgYzM7XG5mdW5jdGlvbiBkYW1wMyhjdXJyZW50LCB0YXJnZXQsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpIHtcbiAgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwibnVtYmVyXCIpIHYzZC5zZXRTY2FsYXIodGFyZ2V0KTtlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHYzZC5zZXQodGFyZ2V0WzBdLCB0YXJnZXRbMV0sIHRhcmdldFsyXSk7ZWxzZSB2M2QuY29weSh0YXJnZXQpO1xuICBhMyA9IGRhbXAoY3VycmVudCwgXCJ4XCIsIHYzZC54LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgYjMgPSBkYW1wKGN1cnJlbnQsIFwieVwiLCB2M2QueSwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGMzID0gZGFtcChjdXJyZW50LCBcInpcIiwgdjNkLnosIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpO1xuICByZXR1cm4gYTMgfHwgYjMgfHwgYzM7XG59XG4vKipcbiAqIFZlY3RvcjREIERhbXBcbiAqL1xuXG52YXIgdjRkID0gLypAX19QVVJFX18qL25ldyBWZWN0b3I0KCk7XG52YXIgYTQsIGI0LCBjNCwgZDQ7XG5mdW5jdGlvbiBkYW1wNChjdXJyZW50LCB0YXJnZXQsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpIHtcbiAgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwibnVtYmVyXCIpIHY0ZC5zZXRTY2FsYXIodGFyZ2V0KTtlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHY0ZC5zZXQodGFyZ2V0WzBdLCB0YXJnZXRbMV0sIHRhcmdldFsyXSwgdGFyZ2V0WzNdKTtlbHNlIHY0ZC5jb3B5KHRhcmdldCk7XG4gIGE0ID0gZGFtcChjdXJyZW50LCBcInhcIiwgdjRkLngsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpO1xuICBiNCA9IGRhbXAoY3VycmVudCwgXCJ5XCIsIHY0ZC55LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgYzQgPSBkYW1wKGN1cnJlbnQsIFwielwiLCB2NGQueiwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGQ0ID0gZGFtcChjdXJyZW50LCBcIndcIiwgdjRkLncsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpO1xuICByZXR1cm4gYTQgfHwgYjQgfHwgYzQgfHwgZDQ7XG59XG4vKipcbiAqIEV1bGVyIERhbXBcbiAqL1xuXG52YXIgcm90ID0gLypAX19QVVJFX18qL25ldyBFdWxlcigpO1xudmFyIGFFLCBiRSwgY0U7XG5mdW5jdGlvbiBkYW1wRShjdXJyZW50LCB0YXJnZXQsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkgcm90LnNldCh0YXJnZXRbMF0sIHRhcmdldFsxXSwgdGFyZ2V0WzJdLCB0YXJnZXRbM10pO2Vsc2Ugcm90LmNvcHkodGFyZ2V0KTtcbiAgYUUgPSBkYW1wQW5nbGUoY3VycmVudCwgXCJ4XCIsIHJvdC54LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgYkUgPSBkYW1wQW5nbGUoY3VycmVudCwgXCJ5XCIsIHJvdC55LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgY0UgPSBkYW1wQW5nbGUoY3VycmVudCwgXCJ6XCIsIHJvdC56LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgcmV0dXJuIGFFIHx8IGJFIHx8IGNFO1xufVxuLyoqXG4gKiBDb2xvciBEYW1wXG4gKi9cblxudmFyIGNvbCA9IC8qQF9fUFVSRV9fKi9uZXcgQ29sb3IoKTtcbnZhciBhQywgYkMsIGNDO1xuZnVuY3Rpb24gZGFtcEMoY3VycmVudCwgdGFyZ2V0LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKSB7XG4gIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBDb2xvcikgY29sLmNvcHkodGFyZ2V0KTtlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIGNvbC5zZXRSR0IodGFyZ2V0WzBdLCB0YXJnZXRbMV0sIHRhcmdldFsyXSk7ZWxzZSBjb2wuc2V0KHRhcmdldCk7XG4gIGFDID0gZGFtcChjdXJyZW50LCBcInJcIiwgY29sLnIsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpO1xuICBiQyA9IGRhbXAoY3VycmVudCwgXCJnXCIsIGNvbC5nLCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKTtcbiAgY0MgPSBkYW1wKGN1cnJlbnQsIFwiYlwiLCBjb2wuYiwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIHJldHVybiBhQyB8fCBiQyB8fCBjQztcbn1cbi8qKlxuICogUXVhdGVybmlvbiBEYW1wXG4gKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9tYXhhdHRhY2svNGM3YjRkZTAwZjVjMWI5NWEzM2JcbiAqIENvcHlyaWdodCAyMDE2IE1heCBLYXVmbWFubiAobWF4LmthdWZtYW5uQGdtYWlsLmNvbSlcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbnZhciBxdCA9IC8qQF9fUFVSRV9fKi9uZXcgUXVhdGVybmlvbigpO1xudmFyIHY0cmVzdWx0ID0gLypAX19QVVJFX18qL25ldyBWZWN0b3I0KCk7XG52YXIgdjR2ZWxvY2l0eSA9IC8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yNCgpO1xudmFyIHY0ZXJyb3IgPSAvKkBfX1BVUkVfXyovbmV3IFZlY3RvcjQoKTtcbnZhciBhUSwgYlEsIGNRLCBkUTtcbmZ1bmN0aW9uIGRhbXBRKGN1cnJlbnQsIHRhcmdldCwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcykge1xuICB2YXIgY3VyID0gY3VycmVudDtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkgcXQuc2V0KHRhcmdldFswXSwgdGFyZ2V0WzFdLCB0YXJnZXRbMl0sIHRhcmdldFszXSk7ZWxzZSBxdC5jb3B5KHRhcmdldCk7XG4gIHZhciBtdWx0aSA9IGN1cnJlbnQuZG90KHF0KSA+IDAgPyAxIDogLTE7XG4gIHF0LnggKj0gbXVsdGk7XG4gIHF0LnkgKj0gbXVsdGk7XG4gIHF0LnogKj0gbXVsdGk7XG4gIHF0LncgKj0gbXVsdGk7XG4gIGFRID0gZGFtcChjdXJyZW50LCBcInhcIiwgcXQueCwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGJRID0gZGFtcChjdXJyZW50LCBcInlcIiwgcXQueSwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGNRID0gZGFtcChjdXJyZW50LCBcInpcIiwgcXQueiwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGRRID0gZGFtcChjdXJyZW50LCBcIndcIiwgcXQudywgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7IC8vIHNtb290aCBkYW1wIChubGVycCBhcHByb3gpXG5cbiAgdjRyZXN1bHQuc2V0KGN1cnJlbnQueCwgY3VycmVudC55LCBjdXJyZW50LnosIGN1cnJlbnQudykubm9ybWFsaXplKCk7XG4gIHY0dmVsb2NpdHkuc2V0KGN1ci5fX2RhbXAudmVsb2NpdHlfeCwgY3VyLl9fZGFtcC52ZWxvY2l0eV95LCBjdXIuX19kYW1wLnZlbG9jaXR5X3osIGN1ci5fX2RhbXAudmVsb2NpdHlfdyk7IC8vIGVuc3VyZSBkZXJpdiBpcyB0YW5nZW50XG5cbiAgdjRlcnJvci5jb3B5KHY0cmVzdWx0KS5tdWx0aXBseVNjYWxhcih2NHZlbG9jaXR5LmRvdCh2NHJlc3VsdCkgLyB2NHJlc3VsdC5kb3QodjRyZXN1bHQpKTtcbiAgY3VyLl9fZGFtcC52ZWxvY2l0eV94IC09IHY0ZXJyb3IueDtcbiAgY3VyLl9fZGFtcC52ZWxvY2l0eV95IC09IHY0ZXJyb3IueTtcbiAgY3VyLl9fZGFtcC52ZWxvY2l0eV96IC09IHY0ZXJyb3IuejtcbiAgY3VyLl9fZGFtcC52ZWxvY2l0eV93IC09IHY0ZXJyb3IudztcbiAgY3VycmVudC5zZXQodjRyZXN1bHQueCwgdjRyZXN1bHQueSwgdjRyZXN1bHQueiwgdjRyZXN1bHQudyk7XG4gIHJldHVybiBhUSB8fCBiUSB8fCBjUSB8fCBkUTtcbn1cbi8qKlxuICogU3BoZXJpY2FsIERhbXBcbiAqL1xuXG52YXIgc3BoZXJpY2FsID0gLypAX19QVVJFX18qL25ldyBTcGhlcmljYWwoKTtcbnZhciBhUywgYlMsIGNTO1xuZnVuY3Rpb24gZGFtcFMoY3VycmVudCwgdGFyZ2V0LCBzbW9vdGhUaW1lLCBkZWx0YSwgbWF4U3BlZWQsIGVhc2luZywgZXBzKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHNwaGVyaWNhbC5zZXQodGFyZ2V0WzBdLCB0YXJnZXRbMV0sIHRhcmdldFsyXSk7ZWxzZSBzcGhlcmljYWwuY29weSh0YXJnZXQpO1xuICBhUyA9IGRhbXAoY3VycmVudCwgXCJyYWRpdXNcIiwgc3BoZXJpY2FsLnJhZGl1cywgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGJTID0gZGFtcEFuZ2xlKGN1cnJlbnQsIFwicGhpXCIsIHNwaGVyaWNhbC5waGksIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpO1xuICBjUyA9IGRhbXBBbmdsZShjdXJyZW50LCBcInRoZXRhXCIsIHNwaGVyaWNhbC50aGV0YSwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIHJldHVybiBhUyB8fCBiUyB8fCBjUztcbn1cbi8qKlxuICogTWF0cml4NCBEYW1wXG4gKi9cblxudmFyIG1hdCA9IC8qQF9fUFVSRV9fKi9uZXcgTWF0cml4NCgpO1xudmFyIG1Qb3MgPSAvKkBfX1BVUkVfXyovbmV3IFZlY3RvcjMoKTtcbnZhciBtUm90ID0gLypAX19QVVJFX18qL25ldyBRdWF0ZXJuaW9uKCk7XG52YXIgbVNjYSA9IC8qQF9fUFVSRV9fKi9uZXcgVmVjdG9yMygpO1xudmFyIGFNLCBiTSwgY007XG5mdW5jdGlvbiBkYW1wTShjdXJyZW50LCB0YXJnZXQsIHNtb290aFRpbWUsIGRlbHRhLCBtYXhTcGVlZCwgZWFzaW5nLCBlcHMpIHtcbiAgdmFyIGN1ciA9IGN1cnJlbnQ7XG5cbiAgaWYgKGN1ci5fX2RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgIGN1ci5fX2RhbXAgPSB7XG4gICAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoKSxcbiAgICAgIHJvdGF0aW9uOiBuZXcgUXVhdGVybmlvbigpLFxuICAgICAgc2NhbGU6IG5ldyBWZWN0b3IzKClcbiAgICB9O1xuICAgIGN1cnJlbnQuZGVjb21wb3NlKGN1ci5fX2RhbXAucG9zaXRpb24sIGN1ci5fX2RhbXAucm90YXRpb24sIGN1ci5fX2RhbXAuc2NhbGUpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkgbWF0LnNldC5hcHBseShtYXQsIF90b0NvbnN1bWFibGVBcnJheSh0YXJnZXQpKTtlbHNlIG1hdC5jb3B5KHRhcmdldCk7XG4gIG1hdC5kZWNvbXBvc2UobVBvcywgbVJvdCwgbVNjYSk7XG4gIGFNID0gZGFtcDMoY3VyLl9fZGFtcC5wb3NpdGlvbiwgbVBvcywgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGJNID0gZGFtcFEoY3VyLl9fZGFtcC5yb3RhdGlvbiwgbVJvdCwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGNNID0gZGFtcDMoY3VyLl9fZGFtcC5zY2FsZSwgbVNjYSwgc21vb3RoVGltZSwgZGVsdGEsIG1heFNwZWVkLCBlYXNpbmcsIGVwcyk7XG4gIGN1cnJlbnQuY29tcG9zZShjdXIuX19kYW1wLnBvc2l0aW9uLCBjdXIuX19kYW1wLnJvdGF0aW9uLCBjdXIuX19kYW1wLnNjYWxlKTtcbiAgcmV0dXJuIGFNIHx8IGJNIHx8IGNNO1xufVxuXG52YXIgZWFzaW5nID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHJzcXc6IHJzcXcsXG4gIGV4cDogZXhwLFxuICBkYW1wOiBkYW1wLFxuICBkYW1wQW5nbGU6IGRhbXBBbmdsZSxcbiAgZGFtcDI6IGRhbXAyLFxuICBkYW1wMzogZGFtcDMsXG4gIGRhbXA0OiBkYW1wNCxcbiAgZGFtcEU6IGRhbXBFLFxuICBkYW1wQzogZGFtcEMsXG4gIGRhbXBROiBkYW1wUSxcbiAgZGFtcFM6IGRhbXBTLFxuICBkYW1wTTogZGFtcE1cbn0pO1xuXG5leHBvcnQgeyBleHAgYXMgYSwgZGFtcEFuZ2xlIGFzIGIsIGRhbXAyIGFzIGMsIGRhbXAgYXMgZCwgZWFzaW5nIGFzIGUsIGRhbXAzIGFzIGYsIGRhbXA0IGFzIGcsIGRhbXBFIGFzIGgsIGRhbXBDIGFzIGksIGRhbXBRIGFzIGosIGRhbXBTIGFzIGssIGRhbXBNIGFzIGwsIHJzcXcgYXMgciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/easing-3be59c6d.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/geometry-982366ff.esm.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/geometry-982366ff.esm.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   R: () => (/* binding */ RoundedPlaneGeometry),\n/* harmony export */   a: () => (/* binding */ applySphereUV),\n/* harmony export */   b: () => (/* binding */ applyBoxUV),\n/* harmony export */   g: () => (/* binding */ geometry)\n/* harmony export */ });\n/* harmony import */ var _classCallCheck_9098b006_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classCallCheck-9098b006.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/classCallCheck-9098b006.esm.js\");\n/* harmony import */ var _isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isNativeReflectConstruct-5594d075.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/isNativeReflectConstruct-5594d075.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n\n\n\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) (0,_isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_1__._)(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = (0,_isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_1__.a)();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nvar RoundedPlaneGeometry = /*#__PURE__*/function (_THREE$BufferGeometry) {\n  _inherits(RoundedPlaneGeometry, _THREE$BufferGeometry);\n\n  var _super = _createSuper(RoundedPlaneGeometry);\n\n  function RoundedPlaneGeometry() {\n    var _this;\n\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.2;\n    var segments = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 16;\n\n    (0,_classCallCheck_9098b006_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this, RoundedPlaneGeometry);\n\n    _this = _super.call(this); // helper const's\n\n    var wi = width / 2 - radius; // inner width\n\n    var hi = height / 2 - radius; // inner height\n\n    var ul = radius / width; // u left\n\n    var ur = (width - radius) / width; // u right\n\n    var vl = radius / height; // v low\n\n    var vh = (height - radius) / height; // v high\n\n    var positions = [wi, hi, 0, -wi, hi, 0, -wi, -hi, 0, wi, -hi, 0];\n    var uvs = [ur, vh, ul, vh, ul, vl, ur, vl];\n    var n = [3 * (segments + 1) + 3, 3 * (segments + 1) + 4, segments + 4, segments + 5, 2 * (segments + 1) + 4, 2, 1, 2 * (segments + 1) + 3, 3, 4 * (segments + 1) + 3, 4, 0];\n    var indices = [n[0], n[1], n[2], n[0], n[2], n[3], n[4], n[5], n[6], n[4], n[6], n[7], n[8], n[9], n[10], n[8], n[10], n[11]];\n    var phi, cos, sin, xc, yc, uc, vc, idx;\n\n    for (var i = 0; i < 4; i++) {\n      xc = i < 1 || i > 2 ? wi : -wi;\n      yc = i < 2 ? hi : -hi;\n      uc = i < 1 || i > 2 ? ur : ul;\n      vc = i < 2 ? vh : vl;\n\n      for (var j = 0; j <= segments; j++) {\n        phi = Math.PI / 2 * (i + j / segments);\n        cos = Math.cos(phi);\n        sin = Math.sin(phi);\n        positions.push(xc + radius * cos, yc + radius * sin, 0);\n        uvs.push(uc + ul * cos, vc + vl * sin);\n\n        if (j < segments) {\n          idx = (segments + 1) * i + j + 4;\n          indices.push(i, idx, idx + 1);\n        }\n      }\n    }\n\n    _this.setIndex(new three__WEBPACK_IMPORTED_MODULE_2__.BufferAttribute(new Uint32Array(indices), 1));\n\n    _this.setAttribute(\"position\", new three__WEBPACK_IMPORTED_MODULE_2__.BufferAttribute(new Float32Array(positions), 3));\n\n    _this.setAttribute(\"uv\", new three__WEBPACK_IMPORTED_MODULE_2__.BufferAttribute(new Float32Array(uvs), 2));\n\n    return _this;\n  }\n\n  return RoundedPlaneGeometry;\n}(three__WEBPACK_IMPORTED_MODULE_2__.BufferGeometry); // Author: https://stackoverflow.com/users/268905/knee-cola\n// https://stackoverflow.com/questions/20774648/three-js-generate-uv-coordinate\n\nfunction applySphereUV(bufferGeometry) {\n  var uvs = [];\n  var vertices = [];\n\n  for (var i = 0; i < bufferGeometry.attributes.position.array.length / 3; i++) {\n    var x = bufferGeometry.attributes.position.array[i * 3 + 0];\n    var y = bufferGeometry.attributes.position.array[i * 3 + 1];\n    var z = bufferGeometry.attributes.position.array[i * 3 + 2];\n    vertices.push(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(x, y, z));\n  }\n\n  var polarVertices = vertices.map(cartesian2polar);\n\n  for (var _i = 0; _i < polarVertices.length / 3; _i++) {\n    var tri = new three__WEBPACK_IMPORTED_MODULE_2__.Triangle(vertices[_i * 3 + 0], vertices[_i * 3 + 1], vertices[_i * 3 + 2]);\n    var normal = tri.getNormal(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3());\n\n    for (var f = 0; f < 3; f++) {\n      var vertex = polarVertices[_i * 3 + f];\n\n      if (vertex.theta === 0 && (vertex.phi === 0 || vertex.phi === Math.PI)) {\n        var alignedVertice = vertex.phi === 0 ? _i * 3 + 1 : _i * 3 + 0;\n        vertex = {\n          r: vertex.r,\n          phi: vertex.phi,\n          theta: polarVertices[alignedVertice].theta\n        };\n      }\n\n      if (vertex.theta === Math.PI && cartesian2polar(normal).theta < Math.PI / 2) {\n        vertex.theta = -Math.PI;\n      }\n\n      var canvasPoint = polar2canvas(vertex);\n      uvs.push(1 - canvasPoint.x, 1 - canvasPoint.y);\n    }\n  }\n\n  if (bufferGeometry.attributes.uv) delete bufferGeometry.attributes.uv;\n  bufferGeometry.setAttribute(\"uv\", new three__WEBPACK_IMPORTED_MODULE_2__.Float32BufferAttribute(uvs, 2));\n  bufferGeometry.attributes.uv.needsUpdate = true;\n  return bufferGeometry;\n}\n\nfunction cartesian2polar(position) {\n  var r = Math.sqrt(position.x * position.x + position.z * position.z + position.y * position.y);\n  return {\n    r: r,\n    phi: Math.acos(position.y / r),\n    theta: Math.atan2(position.z, position.x)\n  };\n}\n\nfunction polar2canvas(polarPoint) {\n  return {\n    y: polarPoint.phi / Math.PI,\n    x: (polarPoint.theta + Math.PI) / (2 * Math.PI)\n  };\n} // Author: Alex Khoroshylov (https://stackoverflow.com/users/8742287/alex-khoroshylov)\n// https://stackoverflow.com/questions/20774648/three-js-generate-uv-coordinate\n\n\nfunction applyBoxUV(bufferGeometry) {\n  bufferGeometry.computeBoundingBox();\n  var bboxSize = bufferGeometry.boundingBox.getSize(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3());\n  var boxSize = Math.min(bboxSize.x, bboxSize.y, bboxSize.z);\n  var boxGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.BoxGeometry(boxSize, boxSize, boxSize);\n  var cube = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(boxGeometry);\n  cube.rotation.set(0, 0, 0);\n  cube.updateWorldMatrix(true, false);\n  var transformMatrix = cube.matrix.clone().invert();\n  var uvBbox = new three__WEBPACK_IMPORTED_MODULE_2__.Box3(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(-boxSize / 2, -boxSize / 2, -boxSize / 2), new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(boxSize / 2, boxSize / 2, boxSize / 2));\n\n  _applyBoxUV(bufferGeometry, transformMatrix, uvBbox, boxSize);\n\n  bufferGeometry.attributes.uv.needsUpdate = true;\n  return bufferGeometry;\n}\n\nfunction _applyBoxUV(geom, transformMatrix, bbox, bbox_max_size) {\n  var coords = [];\n  coords.length = 2 * geom.attributes.position.array.length / 3; //maps 3 verts of 1 face on the better side of the cube\n  //side of the cube can be XY, XZ or YZ\n\n  var makeUVs = function makeUVs(v0, v1, v2) {\n    //pre-rotate the model so that cube sides match world axis\n    v0.applyMatrix4(transformMatrix);\n    v1.applyMatrix4(transformMatrix);\n    v2.applyMatrix4(transformMatrix); //get normal of the face, to know into which cube side it maps better\n\n    var n = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    n.crossVectors(v1.clone().sub(v0), v1.clone().sub(v2)).normalize();\n    n.x = Math.abs(n.x);\n    n.y = Math.abs(n.y);\n    n.z = Math.abs(n.z);\n    var uv0 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector2();\n    var uv1 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector2();\n    var uv2 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector2(); // xz mapping\n\n    if (n.y > n.x && n.y > n.z) {\n      uv0.x = (v0.x - bbox.min.x) / bbox_max_size;\n      uv0.y = (bbox.max.z - v0.z) / bbox_max_size;\n      uv1.x = (v1.x - bbox.min.x) / bbox_max_size;\n      uv1.y = (bbox.max.z - v1.z) / bbox_max_size;\n      uv2.x = (v2.x - bbox.min.x) / bbox_max_size;\n      uv2.y = (bbox.max.z - v2.z) / bbox_max_size;\n    } else if (n.x > n.y && n.x > n.z) {\n      uv0.x = (v0.z - bbox.min.z) / bbox_max_size;\n      uv0.y = (v0.y - bbox.min.y) / bbox_max_size;\n      uv1.x = (v1.z - bbox.min.z) / bbox_max_size;\n      uv1.y = (v1.y - bbox.min.y) / bbox_max_size;\n      uv2.x = (v2.z - bbox.min.z) / bbox_max_size;\n      uv2.y = (v2.y - bbox.min.y) / bbox_max_size;\n    } else if (n.z > n.y && n.z > n.x) {\n      uv0.x = (v0.x - bbox.min.x) / bbox_max_size;\n      uv0.y = (v0.y - bbox.min.y) / bbox_max_size;\n      uv1.x = (v1.x - bbox.min.x) / bbox_max_size;\n      uv1.y = (v1.y - bbox.min.y) / bbox_max_size;\n      uv2.x = (v2.x - bbox.min.x) / bbox_max_size;\n      uv2.y = (v2.y - bbox.min.y) / bbox_max_size;\n    }\n\n    return {\n      uv0: uv0,\n      uv1: uv1,\n      uv2: uv2\n    };\n  };\n\n  if (geom.index) {\n    // is it indexed buffer geometry?\n    for (var vi = 0; vi < geom.index.array.length; vi += 3) {\n      var idx0 = geom.index.array[vi];\n      var idx1 = geom.index.array[vi + 1];\n      var idx2 = geom.index.array[vi + 2];\n      var vx0 = geom.attributes.position.array[3 * idx0];\n      var vy0 = geom.attributes.position.array[3 * idx0 + 1];\n      var vz0 = geom.attributes.position.array[3 * idx0 + 2];\n      var vx1 = geom.attributes.position.array[3 * idx1];\n      var vy1 = geom.attributes.position.array[3 * idx1 + 1];\n      var vz1 = geom.attributes.position.array[3 * idx1 + 2];\n      var vx2 = geom.attributes.position.array[3 * idx2];\n      var vy2 = geom.attributes.position.array[3 * idx2 + 1];\n      var vz2 = geom.attributes.position.array[3 * idx2 + 2];\n      var v0 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(vx0, vy0, vz0);\n      var v1 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(vx1, vy1, vz1);\n      var v2 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(vx2, vy2, vz2);\n      var uvs = makeUVs(v0, v1, v2);\n      coords[2 * idx0] = uvs.uv0.x;\n      coords[2 * idx0 + 1] = uvs.uv0.y;\n      coords[2 * idx1] = uvs.uv1.x;\n      coords[2 * idx1 + 1] = uvs.uv1.y;\n      coords[2 * idx2] = uvs.uv2.x;\n      coords[2 * idx2 + 1] = uvs.uv2.y;\n    }\n  } else {\n    for (var _vi = 0; _vi < geom.attributes.position.array.length; _vi += 9) {\n      var _vx = geom.attributes.position.array[_vi];\n      var _vy = geom.attributes.position.array[_vi + 1];\n      var _vz = geom.attributes.position.array[_vi + 2];\n      var _vx2 = geom.attributes.position.array[_vi + 3];\n      var _vy2 = geom.attributes.position.array[_vi + 4];\n      var _vz2 = geom.attributes.position.array[_vi + 5];\n      var _vx3 = geom.attributes.position.array[_vi + 6];\n      var _vy3 = geom.attributes.position.array[_vi + 7];\n      var _vz3 = geom.attributes.position.array[_vi + 8];\n\n      var _v = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(_vx, _vy, _vz);\n\n      var _v2 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(_vx2, _vy2, _vz2);\n\n      var _v3 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(_vx3, _vy3, _vz3);\n\n      var _uvs = makeUVs(_v, _v2, _v3);\n\n      var _idx = _vi / 3;\n\n      var _idx2 = _idx + 1;\n\n      var _idx3 = _idx + 2;\n\n      coords[2 * _idx] = _uvs.uv0.x;\n      coords[2 * _idx + 1] = _uvs.uv0.y;\n      coords[2 * _idx2] = _uvs.uv1.x;\n      coords[2 * _idx2 + 1] = _uvs.uv1.y;\n      coords[2 * _idx3] = _uvs.uv2.x;\n      coords[2 * _idx3 + 1] = _uvs.uv2.y;\n    }\n  }\n\n  if (geom.attributes.uv) delete geom.attributes.uv;\n  geom.setAttribute(\"uv\", new three__WEBPACK_IMPORTED_MODULE_2__.Float32BufferAttribute(coords, 2));\n}\n\nvar geometry = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  RoundedPlaneGeometry: RoundedPlaneGeometry,\n  applySphereUV: applySphereUV,\n  applyBoxUV: applyBoxUV\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L2dlb21ldHJ5LTk4MjM2NmZmLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdFO0FBQzBDO0FBQ25GOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0JBQWtCLDRFQUFlO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0MsNEVBQXlCO0FBQzNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksa0VBQWU7O0FBRW5CLCtCQUErQjs7QUFFL0IsaUNBQWlDOztBQUVqQyxrQ0FBa0M7O0FBRWxDLDZCQUE2Qjs7QUFFN0IsdUNBQXVDOztBQUV2Qyw4QkFBOEI7O0FBRTlCLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsZUFBZTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsa0RBQXFCOztBQUU1Qyx1Q0FBdUMsa0RBQXFCOztBQUU1RCxpQ0FBaUMsa0RBQXFCOztBQUV0RDtBQUNBOztBQUVBO0FBQ0EsQ0FBQyxDQUFDLGlEQUFvQixHQUFHO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IseURBQXlEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwQ0FBYTtBQUNuQzs7QUFFQTs7QUFFQSxtQkFBbUIsK0JBQStCO0FBQ2xELGtCQUFrQiwyQ0FBYztBQUNoQyxtQ0FBbUMsMENBQWE7O0FBRWhELG9CQUFvQixPQUFPO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0NBQXdDLHlEQUE0QjtBQUNwRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7QUFHQTtBQUNBO0FBQ0Esd0RBQXdELDBDQUFhO0FBQ3JFO0FBQ0Esd0JBQXdCLDhDQUFpQjtBQUN6QyxpQkFBaUIsdUNBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVDQUFVLEtBQUssMENBQWEsZ0RBQWdELDBDQUFhOztBQUU1Rzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQzs7QUFFdEMsZ0JBQWdCLDBDQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBDQUFhO0FBQy9CLGtCQUFrQiwwQ0FBYTtBQUMvQixrQkFBa0IsMENBQWEsSUFBSTs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLDhCQUE4QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMENBQWE7QUFDaEMsbUJBQW1CLDBDQUFhO0FBQ2hDLG1CQUFtQiwwQ0FBYTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHNCQUFzQiw2Q0FBNkM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQiwwQ0FBYTs7QUFFaEMsb0JBQW9CLDBDQUFhOztBQUVqQyxvQkFBb0IsMENBQWE7O0FBRWpDOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIseURBQTRCO0FBQzFEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUV3RiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxccGFyZW50bHl0aWNzXFxub2RlX21vZHVsZXNcXEByZWFjdC10aHJlZVxccG9zdHByb2Nlc3NpbmdcXG5vZGVfbW9kdWxlc1xcbWFhdGhcXGRpc3RcXGdlb21ldHJ5LTk4MjM2NmZmLmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfIGFzIF9jbGFzc0NhbGxDaGVjayB9IGZyb20gJy4vY2xhc3NDYWxsQ2hlY2stOTA5OGIwMDYuZXNtLmpzJztcbmltcG9ydCB7IF8gYXMgX3NldFByb3RvdHlwZU9mLCBhIGFzIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgfSBmcm9tICcuL2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC01NTk0ZDA3NS5lc20uanMnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7XG4gIH07XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7XG4gIHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpO1xuICByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7XG4gICAgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLFxuICAgICAgICByZXN1bHQ7XG5cbiAgICBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkge1xuICAgICAgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjtcbiAgICAgIHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7XG4gIH07XG59XG5cbnZhciBSb3VuZGVkUGxhbmVHZW9tZXRyeSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1RIUkVFJEJ1ZmZlckdlb21ldHJ5KSB7XG4gIF9pbmhlcml0cyhSb3VuZGVkUGxhbmVHZW9tZXRyeSwgX1RIUkVFJEJ1ZmZlckdlb21ldHJ5KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJvdW5kZWRQbGFuZUdlb21ldHJ5KTtcblxuICBmdW5jdGlvbiBSb3VuZGVkUGxhbmVHZW9tZXRyeSgpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgd2lkdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDI7XG4gICAgdmFyIGhlaWdodCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTtcbiAgICB2YXIgcmFkaXVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwLjI7XG4gICAgdmFyIHNlZ21lbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAxNjtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3VuZGVkUGxhbmVHZW9tZXRyeSk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOyAvLyBoZWxwZXIgY29uc3Qnc1xuXG4gICAgdmFyIHdpID0gd2lkdGggLyAyIC0gcmFkaXVzOyAvLyBpbm5lciB3aWR0aFxuXG4gICAgdmFyIGhpID0gaGVpZ2h0IC8gMiAtIHJhZGl1czsgLy8gaW5uZXIgaGVpZ2h0XG5cbiAgICB2YXIgdWwgPSByYWRpdXMgLyB3aWR0aDsgLy8gdSBsZWZ0XG5cbiAgICB2YXIgdXIgPSAod2lkdGggLSByYWRpdXMpIC8gd2lkdGg7IC8vIHUgcmlnaHRcblxuICAgIHZhciB2bCA9IHJhZGl1cyAvIGhlaWdodDsgLy8gdiBsb3dcblxuICAgIHZhciB2aCA9IChoZWlnaHQgLSByYWRpdXMpIC8gaGVpZ2h0OyAvLyB2IGhpZ2hcblxuICAgIHZhciBwb3NpdGlvbnMgPSBbd2ksIGhpLCAwLCAtd2ksIGhpLCAwLCAtd2ksIC1oaSwgMCwgd2ksIC1oaSwgMF07XG4gICAgdmFyIHV2cyA9IFt1ciwgdmgsIHVsLCB2aCwgdWwsIHZsLCB1ciwgdmxdO1xuICAgIHZhciBuID0gWzMgKiAoc2VnbWVudHMgKyAxKSArIDMsIDMgKiAoc2VnbWVudHMgKyAxKSArIDQsIHNlZ21lbnRzICsgNCwgc2VnbWVudHMgKyA1LCAyICogKHNlZ21lbnRzICsgMSkgKyA0LCAyLCAxLCAyICogKHNlZ21lbnRzICsgMSkgKyAzLCAzLCA0ICogKHNlZ21lbnRzICsgMSkgKyAzLCA0LCAwXTtcbiAgICB2YXIgaW5kaWNlcyA9IFtuWzBdLCBuWzFdLCBuWzJdLCBuWzBdLCBuWzJdLCBuWzNdLCBuWzRdLCBuWzVdLCBuWzZdLCBuWzRdLCBuWzZdLCBuWzddLCBuWzhdLCBuWzldLCBuWzEwXSwgbls4XSwgblsxMF0sIG5bMTFdXTtcbiAgICB2YXIgcGhpLCBjb3MsIHNpbiwgeGMsIHljLCB1YywgdmMsIGlkeDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICB4YyA9IGkgPCAxIHx8IGkgPiAyID8gd2kgOiAtd2k7XG4gICAgICB5YyA9IGkgPCAyID8gaGkgOiAtaGk7XG4gICAgICB1YyA9IGkgPCAxIHx8IGkgPiAyID8gdXIgOiB1bDtcbiAgICAgIHZjID0gaSA8IDIgPyB2aCA6IHZsO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8PSBzZWdtZW50czsgaisrKSB7XG4gICAgICAgIHBoaSA9IE1hdGguUEkgLyAyICogKGkgKyBqIC8gc2VnbWVudHMpO1xuICAgICAgICBjb3MgPSBNYXRoLmNvcyhwaGkpO1xuICAgICAgICBzaW4gPSBNYXRoLnNpbihwaGkpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaCh4YyArIHJhZGl1cyAqIGNvcywgeWMgKyByYWRpdXMgKiBzaW4sIDApO1xuICAgICAgICB1dnMucHVzaCh1YyArIHVsICogY29zLCB2YyArIHZsICogc2luKTtcblxuICAgICAgICBpZiAoaiA8IHNlZ21lbnRzKSB7XG4gICAgICAgICAgaWR4ID0gKHNlZ21lbnRzICsgMSkgKiBpICsgaiArIDQ7XG4gICAgICAgICAgaW5kaWNlcy5wdXNoKGksIGlkeCwgaWR4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdGhpcy5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50MzJBcnJheShpbmRpY2VzKSwgMSkpO1xuXG4gICAgX3RoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHBvc2l0aW9ucyksIDMpKTtcblxuICAgIF90aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh1dnMpLCAyKSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICByZXR1cm4gUm91bmRlZFBsYW5lR2VvbWV0cnk7XG59KFRIUkVFLkJ1ZmZlckdlb21ldHJ5KTsgLy8gQXV0aG9yOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3VzZXJzLzI2ODkwNS9rbmVlLWNvbGFcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIwNzc0NjQ4L3RocmVlLWpzLWdlbmVyYXRlLXV2LWNvb3JkaW5hdGVcblxuZnVuY3Rpb24gYXBwbHlTcGhlcmVVVihidWZmZXJHZW9tZXRyeSkge1xuICB2YXIgdXZzID0gW107XG4gIHZhciB2ZXJ0aWNlcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyR2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheS5sZW5ndGggLyAzOyBpKyspIHtcbiAgICB2YXIgeCA9IGJ1ZmZlckdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbaSAqIDMgKyAwXTtcbiAgICB2YXIgeSA9IGJ1ZmZlckdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbaSAqIDMgKyAxXTtcbiAgICB2YXIgeiA9IGJ1ZmZlckdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbaSAqIDMgKyAyXTtcbiAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKHgsIHksIHopKTtcbiAgfVxuXG4gIHZhciBwb2xhclZlcnRpY2VzID0gdmVydGljZXMubWFwKGNhcnRlc2lhbjJwb2xhcik7XG5cbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHBvbGFyVmVydGljZXMubGVuZ3RoIC8gMzsgX2krKykge1xuICAgIHZhciB0cmkgPSBuZXcgVEhSRUUuVHJpYW5nbGUodmVydGljZXNbX2kgKiAzICsgMF0sIHZlcnRpY2VzW19pICogMyArIDFdLCB2ZXJ0aWNlc1tfaSAqIDMgKyAyXSk7XG4gICAgdmFyIG5vcm1hbCA9IHRyaS5nZXROb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG5cbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IDM7IGYrKykge1xuICAgICAgdmFyIHZlcnRleCA9IHBvbGFyVmVydGljZXNbX2kgKiAzICsgZl07XG5cbiAgICAgIGlmICh2ZXJ0ZXgudGhldGEgPT09IDAgJiYgKHZlcnRleC5waGkgPT09IDAgfHwgdmVydGV4LnBoaSA9PT0gTWF0aC5QSSkpIHtcbiAgICAgICAgdmFyIGFsaWduZWRWZXJ0aWNlID0gdmVydGV4LnBoaSA9PT0gMCA/IF9pICogMyArIDEgOiBfaSAqIDMgKyAwO1xuICAgICAgICB2ZXJ0ZXggPSB7XG4gICAgICAgICAgcjogdmVydGV4LnIsXG4gICAgICAgICAgcGhpOiB2ZXJ0ZXgucGhpLFxuICAgICAgICAgIHRoZXRhOiBwb2xhclZlcnRpY2VzW2FsaWduZWRWZXJ0aWNlXS50aGV0YVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAodmVydGV4LnRoZXRhID09PSBNYXRoLlBJICYmIGNhcnRlc2lhbjJwb2xhcihub3JtYWwpLnRoZXRhIDwgTWF0aC5QSSAvIDIpIHtcbiAgICAgICAgdmVydGV4LnRoZXRhID0gLU1hdGguUEk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjYW52YXNQb2ludCA9IHBvbGFyMmNhbnZhcyh2ZXJ0ZXgpO1xuICAgICAgdXZzLnB1c2goMSAtIGNhbnZhc1BvaW50LngsIDEgLSBjYW52YXNQb2ludC55KTtcbiAgICB9XG4gIH1cblxuICBpZiAoYnVmZmVyR2VvbWV0cnkuYXR0cmlidXRlcy51dikgZGVsZXRlIGJ1ZmZlckdlb21ldHJ5LmF0dHJpYnV0ZXMudXY7XG4gIGJ1ZmZlckdlb21ldHJ5LnNldEF0dHJpYnV0ZShcInV2XCIsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHV2cywgMikpO1xuICBidWZmZXJHZW9tZXRyeS5hdHRyaWJ1dGVzLnV2Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgcmV0dXJuIGJ1ZmZlckdlb21ldHJ5O1xufVxuXG5mdW5jdGlvbiBjYXJ0ZXNpYW4ycG9sYXIocG9zaXRpb24pIHtcbiAgdmFyIHIgPSBNYXRoLnNxcnQocG9zaXRpb24ueCAqIHBvc2l0aW9uLnggKyBwb3NpdGlvbi56ICogcG9zaXRpb24ueiArIHBvc2l0aW9uLnkgKiBwb3NpdGlvbi55KTtcbiAgcmV0dXJuIHtcbiAgICByOiByLFxuICAgIHBoaTogTWF0aC5hY29zKHBvc2l0aW9uLnkgLyByKSxcbiAgICB0aGV0YTogTWF0aC5hdGFuMihwb3NpdGlvbi56LCBwb3NpdGlvbi54KVxuICB9O1xufVxuXG5mdW5jdGlvbiBwb2xhcjJjYW52YXMocG9sYXJQb2ludCkge1xuICByZXR1cm4ge1xuICAgIHk6IHBvbGFyUG9pbnQucGhpIC8gTWF0aC5QSSxcbiAgICB4OiAocG9sYXJQb2ludC50aGV0YSArIE1hdGguUEkpIC8gKDIgKiBNYXRoLlBJKVxuICB9O1xufSAvLyBBdXRob3I6IEFsZXggS2hvcm9zaHlsb3YgKGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vdXNlcnMvODc0MjI4Ny9hbGV4LWtob3Jvc2h5bG92KVxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjA3NzQ2NDgvdGhyZWUtanMtZ2VuZXJhdGUtdXYtY29vcmRpbmF0ZVxuXG5cbmZ1bmN0aW9uIGFwcGx5Qm94VVYoYnVmZmVyR2VvbWV0cnkpIHtcbiAgYnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk7XG4gIHZhciBiYm94U2l6ZSA9IGJ1ZmZlckdlb21ldHJ5LmJvdW5kaW5nQm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gIHZhciBib3hTaXplID0gTWF0aC5taW4oYmJveFNpemUueCwgYmJveFNpemUueSwgYmJveFNpemUueik7XG4gIHZhciBib3hHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShib3hTaXplLCBib3hTaXplLCBib3hTaXplKTtcbiAgdmFyIGN1YmUgPSBuZXcgVEhSRUUuTWVzaChib3hHZW9tZXRyeSk7XG4gIGN1YmUucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICBjdWJlLnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsIGZhbHNlKTtcbiAgdmFyIHRyYW5zZm9ybU1hdHJpeCA9IGN1YmUubWF0cml4LmNsb25lKCkuaW52ZXJ0KCk7XG4gIHZhciB1dkJib3ggPSBuZXcgVEhSRUUuQm94MyhuZXcgVEhSRUUuVmVjdG9yMygtYm94U2l6ZSAvIDIsIC1ib3hTaXplIC8gMiwgLWJveFNpemUgLyAyKSwgbmV3IFRIUkVFLlZlY3RvcjMoYm94U2l6ZSAvIDIsIGJveFNpemUgLyAyLCBib3hTaXplIC8gMikpO1xuXG4gIF9hcHBseUJveFVWKGJ1ZmZlckdlb21ldHJ5LCB0cmFuc2Zvcm1NYXRyaXgsIHV2QmJveCwgYm94U2l6ZSk7XG5cbiAgYnVmZmVyR2VvbWV0cnkuYXR0cmlidXRlcy51di5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gIHJldHVybiBidWZmZXJHZW9tZXRyeTtcbn1cblxuZnVuY3Rpb24gX2FwcGx5Qm94VVYoZ2VvbSwgdHJhbnNmb3JtTWF0cml4LCBiYm94LCBiYm94X21heF9zaXplKSB7XG4gIHZhciBjb29yZHMgPSBbXTtcbiAgY29vcmRzLmxlbmd0aCA9IDIgKiBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkubGVuZ3RoIC8gMzsgLy9tYXBzIDMgdmVydHMgb2YgMSBmYWNlIG9uIHRoZSBiZXR0ZXIgc2lkZSBvZiB0aGUgY3ViZVxuICAvL3NpZGUgb2YgdGhlIGN1YmUgY2FuIGJlIFhZLCBYWiBvciBZWlxuXG4gIHZhciBtYWtlVVZzID0gZnVuY3Rpb24gbWFrZVVWcyh2MCwgdjEsIHYyKSB7XG4gICAgLy9wcmUtcm90YXRlIHRoZSBtb2RlbCBzbyB0aGF0IGN1YmUgc2lkZXMgbWF0Y2ggd29ybGQgYXhpc1xuICAgIHYwLmFwcGx5TWF0cml4NCh0cmFuc2Zvcm1NYXRyaXgpO1xuICAgIHYxLmFwcGx5TWF0cml4NCh0cmFuc2Zvcm1NYXRyaXgpO1xuICAgIHYyLmFwcGx5TWF0cml4NCh0cmFuc2Zvcm1NYXRyaXgpOyAvL2dldCBub3JtYWwgb2YgdGhlIGZhY2UsIHRvIGtub3cgaW50byB3aGljaCBjdWJlIHNpZGUgaXQgbWFwcyBiZXR0ZXJcblxuICAgIHZhciBuID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICBuLmNyb3NzVmVjdG9ycyh2MS5jbG9uZSgpLnN1Yih2MCksIHYxLmNsb25lKCkuc3ViKHYyKSkubm9ybWFsaXplKCk7XG4gICAgbi54ID0gTWF0aC5hYnMobi54KTtcbiAgICBuLnkgPSBNYXRoLmFicyhuLnkpO1xuICAgIG4ueiA9IE1hdGguYWJzKG4ueik7XG4gICAgdmFyIHV2MCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG4gICAgdmFyIHV2MSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG4gICAgdmFyIHV2MiA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7IC8vIHh6IG1hcHBpbmdcblxuICAgIGlmIChuLnkgPiBuLnggJiYgbi55ID4gbi56KSB7XG4gICAgICB1djAueCA9ICh2MC54IC0gYmJveC5taW4ueCkgLyBiYm94X21heF9zaXplO1xuICAgICAgdXYwLnkgPSAoYmJveC5tYXgueiAtIHYwLnopIC8gYmJveF9tYXhfc2l6ZTtcbiAgICAgIHV2MS54ID0gKHYxLnggLSBiYm94Lm1pbi54KSAvIGJib3hfbWF4X3NpemU7XG4gICAgICB1djEueSA9IChiYm94Lm1heC56IC0gdjEueikgLyBiYm94X21heF9zaXplO1xuICAgICAgdXYyLnggPSAodjIueCAtIGJib3gubWluLngpIC8gYmJveF9tYXhfc2l6ZTtcbiAgICAgIHV2Mi55ID0gKGJib3gubWF4LnogLSB2Mi56KSAvIGJib3hfbWF4X3NpemU7XG4gICAgfSBlbHNlIGlmIChuLnggPiBuLnkgJiYgbi54ID4gbi56KSB7XG4gICAgICB1djAueCA9ICh2MC56IC0gYmJveC5taW4ueikgLyBiYm94X21heF9zaXplO1xuICAgICAgdXYwLnkgPSAodjAueSAtIGJib3gubWluLnkpIC8gYmJveF9tYXhfc2l6ZTtcbiAgICAgIHV2MS54ID0gKHYxLnogLSBiYm94Lm1pbi56KSAvIGJib3hfbWF4X3NpemU7XG4gICAgICB1djEueSA9ICh2MS55IC0gYmJveC5taW4ueSkgLyBiYm94X21heF9zaXplO1xuICAgICAgdXYyLnggPSAodjIueiAtIGJib3gubWluLnopIC8gYmJveF9tYXhfc2l6ZTtcbiAgICAgIHV2Mi55ID0gKHYyLnkgLSBiYm94Lm1pbi55KSAvIGJib3hfbWF4X3NpemU7XG4gICAgfSBlbHNlIGlmIChuLnogPiBuLnkgJiYgbi56ID4gbi54KSB7XG4gICAgICB1djAueCA9ICh2MC54IC0gYmJveC5taW4ueCkgLyBiYm94X21heF9zaXplO1xuICAgICAgdXYwLnkgPSAodjAueSAtIGJib3gubWluLnkpIC8gYmJveF9tYXhfc2l6ZTtcbiAgICAgIHV2MS54ID0gKHYxLnggLSBiYm94Lm1pbi54KSAvIGJib3hfbWF4X3NpemU7XG4gICAgICB1djEueSA9ICh2MS55IC0gYmJveC5taW4ueSkgLyBiYm94X21heF9zaXplO1xuICAgICAgdXYyLnggPSAodjIueCAtIGJib3gubWluLngpIC8gYmJveF9tYXhfc2l6ZTtcbiAgICAgIHV2Mi55ID0gKHYyLnkgLSBiYm94Lm1pbi55KSAvIGJib3hfbWF4X3NpemU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHV2MDogdXYwLFxuICAgICAgdXYxOiB1djEsXG4gICAgICB1djI6IHV2MlxuICAgIH07XG4gIH07XG5cbiAgaWYgKGdlb20uaW5kZXgpIHtcbiAgICAvLyBpcyBpdCBpbmRleGVkIGJ1ZmZlciBnZW9tZXRyeT9cbiAgICBmb3IgKHZhciB2aSA9IDA7IHZpIDwgZ2VvbS5pbmRleC5hcnJheS5sZW5ndGg7IHZpICs9IDMpIHtcbiAgICAgIHZhciBpZHgwID0gZ2VvbS5pbmRleC5hcnJheVt2aV07XG4gICAgICB2YXIgaWR4MSA9IGdlb20uaW5kZXguYXJyYXlbdmkgKyAxXTtcbiAgICAgIHZhciBpZHgyID0gZ2VvbS5pbmRleC5hcnJheVt2aSArIDJdO1xuICAgICAgdmFyIHZ4MCA9IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVszICogaWR4MF07XG4gICAgICB2YXIgdnkwID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5WzMgKiBpZHgwICsgMV07XG4gICAgICB2YXIgdnowID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5WzMgKiBpZHgwICsgMl07XG4gICAgICB2YXIgdngxID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5WzMgKiBpZHgxXTtcbiAgICAgIHZhciB2eTEgPSBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbMyAqIGlkeDEgKyAxXTtcbiAgICAgIHZhciB2ejEgPSBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbMyAqIGlkeDEgKyAyXTtcbiAgICAgIHZhciB2eDIgPSBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbMyAqIGlkeDJdO1xuICAgICAgdmFyIHZ5MiA9IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVszICogaWR4MiArIDFdO1xuICAgICAgdmFyIHZ6MiA9IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVszICogaWR4MiArIDJdO1xuICAgICAgdmFyIHYwID0gbmV3IFRIUkVFLlZlY3RvcjModngwLCB2eTAsIHZ6MCk7XG4gICAgICB2YXIgdjEgPSBuZXcgVEhSRUUuVmVjdG9yMyh2eDEsIHZ5MSwgdnoxKTtcbiAgICAgIHZhciB2MiA9IG5ldyBUSFJFRS5WZWN0b3IzKHZ4MiwgdnkyLCB2ejIpO1xuICAgICAgdmFyIHV2cyA9IG1ha2VVVnModjAsIHYxLCB2Mik7XG4gICAgICBjb29yZHNbMiAqIGlkeDBdID0gdXZzLnV2MC54O1xuICAgICAgY29vcmRzWzIgKiBpZHgwICsgMV0gPSB1dnMudXYwLnk7XG4gICAgICBjb29yZHNbMiAqIGlkeDFdID0gdXZzLnV2MS54O1xuICAgICAgY29vcmRzWzIgKiBpZHgxICsgMV0gPSB1dnMudXYxLnk7XG4gICAgICBjb29yZHNbMiAqIGlkeDJdID0gdXZzLnV2Mi54O1xuICAgICAgY29vcmRzWzIgKiBpZHgyICsgMV0gPSB1dnMudXYyLnk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIF92aSA9IDA7IF92aSA8IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheS5sZW5ndGg7IF92aSArPSA5KSB7XG4gICAgICB2YXIgX3Z4ID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5W192aV07XG4gICAgICB2YXIgX3Z5ID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5W192aSArIDFdO1xuICAgICAgdmFyIF92eiA9IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVtfdmkgKyAyXTtcbiAgICAgIHZhciBfdngyID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5W192aSArIDNdO1xuICAgICAgdmFyIF92eTIgPSBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbX3ZpICsgNF07XG4gICAgICB2YXIgX3Z6MiA9IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVtfdmkgKyA1XTtcbiAgICAgIHZhciBfdngzID0gZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5W192aSArIDZdO1xuICAgICAgdmFyIF92eTMgPSBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlbX3ZpICsgN107XG4gICAgICB2YXIgX3Z6MyA9IGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVtfdmkgKyA4XTtcblxuICAgICAgdmFyIF92ID0gbmV3IFRIUkVFLlZlY3RvcjMoX3Z4LCBfdnksIF92eik7XG5cbiAgICAgIHZhciBfdjIgPSBuZXcgVEhSRUUuVmVjdG9yMyhfdngyLCBfdnkyLCBfdnoyKTtcblxuICAgICAgdmFyIF92MyA9IG5ldyBUSFJFRS5WZWN0b3IzKF92eDMsIF92eTMsIF92ejMpO1xuXG4gICAgICB2YXIgX3V2cyA9IG1ha2VVVnMoX3YsIF92MiwgX3YzKTtcblxuICAgICAgdmFyIF9pZHggPSBfdmkgLyAzO1xuXG4gICAgICB2YXIgX2lkeDIgPSBfaWR4ICsgMTtcblxuICAgICAgdmFyIF9pZHgzID0gX2lkeCArIDI7XG5cbiAgICAgIGNvb3Jkc1syICogX2lkeF0gPSBfdXZzLnV2MC54O1xuICAgICAgY29vcmRzWzIgKiBfaWR4ICsgMV0gPSBfdXZzLnV2MC55O1xuICAgICAgY29vcmRzWzIgKiBfaWR4Ml0gPSBfdXZzLnV2MS54O1xuICAgICAgY29vcmRzWzIgKiBfaWR4MiArIDFdID0gX3V2cy51djEueTtcbiAgICAgIGNvb3Jkc1syICogX2lkeDNdID0gX3V2cy51djIueDtcbiAgICAgIGNvb3Jkc1syICogX2lkeDMgKyAxXSA9IF91dnMudXYyLnk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGdlb20uYXR0cmlidXRlcy51dikgZGVsZXRlIGdlb20uYXR0cmlidXRlcy51djtcbiAgZ2VvbS5zZXRBdHRyaWJ1dGUoXCJ1dlwiLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShjb29yZHMsIDIpKTtcbn1cblxudmFyIGdlb21ldHJ5ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIFJvdW5kZWRQbGFuZUdlb21ldHJ5OiBSb3VuZGVkUGxhbmVHZW9tZXRyeSxcbiAgYXBwbHlTcGhlcmVVVjogYXBwbHlTcGhlcmVVVixcbiAgYXBwbHlCb3hVVjogYXBwbHlCb3hVVlxufSk7XG5cbmV4cG9ydCB7IFJvdW5kZWRQbGFuZUdlb21ldHJ5IGFzIFIsIGFwcGx5U3BoZXJlVVYgYXMgYSwgYXBwbHlCb3hVViBhcyBiLCBnZW9tZXRyeSBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/geometry-982366ff.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/index-43782085.esm.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/index-43782085.esm.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   G: () => (/* binding */ Generator),\n/* harmony export */   a: () => (/* binding */ inSphere),\n/* harmony export */   b: () => (/* binding */ inCircle),\n/* harmony export */   c: () => (/* binding */ onCircle),\n/* harmony export */   d: () => (/* binding */ inRect),\n/* harmony export */   e: () => (/* binding */ onRect),\n/* harmony export */   f: () => (/* binding */ inBox),\n/* harmony export */   g: () => (/* binding */ onBox),\n/* harmony export */   i: () => (/* binding */ index),\n/* harmony export */   n: () => (/* binding */ noise),\n/* harmony export */   o: () => (/* binding */ onSphere)\n/* harmony export */ });\n/* harmony import */ var _objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./objectSpread2-284232a6.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/objectSpread2-284232a6.esm.js\");\n/* harmony import */ var _classCallCheck_9098b006_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./classCallCheck-9098b006.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/classCallCheck-9098b006.esm.js\");\n/* harmony import */ var _misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc-7d870b3c.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js\");\n\n\n\n\n/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nvar Grad = function Grad(x, y, z) {\n  var _this = this;\n\n  (0,_classCallCheck_9098b006_esm_js__WEBPACK_IMPORTED_MODULE_1__._)(this, Grad);\n\n  (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(this, \"dot2\", function (x, y) {\n    return _this.x * x + _this.y * y;\n  });\n\n  (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(this, \"dot3\", function (x, y, z) {\n    return _this.x * x + _this.y * y + _this.z * z;\n  });\n\n  this.x = x;\n  this.y = y;\n  this.z = z;\n};\n\nvar grad3 = [new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0), new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1), new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)];\nvar p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180]; // To remove the need for index wrapping, double the permutation table length\n\nvar perm = new Array(512);\nvar gradP = new Array(512); // This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\n\nvar seed = function seed(_seed) {\n  if (_seed > 0 && _seed < 1) {\n    // Scale the seed out\n    _seed *= 65536;\n  }\n\n  _seed = Math.floor(_seed);\n\n  if (_seed < 256) {\n    _seed |= _seed << 8;\n  }\n\n  for (var i = 0; i < 256; i++) {\n    var v;\n\n    if (i & 1) {\n      v = p[i] ^ _seed & 255;\n    } else {\n      v = p[i] ^ _seed >> 8 & 255;\n    }\n\n    perm[i] = perm[i + 256] = v;\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\n  }\n};\nseed(0);\n/*\n  for(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n  }*/\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\n\nvar F2 = 0.5 * (Math.sqrt(3) - 1);\nvar G2 = (3 - Math.sqrt(3)) / 6;\nvar F3 = 1 / 3;\nvar G3 = 1 / 6; // 2D simplex noise\n\nvar simplex2 = function simplex2(xin, yin) {\n  var n0, n1, n2; // Noise contributions from the three corners\n  // Skew the input space to determine which simplex cell we're in\n\n  var s = (xin + yin) * F2; // Hairy factor for 2D\n\n  var i = Math.floor(xin + s);\n  var j = Math.floor(yin + s);\n  var t = (i + j) * G2;\n  var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\n\n  var y0 = yin - j + t; // For the 2D case, the simplex shape is an equilateral triangle.\n  // Determine which simplex we are in.\n\n  var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n\n  if (x0 > y0) {\n    // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1 = 1;\n    j1 = 0;\n  } else {\n    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1 = 0;\n    j1 = 1;\n  } // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n  // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n  // c = (3-sqrt(3))/6\n\n\n  var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n\n  var y1 = y0 - j1 + G2;\n  var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n\n  var y2 = y0 - 1 + 2 * G2; // Work out the hashed gradient indices of the three simplex corners\n\n  i &= 255;\n  j &= 255;\n  var gi0 = gradP[i + perm[j]];\n  var gi1 = gradP[i + i1 + perm[j + j1]];\n  var gi2 = gradP[i + 1 + perm[j + 1]]; // Calculate the contribution from the three corners\n\n  var t0 = 0.5 - x0 * x0 - y0 * y0;\n\n  if (t0 < 0) {\n    n0 = 0;\n  } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient\n  }\n\n  var t1 = 0.5 - x1 * x1 - y1 * y1;\n\n  if (t1 < 0) {\n    n1 = 0;\n  } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\n  }\n\n  var t2 = 0.5 - x2 * x2 - y2 * y2;\n\n  if (t2 < 0) {\n    n2 = 0;\n  } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\n  } // Add contributions from each corner to get the final noise value.\n  // The result is scaled to return values in the interval [-1,1].\n\n\n  return 70 * (n0 + n1 + n2);\n}; // 3D simplex noise\n\nvar simplex3 = function simplex3(xin, yin, zin) {\n  var n0, n1, n2, n3; // Noise contributions from the four corners\n  // Skew the input space to determine which simplex cell we're in\n\n  var s = (xin + yin + zin) * F3; // Hairy factor for 2D\n\n  var i = Math.floor(xin + s);\n  var j = Math.floor(yin + s);\n  var k = Math.floor(zin + s);\n  var t = (i + j + k) * G3;\n  var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\n\n  var y0 = yin - j + t;\n  var z0 = zin - k + t; // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n  // Determine which simplex we are in.\n\n  var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n\n  var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n\n  if (x0 >= y0) {\n    if (y0 >= z0) {\n      i1 = 1;\n      j1 = 0;\n      k1 = 0;\n      i2 = 1;\n      j2 = 1;\n      k2 = 0;\n    } else if (x0 >= z0) {\n      i1 = 1;\n      j1 = 0;\n      k1 = 0;\n      i2 = 1;\n      j2 = 0;\n      k2 = 1;\n    } else {\n      i1 = 0;\n      j1 = 0;\n      k1 = 1;\n      i2 = 1;\n      j2 = 0;\n      k2 = 1;\n    }\n  } else {\n    if (y0 < z0) {\n      i1 = 0;\n      j1 = 0;\n      k1 = 1;\n      i2 = 0;\n      j2 = 1;\n      k2 = 1;\n    } else if (x0 < z0) {\n      i1 = 0;\n      j1 = 1;\n      k1 = 0;\n      i2 = 0;\n      j2 = 1;\n      k2 = 1;\n    } else {\n      i1 = 0;\n      j1 = 1;\n      k1 = 0;\n      i2 = 1;\n      j2 = 1;\n      k2 = 0;\n    }\n  } // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n  // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n  // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n  // c = 1/6.\n\n\n  var x1 = x0 - i1 + G3; // Offsets for second corner\n\n  var y1 = y0 - j1 + G3;\n  var z1 = z0 - k1 + G3;\n  var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n\n  var y2 = y0 - j2 + 2 * G3;\n  var z2 = z0 - k2 + 2 * G3;\n  var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n\n  var y3 = y0 - 1 + 3 * G3;\n  var z3 = z0 - 1 + 3 * G3; // Work out the hashed gradient indices of the four simplex corners\n\n  i &= 255;\n  j &= 255;\n  k &= 255;\n  var gi0 = gradP[i + perm[j + perm[k]]];\n  var gi1 = gradP[i + i1 + perm[j + j1 + perm[k + k1]]];\n  var gi2 = gradP[i + i2 + perm[j + j2 + perm[k + k2]]];\n  var gi3 = gradP[i + 1 + perm[j + 1 + perm[k + 1]]]; // Calculate the contribution from the four corners\n\n  var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n\n  if (t0 < 0) {\n    n0 = 0;\n  } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot3(x0, y0, z0); // (x,y) of grad3 used for 2D gradient\n  }\n\n  var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n\n  if (t1 < 0) {\n    n1 = 0;\n  } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n  }\n\n  var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n\n  if (t2 < 0) {\n    n2 = 0;\n  } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n  }\n\n  var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n\n  if (t3 < 0) {\n    n3 = 0;\n  } else {\n    t3 *= t3;\n    n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n  } // Add contributions from each corner to get the final noise value.\n  // The result is scaled to return values in the interval [-1,1].\n\n\n  return 32 * (n0 + n1 + n2 + n3);\n}; // ##### Perlin noise stuff\n// 2D Perlin Noise\n\nvar perlin2 = function perlin2(x, y) {\n  // Find unit grid cell containing point\n  var X = Math.floor(x),\n      Y = Math.floor(y); // Get relative xy coordinates of point within that cell\n\n  x = x - X;\n  y = y - Y; // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n\n  X = X & 255;\n  Y = Y & 255; // Calculate noise contributions from each of the four corners\n\n  var n00 = gradP[X + perm[Y]].dot2(x, y);\n  var n01 = gradP[X + perm[Y + 1]].dot2(x, y - 1);\n  var n10 = gradP[X + 1 + perm[Y]].dot2(x - 1, y);\n  var n11 = gradP[X + 1 + perm[Y + 1]].dot2(x - 1, y - 1); // Compute the fade curve value for x\n\n  var u = (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)(x); // Interpolate the four results\n\n  return (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)((0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(n00, n10, u), (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(n01, n11, u), (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)(y));\n}; // 3D Perlin Noise\n\nvar perlin3 = function perlin3(x, y, z) {\n  // Find unit grid cell containing point\n  var X = Math.floor(x),\n      Y = Math.floor(y),\n      Z = Math.floor(z); // Get relative xyz coordinates of point within that cell\n\n  x = x - X;\n  y = y - Y;\n  z = z - Z; // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n\n  X = X & 255;\n  Y = Y & 255;\n  Z = Z & 255; // Calculate noise contributions from each of the eight corners\n\n  var n000 = gradP[X + perm[Y + perm[Z]]].dot3(x, y, z);\n  var n001 = gradP[X + perm[Y + perm[Z + 1]]].dot3(x, y, z - 1);\n  var n010 = gradP[X + perm[Y + 1 + perm[Z]]].dot3(x, y - 1, z);\n  var n011 = gradP[X + perm[Y + 1 + perm[Z + 1]]].dot3(x, y - 1, z - 1);\n  var n100 = gradP[X + 1 + perm[Y + perm[Z]]].dot3(x - 1, y, z);\n  var n101 = gradP[X + 1 + perm[Y + perm[Z + 1]]].dot3(x - 1, y, z - 1);\n  var n110 = gradP[X + 1 + perm[Y + 1 + perm[Z]]].dot3(x - 1, y - 1, z);\n  var n111 = gradP[X + 1 + perm[Y + 1 + perm[Z + 1]]].dot3(x - 1, y - 1, z - 1); // Compute the fade curve value for x, y, z\n\n  var u = (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)(x);\n  var v = (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)(y);\n  var w = (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)(z); // Interpolate\n\n  return (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)((0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)((0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(n000, n100, u), (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(n001, n101, u), w), (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)((0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(n010, n110, u), (0,_misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(n011, n111, u), w), v);\n};\n\nvar noise = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  seed: seed,\n  simplex2: simplex2,\n  simplex3: simplex3,\n  perlin2: perlin2,\n  perlin3: perlin3\n});\n\nvar TAU = Math.PI * 2; // Credits @kchapelier https://github.com/kchapelier/wavefunctioncollapse/blob/master/example/lcg.js#L22-L30\n\nfunction normalizeSeed(seed) {\n  if (typeof seed === \"number\") {\n    seed = Math.abs(seed);\n  } else if (typeof seed === \"string\") {\n    var string = seed;\n    seed = 0;\n\n    for (var i = 0; i < string.length; i++) {\n      seed = (seed + (i + 1) * (string.charCodeAt(i) % 96)) % 2147483647;\n    }\n  }\n\n  if (seed === 0) {\n    seed = 311;\n  }\n\n  return seed;\n}\n\nfunction lcgRandom(seed) {\n  var state = normalizeSeed(seed);\n  return function () {\n    var result = state * 48271 % 2147483647;\n    state = result;\n    return result / 2147483647;\n  };\n}\n\nvar Generator = function Generator(_seed) {\n  var _this = this;\n\n  (0,_classCallCheck_9098b006_esm_js__WEBPACK_IMPORTED_MODULE_1__._)(this, Generator);\n\n  (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(this, \"seed\", 0);\n\n  (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(this, \"init\", function (seed) {\n    _this.seed = seed;\n    _this.value = lcgRandom(seed);\n  });\n\n  (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(this, \"value\", lcgRandom(this.seed));\n\n  this.init(_seed);\n};\nvar defaultGen = new Generator(Math.random());\n/***\n * [3D] Sphere\n */\n\nvar defaultSphere = {\n  radius: 1,\n  center: [0, 0, 0]\n}; // random on surface of sphere\n// - https://twitter.com/fermatslibrary/status/1430932503578226688\n// - https://mathworld.wolfram.com/SpherePointPicking.html\n\nfunction onSphere(buffer, sphere) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultSphere$sphere = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultSphere), sphere),\n      radius = _defaultSphere$sphere.radius,\n      center = _defaultSphere$sphere.center;\n\n  for (var i = 0; i < buffer.length; i += 3) {\n    var u = rng.value();\n    var v = rng.value();\n    var theta = Math.acos(2 * v - 1);\n    var phi = TAU * u;\n    buffer[i] = Math.sin(theta) * Math.cos(phi) * radius + center[0];\n    buffer[i + 1] = Math.sin(theta) * Math.sin(phi) * radius + center[1];\n    buffer[i + 2] = Math.cos(theta) * radius + center[2];\n  }\n\n  return buffer;\n} // from \"Another Method\" https://datagenetics.com/blog/january32020/index.html\n\nfunction inSphere(buffer, sphere) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultSphere$sphere2 = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultSphere), sphere),\n      radius = _defaultSphere$sphere2.radius,\n      center = _defaultSphere$sphere2.center;\n\n  for (var i = 0; i < buffer.length; i += 3) {\n    var u = Math.pow(rng.value(), 1 / 3);\n    var x = rng.value() * 2 - 1;\n    var y = rng.value() * 2 - 1;\n    var z = rng.value() * 2 - 1;\n    var mag = Math.sqrt(x * x + y * y + z * z);\n    x = u * x / mag;\n    y = u * y / mag;\n    z = u * z / mag;\n    buffer[i] = x * radius + center[0];\n    buffer[i + 1] = y * radius + center[1];\n    buffer[i + 2] = z * radius + center[2];\n  }\n\n  return buffer;\n}\n/***\n * [2D] Circle\n */\n\nvar defaultCircle = {\n  radius: 1,\n  center: [0, 0]\n}; // random circle https://stackoverflow.com/a/50746409\n\nfunction inCircle(buffer, circle) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultCircle$circle = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultCircle), circle),\n      radius = _defaultCircle$circle.radius,\n      center = _defaultCircle$circle.center;\n\n  for (var i = 0; i < buffer.length; i += 2) {\n    var r = radius * Math.sqrt(rng.value());\n    var theta = rng.value() * TAU;\n    buffer[i] = Math.sin(theta) * r + center[0];\n    buffer[i + 1] = Math.cos(theta) * r + center[1];\n  }\n\n  return buffer;\n}\nfunction onCircle(buffer, circle) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultCircle$circle2 = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultCircle), circle),\n      radius = _defaultCircle$circle2.radius,\n      center = _defaultCircle$circle2.center;\n\n  for (var i = 0; i < buffer.length; i += 2) {\n    var theta = rng.value() * TAU;\n    buffer[i] = Math.sin(theta) * radius + center[0];\n    buffer[i + 1] = Math.cos(theta) * radius + center[1];\n  }\n\n  return buffer;\n}\n/**\n * [2D] Plane\n */\n\nvar defaultRect = {\n  sides: 1,\n  center: [0, 0]\n};\nfunction inRect(buffer, rect) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultRect$rect = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultRect), rect),\n      sides = _defaultRect$rect.sides,\n      center = _defaultRect$rect.center;\n\n  var sideX = typeof sides === \"number\" ? sides : sides[0];\n  var sideY = typeof sides === \"number\" ? sides : sides[1];\n\n  for (var i = 0; i < buffer.length; i += 2) {\n    buffer[i] = (rng.value() - 0.5) * sideX + center[0];\n    buffer[i + 1] = (rng.value() - 0.5) * sideY + center[1];\n  }\n\n  return buffer;\n}\nfunction onRect(buffer, rect) {\n  return buffer;\n}\n/***\n * [3D] Box\n */\n\nfunction inBox(buffer, box) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultBox$box = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultBox), box),\n      sides = _defaultBox$box.sides,\n      center = _defaultBox$box.center;\n\n  var sideX = typeof sides === \"number\" ? sides : sides[0];\n  var sideY = typeof sides === \"number\" ? sides : sides[1];\n  var sideZ = typeof sides === \"number\" ? sides : sides[2];\n\n  for (var i = 0; i < buffer.length; i += 3) {\n    buffer[i] = (rng.value() - 0.5) * sideX + center[0];\n    buffer[i + 1] = (rng.value() - 0.5) * sideY + center[1];\n    buffer[i + 2] = (rng.value() - 0.5) * sideZ + center[2];\n  }\n\n  return buffer;\n}\nvar defaultBox = {\n  sides: 1,\n  center: [0, 0, 0]\n};\nfunction onBox(buffer, box) {\n  var rng = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGen;\n\n  var _defaultBox$box2 = (0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)((0,_objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_0__._)({}, defaultBox), box),\n      sides = _defaultBox$box2.sides,\n      center = _defaultBox$box2.center;\n\n  var sideX = typeof sides === \"number\" ? sides : sides[0];\n  var sideY = typeof sides === \"number\" ? sides : sides[1];\n  var sideZ = typeof sides === \"number\" ? sides : sides[2];\n\n  for (var i = 0; i < buffer.length; i += 3) {\n    buffer[i] = (rng.value() - 0.5) * sideX + center[0];\n    buffer[i + 1] = (rng.value() - 0.5) * sideY + center[1];\n    buffer[i + 2] = (rng.value() - 0.5) * sideZ + center[2];\n  }\n\n  return buffer;\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  Generator: Generator,\n  onSphere: onSphere,\n  inSphere: inSphere,\n  inCircle: inCircle,\n  onCircle: onCircle,\n  inRect: inRect,\n  onRect: onRect,\n  inBox: inBox,\n  onBox: onBox,\n  noise: noise\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L2luZGV4LTQzNzgyMDg1LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUE0RjtBQUNwQjtBQUNWOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFLGtFQUFlOztBQUVqQixFQUFFLGlFQUFlO0FBQ2pCO0FBQ0EsR0FBRzs7QUFFSCxFQUFFLGlFQUFlO0FBQ2pCO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRwQ0FBNHBDOztBQUU1cEM7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLFNBQVM7QUFDM0I7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjs7QUFFaEI7QUFDQSxrQkFBa0I7QUFDbEI7O0FBRUEsNEJBQTRCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7O0FBRXhCLHdCQUF3QjtBQUN4Qjs7QUFFQSxjQUFjOztBQUVkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOzs7QUFHQSx5QkFBeUI7O0FBRXpCO0FBQ0EsNEJBQTRCOztBQUU1Qiw0QkFBNEI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDOztBQUV4Qzs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EscUNBQXFDO0FBQ3JDOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjs7O0FBR0E7QUFDQSxHQUFHOztBQUVIO0FBQ0Esc0JBQXNCO0FBQ3RCOztBQUVBLGtDQUFrQzs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0Esd0JBQXdCO0FBQ3hCOztBQUVBLGtCQUFrQjs7QUFFbEIsa0JBQWtCOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOzs7QUFHQSx5QkFBeUI7O0FBRXpCO0FBQ0E7QUFDQSw2QkFBNkI7O0FBRTdCO0FBQ0E7QUFDQSw0QkFBNEI7O0FBRTVCO0FBQ0EsNEJBQTRCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7O0FBRXREOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSx5Q0FBeUM7QUFDekM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKOzs7QUFHQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLGVBQWU7O0FBRWY7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEOztBQUUzRCxVQUFVLHdEQUFJLEtBQUs7O0FBRW5CLFNBQVMsd0RBQUksQ0FBQyx3REFBSSxlQUFlLHdEQUFJLGVBQWUsd0RBQUk7QUFDeEQsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGVBQWU7O0FBRWY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUY7O0FBRWpGLFVBQVUsd0RBQUk7QUFDZCxVQUFVLHdEQUFJO0FBQ2QsVUFBVSx3REFBSSxLQUFLOztBQUVuQixTQUFTLHdEQUFJLENBQUMsd0RBQUksQ0FBQyx3REFBSSxpQkFBaUIsd0RBQUkscUJBQXFCLHdEQUFJLENBQUMsd0RBQUksaUJBQWlCLHdEQUFJO0FBQy9GOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCx1QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFLGtFQUFlOztBQUVqQixFQUFFLGlFQUFlOztBQUVqQixFQUFFLGlFQUFlO0FBQ2pCO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUUsaUVBQWU7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDhCQUE4QixpRUFBYyxDQUFDLGlFQUFjLEdBQUc7QUFDOUQ7QUFDQTs7QUFFQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUEsK0JBQStCLGlFQUFjLENBQUMsaUVBQWMsR0FBRztBQUMvRDtBQUNBOztBQUVBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBLDhCQUE4QixpRUFBYyxDQUFDLGlFQUFjLEdBQUc7QUFDOUQ7QUFDQTs7QUFFQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLGlFQUFjLENBQUMsaUVBQWMsR0FBRztBQUMvRDtBQUNBOztBQUVBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLGlFQUFjLENBQUMsaUVBQWMsR0FBRztBQUMxRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixpRUFBYyxDQUFDLGlFQUFjLEdBQUc7QUFDeEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixpRUFBYyxDQUFDLGlFQUFjLEdBQUc7QUFDekQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRStKIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcaW5kZXgtNDM3ODIwODUuZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGEgYXMgX2RlZmluZVByb3BlcnR5LCBfIGFzIF9vYmplY3RTcHJlYWQyIH0gZnJvbSAnLi9vYmplY3RTcHJlYWQyLTI4NDIzMmE2LmVzbS5qcyc7XG5pbXBvcnQgeyBfIGFzIF9jbGFzc0NhbGxDaGVjayB9IGZyb20gJy4vY2xhc3NDYWxsQ2hlY2stOTA5OGIwMDYuZXNtLmpzJztcbmltcG9ydCB7IGwgYXMgbGVycCwgZiBhcyBmYWRlIH0gZnJvbSAnLi9taXNjLTdkODcwYjNjLmVzbS5qcyc7XG5cbi8qXG4gKiBBIHNwZWVkLWltcHJvdmVkIHBlcmxpbiBhbmQgc2ltcGxleCBub2lzZSBhbGdvcml0aG1zIGZvciAyRC5cbiAqXG4gKiBCYXNlZCBvbiBleGFtcGxlIGNvZGUgYnkgU3RlZmFuIEd1c3RhdnNvbiAoc3RlZ3VAaXRuLmxpdS5zZSkuXG4gKiBPcHRpbWlzYXRpb25zIGJ5IFBldGVyIEVhc3RtYW4gKHBlYXN0bWFuQGRyaXp6bGUuc3RhbmZvcmQuZWR1KS5cbiAqIEJldHRlciByYW5rIG9yZGVyaW5nIG1ldGhvZCBieSBTdGVmYW4gR3VzdGF2c29uIGluIDIwMTIuXG4gKiBDb252ZXJ0ZWQgdG8gSmF2YXNjcmlwdCBieSBKb3NlcGggR2VudGxlLlxuICpcbiAqIFZlcnNpb24gMjAxMi0wMy0wOVxuICpcbiAqIFRoaXMgY29kZSB3YXMgcGxhY2VkIGluIHRoZSBwdWJsaWMgZG9tYWluIGJ5IGl0cyBvcmlnaW5hbCBhdXRob3IsXG4gKiBTdGVmYW4gR3VzdGF2c29uLiBZb3UgbWF5IHVzZSBpdCBhcyB5b3Ugc2VlIGZpdCwgYnV0XG4gKiBhdHRyaWJ1dGlvbiBpcyBhcHByZWNpYXRlZC5cbiAqXG4gKi9cblxudmFyIEdyYWQgPSBmdW5jdGlvbiBHcmFkKHgsIHksIHopIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR3JhZCk7XG5cbiAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZG90MlwiLCBmdW5jdGlvbiAoeCwgeSkge1xuICAgIHJldHVybiBfdGhpcy54ICogeCArIF90aGlzLnkgKiB5O1xuICB9KTtcblxuICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkb3QzXCIsIGZ1bmN0aW9uICh4LCB5LCB6KSB7XG4gICAgcmV0dXJuIF90aGlzLnggKiB4ICsgX3RoaXMueSAqIHkgKyBfdGhpcy56ICogejtcbiAgfSk7XG5cbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbiAgdGhpcy56ID0gejtcbn07XG5cbnZhciBncmFkMyA9IFtuZXcgR3JhZCgxLCAxLCAwKSwgbmV3IEdyYWQoLTEsIDEsIDApLCBuZXcgR3JhZCgxLCAtMSwgMCksIG5ldyBHcmFkKC0xLCAtMSwgMCksIG5ldyBHcmFkKDEsIDAsIDEpLCBuZXcgR3JhZCgtMSwgMCwgMSksIG5ldyBHcmFkKDEsIDAsIC0xKSwgbmV3IEdyYWQoLTEsIDAsIC0xKSwgbmV3IEdyYWQoMCwgMSwgMSksIG5ldyBHcmFkKDAsIC0xLCAxKSwgbmV3IEdyYWQoMCwgMSwgLTEpLCBuZXcgR3JhZCgwLCAtMSwgLTEpXTtcbnZhciBwID0gWzE1MSwgMTYwLCAxMzcsIDkxLCA5MCwgMTUsIDEzMSwgMTMsIDIwMSwgOTUsIDk2LCA1MywgMTk0LCAyMzMsIDcsIDIyNSwgMTQwLCAzNiwgMTAzLCAzMCwgNjksIDE0MiwgOCwgOTksIDM3LCAyNDAsIDIxLCAxMCwgMjMsIDE5MCwgNiwgMTQ4LCAyNDcsIDEyMCwgMjM0LCA3NSwgMCwgMjYsIDE5NywgNjIsIDk0LCAyNTIsIDIxOSwgMjAzLCAxMTcsIDM1LCAxMSwgMzIsIDU3LCAxNzcsIDMzLCA4OCwgMjM3LCAxNDksIDU2LCA4NywgMTc0LCAyMCwgMTI1LCAxMzYsIDE3MSwgMTY4LCA2OCwgMTc1LCA3NCwgMTY1LCA3MSwgMTM0LCAxMzksIDQ4LCAyNywgMTY2LCA3NywgMTQ2LCAxNTgsIDIzMSwgODMsIDExMSwgMjI5LCAxMjIsIDYwLCAyMTEsIDEzMywgMjMwLCAyMjAsIDEwNSwgOTIsIDQxLCA1NSwgNDYsIDI0NSwgNDAsIDI0NCwgMTAyLCAxNDMsIDU0LCA2NSwgMjUsIDYzLCAxNjEsIDEsIDIxNiwgODAsIDczLCAyMDksIDc2LCAxMzIsIDE4NywgMjA4LCA4OSwgMTgsIDE2OSwgMjAwLCAxOTYsIDEzNSwgMTMwLCAxMTYsIDE4OCwgMTU5LCA4NiwgMTY0LCAxMDAsIDEwOSwgMTk4LCAxNzMsIDE4NiwgMywgNjQsIDUyLCAyMTcsIDIyNiwgMjUwLCAxMjQsIDEyMywgNSwgMjAyLCAzOCwgMTQ3LCAxMTgsIDEyNiwgMjU1LCA4MiwgODUsIDIxMiwgMjA3LCAyMDYsIDU5LCAyMjcsIDQ3LCAxNiwgNTgsIDE3LCAxODIsIDE4OSwgMjgsIDQyLCAyMjMsIDE4MywgMTcwLCAyMTMsIDExOSwgMjQ4LCAxNTIsIDIsIDQ0LCAxNTQsIDE2MywgNzAsIDIyMSwgMTUzLCAxMDEsIDE1NSwgMTY3LCA0MywgMTcyLCA5LCAxMjksIDIyLCAzOSwgMjUzLCAxOSwgOTgsIDEwOCwgMTEwLCA3OSwgMTEzLCAyMjQsIDIzMiwgMTc4LCAxODUsIDExMiwgMTA0LCAyMTgsIDI0NiwgOTcsIDIyOCwgMjUxLCAzNCwgMjQyLCAxOTMsIDIzOCwgMjEwLCAxNDQsIDEyLCAxOTEsIDE3OSwgMTYyLCAyNDEsIDgxLCA1MSwgMTQ1LCAyMzUsIDI0OSwgMTQsIDIzOSwgMTA3LCA0OSwgMTkyLCAyMTQsIDMxLCAxODEsIDE5OSwgMTA2LCAxNTcsIDE4NCwgODQsIDIwNCwgMTc2LCAxMTUsIDEyMSwgNTAsIDQ1LCAxMjcsIDQsIDE1MCwgMjU0LCAxMzgsIDIzNiwgMjA1LCA5MywgMjIyLCAxMTQsIDY3LCAyOSwgMjQsIDcyLCAyNDMsIDE0MSwgMTI4LCAxOTUsIDc4LCA2NiwgMjE1LCA2MSwgMTU2LCAxODBdOyAvLyBUbyByZW1vdmUgdGhlIG5lZWQgZm9yIGluZGV4IHdyYXBwaW5nLCBkb3VibGUgdGhlIHBlcm11dGF0aW9uIHRhYmxlIGxlbmd0aFxuXG52YXIgcGVybSA9IG5ldyBBcnJheSg1MTIpO1xudmFyIGdyYWRQID0gbmV3IEFycmF5KDUxMik7IC8vIFRoaXMgaXNuJ3QgYSB2ZXJ5IGdvb2Qgc2VlZGluZyBmdW5jdGlvbiwgYnV0IGl0IHdvcmtzIG9rLiBJdCBzdXBwb3J0cyAyXjE2XG4vLyBkaWZmZXJlbnQgc2VlZCB2YWx1ZXMuIFdyaXRlIHNvbWV0aGluZyBiZXR0ZXIgaWYgeW91IG5lZWQgbW9yZSBzZWVkcy5cblxudmFyIHNlZWQgPSBmdW5jdGlvbiBzZWVkKF9zZWVkKSB7XG4gIGlmIChfc2VlZCA+IDAgJiYgX3NlZWQgPCAxKSB7XG4gICAgLy8gU2NhbGUgdGhlIHNlZWQgb3V0XG4gICAgX3NlZWQgKj0gNjU1MzY7XG4gIH1cblxuICBfc2VlZCA9IE1hdGguZmxvb3IoX3NlZWQpO1xuXG4gIGlmIChfc2VlZCA8IDI1Nikge1xuICAgIF9zZWVkIHw9IF9zZWVkIDw8IDg7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgdmFyIHY7XG5cbiAgICBpZiAoaSAmIDEpIHtcbiAgICAgIHYgPSBwW2ldIF4gX3NlZWQgJiAyNTU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHYgPSBwW2ldIF4gX3NlZWQgPj4gOCAmIDI1NTtcbiAgICB9XG5cbiAgICBwZXJtW2ldID0gcGVybVtpICsgMjU2XSA9IHY7XG4gICAgZ3JhZFBbaV0gPSBncmFkUFtpICsgMjU2XSA9IGdyYWQzW3YgJSAxMl07XG4gIH1cbn07XG5zZWVkKDApO1xuLypcbiAgZm9yKHZhciBpPTA7IGk8MjU2OyBpKyspIHtcbiAgICBwZXJtW2ldID0gcGVybVtpICsgMjU2XSA9IHBbaV07XG4gICAgZ3JhZFBbaV0gPSBncmFkUFtpICsgMjU2XSA9IGdyYWQzW3Blcm1baV0gJSAxMl07XG4gIH0qL1xuLy8gU2tld2luZyBhbmQgdW5za2V3aW5nIGZhY3RvcnMgZm9yIDIsIDMsIGFuZCA0IGRpbWVuc2lvbnNcblxudmFyIEYyID0gMC41ICogKE1hdGguc3FydCgzKSAtIDEpO1xudmFyIEcyID0gKDMgLSBNYXRoLnNxcnQoMykpIC8gNjtcbnZhciBGMyA9IDEgLyAzO1xudmFyIEczID0gMSAvIDY7IC8vIDJEIHNpbXBsZXggbm9pc2VcblxudmFyIHNpbXBsZXgyID0gZnVuY3Rpb24gc2ltcGxleDIoeGluLCB5aW4pIHtcbiAgdmFyIG4wLCBuMSwgbjI7IC8vIE5vaXNlIGNvbnRyaWJ1dGlvbnMgZnJvbSB0aGUgdGhyZWUgY29ybmVyc1xuICAvLyBTa2V3IHRoZSBpbnB1dCBzcGFjZSB0byBkZXRlcm1pbmUgd2hpY2ggc2ltcGxleCBjZWxsIHdlJ3JlIGluXG5cbiAgdmFyIHMgPSAoeGluICsgeWluKSAqIEYyOyAvLyBIYWlyeSBmYWN0b3IgZm9yIDJEXG5cbiAgdmFyIGkgPSBNYXRoLmZsb29yKHhpbiArIHMpO1xuICB2YXIgaiA9IE1hdGguZmxvb3IoeWluICsgcyk7XG4gIHZhciB0ID0gKGkgKyBqKSAqIEcyO1xuICB2YXIgeDAgPSB4aW4gLSBpICsgdDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW4sIHVuc2tld2VkLlxuXG4gIHZhciB5MCA9IHlpbiAtIGogKyB0OyAvLyBGb3IgdGhlIDJEIGNhc2UsIHRoZSBzaW1wbGV4IHNoYXBlIGlzIGFuIGVxdWlsYXRlcmFsIHRyaWFuZ2xlLlxuICAvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXG5cbiAgdmFyIGkxLCBqMTsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIChtaWRkbGUpIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGopIGNvb3Jkc1xuXG4gIGlmICh4MCA+IHkwKSB7XG4gICAgLy8gbG93ZXIgdHJpYW5nbGUsIFhZIG9yZGVyOiAoMCwwKS0+KDEsMCktPigxLDEpXG4gICAgaTEgPSAxO1xuICAgIGoxID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyB1cHBlciB0cmlhbmdsZSwgWVggb3JkZXI6ICgwLDApLT4oMCwxKS0+KDEsMSlcbiAgICBpMSA9IDA7XG4gICAgajEgPSAxO1xuICB9IC8vIEEgc3RlcCBvZiAoMSwwKSBpbiAoaSxqKSBtZWFucyBhIHN0ZXAgb2YgKDEtYywtYykgaW4gKHgseSksIGFuZFxuICAvLyBhIHN0ZXAgb2YgKDAsMSkgaW4gKGksaikgbWVhbnMgYSBzdGVwIG9mICgtYywxLWMpIGluICh4LHkpLCB3aGVyZVxuICAvLyBjID0gKDMtc3FydCgzKSkvNlxuXG5cbiAgdmFyIHgxID0geDAgLSBpMSArIEcyOyAvLyBPZmZzZXRzIGZvciBtaWRkbGUgY29ybmVyIGluICh4LHkpIHVuc2tld2VkIGNvb3Jkc1xuXG4gIHZhciB5MSA9IHkwIC0gajEgKyBHMjtcbiAgdmFyIHgyID0geDAgLSAxICsgMiAqIEcyOyAvLyBPZmZzZXRzIGZvciBsYXN0IGNvcm5lciBpbiAoeCx5KSB1bnNrZXdlZCBjb29yZHNcblxuICB2YXIgeTIgPSB5MCAtIDEgKyAyICogRzI7IC8vIFdvcmsgb3V0IHRoZSBoYXNoZWQgZ3JhZGllbnQgaW5kaWNlcyBvZiB0aGUgdGhyZWUgc2ltcGxleCBjb3JuZXJzXG5cbiAgaSAmPSAyNTU7XG4gIGogJj0gMjU1O1xuICB2YXIgZ2kwID0gZ3JhZFBbaSArIHBlcm1bal1dO1xuICB2YXIgZ2kxID0gZ3JhZFBbaSArIGkxICsgcGVybVtqICsgajFdXTtcbiAgdmFyIGdpMiA9IGdyYWRQW2kgKyAxICsgcGVybVtqICsgMV1dOyAvLyBDYWxjdWxhdGUgdGhlIGNvbnRyaWJ1dGlvbiBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXG5cbiAgdmFyIHQwID0gMC41IC0geDAgKiB4MCAtIHkwICogeTA7XG5cbiAgaWYgKHQwIDwgMCkge1xuICAgIG4wID0gMDtcbiAgfSBlbHNlIHtcbiAgICB0MCAqPSB0MDtcbiAgICBuMCA9IHQwICogdDAgKiBnaTAuZG90Mih4MCwgeTApOyAvLyAoeCx5KSBvZiBncmFkMyB1c2VkIGZvciAyRCBncmFkaWVudFxuICB9XG5cbiAgdmFyIHQxID0gMC41IC0geDEgKiB4MSAtIHkxICogeTE7XG5cbiAgaWYgKHQxIDwgMCkge1xuICAgIG4xID0gMDtcbiAgfSBlbHNlIHtcbiAgICB0MSAqPSB0MTtcbiAgICBuMSA9IHQxICogdDEgKiBnaTEuZG90Mih4MSwgeTEpO1xuICB9XG5cbiAgdmFyIHQyID0gMC41IC0geDIgKiB4MiAtIHkyICogeTI7XG5cbiAgaWYgKHQyIDwgMCkge1xuICAgIG4yID0gMDtcbiAgfSBlbHNlIHtcbiAgICB0MiAqPSB0MjtcbiAgICBuMiA9IHQyICogdDIgKiBnaTIuZG90Mih4MiwgeTIpO1xuICB9IC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cbiAgLy8gVGhlIHJlc3VsdCBpcyBzY2FsZWQgdG8gcmV0dXJuIHZhbHVlcyBpbiB0aGUgaW50ZXJ2YWwgWy0xLDFdLlxuXG5cbiAgcmV0dXJuIDcwICogKG4wICsgbjEgKyBuMik7XG59OyAvLyAzRCBzaW1wbGV4IG5vaXNlXG5cbnZhciBzaW1wbGV4MyA9IGZ1bmN0aW9uIHNpbXBsZXgzKHhpbiwgeWluLCB6aW4pIHtcbiAgdmFyIG4wLCBuMSwgbjIsIG4zOyAvLyBOb2lzZSBjb250cmlidXRpb25zIGZyb20gdGhlIGZvdXIgY29ybmVyc1xuICAvLyBTa2V3IHRoZSBpbnB1dCBzcGFjZSB0byBkZXRlcm1pbmUgd2hpY2ggc2ltcGxleCBjZWxsIHdlJ3JlIGluXG5cbiAgdmFyIHMgPSAoeGluICsgeWluICsgemluKSAqIEYzOyAvLyBIYWlyeSBmYWN0b3IgZm9yIDJEXG5cbiAgdmFyIGkgPSBNYXRoLmZsb29yKHhpbiArIHMpO1xuICB2YXIgaiA9IE1hdGguZmxvb3IoeWluICsgcyk7XG4gIHZhciBrID0gTWF0aC5mbG9vcih6aW4gKyBzKTtcbiAgdmFyIHQgPSAoaSArIGogKyBrKSAqIEczO1xuICB2YXIgeDAgPSB4aW4gLSBpICsgdDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW4sIHVuc2tld2VkLlxuXG4gIHZhciB5MCA9IHlpbiAtIGogKyB0O1xuICB2YXIgejAgPSB6aW4gLSBrICsgdDsgLy8gRm9yIHRoZSAzRCBjYXNlLCB0aGUgc2ltcGxleCBzaGFwZSBpcyBhIHNsaWdodGx5IGlycmVndWxhciB0ZXRyYWhlZHJvbi5cbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggd2UgYXJlIGluLlxuXG4gIHZhciBpMSwgajEsIGsxOyAvLyBPZmZzZXRzIGZvciBzZWNvbmQgY29ybmVyIG9mIHNpbXBsZXggaW4gKGksaixrKSBjb29yZHNcblxuICB2YXIgaTIsIGoyLCBrMjsgLy8gT2Zmc2V0cyBmb3IgdGhpcmQgY29ybmVyIG9mIHNpbXBsZXggaW4gKGksaixrKSBjb29yZHNcblxuICBpZiAoeDAgPj0geTApIHtcbiAgICBpZiAoeTAgPj0gejApIHtcbiAgICAgIGkxID0gMTtcbiAgICAgIGoxID0gMDtcbiAgICAgIGsxID0gMDtcbiAgICAgIGkyID0gMTtcbiAgICAgIGoyID0gMTtcbiAgICAgIGsyID0gMDtcbiAgICB9IGVsc2UgaWYgKHgwID49IHowKSB7XG4gICAgICBpMSA9IDE7XG4gICAgICBqMSA9IDA7XG4gICAgICBrMSA9IDA7XG4gICAgICBpMiA9IDE7XG4gICAgICBqMiA9IDA7XG4gICAgICBrMiA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGkxID0gMDtcbiAgICAgIGoxID0gMDtcbiAgICAgIGsxID0gMTtcbiAgICAgIGkyID0gMTtcbiAgICAgIGoyID0gMDtcbiAgICAgIGsyID0gMTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHkwIDwgejApIHtcbiAgICAgIGkxID0gMDtcbiAgICAgIGoxID0gMDtcbiAgICAgIGsxID0gMTtcbiAgICAgIGkyID0gMDtcbiAgICAgIGoyID0gMTtcbiAgICAgIGsyID0gMTtcbiAgICB9IGVsc2UgaWYgKHgwIDwgejApIHtcbiAgICAgIGkxID0gMDtcbiAgICAgIGoxID0gMTtcbiAgICAgIGsxID0gMDtcbiAgICAgIGkyID0gMDtcbiAgICAgIGoyID0gMTtcbiAgICAgIGsyID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgaTEgPSAwO1xuICAgICAgajEgPSAxO1xuICAgICAgazEgPSAwO1xuICAgICAgaTIgPSAxO1xuICAgICAgajIgPSAxO1xuICAgICAgazIgPSAwO1xuICAgIH1cbiAgfSAvLyBBIHN0ZXAgb2YgKDEsMCwwKSBpbiAoaSxqLGspIG1lYW5zIGEgc3RlcCBvZiAoMS1jLC1jLC1jKSBpbiAoeCx5LHopLFxuICAvLyBhIHN0ZXAgb2YgKDAsMSwwKSBpbiAoaSxqLGspIG1lYW5zIGEgc3RlcCBvZiAoLWMsMS1jLC1jKSBpbiAoeCx5LHopLCBhbmRcbiAgLy8gYSBzdGVwIG9mICgwLDAsMSkgaW4gKGksaixrKSBtZWFucyBhIHN0ZXAgb2YgKC1jLC1jLDEtYykgaW4gKHgseSx6KSwgd2hlcmVcbiAgLy8gYyA9IDEvNi5cblxuXG4gIHZhciB4MSA9IHgwIC0gaTEgKyBHMzsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lclxuXG4gIHZhciB5MSA9IHkwIC0gajEgKyBHMztcbiAgdmFyIHoxID0gejAgLSBrMSArIEczO1xuICB2YXIgeDIgPSB4MCAtIGkyICsgMiAqIEczOyAvLyBPZmZzZXRzIGZvciB0aGlyZCBjb3JuZXJcblxuICB2YXIgeTIgPSB5MCAtIGoyICsgMiAqIEczO1xuICB2YXIgejIgPSB6MCAtIGsyICsgMiAqIEczO1xuICB2YXIgeDMgPSB4MCAtIDEgKyAzICogRzM7IC8vIE9mZnNldHMgZm9yIGZvdXJ0aCBjb3JuZXJcblxuICB2YXIgeTMgPSB5MCAtIDEgKyAzICogRzM7XG4gIHZhciB6MyA9IHowIC0gMSArIDMgKiBHMzsgLy8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSBmb3VyIHNpbXBsZXggY29ybmVyc1xuXG4gIGkgJj0gMjU1O1xuICBqICY9IDI1NTtcbiAgayAmPSAyNTU7XG4gIHZhciBnaTAgPSBncmFkUFtpICsgcGVybVtqICsgcGVybVtrXV1dO1xuICB2YXIgZ2kxID0gZ3JhZFBbaSArIGkxICsgcGVybVtqICsgajEgKyBwZXJtW2sgKyBrMV1dXTtcbiAgdmFyIGdpMiA9IGdyYWRQW2kgKyBpMiArIHBlcm1baiArIGoyICsgcGVybVtrICsgazJdXV07XG4gIHZhciBnaTMgPSBncmFkUFtpICsgMSArIHBlcm1baiArIDEgKyBwZXJtW2sgKyAxXV1dOyAvLyBDYWxjdWxhdGUgdGhlIGNvbnRyaWJ1dGlvbiBmcm9tIHRoZSBmb3VyIGNvcm5lcnNcblxuICB2YXIgdDAgPSAwLjYgLSB4MCAqIHgwIC0geTAgKiB5MCAtIHowICogejA7XG5cbiAgaWYgKHQwIDwgMCkge1xuICAgIG4wID0gMDtcbiAgfSBlbHNlIHtcbiAgICB0MCAqPSB0MDtcbiAgICBuMCA9IHQwICogdDAgKiBnaTAuZG90Myh4MCwgeTAsIHowKTsgLy8gKHgseSkgb2YgZ3JhZDMgdXNlZCBmb3IgMkQgZ3JhZGllbnRcbiAgfVxuXG4gIHZhciB0MSA9IDAuNiAtIHgxICogeDEgLSB5MSAqIHkxIC0gejEgKiB6MTtcblxuICBpZiAodDEgPCAwKSB7XG4gICAgbjEgPSAwO1xuICB9IGVsc2Uge1xuICAgIHQxICo9IHQxO1xuICAgIG4xID0gdDEgKiB0MSAqIGdpMS5kb3QzKHgxLCB5MSwgejEpO1xuICB9XG5cbiAgdmFyIHQyID0gMC42IC0geDIgKiB4MiAtIHkyICogeTIgLSB6MiAqIHoyO1xuXG4gIGlmICh0MiA8IDApIHtcbiAgICBuMiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgdDIgKj0gdDI7XG4gICAgbjIgPSB0MiAqIHQyICogZ2kyLmRvdDMoeDIsIHkyLCB6Mik7XG4gIH1cblxuICB2YXIgdDMgPSAwLjYgLSB4MyAqIHgzIC0geTMgKiB5MyAtIHozICogejM7XG5cbiAgaWYgKHQzIDwgMCkge1xuICAgIG4zID0gMDtcbiAgfSBlbHNlIHtcbiAgICB0MyAqPSB0MztcbiAgICBuMyA9IHQzICogdDMgKiBnaTMuZG90Myh4MywgeTMsIHozKTtcbiAgfSAvLyBBZGQgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggY29ybmVyIHRvIGdldCB0aGUgZmluYWwgbm9pc2UgdmFsdWUuXG4gIC8vIFRoZSByZXN1bHQgaXMgc2NhbGVkIHRvIHJldHVybiB2YWx1ZXMgaW4gdGhlIGludGVydmFsIFstMSwxXS5cblxuXG4gIHJldHVybiAzMiAqIChuMCArIG4xICsgbjIgKyBuMyk7XG59OyAvLyAjIyMjIyBQZXJsaW4gbm9pc2Ugc3R1ZmZcbi8vIDJEIFBlcmxpbiBOb2lzZVxuXG52YXIgcGVybGluMiA9IGZ1bmN0aW9uIHBlcmxpbjIoeCwgeSkge1xuICAvLyBGaW5kIHVuaXQgZ3JpZCBjZWxsIGNvbnRhaW5pbmcgcG9pbnRcbiAgdmFyIFggPSBNYXRoLmZsb29yKHgpLFxuICAgICAgWSA9IE1hdGguZmxvb3IoeSk7IC8vIEdldCByZWxhdGl2ZSB4eSBjb29yZGluYXRlcyBvZiBwb2ludCB3aXRoaW4gdGhhdCBjZWxsXG5cbiAgeCA9IHggLSBYO1xuICB5ID0geSAtIFk7IC8vIFdyYXAgdGhlIGludGVnZXIgY2VsbHMgYXQgMjU1IChzbWFsbGVyIGludGVnZXIgcGVyaW9kIGNhbiBiZSBpbnRyb2R1Y2VkIGhlcmUpXG5cbiAgWCA9IFggJiAyNTU7XG4gIFkgPSBZICYgMjU1OyAvLyBDYWxjdWxhdGUgbm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggb2YgdGhlIGZvdXIgY29ybmVyc1xuXG4gIHZhciBuMDAgPSBncmFkUFtYICsgcGVybVtZXV0uZG90Mih4LCB5KTtcbiAgdmFyIG4wMSA9IGdyYWRQW1ggKyBwZXJtW1kgKyAxXV0uZG90Mih4LCB5IC0gMSk7XG4gIHZhciBuMTAgPSBncmFkUFtYICsgMSArIHBlcm1bWV1dLmRvdDIoeCAtIDEsIHkpO1xuICB2YXIgbjExID0gZ3JhZFBbWCArIDEgKyBwZXJtW1kgKyAxXV0uZG90Mih4IC0gMSwgeSAtIDEpOyAvLyBDb21wdXRlIHRoZSBmYWRlIGN1cnZlIHZhbHVlIGZvciB4XG5cbiAgdmFyIHUgPSBmYWRlKHgpOyAvLyBJbnRlcnBvbGF0ZSB0aGUgZm91ciByZXN1bHRzXG5cbiAgcmV0dXJuIGxlcnAobGVycChuMDAsIG4xMCwgdSksIGxlcnAobjAxLCBuMTEsIHUpLCBmYWRlKHkpKTtcbn07IC8vIDNEIFBlcmxpbiBOb2lzZVxuXG52YXIgcGVybGluMyA9IGZ1bmN0aW9uIHBlcmxpbjMoeCwgeSwgeikge1xuICAvLyBGaW5kIHVuaXQgZ3JpZCBjZWxsIGNvbnRhaW5pbmcgcG9pbnRcbiAgdmFyIFggPSBNYXRoLmZsb29yKHgpLFxuICAgICAgWSA9IE1hdGguZmxvb3IoeSksXG4gICAgICBaID0gTWF0aC5mbG9vcih6KTsgLy8gR2V0IHJlbGF0aXZlIHh5eiBjb29yZGluYXRlcyBvZiBwb2ludCB3aXRoaW4gdGhhdCBjZWxsXG5cbiAgeCA9IHggLSBYO1xuICB5ID0geSAtIFk7XG4gIHogPSB6IC0gWjsgLy8gV3JhcCB0aGUgaW50ZWdlciBjZWxscyBhdCAyNTUgKHNtYWxsZXIgaW50ZWdlciBwZXJpb2QgY2FuIGJlIGludHJvZHVjZWQgaGVyZSlcblxuICBYID0gWCAmIDI1NTtcbiAgWSA9IFkgJiAyNTU7XG4gIFogPSBaICYgMjU1OyAvLyBDYWxjdWxhdGUgbm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggb2YgdGhlIGVpZ2h0IGNvcm5lcnNcblxuICB2YXIgbjAwMCA9IGdyYWRQW1ggKyBwZXJtW1kgKyBwZXJtW1pdXV0uZG90Myh4LCB5LCB6KTtcbiAgdmFyIG4wMDEgPSBncmFkUFtYICsgcGVybVtZICsgcGVybVtaICsgMV1dXS5kb3QzKHgsIHksIHogLSAxKTtcbiAgdmFyIG4wMTAgPSBncmFkUFtYICsgcGVybVtZICsgMSArIHBlcm1bWl1dXS5kb3QzKHgsIHkgLSAxLCB6KTtcbiAgdmFyIG4wMTEgPSBncmFkUFtYICsgcGVybVtZICsgMSArIHBlcm1bWiArIDFdXV0uZG90Myh4LCB5IC0gMSwgeiAtIDEpO1xuICB2YXIgbjEwMCA9IGdyYWRQW1ggKyAxICsgcGVybVtZICsgcGVybVtaXV1dLmRvdDMoeCAtIDEsIHksIHopO1xuICB2YXIgbjEwMSA9IGdyYWRQW1ggKyAxICsgcGVybVtZICsgcGVybVtaICsgMV1dXS5kb3QzKHggLSAxLCB5LCB6IC0gMSk7XG4gIHZhciBuMTEwID0gZ3JhZFBbWCArIDEgKyBwZXJtW1kgKyAxICsgcGVybVtaXV1dLmRvdDMoeCAtIDEsIHkgLSAxLCB6KTtcbiAgdmFyIG4xMTEgPSBncmFkUFtYICsgMSArIHBlcm1bWSArIDEgKyBwZXJtW1ogKyAxXV1dLmRvdDMoeCAtIDEsIHkgLSAxLCB6IC0gMSk7IC8vIENvbXB1dGUgdGhlIGZhZGUgY3VydmUgdmFsdWUgZm9yIHgsIHksIHpcblxuICB2YXIgdSA9IGZhZGUoeCk7XG4gIHZhciB2ID0gZmFkZSh5KTtcbiAgdmFyIHcgPSBmYWRlKHopOyAvLyBJbnRlcnBvbGF0ZVxuXG4gIHJldHVybiBsZXJwKGxlcnAobGVycChuMDAwLCBuMTAwLCB1KSwgbGVycChuMDAxLCBuMTAxLCB1KSwgdyksIGxlcnAobGVycChuMDEwLCBuMTEwLCB1KSwgbGVycChuMDExLCBuMTExLCB1KSwgdyksIHYpO1xufTtcblxudmFyIG5vaXNlID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHNlZWQ6IHNlZWQsXG4gIHNpbXBsZXgyOiBzaW1wbGV4MixcbiAgc2ltcGxleDM6IHNpbXBsZXgzLFxuICBwZXJsaW4yOiBwZXJsaW4yLFxuICBwZXJsaW4zOiBwZXJsaW4zXG59KTtcblxudmFyIFRBVSA9IE1hdGguUEkgKiAyOyAvLyBDcmVkaXRzIEBrY2hhcGVsaWVyIGh0dHBzOi8vZ2l0aHViLmNvbS9rY2hhcGVsaWVyL3dhdmVmdW5jdGlvbmNvbGxhcHNlL2Jsb2IvbWFzdGVyL2V4YW1wbGUvbGNnLmpzI0wyMi1MMzBcblxuZnVuY3Rpb24gbm9ybWFsaXplU2VlZChzZWVkKSB7XG4gIGlmICh0eXBlb2Ygc2VlZCA9PT0gXCJudW1iZXJcIikge1xuICAgIHNlZWQgPSBNYXRoLmFicyhzZWVkKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2VlZCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHZhciBzdHJpbmcgPSBzZWVkO1xuICAgIHNlZWQgPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNlZWQgPSAoc2VlZCArIChpICsgMSkgKiAoc3RyaW5nLmNoYXJDb2RlQXQoaSkgJSA5NikpICUgMjE0NzQ4MzY0NztcbiAgICB9XG4gIH1cblxuICBpZiAoc2VlZCA9PT0gMCkge1xuICAgIHNlZWQgPSAzMTE7XG4gIH1cblxuICByZXR1cm4gc2VlZDtcbn1cblxuZnVuY3Rpb24gbGNnUmFuZG9tKHNlZWQpIHtcbiAgdmFyIHN0YXRlID0gbm9ybWFsaXplU2VlZChzZWVkKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gc3RhdGUgKiA0ODI3MSAlIDIxNDc0ODM2NDc7XG4gICAgc3RhdGUgPSByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdCAvIDIxNDc0ODM2NDc7XG4gIH07XG59XG5cbnZhciBHZW5lcmF0b3IgPSBmdW5jdGlvbiBHZW5lcmF0b3IoX3NlZWQpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2VuZXJhdG9yKTtcblxuICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZWVkXCIsIDApO1xuXG4gIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaXRcIiwgZnVuY3Rpb24gKHNlZWQpIHtcbiAgICBfdGhpcy5zZWVkID0gc2VlZDtcbiAgICBfdGhpcy52YWx1ZSA9IGxjZ1JhbmRvbShzZWVkKTtcbiAgfSk7XG5cbiAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwgbGNnUmFuZG9tKHRoaXMuc2VlZCkpO1xuXG4gIHRoaXMuaW5pdChfc2VlZCk7XG59O1xudmFyIGRlZmF1bHRHZW4gPSBuZXcgR2VuZXJhdG9yKE1hdGgucmFuZG9tKCkpO1xuLyoqKlxuICogWzNEXSBTcGhlcmVcbiAqL1xuXG52YXIgZGVmYXVsdFNwaGVyZSA9IHtcbiAgcmFkaXVzOiAxLFxuICBjZW50ZXI6IFswLCAwLCAwXVxufTsgLy8gcmFuZG9tIG9uIHN1cmZhY2Ugb2Ygc3BoZXJlXG4vLyAtIGh0dHBzOi8vdHdpdHRlci5jb20vZmVybWF0c2xpYnJhcnkvc3RhdHVzLzE0MzA5MzI1MDM1NzgyMjY2ODhcbi8vIC0gaHR0cHM6Ly9tYXRod29ybGQud29sZnJhbS5jb20vU3BoZXJlUG9pbnRQaWNraW5nLmh0bWxcblxuZnVuY3Rpb24gb25TcGhlcmUoYnVmZmVyLCBzcGhlcmUpIHtcbiAgdmFyIHJuZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZGVmYXVsdEdlbjtcblxuICB2YXIgX2RlZmF1bHRTcGhlcmUkc3BoZXJlID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRTcGhlcmUpLCBzcGhlcmUpLFxuICAgICAgcmFkaXVzID0gX2RlZmF1bHRTcGhlcmUkc3BoZXJlLnJhZGl1cyxcbiAgICAgIGNlbnRlciA9IF9kZWZhdWx0U3BoZXJlJHNwaGVyZS5jZW50ZXI7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpICs9IDMpIHtcbiAgICB2YXIgdSA9IHJuZy52YWx1ZSgpO1xuICAgIHZhciB2ID0gcm5nLnZhbHVlKCk7XG4gICAgdmFyIHRoZXRhID0gTWF0aC5hY29zKDIgKiB2IC0gMSk7XG4gICAgdmFyIHBoaSA9IFRBVSAqIHU7XG4gICAgYnVmZmVyW2ldID0gTWF0aC5zaW4odGhldGEpICogTWF0aC5jb3MocGhpKSAqIHJhZGl1cyArIGNlbnRlclswXTtcbiAgICBidWZmZXJbaSArIDFdID0gTWF0aC5zaW4odGhldGEpICogTWF0aC5zaW4ocGhpKSAqIHJhZGl1cyArIGNlbnRlclsxXTtcbiAgICBidWZmZXJbaSArIDJdID0gTWF0aC5jb3ModGhldGEpICogcmFkaXVzICsgY2VudGVyWzJdO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlcjtcbn0gLy8gZnJvbSBcIkFub3RoZXIgTWV0aG9kXCIgaHR0cHM6Ly9kYXRhZ2VuZXRpY3MuY29tL2Jsb2cvamFudWFyeTMyMDIwL2luZGV4Lmh0bWxcblxuZnVuY3Rpb24gaW5TcGhlcmUoYnVmZmVyLCBzcGhlcmUpIHtcbiAgdmFyIHJuZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZGVmYXVsdEdlbjtcblxuICB2YXIgX2RlZmF1bHRTcGhlcmUkc3BoZXJlMiA9IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBkZWZhdWx0U3BoZXJlKSwgc3BoZXJlKSxcbiAgICAgIHJhZGl1cyA9IF9kZWZhdWx0U3BoZXJlJHNwaGVyZTIucmFkaXVzLFxuICAgICAgY2VudGVyID0gX2RlZmF1bHRTcGhlcmUkc3BoZXJlMi5jZW50ZXI7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpICs9IDMpIHtcbiAgICB2YXIgdSA9IE1hdGgucG93KHJuZy52YWx1ZSgpLCAxIC8gMyk7XG4gICAgdmFyIHggPSBybmcudmFsdWUoKSAqIDIgLSAxO1xuICAgIHZhciB5ID0gcm5nLnZhbHVlKCkgKiAyIC0gMTtcbiAgICB2YXIgeiA9IHJuZy52YWx1ZSgpICogMiAtIDE7XG4gICAgdmFyIG1hZyA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICAgIHggPSB1ICogeCAvIG1hZztcbiAgICB5ID0gdSAqIHkgLyBtYWc7XG4gICAgeiA9IHUgKiB6IC8gbWFnO1xuICAgIGJ1ZmZlcltpXSA9IHggKiByYWRpdXMgKyBjZW50ZXJbMF07XG4gICAgYnVmZmVyW2kgKyAxXSA9IHkgKiByYWRpdXMgKyBjZW50ZXJbMV07XG4gICAgYnVmZmVyW2kgKyAyXSA9IHogKiByYWRpdXMgKyBjZW50ZXJbMl07XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufVxuLyoqKlxuICogWzJEXSBDaXJjbGVcbiAqL1xuXG52YXIgZGVmYXVsdENpcmNsZSA9IHtcbiAgcmFkaXVzOiAxLFxuICBjZW50ZXI6IFswLCAwXVxufTsgLy8gcmFuZG9tIGNpcmNsZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTA3NDY0MDlcblxuZnVuY3Rpb24gaW5DaXJjbGUoYnVmZmVyLCBjaXJjbGUpIHtcbiAgdmFyIHJuZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZGVmYXVsdEdlbjtcblxuICB2YXIgX2RlZmF1bHRDaXJjbGUkY2lyY2xlID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRDaXJjbGUpLCBjaXJjbGUpLFxuICAgICAgcmFkaXVzID0gX2RlZmF1bHRDaXJjbGUkY2lyY2xlLnJhZGl1cyxcbiAgICAgIGNlbnRlciA9IF9kZWZhdWx0Q2lyY2xlJGNpcmNsZS5jZW50ZXI7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpICs9IDIpIHtcbiAgICB2YXIgciA9IHJhZGl1cyAqIE1hdGguc3FydChybmcudmFsdWUoKSk7XG4gICAgdmFyIHRoZXRhID0gcm5nLnZhbHVlKCkgKiBUQVU7XG4gICAgYnVmZmVyW2ldID0gTWF0aC5zaW4odGhldGEpICogciArIGNlbnRlclswXTtcbiAgICBidWZmZXJbaSArIDFdID0gTWF0aC5jb3ModGhldGEpICogciArIGNlbnRlclsxXTtcbiAgfVxuXG4gIHJldHVybiBidWZmZXI7XG59XG5mdW5jdGlvbiBvbkNpcmNsZShidWZmZXIsIGNpcmNsZSkge1xuICB2YXIgcm5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBkZWZhdWx0R2VuO1xuXG4gIHZhciBfZGVmYXVsdENpcmNsZSRjaXJjbGUyID0gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRDaXJjbGUpLCBjaXJjbGUpLFxuICAgICAgcmFkaXVzID0gX2RlZmF1bHRDaXJjbGUkY2lyY2xlMi5yYWRpdXMsXG4gICAgICBjZW50ZXIgPSBfZGVmYXVsdENpcmNsZSRjaXJjbGUyLmNlbnRlcjtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkgKz0gMikge1xuICAgIHZhciB0aGV0YSA9IHJuZy52YWx1ZSgpICogVEFVO1xuICAgIGJ1ZmZlcltpXSA9IE1hdGguc2luKHRoZXRhKSAqIHJhZGl1cyArIGNlbnRlclswXTtcbiAgICBidWZmZXJbaSArIDFdID0gTWF0aC5jb3ModGhldGEpICogcmFkaXVzICsgY2VudGVyWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cbi8qKlxuICogWzJEXSBQbGFuZVxuICovXG5cbnZhciBkZWZhdWx0UmVjdCA9IHtcbiAgc2lkZXM6IDEsXG4gIGNlbnRlcjogWzAsIDBdXG59O1xuZnVuY3Rpb24gaW5SZWN0KGJ1ZmZlciwgcmVjdCkge1xuICB2YXIgcm5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBkZWZhdWx0R2VuO1xuXG4gIHZhciBfZGVmYXVsdFJlY3QkcmVjdCA9IF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBkZWZhdWx0UmVjdCksIHJlY3QpLFxuICAgICAgc2lkZXMgPSBfZGVmYXVsdFJlY3QkcmVjdC5zaWRlcyxcbiAgICAgIGNlbnRlciA9IF9kZWZhdWx0UmVjdCRyZWN0LmNlbnRlcjtcblxuICB2YXIgc2lkZVggPSB0eXBlb2Ygc2lkZXMgPT09IFwibnVtYmVyXCIgPyBzaWRlcyA6IHNpZGVzWzBdO1xuICB2YXIgc2lkZVkgPSB0eXBlb2Ygc2lkZXMgPT09IFwibnVtYmVyXCIgPyBzaWRlcyA6IHNpZGVzWzFdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgYnVmZmVyW2ldID0gKHJuZy52YWx1ZSgpIC0gMC41KSAqIHNpZGVYICsgY2VudGVyWzBdO1xuICAgIGJ1ZmZlcltpICsgMV0gPSAocm5nLnZhbHVlKCkgLSAwLjUpICogc2lkZVkgKyBjZW50ZXJbMV07XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufVxuZnVuY3Rpb24gb25SZWN0KGJ1ZmZlciwgcmVjdCkge1xuICByZXR1cm4gYnVmZmVyO1xufVxuLyoqKlxuICogWzNEXSBCb3hcbiAqL1xuXG5mdW5jdGlvbiBpbkJveChidWZmZXIsIGJveCkge1xuICB2YXIgcm5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBkZWZhdWx0R2VuO1xuXG4gIHZhciBfZGVmYXVsdEJveCRib3ggPSBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgZGVmYXVsdEJveCksIGJveCksXG4gICAgICBzaWRlcyA9IF9kZWZhdWx0Qm94JGJveC5zaWRlcyxcbiAgICAgIGNlbnRlciA9IF9kZWZhdWx0Qm94JGJveC5jZW50ZXI7XG5cbiAgdmFyIHNpZGVYID0gdHlwZW9mIHNpZGVzID09PSBcIm51bWJlclwiID8gc2lkZXMgOiBzaWRlc1swXTtcbiAgdmFyIHNpZGVZID0gdHlwZW9mIHNpZGVzID09PSBcIm51bWJlclwiID8gc2lkZXMgOiBzaWRlc1sxXTtcbiAgdmFyIHNpZGVaID0gdHlwZW9mIHNpZGVzID09PSBcIm51bWJlclwiID8gc2lkZXMgOiBzaWRlc1syXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkgKz0gMykge1xuICAgIGJ1ZmZlcltpXSA9IChybmcudmFsdWUoKSAtIDAuNSkgKiBzaWRlWCArIGNlbnRlclswXTtcbiAgICBidWZmZXJbaSArIDFdID0gKHJuZy52YWx1ZSgpIC0gMC41KSAqIHNpZGVZICsgY2VudGVyWzFdO1xuICAgIGJ1ZmZlcltpICsgMl0gPSAocm5nLnZhbHVlKCkgLSAwLjUpICogc2lkZVogKyBjZW50ZXJbMl07XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufVxudmFyIGRlZmF1bHRCb3ggPSB7XG4gIHNpZGVzOiAxLFxuICBjZW50ZXI6IFswLCAwLCAwXVxufTtcbmZ1bmN0aW9uIG9uQm94KGJ1ZmZlciwgYm94KSB7XG4gIHZhciBybmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGRlZmF1bHRHZW47XG5cbiAgdmFyIF9kZWZhdWx0Qm94JGJveDIgPSBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgZGVmYXVsdEJveCksIGJveCksXG4gICAgICBzaWRlcyA9IF9kZWZhdWx0Qm94JGJveDIuc2lkZXMsXG4gICAgICBjZW50ZXIgPSBfZGVmYXVsdEJveCRib3gyLmNlbnRlcjtcblxuICB2YXIgc2lkZVggPSB0eXBlb2Ygc2lkZXMgPT09IFwibnVtYmVyXCIgPyBzaWRlcyA6IHNpZGVzWzBdO1xuICB2YXIgc2lkZVkgPSB0eXBlb2Ygc2lkZXMgPT09IFwibnVtYmVyXCIgPyBzaWRlcyA6IHNpZGVzWzFdO1xuICB2YXIgc2lkZVogPSB0eXBlb2Ygc2lkZXMgPT09IFwibnVtYmVyXCIgPyBzaWRlcyA6IHNpZGVzWzJdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgYnVmZmVyW2ldID0gKHJuZy52YWx1ZSgpIC0gMC41KSAqIHNpZGVYICsgY2VudGVyWzBdO1xuICAgIGJ1ZmZlcltpICsgMV0gPSAocm5nLnZhbHVlKCkgLSAwLjUpICogc2lkZVkgKyBjZW50ZXJbMV07XG4gICAgYnVmZmVyW2kgKyAyXSA9IChybmcudmFsdWUoKSAtIDAuNSkgKiBzaWRlWiArIGNlbnRlclsyXTtcbiAgfVxuXG4gIHJldHVybiBidWZmZXI7XG59XG5cbnZhciBpbmRleCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBHZW5lcmF0b3I6IEdlbmVyYXRvcixcbiAgb25TcGhlcmU6IG9uU3BoZXJlLFxuICBpblNwaGVyZTogaW5TcGhlcmUsXG4gIGluQ2lyY2xlOiBpbkNpcmNsZSxcbiAgb25DaXJjbGU6IG9uQ2lyY2xlLFxuICBpblJlY3Q6IGluUmVjdCxcbiAgb25SZWN0OiBvblJlY3QsXG4gIGluQm94OiBpbkJveCxcbiAgb25Cb3g6IG9uQm94LFxuICBub2lzZTogbm9pc2Vcbn0pO1xuXG5leHBvcnQgeyBHZW5lcmF0b3IgYXMgRywgaW5TcGhlcmUgYXMgYSwgaW5DaXJjbGUgYXMgYiwgb25DaXJjbGUgYXMgYywgaW5SZWN0IGFzIGQsIG9uUmVjdCBhcyBlLCBpbkJveCBhcyBmLCBvbkJveCBhcyBnLCBpbmRleCBhcyBpLCBub2lzZSBhcyBuLCBvblNwaGVyZSBhcyBvIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/index-43782085.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/isNativeReflectConstruct-5594d075.esm.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/isNativeReflectConstruct-5594d075.esm.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _: () => (/* binding */ _setPrototypeOf),\n/* harmony export */   a: () => (/* binding */ _isNativeReflectConstruct)\n/* harmony export */ });\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC01NTk0ZDA3NS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnRkFBZ0Y7QUFDaEY7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVnRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRGVza3RvcFxccGFyZW50bHl0aWNzXFxub2RlX21vZHVsZXNcXEByZWFjdC10aHJlZVxccG9zdHByb2Nlc3NpbmdcXG5vZGVfbW9kdWxlc1xcbWFhdGhcXGRpc3RcXGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC01NTk0ZDA3NS5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuXG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTtcbiAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTtcblxuICB0cnkge1xuICAgIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgeyBfc2V0UHJvdG90eXBlT2YgYXMgXywgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCBhcyBhIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/isNativeReflectConstruct-5594d075.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/maath.esm.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/maath.esm.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buffer: () => (/* reexport safe */ _buffer_d2a4726c_esm_js__WEBPACK_IMPORTED_MODULE_0__.b),\n/* harmony export */   easing: () => (/* reexport safe */ _easing_3be59c6d_esm_js__WEBPACK_IMPORTED_MODULE_2__.e),\n/* harmony export */   geometry: () => (/* reexport safe */ _geometry_982366ff_esm_js__WEBPACK_IMPORTED_MODULE_3__.g),\n/* harmony export */   matrix: () => (/* reexport safe */ _matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_4__.m),\n/* harmony export */   misc: () => (/* reexport safe */ _misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_5__.m),\n/* harmony export */   random: () => (/* reexport safe */ _index_43782085_esm_js__WEBPACK_IMPORTED_MODULE_1__.i),\n/* harmony export */   three: () => (/* reexport safe */ _three_eb2ad8c0_esm_js__WEBPACK_IMPORTED_MODULE_6__.t),\n/* harmony export */   triangle: () => (/* reexport safe */ _triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_7__.t),\n/* harmony export */   vector2: () => (/* reexport safe */ _vector2_d2bf51f1_esm_js__WEBPACK_IMPORTED_MODULE_8__.v),\n/* harmony export */   vector3: () => (/* reexport safe */ _vector3_0a088b7f_esm_js__WEBPACK_IMPORTED_MODULE_9__.v)\n/* harmony export */ });\n/* harmony import */ var _buffer_d2a4726c_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer-d2a4726c.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/buffer-d2a4726c.esm.js\");\n/* harmony import */ var _index_43782085_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-43782085.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/index-43782085.esm.js\");\n/* harmony import */ var _easing_3be59c6d_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./easing-3be59c6d.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/easing-3be59c6d.esm.js\");\n/* harmony import */ var _geometry_982366ff_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry-982366ff.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/geometry-982366ff.esm.js\");\n/* harmony import */ var _matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./matrix-baa530bf.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/matrix-baa530bf.esm.js\");\n/* harmony import */ var _misc_7d870b3c_esm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./misc-7d870b3c.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js\");\n/* harmony import */ var _three_eb2ad8c0_esm_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./three-eb2ad8c0.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/three-eb2ad8c0.esm.js\");\n/* harmony import */ var _triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./triangle-b62b9067.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js\");\n/* harmony import */ var _vector2_d2bf51f1_esm_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./vector2-d2bf51f1.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector2-d2bf51f1.esm.js\");\n/* harmony import */ var _vector3_0a088b7f_esm_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./vector3-0a088b7f.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector3-0a088b7f.esm.js\");\n/* harmony import */ var _objectSpread2_284232a6_esm_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./objectSpread2-284232a6.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/objectSpread2-284232a6.esm.js\");\n/* harmony import */ var _classCallCheck_9098b006_esm_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./classCallCheck-9098b006.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/classCallCheck-9098b006.esm.js\");\n/* harmony import */ var _isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./isNativeReflectConstruct-5594d075.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/isNativeReflectConstruct-5594d075.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L21hYXRoLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNEO0FBQ0M7QUFDSTtBQUNKO0FBQ0o7QUFDRTtBQUNNO0FBQ0Y7QUFDQTtBQUNoQjtBQUMxQjtBQUMyQjtBQUNVIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcbWFhdGguZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGIgYXMgYnVmZmVyIH0gZnJvbSAnLi9idWZmZXItZDJhNDcyNmMuZXNtLmpzJztcbmV4cG9ydCB7IGkgYXMgcmFuZG9tIH0gZnJvbSAnLi9pbmRleC00Mzc4MjA4NS5lc20uanMnO1xuZXhwb3J0IHsgZSBhcyBlYXNpbmcgfSBmcm9tICcuL2Vhc2luZy0zYmU1OWM2ZC5lc20uanMnO1xuZXhwb3J0IHsgZyBhcyBnZW9tZXRyeSB9IGZyb20gJy4vZ2VvbWV0cnktOTgyMzY2ZmYuZXNtLmpzJztcbmV4cG9ydCB7IG0gYXMgbWF0cml4IH0gZnJvbSAnLi9tYXRyaXgtYmFhNTMwYmYuZXNtLmpzJztcbmV4cG9ydCB7IG0gYXMgbWlzYyB9IGZyb20gJy4vbWlzYy03ZDg3MGIzYy5lc20uanMnO1xuZXhwb3J0IHsgdCBhcyB0aHJlZSB9IGZyb20gJy4vdGhyZWUtZWIyYWQ4YzAuZXNtLmpzJztcbmV4cG9ydCB7IHQgYXMgdHJpYW5nbGUgfSBmcm9tICcuL3RyaWFuZ2xlLWI2MmI5MDY3LmVzbS5qcyc7XG5leHBvcnQgeyB2IGFzIHZlY3RvcjIgfSBmcm9tICcuL3ZlY3RvcjItZDJiZjUxZjEuZXNtLmpzJztcbmV4cG9ydCB7IHYgYXMgdmVjdG9yMyB9IGZyb20gJy4vdmVjdG9yMy0wYTA4OGI3Zi5lc20uanMnO1xuaW1wb3J0ICcuL29iamVjdFNwcmVhZDItMjg0MjMyYTYuZXNtLmpzJztcbmltcG9ydCAndGhyZWUnO1xuaW1wb3J0ICcuL2NsYXNzQ2FsbENoZWNrLTkwOThiMDA2LmVzbS5qcyc7XG5pbXBvcnQgJy4vaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0LTU1OTRkMDc1LmVzbS5qcyc7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/maath.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/matrix-baa530bf.esm.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/matrix-baa530bf.esm.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ matrixSum3),\n/* harmony export */   b: () => (/* binding */ determinant2),\n/* harmony export */   c: () => (/* binding */ determinant4),\n/* harmony export */   d: () => (/* binding */ determinant3),\n/* harmony export */   g: () => (/* binding */ getMinor),\n/* harmony export */   m: () => (/* binding */ matrix)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n\n\n/**\n *\n * @param terms\n *\n * | a b |\n * | c d |\n *\n * @returns {number} determinant\n */\n\nfunction determinant2() {\n  for (var _len = arguments.length, terms = new Array(_len), _key = 0; _key < _len; _key++) {\n    terms[_key] = arguments[_key];\n  }\n\n  var a = terms[0],\n      b = terms[1],\n      c = terms[2],\n      d = terms[3];\n  return a * d - b * c;\n}\n/**\n *\n * @param terms\n *\n * | a b c |\n * | d e f |\n * | g h i |\n *\n * @returns {number} determinant\n */\n\nfunction determinant3() {\n  for (var _len2 = arguments.length, terms = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    terms[_key2] = arguments[_key2];\n  }\n\n  var a = terms[0],\n      b = terms[1],\n      c = terms[2],\n      d = terms[3],\n      e = terms[4],\n      f = terms[5],\n      g = terms[6],\n      h = terms[7],\n      i = terms[8];\n  return a * e * i + b * f * g + c * d * h - c * e * g - b * d * i - a * f * h;\n}\n/**\n *\n * @param terms\n *\n * | a b c g |\n * | h i j k |\n * | l m n o |\n *\n * @returns {number} determinant\n */\n\nfunction determinant4() {\n  for (var _len3 = arguments.length, terms = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    terms[_key3] = arguments[_key3];\n  }\n\n  terms[0];\n      terms[1];\n      terms[2];\n      terms[3];\n      terms[4];\n      terms[5];\n      terms[6];\n      terms[7];\n      terms[8];\n      terms[9];\n      terms[10];\n      terms[11];\n      terms[12];\n      terms[13];\n      terms[14]; // TODO\n}\n/**\n *\n * Get the determinant of matrix m without row r and col c\n *\n * @param {matrix} m Starter matrix\n * @param r row to remove\n * @param c col to remove\n *\n *     | a b c |\n * m = | d e f |\n *     | g h i |\n *\n * getMinor(m, 1, 1) would result in this determinant\n *\n * | a c |\n * | g i |\n *\n * @returns {number} determinant\n */\n\nfunction getMinor(matrix, r, c) {\n  var _matrixTranspose = matrix.clone().transpose();\n\n  var x = [];\n  var l = _matrixTranspose.elements.length;\n  var n = Math.sqrt(l);\n\n  for (var i = 0; i < l; i++) {\n    var element = _matrixTranspose.elements[i];\n    var row = Math.floor(i / n);\n    var col = i % n;\n\n    if (row !== r - 1 && col !== c - 1) {\n      x.push(element);\n    }\n  }\n\n  return determinant3.apply(void 0, x);\n}\n/**\n *\n */\n\nfunction matrixSum3(m1, m2) {\n  var sum = [];\n  var m1Array = m1.toArray();\n  var m2Array = m2.toArray();\n\n  for (var i = 0; i < m1Array.length; i++) {\n    sum[i] = m1Array[i] + m2Array[i];\n  }\n\n  return new three__WEBPACK_IMPORTED_MODULE_0__.Matrix3().fromArray(sum);\n}\n\nvar matrix = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  determinant2: determinant2,\n  determinant3: determinant3,\n  determinant4: determinant4,\n  getMinor: getMinor,\n  matrixSum3: matrixSum3\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L21hdHJpeC1iYWE1MzBiZi5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnQzs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQSx1RUFBdUUsYUFBYTtBQUNwRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQSwwRUFBMEUsZUFBZTtBQUN6RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0EsMEVBQTBFLGVBQWU7QUFDekY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTs7QUFFQSxhQUFhLDBDQUFPO0FBQ3BCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFK0ciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXHBhcmVudGx5dGljc1xcbm9kZV9tb2R1bGVzXFxAcmVhY3QtdGhyZWVcXHBvc3Rwcm9jZXNzaW5nXFxub2RlX21vZHVsZXNcXG1hYXRoXFxkaXN0XFxtYXRyaXgtYmFhNTMwYmYuZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdHJpeDMgfSBmcm9tICd0aHJlZSc7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB0ZXJtc1xuICpcbiAqIHwgYSBiIHxcbiAqIHwgYyBkIHxcbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZXRlcm1pbmFudFxuICovXG5cbmZ1bmN0aW9uIGRldGVybWluYW50MigpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHRlcm1zID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHRlcm1zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgdmFyIGEgPSB0ZXJtc1swXSxcbiAgICAgIGIgPSB0ZXJtc1sxXSxcbiAgICAgIGMgPSB0ZXJtc1syXSxcbiAgICAgIGQgPSB0ZXJtc1szXTtcbiAgcmV0dXJuIGEgKiBkIC0gYiAqIGM7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gdGVybXNcbiAqXG4gKiB8IGEgYiBjIHxcbiAqIHwgZCBlIGYgfFxuICogfCBnIGggaSB8XG4gKlxuICogQHJldHVybnMge251bWJlcn0gZGV0ZXJtaW5hbnRcbiAqL1xuXG5mdW5jdGlvbiBkZXRlcm1pbmFudDMoKSB7XG4gIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgdGVybXMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICB0ZXJtc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgdmFyIGEgPSB0ZXJtc1swXSxcbiAgICAgIGIgPSB0ZXJtc1sxXSxcbiAgICAgIGMgPSB0ZXJtc1syXSxcbiAgICAgIGQgPSB0ZXJtc1szXSxcbiAgICAgIGUgPSB0ZXJtc1s0XSxcbiAgICAgIGYgPSB0ZXJtc1s1XSxcbiAgICAgIGcgPSB0ZXJtc1s2XSxcbiAgICAgIGggPSB0ZXJtc1s3XSxcbiAgICAgIGkgPSB0ZXJtc1s4XTtcbiAgcmV0dXJuIGEgKiBlICogaSArIGIgKiBmICogZyArIGMgKiBkICogaCAtIGMgKiBlICogZyAtIGIgKiBkICogaSAtIGEgKiBmICogaDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB0ZXJtc1xuICpcbiAqIHwgYSBiIGMgZyB8XG4gKiB8IGggaSBqIGsgfFxuICogfCBsIG0gbiBvIHxcbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZXRlcm1pbmFudFxuICovXG5cbmZ1bmN0aW9uIGRldGVybWluYW50NCgpIHtcbiAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCB0ZXJtcyA9IG5ldyBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgIHRlcm1zW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gIH1cblxuICB0ZXJtc1swXTtcbiAgICAgIHRlcm1zWzFdO1xuICAgICAgdGVybXNbMl07XG4gICAgICB0ZXJtc1szXTtcbiAgICAgIHRlcm1zWzRdO1xuICAgICAgdGVybXNbNV07XG4gICAgICB0ZXJtc1s2XTtcbiAgICAgIHRlcm1zWzddO1xuICAgICAgdGVybXNbOF07XG4gICAgICB0ZXJtc1s5XTtcbiAgICAgIHRlcm1zWzEwXTtcbiAgICAgIHRlcm1zWzExXTtcbiAgICAgIHRlcm1zWzEyXTtcbiAgICAgIHRlcm1zWzEzXTtcbiAgICAgIHRlcm1zWzE0XTsgLy8gVE9ET1xufVxuLyoqXG4gKlxuICogR2V0IHRoZSBkZXRlcm1pbmFudCBvZiBtYXRyaXggbSB3aXRob3V0IHJvdyByIGFuZCBjb2wgY1xuICpcbiAqIEBwYXJhbSB7bWF0cml4fSBtIFN0YXJ0ZXIgbWF0cml4XG4gKiBAcGFyYW0gciByb3cgdG8gcmVtb3ZlXG4gKiBAcGFyYW0gYyBjb2wgdG8gcmVtb3ZlXG4gKlxuICogICAgIHwgYSBiIGMgfFxuICogbSA9IHwgZCBlIGYgfFxuICogICAgIHwgZyBoIGkgfFxuICpcbiAqIGdldE1pbm9yKG0sIDEsIDEpIHdvdWxkIHJlc3VsdCBpbiB0aGlzIGRldGVybWluYW50XG4gKlxuICogfCBhIGMgfFxuICogfCBnIGkgfFxuICpcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRldGVybWluYW50XG4gKi9cblxuZnVuY3Rpb24gZ2V0TWlub3IobWF0cml4LCByLCBjKSB7XG4gIHZhciBfbWF0cml4VHJhbnNwb3NlID0gbWF0cml4LmNsb25lKCkudHJhbnNwb3NlKCk7XG5cbiAgdmFyIHggPSBbXTtcbiAgdmFyIGwgPSBfbWF0cml4VHJhbnNwb3NlLmVsZW1lbnRzLmxlbmd0aDtcbiAgdmFyIG4gPSBNYXRoLnNxcnQobCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgZWxlbWVudCA9IF9tYXRyaXhUcmFuc3Bvc2UuZWxlbWVudHNbaV07XG4gICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoaSAvIG4pO1xuICAgIHZhciBjb2wgPSBpICUgbjtcblxuICAgIGlmIChyb3cgIT09IHIgLSAxICYmIGNvbCAhPT0gYyAtIDEpIHtcbiAgICAgIHgucHVzaChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGV0ZXJtaW5hbnQzLmFwcGx5KHZvaWQgMCwgeCk7XG59XG4vKipcbiAqXG4gKi9cblxuZnVuY3Rpb24gbWF0cml4U3VtMyhtMSwgbTIpIHtcbiAgdmFyIHN1bSA9IFtdO1xuICB2YXIgbTFBcnJheSA9IG0xLnRvQXJyYXkoKTtcbiAgdmFyIG0yQXJyYXkgPSBtMi50b0FycmF5KCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtMUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgc3VtW2ldID0gbTFBcnJheVtpXSArIG0yQXJyYXlbaV07XG4gIH1cblxuICByZXR1cm4gbmV3IE1hdHJpeDMoKS5mcm9tQXJyYXkoc3VtKTtcbn1cblxudmFyIG1hdHJpeCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBkZXRlcm1pbmFudDI6IGRldGVybWluYW50MixcbiAgZGV0ZXJtaW5hbnQzOiBkZXRlcm1pbmFudDMsXG4gIGRldGVybWluYW50NDogZGV0ZXJtaW5hbnQ0LFxuICBnZXRNaW5vcjogZ2V0TWlub3IsXG4gIG1hdHJpeFN1bTM6IG1hdHJpeFN1bTNcbn0pO1xuXG5leHBvcnQgeyBtYXRyaXhTdW0zIGFzIGEsIGRldGVybWluYW50MiBhcyBiLCBkZXRlcm1pbmFudDQgYXMgYywgZGV0ZXJtaW5hbnQzIGFzIGQsIGdldE1pbm9yIGFzIGcsIG1hdHJpeCBhcyBtIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/matrix-baa530bf.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ degToRad),\n/* harmony export */   b: () => (/* binding */ fibonacciOnSphere),\n/* harmony export */   c: () => (/* binding */ clamp),\n/* harmony export */   d: () => (/* binding */ deltaAngle),\n/* harmony export */   e: () => (/* binding */ lexicographic),\n/* harmony export */   f: () => (/* binding */ fade),\n/* harmony export */   g: () => (/* binding */ convexHull),\n/* harmony export */   h: () => (/* binding */ remap),\n/* harmony export */   i: () => (/* binding */ inverseLerp),\n/* harmony export */   j: () => (/* binding */ rotateVectorOnVector),\n/* harmony export */   k: () => (/* binding */ pointToCoordinate),\n/* harmony export */   l: () => (/* binding */ lerp),\n/* harmony export */   m: () => (/* binding */ misc),\n/* harmony export */   n: () => (/* binding */ normalize),\n/* harmony export */   o: () => (/* binding */ coordinateToPoint),\n/* harmony export */   p: () => (/* binding */ pointOnCubeToPointOnSphere),\n/* harmony export */   q: () => (/* binding */ planeSegmentIntersection),\n/* harmony export */   r: () => (/* binding */ radToDeg),\n/* harmony export */   s: () => (/* binding */ pointToPlaneDistance),\n/* harmony export */   t: () => (/* binding */ getIndexFrom3D),\n/* harmony export */   u: () => (/* binding */ get3DFromIndex),\n/* harmony export */   v: () => (/* binding */ vectorEquals),\n/* harmony export */   w: () => (/* binding */ getIndexFrom2D),\n/* harmony export */   x: () => (/* binding */ get2DFromIndex)\n/* harmony export */ });\n/* harmony import */ var _triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./triangle-b62b9067.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix-baa530bf.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/matrix-baa530bf.esm.js\");\n\n\n\n\n/**\n * Clamps a value between a range.\n */\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n} // Loops the value t, so that it is never larger than length and never smaller than 0.\n\nfunction repeat(t, length) {\n  return clamp(t - Math.floor(t / length) * length, 0, length);\n} // Calculates the shortest difference between two given angles.\n\n\nfunction deltaAngle(current, target) {\n  var delta = repeat(target - current, Math.PI * 2);\n  if (delta > Math.PI) delta -= Math.PI * 2;\n  return delta;\n}\n/**\n * Converts degrees to radians.\n */\n\nfunction degToRad(degrees) {\n  return degrees / 180 * Math.PI;\n}\n/**\n * Converts radians to degrees.\n */\n\nfunction radToDeg(radians) {\n  return radians * 180 / Math.PI;\n} // adapted from https://gist.github.com/stephanbogner/a5f50548a06bec723dcb0991dcbb0856 by https://twitter.com/st_phan\n\nfunction fibonacciOnSphere(buffer, _ref) {\n  var _ref$radius = _ref.radius,\n      radius = _ref$radius === void 0 ? 1 : _ref$radius;\n  var samples = buffer.length / 3;\n  var offset = 2 / samples;\n  var increment = Math.PI * (3 - 2.2360679775);\n\n  for (var i = 0; i < buffer.length; i += 3) {\n    var y = i * offset - 1 + offset / 2;\n    var distance = Math.sqrt(1 - Math.pow(y, 2));\n    var phi = i % samples * increment;\n    var x = Math.cos(phi) * distance;\n    var z = Math.sin(phi) * distance;\n    buffer[i] = x * radius;\n    buffer[i + 1] = y * radius;\n    buffer[i + 2] = z * radius;\n  }\n} // @ts-ignore\n\nfunction vectorEquals(a, b) {\n  var eps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.EPSILON;\n  return Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps;\n}\n/**\n * Sorts vectors in lexicographic order, works with both v2 and v3\n *\n *  Use as:\n *  const sorted = arrayOfVectors.sort(lexicographicOrder)\n */\n// https://en.wikipedia.org/wiki/Lexicographic_order\n\nfunction lexicographic(a, b) {\n  if (a.x === b.x) {\n    // do a check to see if points is 3D,\n    // in which case add y eq check and sort by z\n    if (typeof a.z !== \"undefined\") {\n      if (a.y === b.y) {\n        return a.z - b.z;\n      }\n    }\n\n    return a.y - b.y;\n  }\n\n  return a.x - b.x;\n}\n/**\n * Convex Hull\n *\n * Returns an array of 2D Vectors representing the convex hull of a set of 2D Vectors\n */\n\n/**\n * Calculate the convex hull of a set of points\n */\n\nfunction convexHull(_points) {\n  var points = _points.sort(lexicographic); // put p1 and p2 in a list lUpper with p1 as the first point\n\n\n  var lUpper = [points[0], points[1]]; // for i <- 3 to n\n\n  for (var i = 2; i < points.length; i++) {\n    lUpper.push(points[i]); // while lUpper contains more than 2 points and the last three points in lUpper do not make a right turn\n\n    while (lUpper.length > 2 && (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)((0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(lUpper.slice(-3)))) {\n      // delete the middle of the last three points from lUpper\n      lUpper.splice(lUpper.length - 2, 1);\n    }\n  } // put pn and pn-1 in a list lLower with pn as the first point\n\n\n  var lLower = [points[points.length - 1], points[points.length - 2]]; // for (i <- n - 2 downto 1)\n\n  for (var _i = points.length - 3; _i >= 0; _i--) {\n    // append pi to lLower\n    lLower.push(points[_i]); // while lLower contains more than 2 points and the last three points in lLower do not make a right turn\n\n    while (lLower.length > 2 && (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__.d)((0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)(lLower.slice(-3)))) {\n      // delete the middle of the last three points from lLower\n      lLower.splice(lLower.length - 2, 1);\n    }\n  } // remove the first and last point from lLower to avoid duplication of the points where the upper and lower hull meet\n\n\n  lLower.splice(0, 1);\n  lLower.splice(lLower.length - 1, 1); // prettier-ignore\n\n  var c = [].concat(lUpper, lLower);\n  return c;\n}\nfunction remap(x, _ref2, _ref3) {\n  var _ref4 = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(_ref2, 2),\n      low1 = _ref4[0],\n      high1 = _ref4[1];\n\n  var _ref5 = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(_ref3, 2),\n      low2 = _ref5[0],\n      high2 = _ref5[1];\n\n  return low2 + (x - low1) * (high2 - low2) / (high1 - low1);\n}\n/**\n *\n * https://www.desmos.com/calculator/vsnmlaljdu\n *\n * Ease-in-out, goes to -Infinite before 0 and Infinite after 1\n *\n * @param t\n * @returns\n */\n\nfunction fade(t) {\n  return t * t * t * (t * (t * 6 - 15) + 10);\n}\n/**\n *\n * Returns the result of linearly interpolating between input A and input B by input T.\n *\n * @param v0\n * @param v1\n * @param t\n * @returns\n */\n\nfunction lerp(v0, v1, t) {\n  return v0 * (1 - t) + v1 * t;\n}\n/**\n *\n * Returns the linear parameter that produces the interpolant specified by input T within the range of input A to input B.\n *\n * @param v0\n * @param v1\n * @param t\n * @returns\n */\n\nfunction inverseLerp(v0, v1, t) {\n  return (t - v0) / (v1 - v0);\n}\n/**\n *\n */\n\nfunction normalize(x, y, z) {\n  var m = Math.sqrt(x * x + y * y + z * z);\n  return [x / m, y / m, z / m];\n}\n/**\n *\n */\n\nfunction pointOnCubeToPointOnSphere(x, y, z) {\n  var x2 = x * x;\n  var y2 = y * y;\n  var z2 = z * z;\n  var nx = x * Math.sqrt(1 - (y2 + z2) / 2 + y2 * z2 / 3);\n  var ny = y * Math.sqrt(1 - (z2 + x2) / 2 + z2 * x2 / 3);\n  var nz = z * Math.sqrt(1 - (x2 + y2) / 2 + x2 * y2 / 3);\n  return [nx, ny, nz];\n} // https://math.stackexchange.com/questions/180418/calculate-rotation-matrix-to-align-vector-a-to-vector-b-in-3d\n\n/**\n * Give two unit vectors a and b, returns the transformation matrix that rotates a onto b.\n *\n * */\n\nfunction rotateVectorOnVector(a, b) {\n  var v = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3().crossVectors(a, b);\n  var c = a.dot(b);\n  var i = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix3().identity(); //  skew-symmetric cross-product matrix of 𝑣 https://en.wikipedia.org/wiki/Skew-symmetric_matrix\n  // prettier-ignore\n\n  var vx = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix3().set(0, -v.z, v.y, v.z, 0, -v.x, -v.y, v.x, 0);\n  var vxsquared = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix3().multiplyMatrices(vx, vx).multiplyScalar(1 / (1 + c));\n\n  var _final = (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.a)((0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.a)(i, vx), vxsquared);\n\n  return _final;\n} // calculate latitude and longitude (in radians) from point on unit sphere\n\nfunction pointToCoordinate(x, y, z) {\n  var lat = Math.asin(y);\n  var lon = Math.atan2(x, -z);\n  return [lat, lon];\n} // calculate point on unit sphere given latitude and logitude in radians\n\nfunction coordinateToPoint(lat, lon) {\n  var y = Math.sin(lat);\n  var r = Math.cos(lat);\n  var x = Math.sin(lon) * r;\n  var z = -Math.cos(lon) * r;\n  return [x, y, z];\n}\n/**\n * Given a plane and a segment, return the intersection point if it exists or null it doesn't.\n */\n\nfunction planeSegmentIntersection(plane, segment) {\n  var _segment = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(segment, 2),\n      a = _segment[0],\n      b = _segment[1];\n\n  var matrix = rotateVectorOnVector(plane.normal, new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0));\n  var t = inverseLerp(a.clone().applyMatrix3(matrix).y, b.clone().applyMatrix3(matrix).y, 0);\n  return new three__WEBPACK_IMPORTED_MODULE_2__.Vector3().lerpVectors(a, b, t);\n}\n/**\n * Given a plane and a point, return the distance.\n */\n\nfunction pointToPlaneDistance(p, plane) {\n  var d = plane.normal.dot(p); // TODO\n\n  return d;\n}\nfunction getIndexFrom3D(coords, sides) {\n  var _coords = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(coords, 3),\n      ix = _coords[0],\n      iy = _coords[1],\n      iz = _coords[2];\n\n  var _sides = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(sides, 2),\n      rx = _sides[0],\n      ry = _sides[1];\n\n  return iz * rx * ry + iy * rx + ix;\n}\nfunction get3DFromIndex(index, size) {\n  var _size = (0,_triangle_b62b9067_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(size, 2),\n      rx = _size[0],\n      ry = _size[1];\n\n  var a = rx * ry;\n  var z = index / a;\n  var b = index - a * z;\n  var y = b / rx;\n  var x = b % rx;\n  return [x, y, z];\n}\nfunction getIndexFrom2D(coords, size) {\n  return coords[0] + size[0] * coords[1];\n}\nfunction get2DFromIndex(index, columns) {\n  var x = index % columns;\n  var y = Math.floor(index / columns);\n  return [x, y];\n}\n\nvar misc = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  clamp: clamp,\n  deltaAngle: deltaAngle,\n  degToRad: degToRad,\n  radToDeg: radToDeg,\n  fibonacciOnSphere: fibonacciOnSphere,\n  vectorEquals: vectorEquals,\n  lexicographic: lexicographic,\n  convexHull: convexHull,\n  remap: remap,\n  fade: fade,\n  lerp: lerp,\n  inverseLerp: inverseLerp,\n  normalize: normalize,\n  pointOnCubeToPointOnSphere: pointOnCubeToPointOnSphere,\n  rotateVectorOnVector: rotateVectorOnVector,\n  pointToCoordinate: pointToCoordinate,\n  coordinateToPoint: coordinateToPoint,\n  planeSegmentIntersection: planeSegmentIntersection,\n  pointToPlaneDistance: pointToPlaneDistance,\n  getIndexFrom3D: getIndexFrom3D,\n  get3DFromIndex: get3DFromIndex,\n  getIndexFrom2D: getIndexFrom2D,\n  get2DFromIndex: get2DFromIndex\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L21pc2MtN2Q4NzBiM2MuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3SDtBQUMvRTtBQUNrQjs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEM7OztBQUc1Qyx1Q0FBdUM7O0FBRXZDLGtCQUFrQixtQkFBbUI7QUFDckMsNEJBQTRCOztBQUU1QixnQ0FBZ0MsNERBQXVCLENBQUMsNERBQWtCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKLHVFQUF1RTs7QUFFdkUsbUNBQW1DLFNBQVM7QUFDNUM7QUFDQSw2QkFBNkI7O0FBRTdCLGdDQUFnQyw0REFBdUIsQ0FBQyw0REFBa0I7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7O0FBR0o7QUFDQSx1Q0FBdUM7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0REFBYztBQUM1QjtBQUNBOztBQUVBLGNBQWMsNERBQWM7QUFDNUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYywwQ0FBTztBQUNyQjtBQUNBLGNBQWMsMENBQU8sZUFBZTtBQUNwQzs7QUFFQSxlQUFlLDBDQUFPO0FBQ3RCLHNCQUFzQiwwQ0FBTzs7QUFFN0IsZUFBZSwwREFBVSxDQUFDLDBEQUFVOztBQUVwQztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLDREQUFjO0FBQy9CO0FBQ0E7O0FBRUEsc0RBQXNELDBDQUFPO0FBQzdEO0FBQ0EsYUFBYSwwQ0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQjs7QUFFL0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDREQUFjO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLDREQUFjO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0REFBYztBQUM1QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRTZkIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcbWlzYy03ZDg3MGIzYy5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZCBhcyBkb1RocmVlUG9pbnRzTWFrZUFSaWdodCwgYSBhcyBfdG9Db25zdW1hYmxlQXJyYXksIF8gYXMgX3NsaWNlZFRvQXJyYXkgfSBmcm9tICcuL3RyaWFuZ2xlLWI2MmI5MDY3LmVzbS5qcyc7XG5pbXBvcnQgeyBWZWN0b3IzLCBNYXRyaXgzIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgYSBhcyBtYXRyaXhTdW0zIH0gZnJvbSAnLi9tYXRyaXgtYmFhNTMwYmYuZXNtLmpzJztcblxuLyoqXG4gKiBDbGFtcHMgYSB2YWx1ZSBiZXR3ZWVuIGEgcmFuZ2UuXG4gKi9cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XG59IC8vIExvb3BzIHRoZSB2YWx1ZSB0LCBzbyB0aGF0IGl0IGlzIG5ldmVyIGxhcmdlciB0aGFuIGxlbmd0aCBhbmQgbmV2ZXIgc21hbGxlciB0aGFuIDAuXG5cbmZ1bmN0aW9uIHJlcGVhdCh0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGNsYW1wKHQgLSBNYXRoLmZsb29yKHQgLyBsZW5ndGgpICogbGVuZ3RoLCAwLCBsZW5ndGgpO1xufSAvLyBDYWxjdWxhdGVzIHRoZSBzaG9ydGVzdCBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIGdpdmVuIGFuZ2xlcy5cblxuXG5mdW5jdGlvbiBkZWx0YUFuZ2xlKGN1cnJlbnQsIHRhcmdldCkge1xuICB2YXIgZGVsdGEgPSByZXBlYXQodGFyZ2V0IC0gY3VycmVudCwgTWF0aC5QSSAqIDIpO1xuICBpZiAoZGVsdGEgPiBNYXRoLlBJKSBkZWx0YSAtPSBNYXRoLlBJICogMjtcbiAgcmV0dXJuIGRlbHRhO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gKi9cblxuZnVuY3Rpb24gZGVnVG9SYWQoZGVncmVlcykge1xuICByZXR1cm4gZGVncmVlcyAvIDE4MCAqIE1hdGguUEk7XG59XG4vKipcbiAqIENvbnZlcnRzIHJhZGlhbnMgdG8gZGVncmVlcy5cbiAqL1xuXG5mdW5jdGlvbiByYWRUb0RlZyhyYWRpYW5zKSB7XG4gIHJldHVybiByYWRpYW5zICogMTgwIC8gTWF0aC5QSTtcbn0gLy8gYWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3N0ZXBoYW5ib2duZXIvYTVmNTA1NDhhMDZiZWM3MjNkY2IwOTkxZGNiYjA4NTYgYnkgaHR0cHM6Ly90d2l0dGVyLmNvbS9zdF9waGFuXG5cbmZ1bmN0aW9uIGZpYm9uYWNjaU9uU3BoZXJlKGJ1ZmZlciwgX3JlZikge1xuICB2YXIgX3JlZiRyYWRpdXMgPSBfcmVmLnJhZGl1cyxcbiAgICAgIHJhZGl1cyA9IF9yZWYkcmFkaXVzID09PSB2b2lkIDAgPyAxIDogX3JlZiRyYWRpdXM7XG4gIHZhciBzYW1wbGVzID0gYnVmZmVyLmxlbmd0aCAvIDM7XG4gIHZhciBvZmZzZXQgPSAyIC8gc2FtcGxlcztcbiAgdmFyIGluY3JlbWVudCA9IE1hdGguUEkgKiAoMyAtIDIuMjM2MDY3OTc3NSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpICs9IDMpIHtcbiAgICB2YXIgeSA9IGkgKiBvZmZzZXQgLSAxICsgb2Zmc2V0IC8gMjtcbiAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoMSAtIE1hdGgucG93KHksIDIpKTtcbiAgICB2YXIgcGhpID0gaSAlIHNhbXBsZXMgKiBpbmNyZW1lbnQ7XG4gICAgdmFyIHggPSBNYXRoLmNvcyhwaGkpICogZGlzdGFuY2U7XG4gICAgdmFyIHogPSBNYXRoLnNpbihwaGkpICogZGlzdGFuY2U7XG4gICAgYnVmZmVyW2ldID0geCAqIHJhZGl1cztcbiAgICBidWZmZXJbaSArIDFdID0geSAqIHJhZGl1cztcbiAgICBidWZmZXJbaSArIDJdID0geiAqIHJhZGl1cztcbiAgfVxufSAvLyBAdHMtaWdub3JlXG5cbmZ1bmN0aW9uIHZlY3RvckVxdWFscyhhLCBiKSB7XG4gIHZhciBlcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IE51bWJlci5FUFNJTE9OO1xuICByZXR1cm4gTWF0aC5hYnMoYS54IC0gYi54KSA8IGVwcyAmJiBNYXRoLmFicyhhLnkgLSBiLnkpIDwgZXBzICYmIE1hdGguYWJzKGEueiAtIGIueikgPCBlcHM7XG59XG4vKipcbiAqIFNvcnRzIHZlY3RvcnMgaW4gbGV4aWNvZ3JhcGhpYyBvcmRlciwgd29ya3Mgd2l0aCBib3RoIHYyIGFuZCB2M1xuICpcbiAqICBVc2UgYXM6XG4gKiAgY29uc3Qgc29ydGVkID0gYXJyYXlPZlZlY3RvcnMuc29ydChsZXhpY29ncmFwaGljT3JkZXIpXG4gKi9cbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xleGljb2dyYXBoaWNfb3JkZXJcblxuZnVuY3Rpb24gbGV4aWNvZ3JhcGhpYyhhLCBiKSB7XG4gIGlmIChhLnggPT09IGIueCkge1xuICAgIC8vIGRvIGEgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyBpcyAzRCxcbiAgICAvLyBpbiB3aGljaCBjYXNlIGFkZCB5IGVxIGNoZWNrIGFuZCBzb3J0IGJ5IHpcbiAgICBpZiAodHlwZW9mIGEueiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKGEueSA9PT0gYi55KSB7XG4gICAgICAgIHJldHVybiBhLnogLSBiLno7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGEueSAtIGIueTtcbiAgfVxuXG4gIHJldHVybiBhLnggLSBiLng7XG59XG4vKipcbiAqIENvbnZleCBIdWxsXG4gKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiAyRCBWZWN0b3JzIHJlcHJlc2VudGluZyB0aGUgY29udmV4IGh1bGwgb2YgYSBzZXQgb2YgMkQgVmVjdG9yc1xuICovXG5cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbCBvZiBhIHNldCBvZiBwb2ludHNcbiAqL1xuXG5mdW5jdGlvbiBjb252ZXhIdWxsKF9wb2ludHMpIHtcbiAgdmFyIHBvaW50cyA9IF9wb2ludHMuc29ydChsZXhpY29ncmFwaGljKTsgLy8gcHV0IHAxIGFuZCBwMiBpbiBhIGxpc3QgbFVwcGVyIHdpdGggcDEgYXMgdGhlIGZpcnN0IHBvaW50XG5cblxuICB2YXIgbFVwcGVyID0gW3BvaW50c1swXSwgcG9pbnRzWzFdXTsgLy8gZm9yIGkgPC0gMyB0byBuXG5cbiAgZm9yICh2YXIgaSA9IDI7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICBsVXBwZXIucHVzaChwb2ludHNbaV0pOyAvLyB3aGlsZSBsVXBwZXIgY29udGFpbnMgbW9yZSB0aGFuIDIgcG9pbnRzIGFuZCB0aGUgbGFzdCB0aHJlZSBwb2ludHMgaW4gbFVwcGVyIGRvIG5vdCBtYWtlIGEgcmlnaHQgdHVyblxuXG4gICAgd2hpbGUgKGxVcHBlci5sZW5ndGggPiAyICYmIGRvVGhyZWVQb2ludHNNYWtlQVJpZ2h0KF90b0NvbnN1bWFibGVBcnJheShsVXBwZXIuc2xpY2UoLTMpKSkpIHtcbiAgICAgIC8vIGRlbGV0ZSB0aGUgbWlkZGxlIG9mIHRoZSBsYXN0IHRocmVlIHBvaW50cyBmcm9tIGxVcHBlclxuICAgICAgbFVwcGVyLnNwbGljZShsVXBwZXIubGVuZ3RoIC0gMiwgMSk7XG4gICAgfVxuICB9IC8vIHB1dCBwbiBhbmQgcG4tMSBpbiBhIGxpc3QgbExvd2VyIHdpdGggcG4gYXMgdGhlIGZpcnN0IHBvaW50XG5cblxuICB2YXIgbExvd2VyID0gW3BvaW50c1twb2ludHMubGVuZ3RoIC0gMV0sIHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl1dOyAvLyBmb3IgKGkgPC0gbiAtIDIgZG93bnRvIDEpXG5cbiAgZm9yICh2YXIgX2kgPSBwb2ludHMubGVuZ3RoIC0gMzsgX2kgPj0gMDsgX2ktLSkge1xuICAgIC8vIGFwcGVuZCBwaSB0byBsTG93ZXJcbiAgICBsTG93ZXIucHVzaChwb2ludHNbX2ldKTsgLy8gd2hpbGUgbExvd2VyIGNvbnRhaW5zIG1vcmUgdGhhbiAyIHBvaW50cyBhbmQgdGhlIGxhc3QgdGhyZWUgcG9pbnRzIGluIGxMb3dlciBkbyBub3QgbWFrZSBhIHJpZ2h0IHR1cm5cblxuICAgIHdoaWxlIChsTG93ZXIubGVuZ3RoID4gMiAmJiBkb1RocmVlUG9pbnRzTWFrZUFSaWdodChfdG9Db25zdW1hYmxlQXJyYXkobExvd2VyLnNsaWNlKC0zKSkpKSB7XG4gICAgICAvLyBkZWxldGUgdGhlIG1pZGRsZSBvZiB0aGUgbGFzdCB0aHJlZSBwb2ludHMgZnJvbSBsTG93ZXJcbiAgICAgIGxMb3dlci5zcGxpY2UobExvd2VyLmxlbmd0aCAtIDIsIDEpO1xuICAgIH1cbiAgfSAvLyByZW1vdmUgdGhlIGZpcnN0IGFuZCBsYXN0IHBvaW50IGZyb20gbExvd2VyIHRvIGF2b2lkIGR1cGxpY2F0aW9uIG9mIHRoZSBwb2ludHMgd2hlcmUgdGhlIHVwcGVyIGFuZCBsb3dlciBodWxsIG1lZXRcblxuXG4gIGxMb3dlci5zcGxpY2UoMCwgMSk7XG4gIGxMb3dlci5zcGxpY2UobExvd2VyLmxlbmd0aCAtIDEsIDEpOyAvLyBwcmV0dGllci1pZ25vcmVcblxuICB2YXIgYyA9IFtdLmNvbmNhdChsVXBwZXIsIGxMb3dlcik7XG4gIHJldHVybiBjO1xufVxuZnVuY3Rpb24gcmVtYXAoeCwgX3JlZjIsIF9yZWYzKSB7XG4gIHZhciBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSxcbiAgICAgIGxvdzEgPSBfcmVmNFswXSxcbiAgICAgIGhpZ2gxID0gX3JlZjRbMV07XG5cbiAgdmFyIF9yZWY1ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLFxuICAgICAgbG93MiA9IF9yZWY1WzBdLFxuICAgICAgaGlnaDIgPSBfcmVmNVsxXTtcblxuICByZXR1cm4gbG93MiArICh4IC0gbG93MSkgKiAoaGlnaDIgLSBsb3cyKSAvIChoaWdoMSAtIGxvdzEpO1xufVxuLyoqXG4gKlxuICogaHR0cHM6Ly93d3cuZGVzbW9zLmNvbS9jYWxjdWxhdG9yL3Zzbm1sYWxqZHVcbiAqXG4gKiBFYXNlLWluLW91dCwgZ29lcyB0byAtSW5maW5pdGUgYmVmb3JlIDAgYW5kIEluZmluaXRlIGFmdGVyIDFcbiAqXG4gKiBAcGFyYW0gdFxuICogQHJldHVybnNcbiAqL1xuXG5mdW5jdGlvbiBmYWRlKHQpIHtcbiAgcmV0dXJuIHQgKiB0ICogdCAqICh0ICogKHQgKiA2IC0gMTUpICsgMTApO1xufVxuLyoqXG4gKlxuICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIGxpbmVhcmx5IGludGVycG9sYXRpbmcgYmV0d2VlbiBpbnB1dCBBIGFuZCBpbnB1dCBCIGJ5IGlucHV0IFQuXG4gKlxuICogQHBhcmFtIHYwXG4gKiBAcGFyYW0gdjFcbiAqIEBwYXJhbSB0XG4gKiBAcmV0dXJuc1xuICovXG5cbmZ1bmN0aW9uIGxlcnAodjAsIHYxLCB0KSB7XG4gIHJldHVybiB2MCAqICgxIC0gdCkgKyB2MSAqIHQ7XG59XG4vKipcbiAqXG4gKiBSZXR1cm5zIHRoZSBsaW5lYXIgcGFyYW1ldGVyIHRoYXQgcHJvZHVjZXMgdGhlIGludGVycG9sYW50IHNwZWNpZmllZCBieSBpbnB1dCBUIHdpdGhpbiB0aGUgcmFuZ2Ugb2YgaW5wdXQgQSB0byBpbnB1dCBCLlxuICpcbiAqIEBwYXJhbSB2MFxuICogQHBhcmFtIHYxXG4gKiBAcGFyYW0gdFxuICogQHJldHVybnNcbiAqL1xuXG5mdW5jdGlvbiBpbnZlcnNlTGVycCh2MCwgdjEsIHQpIHtcbiAgcmV0dXJuICh0IC0gdjApIC8gKHYxIC0gdjApO1xufVxuLyoqXG4gKlxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSh4LCB5LCB6KSB7XG4gIHZhciBtID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIHJldHVybiBbeCAvIG0sIHkgLyBtLCB6IC8gbV07XG59XG4vKipcbiAqXG4gKi9cblxuZnVuY3Rpb24gcG9pbnRPbkN1YmVUb1BvaW50T25TcGhlcmUoeCwgeSwgeikge1xuICB2YXIgeDIgPSB4ICogeDtcbiAgdmFyIHkyID0geSAqIHk7XG4gIHZhciB6MiA9IHogKiB6O1xuICB2YXIgbnggPSB4ICogTWF0aC5zcXJ0KDEgLSAoeTIgKyB6MikgLyAyICsgeTIgKiB6MiAvIDMpO1xuICB2YXIgbnkgPSB5ICogTWF0aC5zcXJ0KDEgLSAoejIgKyB4MikgLyAyICsgejIgKiB4MiAvIDMpO1xuICB2YXIgbnogPSB6ICogTWF0aC5zcXJ0KDEgLSAoeDIgKyB5MikgLyAyICsgeDIgKiB5MiAvIDMpO1xuICByZXR1cm4gW254LCBueSwgbnpdO1xufSAvLyBodHRwczovL21hdGguc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzE4MDQxOC9jYWxjdWxhdGUtcm90YXRpb24tbWF0cml4LXRvLWFsaWduLXZlY3Rvci1hLXRvLXZlY3Rvci1iLWluLTNkXG5cbi8qKlxuICogR2l2ZSB0d28gdW5pdCB2ZWN0b3JzIGEgYW5kIGIsIHJldHVybnMgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCB0aGF0IHJvdGF0ZXMgYSBvbnRvIGIuXG4gKlxuICogKi9cblxuZnVuY3Rpb24gcm90YXRlVmVjdG9yT25WZWN0b3IoYSwgYikge1xuICB2YXIgdiA9IG5ldyBWZWN0b3IzKCkuY3Jvc3NWZWN0b3JzKGEsIGIpO1xuICB2YXIgYyA9IGEuZG90KGIpO1xuICB2YXIgaSA9IG5ldyBNYXRyaXgzKCkuaWRlbnRpdHkoKTsgLy8gIHNrZXctc3ltbWV0cmljIGNyb3NzLXByb2R1Y3QgbWF0cml4IG9mIPCdkaMgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2tldy1zeW1tZXRyaWNfbWF0cml4XG4gIC8vIHByZXR0aWVyLWlnbm9yZVxuXG4gIHZhciB2eCA9IG5ldyBNYXRyaXgzKCkuc2V0KDAsIC12LnosIHYueSwgdi56LCAwLCAtdi54LCAtdi55LCB2LngsIDApO1xuICB2YXIgdnhzcXVhcmVkID0gbmV3IE1hdHJpeDMoKS5tdWx0aXBseU1hdHJpY2VzKHZ4LCB2eCkubXVsdGlwbHlTY2FsYXIoMSAvICgxICsgYykpO1xuXG4gIHZhciBfZmluYWwgPSBtYXRyaXhTdW0zKG1hdHJpeFN1bTMoaSwgdngpLCB2eHNxdWFyZWQpO1xuXG4gIHJldHVybiBfZmluYWw7XG59IC8vIGNhbGN1bGF0ZSBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlIChpbiByYWRpYW5zKSBmcm9tIHBvaW50IG9uIHVuaXQgc3BoZXJlXG5cbmZ1bmN0aW9uIHBvaW50VG9Db29yZGluYXRlKHgsIHksIHopIHtcbiAgdmFyIGxhdCA9IE1hdGguYXNpbih5KTtcbiAgdmFyIGxvbiA9IE1hdGguYXRhbjIoeCwgLXopO1xuICByZXR1cm4gW2xhdCwgbG9uXTtcbn0gLy8gY2FsY3VsYXRlIHBvaW50IG9uIHVuaXQgc3BoZXJlIGdpdmVuIGxhdGl0dWRlIGFuZCBsb2dpdHVkZSBpbiByYWRpYW5zXG5cbmZ1bmN0aW9uIGNvb3JkaW5hdGVUb1BvaW50KGxhdCwgbG9uKSB7XG4gIHZhciB5ID0gTWF0aC5zaW4obGF0KTtcbiAgdmFyIHIgPSBNYXRoLmNvcyhsYXQpO1xuICB2YXIgeCA9IE1hdGguc2luKGxvbikgKiByO1xuICB2YXIgeiA9IC1NYXRoLmNvcyhsb24pICogcjtcbiAgcmV0dXJuIFt4LCB5LCB6XTtcbn1cbi8qKlxuICogR2l2ZW4gYSBwbGFuZSBhbmQgYSBzZWdtZW50LCByZXR1cm4gdGhlIGludGVyc2VjdGlvbiBwb2ludCBpZiBpdCBleGlzdHMgb3IgbnVsbCBpdCBkb2Vzbid0LlxuICovXG5cbmZ1bmN0aW9uIHBsYW5lU2VnbWVudEludGVyc2VjdGlvbihwbGFuZSwgc2VnbWVudCkge1xuICB2YXIgX3NlZ21lbnQgPSBfc2xpY2VkVG9BcnJheShzZWdtZW50LCAyKSxcbiAgICAgIGEgPSBfc2VnbWVudFswXSxcbiAgICAgIGIgPSBfc2VnbWVudFsxXTtcblxuICB2YXIgbWF0cml4ID0gcm90YXRlVmVjdG9yT25WZWN0b3IocGxhbmUubm9ybWFsLCBuZXcgVmVjdG9yMygwLCAxLCAwKSk7XG4gIHZhciB0ID0gaW52ZXJzZUxlcnAoYS5jbG9uZSgpLmFwcGx5TWF0cml4MyhtYXRyaXgpLnksIGIuY2xvbmUoKS5hcHBseU1hdHJpeDMobWF0cml4KS55LCAwKTtcbiAgcmV0dXJuIG5ldyBWZWN0b3IzKCkubGVycFZlY3RvcnMoYSwgYiwgdCk7XG59XG4vKipcbiAqIEdpdmVuIGEgcGxhbmUgYW5kIGEgcG9pbnQsIHJldHVybiB0aGUgZGlzdGFuY2UuXG4gKi9cblxuZnVuY3Rpb24gcG9pbnRUb1BsYW5lRGlzdGFuY2UocCwgcGxhbmUpIHtcbiAgdmFyIGQgPSBwbGFuZS5ub3JtYWwuZG90KHApOyAvLyBUT0RPXG5cbiAgcmV0dXJuIGQ7XG59XG5mdW5jdGlvbiBnZXRJbmRleEZyb20zRChjb29yZHMsIHNpZGVzKSB7XG4gIHZhciBfY29vcmRzID0gX3NsaWNlZFRvQXJyYXkoY29vcmRzLCAzKSxcbiAgICAgIGl4ID0gX2Nvb3Jkc1swXSxcbiAgICAgIGl5ID0gX2Nvb3Jkc1sxXSxcbiAgICAgIGl6ID0gX2Nvb3Jkc1syXTtcblxuICB2YXIgX3NpZGVzID0gX3NsaWNlZFRvQXJyYXkoc2lkZXMsIDIpLFxuICAgICAgcnggPSBfc2lkZXNbMF0sXG4gICAgICByeSA9IF9zaWRlc1sxXTtcblxuICByZXR1cm4gaXogKiByeCAqIHJ5ICsgaXkgKiByeCArIGl4O1xufVxuZnVuY3Rpb24gZ2V0M0RGcm9tSW5kZXgoaW5kZXgsIHNpemUpIHtcbiAgdmFyIF9zaXplID0gX3NsaWNlZFRvQXJyYXkoc2l6ZSwgMiksXG4gICAgICByeCA9IF9zaXplWzBdLFxuICAgICAgcnkgPSBfc2l6ZVsxXTtcblxuICB2YXIgYSA9IHJ4ICogcnk7XG4gIHZhciB6ID0gaW5kZXggLyBhO1xuICB2YXIgYiA9IGluZGV4IC0gYSAqIHo7XG4gIHZhciB5ID0gYiAvIHJ4O1xuICB2YXIgeCA9IGIgJSByeDtcbiAgcmV0dXJuIFt4LCB5LCB6XTtcbn1cbmZ1bmN0aW9uIGdldEluZGV4RnJvbTJEKGNvb3Jkcywgc2l6ZSkge1xuICByZXR1cm4gY29vcmRzWzBdICsgc2l6ZVswXSAqIGNvb3Jkc1sxXTtcbn1cbmZ1bmN0aW9uIGdldDJERnJvbUluZGV4KGluZGV4LCBjb2x1bW5zKSB7XG4gIHZhciB4ID0gaW5kZXggJSBjb2x1bW5zO1xuICB2YXIgeSA9IE1hdGguZmxvb3IoaW5kZXggLyBjb2x1bW5zKTtcbiAgcmV0dXJuIFt4LCB5XTtcbn1cblxudmFyIG1pc2MgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgY2xhbXA6IGNsYW1wLFxuICBkZWx0YUFuZ2xlOiBkZWx0YUFuZ2xlLFxuICBkZWdUb1JhZDogZGVnVG9SYWQsXG4gIHJhZFRvRGVnOiByYWRUb0RlZyxcbiAgZmlib25hY2NpT25TcGhlcmU6IGZpYm9uYWNjaU9uU3BoZXJlLFxuICB2ZWN0b3JFcXVhbHM6IHZlY3RvckVxdWFscyxcbiAgbGV4aWNvZ3JhcGhpYzogbGV4aWNvZ3JhcGhpYyxcbiAgY29udmV4SHVsbDogY29udmV4SHVsbCxcbiAgcmVtYXA6IHJlbWFwLFxuICBmYWRlOiBmYWRlLFxuICBsZXJwOiBsZXJwLFxuICBpbnZlcnNlTGVycDogaW52ZXJzZUxlcnAsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplLFxuICBwb2ludE9uQ3ViZVRvUG9pbnRPblNwaGVyZTogcG9pbnRPbkN1YmVUb1BvaW50T25TcGhlcmUsXG4gIHJvdGF0ZVZlY3Rvck9uVmVjdG9yOiByb3RhdGVWZWN0b3JPblZlY3RvcixcbiAgcG9pbnRUb0Nvb3JkaW5hdGU6IHBvaW50VG9Db29yZGluYXRlLFxuICBjb29yZGluYXRlVG9Qb2ludDogY29vcmRpbmF0ZVRvUG9pbnQsXG4gIHBsYW5lU2VnbWVudEludGVyc2VjdGlvbjogcGxhbmVTZWdtZW50SW50ZXJzZWN0aW9uLFxuICBwb2ludFRvUGxhbmVEaXN0YW5jZTogcG9pbnRUb1BsYW5lRGlzdGFuY2UsXG4gIGdldEluZGV4RnJvbTNEOiBnZXRJbmRleEZyb20zRCxcbiAgZ2V0M0RGcm9tSW5kZXg6IGdldDNERnJvbUluZGV4LFxuICBnZXRJbmRleEZyb20yRDogZ2V0SW5kZXhGcm9tMkQsXG4gIGdldDJERnJvbUluZGV4OiBnZXQyREZyb21JbmRleFxufSk7XG5cbmV4cG9ydCB7IGRlZ1RvUmFkIGFzIGEsIGZpYm9uYWNjaU9uU3BoZXJlIGFzIGIsIGNsYW1wIGFzIGMsIGRlbHRhQW5nbGUgYXMgZCwgbGV4aWNvZ3JhcGhpYyBhcyBlLCBmYWRlIGFzIGYsIGNvbnZleEh1bGwgYXMgZywgcmVtYXAgYXMgaCwgaW52ZXJzZUxlcnAgYXMgaSwgcm90YXRlVmVjdG9yT25WZWN0b3IgYXMgaiwgcG9pbnRUb0Nvb3JkaW5hdGUgYXMgaywgbGVycCBhcyBsLCBtaXNjIGFzIG0sIG5vcm1hbGl6ZSBhcyBuLCBjb29yZGluYXRlVG9Qb2ludCBhcyBvLCBwb2ludE9uQ3ViZVRvUG9pbnRPblNwaGVyZSBhcyBwLCBwbGFuZVNlZ21lbnRJbnRlcnNlY3Rpb24gYXMgcSwgcmFkVG9EZWcgYXMgciwgcG9pbnRUb1BsYW5lRGlzdGFuY2UgYXMgcywgZ2V0SW5kZXhGcm9tM0QgYXMgdCwgZ2V0M0RGcm9tSW5kZXggYXMgdSwgdmVjdG9yRXF1YWxzIGFzIHYsIGdldEluZGV4RnJvbTJEIGFzIHcsIGdldDJERnJvbUluZGV4IGFzIHggfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/misc-7d870b3c.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/objectSpread2-284232a6.esm.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/objectSpread2-284232a6.esm.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _: () => (/* binding */ _objectSpread2),\n/* harmony export */   a: () => (/* binding */ _defineProperty)\n/* harmony export */ });\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L29iamVjdFNwcmVhZDItMjg0MjMyYTYuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFcUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXHBhcmVudGx5dGljc1xcbm9kZV9tb2R1bGVzXFxAcmVhY3QtdGhyZWVcXHBvc3Rwcm9jZXNzaW5nXFxub2RlX21vZHVsZXNcXG1hYXRoXFxkaXN0XFxvYmplY3RTcHJlYWQyLTI4NDIzMmE2LmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuXG4gICAgaWYgKGVudW1lcmFibGVPbmx5KSB7XG4gICAgICBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZXhwb3J0IHsgX29iamVjdFNwcmVhZDIgYXMgXywgX2RlZmluZVByb3BlcnR5IGFzIGEgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/objectSpread2-284232a6.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/three-eb2ad8c0.esm.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/three-eb2ad8c0.esm.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   b: () => (/* binding */ bufferToVectors),\n/* harmony export */   t: () => (/* binding */ three),\n/* harmony export */   v: () => (/* binding */ vectorsToBuffer)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n\n\n/**\n * Helpers for converting buffers to and from Three.js objects\n */\n\n/**\n * Convents passed buffer of passed stride to an array of vectors with the correct length.\n *\n * @param buffer\n * @param stride\n * @returns\n */\nfunction bufferToVectors(buffer) {\n  var stride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  var p = [];\n\n  for (var i = 0, j = 0; i < buffer.length; i += stride, j++) {\n    if (stride === 3) {\n      p[j] = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(buffer[i], buffer[i + 1], buffer[i + 2]);\n    } else {\n      p[j] = new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(buffer[i], buffer[i + 1]);\n    }\n  }\n\n  return p;\n}\n/**\n * Transforms a passed Vector2 or Vector3 array to a points buffer\n *\n * @param vectorArray\n * @returns\n */\n\nfunction vectorsToBuffer(vectorArray) {\n  var l = vectorArray.length;\n  var stride = vectorArray[0].hasOwnProperty(\"z\") ? 3 : 2;\n  var buffer = new Float32Array(l * stride);\n\n  for (var i = 0; i < l; i++) {\n    var j = i * stride;\n    buffer[j] = vectorArray[i].x;\n    buffer[j + 1] = vectorArray[i].y;\n\n    if (stride === 3) {\n      buffer[j + 2] = vectorArray[i].z;\n    }\n  }\n\n  return buffer;\n}\n\nvar three = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  bufferToVectors: bufferToVectors,\n  vectorsToBuffer: vectorsToBuffer\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L3RocmVlLWViMmFkOGMwLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDOztBQUV6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBLGlCQUFpQiwwQ0FBTztBQUN4QixNQUFNO0FBQ04saUJBQWlCLDBDQUFPO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRWlFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcdGhyZWUtZWIyYWQ4YzAuZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvcjMsIFZlY3RvcjIgfSBmcm9tICd0aHJlZSc7XG5cbi8qKlxuICogSGVscGVycyBmb3IgY29udmVydGluZyBidWZmZXJzIHRvIGFuZCBmcm9tIFRocmVlLmpzIG9iamVjdHNcbiAqL1xuXG4vKipcbiAqIENvbnZlbnRzIHBhc3NlZCBidWZmZXIgb2YgcGFzc2VkIHN0cmlkZSB0byBhbiBhcnJheSBvZiB2ZWN0b3JzIHdpdGggdGhlIGNvcnJlY3QgbGVuZ3RoLlxuICpcbiAqIEBwYXJhbSBidWZmZXJcbiAqIEBwYXJhbSBzdHJpZGVcbiAqIEByZXR1cm5zXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlclRvVmVjdG9ycyhidWZmZXIpIHtcbiAgdmFyIHN0cmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMztcbiAgdmFyIHAgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpICs9IHN0cmlkZSwgaisrKSB7XG4gICAgaWYgKHN0cmlkZSA9PT0gMykge1xuICAgICAgcFtqXSA9IG5ldyBWZWN0b3IzKGJ1ZmZlcltpXSwgYnVmZmVyW2kgKyAxXSwgYnVmZmVyW2kgKyAyXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBbal0gPSBuZXcgVmVjdG9yMihidWZmZXJbaV0sIGJ1ZmZlcltpICsgMV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgcGFzc2VkIFZlY3RvcjIgb3IgVmVjdG9yMyBhcnJheSB0byBhIHBvaW50cyBidWZmZXJcbiAqXG4gKiBAcGFyYW0gdmVjdG9yQXJyYXlcbiAqIEByZXR1cm5zXG4gKi9cblxuZnVuY3Rpb24gdmVjdG9yc1RvQnVmZmVyKHZlY3RvckFycmF5KSB7XG4gIHZhciBsID0gdmVjdG9yQXJyYXkubGVuZ3RoO1xuICB2YXIgc3RyaWRlID0gdmVjdG9yQXJyYXlbMF0uaGFzT3duUHJvcGVydHkoXCJ6XCIpID8gMyA6IDI7XG4gIHZhciBidWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGwgKiBzdHJpZGUpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGogPSBpICogc3RyaWRlO1xuICAgIGJ1ZmZlcltqXSA9IHZlY3RvckFycmF5W2ldLng7XG4gICAgYnVmZmVyW2ogKyAxXSA9IHZlY3RvckFycmF5W2ldLnk7XG5cbiAgICBpZiAoc3RyaWRlID09PSAzKSB7XG4gICAgICBidWZmZXJbaiArIDJdID0gdmVjdG9yQXJyYXlbaV0uejtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufVxuXG52YXIgdGhyZWUgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYnVmZmVyVG9WZWN0b3JzOiBidWZmZXJUb1ZlY3RvcnMsXG4gIHZlY3RvcnNUb0J1ZmZlcjogdmVjdG9yc1RvQnVmZmVyXG59KTtcblxuZXhwb3J0IHsgYnVmZmVyVG9WZWN0b3JzIGFzIGIsIHRocmVlIGFzIHQsIHZlY3RvcnNUb0J1ZmZlciBhcyB2IH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/three-eb2ad8c0.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _: () => (/* binding */ _slicedToArray),\n/* harmony export */   a: () => (/* binding */ _toConsumableArray),\n/* harmony export */   b: () => (/* binding */ triangleDeterminant),\n/* harmony export */   c: () => (/* binding */ arePointsCollinear),\n/* harmony export */   d: () => (/* binding */ doThreePointsMakeARight),\n/* harmony export */   e: () => (/* binding */ isTriangleClockwise),\n/* harmony export */   f: () => (/* binding */ isPointInCircumcircle),\n/* harmony export */   g: () => (/* binding */ getCircumcircle),\n/* harmony export */   i: () => (/* binding */ isPointInTriangle),\n/* harmony export */   t: () => (/* binding */ triangle)\n/* harmony export */ });\n/* harmony import */ var _isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isNativeReflectConstruct-5594d075.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/isNativeReflectConstruct-5594d075.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix-baa530bf.esm.js */ \"(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/matrix-baa530bf.esm.js\");\n\n\n\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _construct(Parent, args, Class) {\n  if ((0,_isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_0__.a)()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) (0,_isNativeReflectConstruct_5594d075_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\n/**\n *\n * @param point\n *\n * @param triangle\n *\n * @returns {boolean} true if the point is in the triangle\n *\n * TODO: Find explainer\n */\nfunction isPointInTriangle(point, triangle) {\n  var _triangle$ = _slicedToArray(triangle[0], 2),\n      ax = _triangle$[0],\n      ay = _triangle$[1];\n\n  var _triangle$2 = _slicedToArray(triangle[1], 2),\n      bx = _triangle$2[0],\n      by = _triangle$2[1];\n\n  var _triangle$3 = _slicedToArray(triangle[2], 2),\n      cx = _triangle$3[0],\n      cy = _triangle$3[1];\n\n  var _point = _slicedToArray(point, 2),\n      px = _point[0],\n      py = _point[1]; // TODO Sub with static calc\n\n\n  var matrix = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix4(); // prettier-ignore\n\n  matrix.set(ax, ay, ax * ax + ay * ay, 1, bx, by, bx * bx + by * by, 1, cx, cy, cx * cx + cy * cy, 1, px, py, px * px + py * py, 1);\n  return matrix.determinant() <= 0;\n}\nfunction triangleDeterminant(triangle) {\n  var _triangle$4 = _slicedToArray(triangle[0], 2),\n      x1 = _triangle$4[0],\n      y1 = _triangle$4[1];\n\n  var _triangle$5 = _slicedToArray(triangle[1], 2),\n      x2 = _triangle$5[0],\n      y2 = _triangle$5[1];\n\n  var _triangle$6 = _slicedToArray(triangle[2], 2),\n      x3 = _triangle$6[0],\n      y3 = _triangle$6[1]; // prettier-ignore\n\n\n  return (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.d)(x1, y1, 1, x2, y2, 1, x3, y3, 1);\n}\n/**\n * Uses triangle area determinant to check if 3 points are collinear.\n * If they are, they can't make a triangle, so the determinant will be 0!\n *\n *      0     1     2\n * ─────■─────■─────■\n *\n *\n * Fun fact, you can use this same determinant to check the order of the points in the triangle\n *\n * NOTE: Should this use a buffer instead? NOTE: Should this use a buffer instead? [x0, y0, x1, y1, x2, y2]?\n *\n */\n\nfunction arePointsCollinear(points) {\n  return triangleDeterminant(points) === 0;\n} // TODO This is the same principle as the prev function, find a way to make it have sense\n\nfunction isTriangleClockwise(triangle) {\n  return triangleDeterminant(triangle) < 0;\n}\n/**\n \nThe circumcircle is a circle touching all the vertices of a triangle or polygon.\n\n             ┌───┐             \n             │ B │             \n             └───┘             \n           .───●───.           \n        ,─'   ╱ ╲   '─.        \n      ,'     ╱   ╲     `.      \n     ╱      ╱     ╲      ╲     \n    ;      ╱       ╲      :    \n    │     ╱         ╲     │    \n    │    ╱           ╲    │    \n    :   ╱             ╲   ;    \n     ╲ ╱               ╲ ╱     \n┌───┐ ●─────────────────● ┌───┐\n│ A │  `.             ,'  │ C │\n└───┘    '─.       ,─'    └───┘\n            `─────'                         \n */\n\n/**\n *\n * @param triangle\n *\n * @returns {number} circumcircle\n */\n// https://math.stackexchange.com/a/1460096\n\nfunction getCircumcircle(triangle) {\n  // TS-TODO the next few lines are ignored because the types aren't current to the change in vectors (that can now be iterated)\n  // @ts-ignore\n  var _triangle$7 = _slicedToArray(triangle[0], 2),\n      ax = _triangle$7[0],\n      ay = _triangle$7[1]; // @ts-ignore\n\n\n  var _triangle$8 = _slicedToArray(triangle[1], 2),\n      bx = _triangle$8[0],\n      by = _triangle$8[1]; // @ts-ignore\n\n\n  var _triangle$9 = _slicedToArray(triangle[2], 2),\n      cx = _triangle$9[0],\n      cy = _triangle$9[1];\n\n  if (arePointsCollinear(triangle)) return null; // points are collinear\n\n  var m = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix4(); // prettier-ignore\n\n  m.set(1, 1, 1, 1, ax * ax + ay * ay, ax, ay, 1, bx * bx + by * by, bx, by, 1, cx * cx + cy * cy, cx, cy, 1);\n  var m11 = (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.g)(m, 1, 1);\n  var m13 = (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.g)(m, 1, 3);\n  var m12 = (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.g)(m, 1, 2);\n  var m14 = (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.g)(m, 1, 4);\n  var x0 = 0.5 * (m12 / m11);\n  var y0 = 0.5 * (m13 / m11);\n  var r2 = x0 * x0 + y0 * y0 + m14 / m11;\n  return {\n    x: Math.abs(x0) === 0 ? 0 : x0,\n    y: Math.abs(y0) === 0 ? 0 : -y0,\n    r: Math.sqrt(r2)\n  };\n} // https://stackoverflow.com/questions/39984709/how-can-i-check-wether-a-point-is-inside-the-circumcircle-of-3-points\n\nfunction isPointInCircumcircle(point, triangle) {\n  var _ref = Array.isArray(triangle[0]) ? triangle[0] : triangle[0].toArray(),\n      _ref2 = _slicedToArray(_ref, 2),\n      ax = _ref2[0],\n      ay = _ref2[1];\n\n  var _ref3 = Array.isArray(triangle[1]) ? triangle[1] : triangle[1].toArray(),\n      _ref4 = _slicedToArray(_ref3, 2),\n      bx = _ref4[0],\n      by = _ref4[1];\n\n  var _ref5 = Array.isArray(triangle[2]) ? triangle[2] : triangle[2].toArray(),\n      _ref6 = _slicedToArray(_ref5, 2),\n      cx = _ref6[0],\n      cy = _ref6[1];\n\n  var _point2 = _slicedToArray(point, 2),\n      px = _point2[0],\n      py = _point2[1];\n\n  if (arePointsCollinear(triangle)) throw new Error(\"Collinear points don't form a triangle\");\n  /**\n          | ax-px, ay-py, (ax-px)² + (ay-py)² |\n    det = | bx-px, by-py, (bx-px)² + (by-py)² |\n          | cx-px, cy-py, (cx-px)² + (cy-py)² |\n  */\n\n  var x1mpx = ax - px;\n  var aympy = ay - py;\n  var bxmpx = bx - px;\n  var bympy = by - py;\n  var cxmpx = cx - px;\n  var cympy = cy - py; // prettier-ignore\n\n  var d = (0,_matrix_baa530bf_esm_js__WEBPACK_IMPORTED_MODULE_1__.d)(x1mpx, aympy, x1mpx * x1mpx + aympy * aympy, bxmpx, bympy, bxmpx * bxmpx + bympy * bympy, cxmpx, cympy, cxmpx * cxmpx + cympy * cympy); // if d is 0, the point is on C\n\n  if (d === 0) {\n    return true;\n  }\n\n  return !isTriangleClockwise(triangle) ? d > 0 : d < 0;\n} // From https://algorithmtutor.com/Computational-Geometry/Determining-if-two-consecutive-segments-turn-left-or-right/\n\nvar mv1 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector2();\nvar mv2 = new three__WEBPACK_IMPORTED_MODULE_2__.Vector2();\n/**\n \n     ╱      ╲     \n    ╱        ╲    \n   ▕          ▏   \n                  \n right      left  \n\n * NOTE: Should this use a buffer instead? [x0, y0, x1, y1]?\n */\n\nfunction doThreePointsMakeARight(points) {\n  var _points$map = points.map(function (p) {\n    if (Array.isArray(p)) {\n      return _construct(three__WEBPACK_IMPORTED_MODULE_2__.Vector2, _toConsumableArray(p));\n    }\n\n    return p;\n  }),\n      _points$map2 = _slicedToArray(_points$map, 3),\n      p1 = _points$map2[0],\n      p2 = _points$map2[1],\n      p3 = _points$map2[2];\n\n  if (arePointsCollinear(points)) return false; // @ts-ignore\n\n  var p2p1 = mv1.subVectors(p2, p1); // @ts-ignore\n\n  var p3p1 = mv2.subVectors(p3, p1);\n  var cross = p3p1.cross(p2p1);\n  return cross > 0;\n}\n\nvar triangle = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isPointInTriangle: isPointInTriangle,\n  triangleDeterminant: triangleDeterminant,\n  arePointsCollinear: arePointsCollinear,\n  isTriangleClockwise: isTriangleClockwise,\n  getCircumcircle: getCircumcircle,\n  isPointInCircumcircle: isPointInCircumcircle,\n  doThreePointsMakeARight: doThreePointsMakeARight\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L3RyaWFuZ2xlLWI2MmI5MDY3LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWtIO0FBQ3pFO0FBQ21DOztBQUU1RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDRCQUE0QiwrQkFBK0I7QUFDM0Q7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsU0FBUzs7QUFFbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSw0RUFBeUI7QUFDL0I7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0RUFBZTtBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0JBQXNCOzs7QUFHdEIsbUJBQW1CLDBDQUFPLElBQUk7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCOzs7QUFHM0IsU0FBUywwREFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCOzs7QUFHM0I7QUFDQTtBQUNBLDJCQUEyQjs7O0FBRzNCO0FBQ0E7QUFDQTs7QUFFQSxpREFBaUQ7O0FBRWpELGNBQWMsMENBQU8sSUFBSTs7QUFFekI7QUFDQSxZQUFZLDBEQUFRO0FBQ3BCLFlBQVksMERBQVE7QUFDcEIsWUFBWSwwREFBUTtBQUNwQixZQUFZLDBEQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCOztBQUV2QixVQUFVLDBEQUFZLHlJQUF5STs7QUFFL0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRixjQUFjLDBDQUFPO0FBQ3JCLGNBQWMsMENBQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMENBQU87QUFDL0I7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdEOztBQUVoRCxxQ0FBcUM7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRTJQIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcdHJpYW5nbGUtYjYyYjkwNjcuZXNtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGEgYXMgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCwgXyBhcyBfc2V0UHJvdG90eXBlT2YgfSBmcm9tICcuL2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC01NTk0ZDA3NS5lc20uanMnO1xuaW1wb3J0IHsgVmVjdG9yMiwgTWF0cml4NCB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7IGQgYXMgZGV0ZXJtaW5hbnQzLCBnIGFzIGdldE1pbm9yIH0gZnJvbSAnLi9tYXRyaXgtYmFhNTMwYmYuZXNtLmpzJztcblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTtcblxuICBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuO1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcblxuICB2YXIgX3MsIF9lO1xuXG4gIHRyeSB7XG4gICAgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICByZXR1cm4gYXJyMjtcbn1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbXCJAQGl0ZXJhdG9yXCJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSB7XG4gICAgX2NvbnN0cnVjdCA9IFJlZmxlY3QuY29uc3RydWN0O1xuICB9IGVsc2Uge1xuICAgIF9jb25zdHJ1Y3QgPSBmdW5jdGlvbiBfY29uc3RydWN0KFBhcmVudCwgYXJncywgQ2xhc3MpIHtcbiAgICAgIHZhciBhID0gW251bGxdO1xuICAgICAgYS5wdXNoLmFwcGx5KGEsIGFyZ3MpO1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gRnVuY3Rpb24uYmluZC5hcHBseShQYXJlbnQsIGEpO1xuICAgICAgdmFyIGluc3RhbmNlID0gbmV3IENvbnN0cnVjdG9yKCk7XG4gICAgICBpZiAoQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihpbnN0YW5jZSwgQ2xhc3MucHJvdG90eXBlKTtcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF9jb25zdHJ1Y3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHBvaW50XG4gKlxuICogQHBhcmFtIHRyaWFuZ2xlXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIHBvaW50IGlzIGluIHRoZSB0cmlhbmdsZVxuICpcbiAqIFRPRE86IEZpbmQgZXhwbGFpbmVyXG4gKi9cbmZ1bmN0aW9uIGlzUG9pbnRJblRyaWFuZ2xlKHBvaW50LCB0cmlhbmdsZSkge1xuICB2YXIgX3RyaWFuZ2xlJCA9IF9zbGljZWRUb0FycmF5KHRyaWFuZ2xlWzBdLCAyKSxcbiAgICAgIGF4ID0gX3RyaWFuZ2xlJFswXSxcbiAgICAgIGF5ID0gX3RyaWFuZ2xlJFsxXTtcblxuICB2YXIgX3RyaWFuZ2xlJDIgPSBfc2xpY2VkVG9BcnJheSh0cmlhbmdsZVsxXSwgMiksXG4gICAgICBieCA9IF90cmlhbmdsZSQyWzBdLFxuICAgICAgYnkgPSBfdHJpYW5nbGUkMlsxXTtcblxuICB2YXIgX3RyaWFuZ2xlJDMgPSBfc2xpY2VkVG9BcnJheSh0cmlhbmdsZVsyXSwgMiksXG4gICAgICBjeCA9IF90cmlhbmdsZSQzWzBdLFxuICAgICAgY3kgPSBfdHJpYW5nbGUkM1sxXTtcblxuICB2YXIgX3BvaW50ID0gX3NsaWNlZFRvQXJyYXkocG9pbnQsIDIpLFxuICAgICAgcHggPSBfcG9pbnRbMF0sXG4gICAgICBweSA9IF9wb2ludFsxXTsgLy8gVE9ETyBTdWIgd2l0aCBzdGF0aWMgY2FsY1xuXG5cbiAgdmFyIG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7IC8vIHByZXR0aWVyLWlnbm9yZVxuXG4gIG1hdHJpeC5zZXQoYXgsIGF5LCBheCAqIGF4ICsgYXkgKiBheSwgMSwgYngsIGJ5LCBieCAqIGJ4ICsgYnkgKiBieSwgMSwgY3gsIGN5LCBjeCAqIGN4ICsgY3kgKiBjeSwgMSwgcHgsIHB5LCBweCAqIHB4ICsgcHkgKiBweSwgMSk7XG4gIHJldHVybiBtYXRyaXguZGV0ZXJtaW5hbnQoKSA8PSAwO1xufVxuZnVuY3Rpb24gdHJpYW5nbGVEZXRlcm1pbmFudCh0cmlhbmdsZSkge1xuICB2YXIgX3RyaWFuZ2xlJDQgPSBfc2xpY2VkVG9BcnJheSh0cmlhbmdsZVswXSwgMiksXG4gICAgICB4MSA9IF90cmlhbmdsZSQ0WzBdLFxuICAgICAgeTEgPSBfdHJpYW5nbGUkNFsxXTtcblxuICB2YXIgX3RyaWFuZ2xlJDUgPSBfc2xpY2VkVG9BcnJheSh0cmlhbmdsZVsxXSwgMiksXG4gICAgICB4MiA9IF90cmlhbmdsZSQ1WzBdLFxuICAgICAgeTIgPSBfdHJpYW5nbGUkNVsxXTtcblxuICB2YXIgX3RyaWFuZ2xlJDYgPSBfc2xpY2VkVG9BcnJheSh0cmlhbmdsZVsyXSwgMiksXG4gICAgICB4MyA9IF90cmlhbmdsZSQ2WzBdLFxuICAgICAgeTMgPSBfdHJpYW5nbGUkNlsxXTsgLy8gcHJldHRpZXItaWdub3JlXG5cblxuICByZXR1cm4gZGV0ZXJtaW5hbnQzKHgxLCB5MSwgMSwgeDIsIHkyLCAxLCB4MywgeTMsIDEpO1xufVxuLyoqXG4gKiBVc2VzIHRyaWFuZ2xlIGFyZWEgZGV0ZXJtaW5hbnQgdG8gY2hlY2sgaWYgMyBwb2ludHMgYXJlIGNvbGxpbmVhci5cbiAqIElmIHRoZXkgYXJlLCB0aGV5IGNhbid0IG1ha2UgYSB0cmlhbmdsZSwgc28gdGhlIGRldGVybWluYW50IHdpbGwgYmUgMCFcbiAqXG4gKiAgICAgIDAgICAgIDEgICAgIDJcbiAqIOKUgOKUgOKUgOKUgOKUgOKWoOKUgOKUgOKUgOKUgOKUgOKWoOKUgOKUgOKUgOKUgOKUgOKWoFxuICpcbiAqXG4gKiBGdW4gZmFjdCwgeW91IGNhbiB1c2UgdGhpcyBzYW1lIGRldGVybWluYW50IHRvIGNoZWNrIHRoZSBvcmRlciBvZiB0aGUgcG9pbnRzIGluIHRoZSB0cmlhbmdsZVxuICpcbiAqIE5PVEU6IFNob3VsZCB0aGlzIHVzZSBhIGJ1ZmZlciBpbnN0ZWFkPyBOT1RFOiBTaG91bGQgdGhpcyB1c2UgYSBidWZmZXIgaW5zdGVhZD8gW3gwLCB5MCwgeDEsIHkxLCB4MiwgeTJdP1xuICpcbiAqL1xuXG5mdW5jdGlvbiBhcmVQb2ludHNDb2xsaW5lYXIocG9pbnRzKSB7XG4gIHJldHVybiB0cmlhbmdsZURldGVybWluYW50KHBvaW50cykgPT09IDA7XG59IC8vIFRPRE8gVGhpcyBpcyB0aGUgc2FtZSBwcmluY2lwbGUgYXMgdGhlIHByZXYgZnVuY3Rpb24sIGZpbmQgYSB3YXkgdG8gbWFrZSBpdCBoYXZlIHNlbnNlXG5cbmZ1bmN0aW9uIGlzVHJpYW5nbGVDbG9ja3dpc2UodHJpYW5nbGUpIHtcbiAgcmV0dXJuIHRyaWFuZ2xlRGV0ZXJtaW5hbnQodHJpYW5nbGUpIDwgMDtcbn1cbi8qKlxuIFxuVGhlIGNpcmN1bWNpcmNsZSBpcyBhIGNpcmNsZSB0b3VjaGluZyBhbGwgdGhlIHZlcnRpY2VzIG9mIGEgdHJpYW5nbGUgb3IgcG9seWdvbi5cblxuICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUkCAgICAgICAgICAgICBcbiAgICAgICAgICAgICDilIIgQiDilIIgICAgICAgICAgICAgXG4gICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSYICAgICAgICAgICAgIFxuICAgICAgICAgICAu4pSA4pSA4pSA4peP4pSA4pSA4pSALiAgICAgICAgICAgXG4gICAgICAgICzilIAnICAg4pWxIOKVsiAgICfilIAuICAgICAgICBcbiAgICAgICwnICAgICDilbEgICDilbIgICAgIGAuICAgICAgXG4gICAgIOKVsSAgICAgIOKVsSAgICAg4pWyICAgICAg4pWyICAgICBcbiAgICA7ICAgICAg4pWxICAgICAgIOKVsiAgICAgIDogICAgXG4gICAg4pSCICAgICDilbEgICAgICAgICDilbIgICAgIOKUgiAgICBcbiAgICDilIIgICAg4pWxICAgICAgICAgICDilbIgICAg4pSCICAgIFxuICAgIDogICDilbEgICAgICAgICAgICAg4pWyICAgOyAgICBcbiAgICAg4pWyIOKVsSAgICAgICAgICAgICAgIOKVsiDilbEgICAgIFxu4pSM4pSA4pSA4pSA4pSQIOKXj+KUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKXjyDilIzilIDilIDilIDilJBcbuKUgiBBIOKUgiAgYC4gICAgICAgICAgICAgLCcgIOKUgiBDIOKUglxu4pSU4pSA4pSA4pSA4pSYICAgICfilIAuICAgICAgICzilIAnICAgIOKUlOKUgOKUgOKUgOKUmFxuICAgICAgICAgICAgYOKUgOKUgOKUgOKUgOKUgCcgICAgICAgICAgICAgICAgICAgICAgICAgXG4gKi9cblxuLyoqXG4gKlxuICogQHBhcmFtIHRyaWFuZ2xlXG4gKlxuICogQHJldHVybnMge251bWJlcn0gY2lyY3VtY2lyY2xlXG4gKi9cbi8vIGh0dHBzOi8vbWF0aC5zdGFja2V4Y2hhbmdlLmNvbS9hLzE0NjAwOTZcblxuZnVuY3Rpb24gZ2V0Q2lyY3VtY2lyY2xlKHRyaWFuZ2xlKSB7XG4gIC8vIFRTLVRPRE8gdGhlIG5leHQgZmV3IGxpbmVzIGFyZSBpZ25vcmVkIGJlY2F1c2UgdGhlIHR5cGVzIGFyZW4ndCBjdXJyZW50IHRvIHRoZSBjaGFuZ2UgaW4gdmVjdG9ycyAodGhhdCBjYW4gbm93IGJlIGl0ZXJhdGVkKVxuICAvLyBAdHMtaWdub3JlXG4gIHZhciBfdHJpYW5nbGUkNyA9IF9zbGljZWRUb0FycmF5KHRyaWFuZ2xlWzBdLCAyKSxcbiAgICAgIGF4ID0gX3RyaWFuZ2xlJDdbMF0sXG4gICAgICBheSA9IF90cmlhbmdsZSQ3WzFdOyAvLyBAdHMtaWdub3JlXG5cblxuICB2YXIgX3RyaWFuZ2xlJDggPSBfc2xpY2VkVG9BcnJheSh0cmlhbmdsZVsxXSwgMiksXG4gICAgICBieCA9IF90cmlhbmdsZSQ4WzBdLFxuICAgICAgYnkgPSBfdHJpYW5nbGUkOFsxXTsgLy8gQHRzLWlnbm9yZVxuXG5cbiAgdmFyIF90cmlhbmdsZSQ5ID0gX3NsaWNlZFRvQXJyYXkodHJpYW5nbGVbMl0sIDIpLFxuICAgICAgY3ggPSBfdHJpYW5nbGUkOVswXSxcbiAgICAgIGN5ID0gX3RyaWFuZ2xlJDlbMV07XG5cbiAgaWYgKGFyZVBvaW50c0NvbGxpbmVhcih0cmlhbmdsZSkpIHJldHVybiBudWxsOyAvLyBwb2ludHMgYXJlIGNvbGxpbmVhclxuXG4gIHZhciBtID0gbmV3IE1hdHJpeDQoKTsgLy8gcHJldHRpZXItaWdub3JlXG5cbiAgbS5zZXQoMSwgMSwgMSwgMSwgYXggKiBheCArIGF5ICogYXksIGF4LCBheSwgMSwgYnggKiBieCArIGJ5ICogYnksIGJ4LCBieSwgMSwgY3ggKiBjeCArIGN5ICogY3ksIGN4LCBjeSwgMSk7XG4gIHZhciBtMTEgPSBnZXRNaW5vcihtLCAxLCAxKTtcbiAgdmFyIG0xMyA9IGdldE1pbm9yKG0sIDEsIDMpO1xuICB2YXIgbTEyID0gZ2V0TWlub3IobSwgMSwgMik7XG4gIHZhciBtMTQgPSBnZXRNaW5vcihtLCAxLCA0KTtcbiAgdmFyIHgwID0gMC41ICogKG0xMiAvIG0xMSk7XG4gIHZhciB5MCA9IDAuNSAqIChtMTMgLyBtMTEpO1xuICB2YXIgcjIgPSB4MCAqIHgwICsgeTAgKiB5MCArIG0xNCAvIG0xMTtcbiAgcmV0dXJuIHtcbiAgICB4OiBNYXRoLmFicyh4MCkgPT09IDAgPyAwIDogeDAsXG4gICAgeTogTWF0aC5hYnMoeTApID09PSAwID8gMCA6IC15MCxcbiAgICByOiBNYXRoLnNxcnQocjIpXG4gIH07XG59IC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5OTg0NzA5L2hvdy1jYW4taS1jaGVjay13ZXRoZXItYS1wb2ludC1pcy1pbnNpZGUtdGhlLWNpcmN1bWNpcmNsZS1vZi0zLXBvaW50c1xuXG5mdW5jdGlvbiBpc1BvaW50SW5DaXJjdW1jaXJjbGUocG9pbnQsIHRyaWFuZ2xlKSB7XG4gIHZhciBfcmVmID0gQXJyYXkuaXNBcnJheSh0cmlhbmdsZVswXSkgPyB0cmlhbmdsZVswXSA6IHRyaWFuZ2xlWzBdLnRvQXJyYXkoKSxcbiAgICAgIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksXG4gICAgICBheCA9IF9yZWYyWzBdLFxuICAgICAgYXkgPSBfcmVmMlsxXTtcblxuICB2YXIgX3JlZjMgPSBBcnJheS5pc0FycmF5KHRyaWFuZ2xlWzFdKSA/IHRyaWFuZ2xlWzFdIDogdHJpYW5nbGVbMV0udG9BcnJheSgpLFxuICAgICAgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMiksXG4gICAgICBieCA9IF9yZWY0WzBdLFxuICAgICAgYnkgPSBfcmVmNFsxXTtcblxuICB2YXIgX3JlZjUgPSBBcnJheS5pc0FycmF5KHRyaWFuZ2xlWzJdKSA/IHRyaWFuZ2xlWzJdIDogdHJpYW5nbGVbMl0udG9BcnJheSgpLFxuICAgICAgX3JlZjYgPSBfc2xpY2VkVG9BcnJheShfcmVmNSwgMiksXG4gICAgICBjeCA9IF9yZWY2WzBdLFxuICAgICAgY3kgPSBfcmVmNlsxXTtcblxuICB2YXIgX3BvaW50MiA9IF9zbGljZWRUb0FycmF5KHBvaW50LCAyKSxcbiAgICAgIHB4ID0gX3BvaW50MlswXSxcbiAgICAgIHB5ID0gX3BvaW50MlsxXTtcblxuICBpZiAoYXJlUG9pbnRzQ29sbGluZWFyKHRyaWFuZ2xlKSkgdGhyb3cgbmV3IEVycm9yKFwiQ29sbGluZWFyIHBvaW50cyBkb24ndCBmb3JtIGEgdHJpYW5nbGVcIik7XG4gIC8qKlxuICAgICAgICAgIHwgYXgtcHgsIGF5LXB5LCAoYXgtcHgpwrIgKyAoYXktcHkpwrIgfFxuICAgIGRldCA9IHwgYngtcHgsIGJ5LXB5LCAoYngtcHgpwrIgKyAoYnktcHkpwrIgfFxuICAgICAgICAgIHwgY3gtcHgsIGN5LXB5LCAoY3gtcHgpwrIgKyAoY3ktcHkpwrIgfFxuICAqL1xuXG4gIHZhciB4MW1weCA9IGF4IC0gcHg7XG4gIHZhciBheW1weSA9IGF5IC0gcHk7XG4gIHZhciBieG1weCA9IGJ4IC0gcHg7XG4gIHZhciBieW1weSA9IGJ5IC0gcHk7XG4gIHZhciBjeG1weCA9IGN4IC0gcHg7XG4gIHZhciBjeW1weSA9IGN5IC0gcHk7IC8vIHByZXR0aWVyLWlnbm9yZVxuXG4gIHZhciBkID0gZGV0ZXJtaW5hbnQzKHgxbXB4LCBheW1weSwgeDFtcHggKiB4MW1weCArIGF5bXB5ICogYXltcHksIGJ4bXB4LCBieW1weSwgYnhtcHggKiBieG1weCArIGJ5bXB5ICogYnltcHksIGN4bXB4LCBjeW1weSwgY3htcHggKiBjeG1weCArIGN5bXB5ICogY3ltcHkpOyAvLyBpZiBkIGlzIDAsIHRoZSBwb2ludCBpcyBvbiBDXG5cbiAgaWYgKGQgPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiAhaXNUcmlhbmdsZUNsb2Nrd2lzZSh0cmlhbmdsZSkgPyBkID4gMCA6IGQgPCAwO1xufSAvLyBGcm9tIGh0dHBzOi8vYWxnb3JpdGhtdHV0b3IuY29tL0NvbXB1dGF0aW9uYWwtR2VvbWV0cnkvRGV0ZXJtaW5pbmctaWYtdHdvLWNvbnNlY3V0aXZlLXNlZ21lbnRzLXR1cm4tbGVmdC1vci1yaWdodC9cblxudmFyIG12MSA9IG5ldyBWZWN0b3IyKCk7XG52YXIgbXYyID0gbmV3IFZlY3RvcjIoKTtcbi8qKlxuIFxuICAgICDilbEgICAgICDilbIgICAgIFxuICAgIOKVsSAgICAgICAg4pWyICAgIFxuICAg4paVICAgICAgICAgIOKWjyAgIFxuICAgICAgICAgICAgICAgICAgXG4gcmlnaHQgICAgICBsZWZ0ICBcblxuICogTk9URTogU2hvdWxkIHRoaXMgdXNlIGEgYnVmZmVyIGluc3RlYWQ/IFt4MCwgeTAsIHgxLCB5MV0/XG4gKi9cblxuZnVuY3Rpb24gZG9UaHJlZVBvaW50c01ha2VBUmlnaHQocG9pbnRzKSB7XG4gIHZhciBfcG9pbnRzJG1hcCA9IHBvaW50cy5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwKSkge1xuICAgICAgcmV0dXJuIF9jb25zdHJ1Y3QoVmVjdG9yMiwgX3RvQ29uc3VtYWJsZUFycmF5KHApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcDtcbiAgfSksXG4gICAgICBfcG9pbnRzJG1hcDIgPSBfc2xpY2VkVG9BcnJheShfcG9pbnRzJG1hcCwgMyksXG4gICAgICBwMSA9IF9wb2ludHMkbWFwMlswXSxcbiAgICAgIHAyID0gX3BvaW50cyRtYXAyWzFdLFxuICAgICAgcDMgPSBfcG9pbnRzJG1hcDJbMl07XG5cbiAgaWYgKGFyZVBvaW50c0NvbGxpbmVhcihwb2ludHMpKSByZXR1cm4gZmFsc2U7IC8vIEB0cy1pZ25vcmVcblxuICB2YXIgcDJwMSA9IG12MS5zdWJWZWN0b3JzKHAyLCBwMSk7IC8vIEB0cy1pZ25vcmVcblxuICB2YXIgcDNwMSA9IG12Mi5zdWJWZWN0b3JzKHAzLCBwMSk7XG4gIHZhciBjcm9zcyA9IHAzcDEuY3Jvc3MocDJwMSk7XG4gIHJldHVybiBjcm9zcyA+IDA7XG59XG5cbnZhciB0cmlhbmdsZSA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBpc1BvaW50SW5UcmlhbmdsZTogaXNQb2ludEluVHJpYW5nbGUsXG4gIHRyaWFuZ2xlRGV0ZXJtaW5hbnQ6IHRyaWFuZ2xlRGV0ZXJtaW5hbnQsXG4gIGFyZVBvaW50c0NvbGxpbmVhcjogYXJlUG9pbnRzQ29sbGluZWFyLFxuICBpc1RyaWFuZ2xlQ2xvY2t3aXNlOiBpc1RyaWFuZ2xlQ2xvY2t3aXNlLFxuICBnZXRDaXJjdW1jaXJjbGU6IGdldENpcmN1bWNpcmNsZSxcbiAgaXNQb2ludEluQ2lyY3VtY2lyY2xlOiBpc1BvaW50SW5DaXJjdW1jaXJjbGUsXG4gIGRvVGhyZWVQb2ludHNNYWtlQVJpZ2h0OiBkb1RocmVlUG9pbnRzTWFrZUFSaWdodFxufSk7XG5cbmV4cG9ydCB7IF9zbGljZWRUb0FycmF5IGFzIF8sIF90b0NvbnN1bWFibGVBcnJheSBhcyBhLCB0cmlhbmdsZURldGVybWluYW50IGFzIGIsIGFyZVBvaW50c0NvbGxpbmVhciBhcyBjLCBkb1RocmVlUG9pbnRzTWFrZUFSaWdodCBhcyBkLCBpc1RyaWFuZ2xlQ2xvY2t3aXNlIGFzIGUsIGlzUG9pbnRJbkNpcmN1bWNpcmNsZSBhcyBmLCBnZXRDaXJjdW1jaXJjbGUgYXMgZywgaXNQb2ludEluVHJpYW5nbGUgYXMgaSwgdHJpYW5nbGUgYXMgdCB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/triangle-b62b9067.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector2-d2bf51f1.esm.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector2-d2bf51f1.esm.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ add),\n/* harmony export */   b: () => (/* binding */ addValue),\n/* harmony export */   c: () => (/* binding */ subValue),\n/* harmony export */   d: () => (/* binding */ scale),\n/* harmony export */   e: () => (/* binding */ dot),\n/* harmony export */   f: () => (/* binding */ length),\n/* harmony export */   g: () => (/* binding */ distance),\n/* harmony export */   l: () => (/* binding */ lengthSqr),\n/* harmony export */   o: () => (/* binding */ one),\n/* harmony export */   s: () => (/* binding */ sub),\n/* harmony export */   v: () => (/* binding */ vector2),\n/* harmony export */   z: () => (/* binding */ zero)\n/* harmony export */ });\n/**\n *\n */\nfunction zero() {\n  return [0, 0];\n}\nfunction one() {\n  return [1, 1];\n}\nfunction add(a, b) {\n  return [a[0] + b[0], a[1] + b[1]];\n}\nfunction addValue(a, n) {\n  return [a[0] + n, a[1] + n];\n}\nfunction sub(a, b) {\n  return [a[0] - b[0], a[1] - b[1]];\n}\nfunction subValue(a, n) {\n  return [a[0] - n, a[1] - n];\n}\nfunction scale(a, n) {\n  return [a[0] * n, a[1] * n];\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Calculate the squared length of a vector.\n * Use this when comparing two vectors instead of length, as it's more efficient (no sqrt)\n */\n\nfunction lengthSqr(a) {\n  return a[0] * a[0] + a[1] * a[1];\n}\n/**\n * Calculate the length of a vector.\n * If you only need to compare lenghts, consider using the more efficient lengthSqr\n */\n\nfunction length(a) {\n  return Math.sqrt(a[0] * a[0] + a[1] * a[1]);\n}\nfunction distance(a, b) {\n  return Math.sqrt((a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]));\n}\n\nvar vector2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  zero: zero,\n  one: one,\n  add: add,\n  addValue: addValue,\n  sub: sub,\n  subValue: subValue,\n  scale: scale,\n  dot: dot,\n  lengthSqr: lengthSqr,\n  length: length,\n  distance: distance\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L3ZlY3RvcjItZDJiZjUxZjEuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRWdLIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcdmVjdG9yMi1kMmJmNTFmMS5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5mdW5jdGlvbiB6ZXJvKCkge1xuICByZXR1cm4gWzAsIDBdO1xufVxuZnVuY3Rpb24gb25lKCkge1xuICByZXR1cm4gWzEsIDFdO1xufVxuZnVuY3Rpb24gYWRkKGEsIGIpIHtcbiAgcmV0dXJuIFthWzBdICsgYlswXSwgYVsxXSArIGJbMV1dO1xufVxuZnVuY3Rpb24gYWRkVmFsdWUoYSwgbikge1xuICByZXR1cm4gW2FbMF0gKyBuLCBhWzFdICsgbl07XG59XG5mdW5jdGlvbiBzdWIoYSwgYikge1xuICByZXR1cm4gW2FbMF0gLSBiWzBdLCBhWzFdIC0gYlsxXV07XG59XG5mdW5jdGlvbiBzdWJWYWx1ZShhLCBuKSB7XG4gIHJldHVybiBbYVswXSAtIG4sIGFbMV0gLSBuXTtcbn1cbmZ1bmN0aW9uIHNjYWxlKGEsIG4pIHtcbiAgcmV0dXJuIFthWzBdICogbiwgYVsxXSAqIG5dO1xufVxuZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV07XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWN0b3IuXG4gKiBVc2UgdGhpcyB3aGVuIGNvbXBhcmluZyB0d28gdmVjdG9ycyBpbnN0ZWFkIG9mIGxlbmd0aCwgYXMgaXQncyBtb3JlIGVmZmljaWVudCAobm8gc3FydClcbiAqL1xuXG5mdW5jdGlvbiBsZW5ndGhTcXIoYSkge1xuICByZXR1cm4gYVswXSAqIGFbMF0gKyBhWzFdICogYVsxXTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBsZW5ndGggb2YgYSB2ZWN0b3IuXG4gKiBJZiB5b3Ugb25seSBuZWVkIHRvIGNvbXBhcmUgbGVuZ2h0cywgY29uc2lkZXIgdXNpbmcgdGhlIG1vcmUgZWZmaWNpZW50IGxlbmd0aFNxclxuICovXG5cbmZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoYVswXSAqIGFbMF0gKyBhWzFdICogYVsxXSk7XG59XG5mdW5jdGlvbiBkaXN0YW5jZShhLCBiKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoKGFbMF0gLSBiWzBdKSAqIChhWzBdIC0gYlswXSkgKyAoYVsxXSAtIGJbMV0pICogKGFbMV0gLSBiWzFdKSk7XG59XG5cbnZhciB2ZWN0b3IyID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHplcm86IHplcm8sXG4gIG9uZTogb25lLFxuICBhZGQ6IGFkZCxcbiAgYWRkVmFsdWU6IGFkZFZhbHVlLFxuICBzdWI6IHN1YixcbiAgc3ViVmFsdWU6IHN1YlZhbHVlLFxuICBzY2FsZTogc2NhbGUsXG4gIGRvdDogZG90LFxuICBsZW5ndGhTcXI6IGxlbmd0aFNxcixcbiAgbGVuZ3RoOiBsZW5ndGgsXG4gIGRpc3RhbmNlOiBkaXN0YW5jZVxufSk7XG5cbmV4cG9ydCB7IGFkZCBhcyBhLCBhZGRWYWx1ZSBhcyBiLCBzdWJWYWx1ZSBhcyBjLCBzY2FsZSBhcyBkLCBkb3QgYXMgZSwgbGVuZ3RoIGFzIGYsIGRpc3RhbmNlIGFzIGcsIGxlbmd0aFNxciBhcyBsLCBvbmUgYXMgbywgc3ViIGFzIHMsIHZlY3RvcjIgYXMgdiwgemVybyBhcyB6IH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector2-d2bf51f1.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector3-0a088b7f.esm.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector3-0a088b7f.esm.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ add),\n/* harmony export */   b: () => (/* binding */ addValue),\n/* harmony export */   c: () => (/* binding */ subValue),\n/* harmony export */   d: () => (/* binding */ scale),\n/* harmony export */   e: () => (/* binding */ dot),\n/* harmony export */   f: () => (/* binding */ cross),\n/* harmony export */   g: () => (/* binding */ length),\n/* harmony export */   h: () => (/* binding */ distance),\n/* harmony export */   l: () => (/* binding */ lengthSqr),\n/* harmony export */   o: () => (/* binding */ one),\n/* harmony export */   s: () => (/* binding */ sub),\n/* harmony export */   v: () => (/* binding */ vector3),\n/* harmony export */   z: () => (/* binding */ zero)\n/* harmony export */ });\n/**\n *\n */\nfunction zero() {\n  return [0, 0, 0];\n}\nfunction one() {\n  return [1, 1, 1];\n}\nfunction add(a, b) {\n  return [a[0] + b[0], a[1] + b[1], a[2] + b[2]];\n}\nfunction addValue(a, n) {\n  return [a[0] + n, a[1] + n, a[2] + n];\n}\nfunction sub(a, b) {\n  return [a[0] - b[0], a[1] - b[1], a[2] - b[2]];\n}\nfunction subValue(a, n) {\n  return [a[0] - n, a[1] - n, a[2] - n];\n}\nfunction scale(a, n) {\n  return [a[0] * n, a[1] * n, a[2] * n];\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction cross(a, b) {\n  var x = a[1] * b[2] - a[2] * b[1];\n  var y = a[2] * b[0] - a[0] * b[2];\n  var z = a[0] * b[1] - a[1] * b[0];\n  return [x, y, z];\n}\n/**\n * Calculate the squared length of a vector.\n * Use this when comparing two vectors instead of length, as it's more efficient (no sqrt)\n */\n\nfunction lengthSqr(a) {\n  return a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n}\n/**\n * Calculate the length of a vector.\n * If you only need to compare lenghts, consider using the more efficient lengthSqr\n */\n\nfunction length(a) {\n  return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);\n}\nfunction distance(a, b) {\n  return Math.sqrt((a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]) + (a[2] - b[2]) * (a[2] - b[2]));\n}\n\nvar vector3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  zero: zero,\n  one: one,\n  add: add,\n  addValue: addValue,\n  sub: sub,\n  subValue: subValue,\n  scale: scale,\n  dot: dot,\n  cross: cross,\n  lengthSqr: lengthSqr,\n  length: length,\n  distance: distance\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL3Bvc3Rwcm9jZXNzaW5nL25vZGVfbW9kdWxlcy9tYWF0aC9kaXN0L3ZlY3RvcjMtMGEwODhiN2YuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRTRLIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEZXNrdG9wXFxwYXJlbnRseXRpY3NcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LXRocmVlXFxwb3N0cHJvY2Vzc2luZ1xcbm9kZV9tb2R1bGVzXFxtYWF0aFxcZGlzdFxcdmVjdG9yMy0wYTA4OGI3Zi5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5mdW5jdGlvbiB6ZXJvKCkge1xuICByZXR1cm4gWzAsIDAsIDBdO1xufVxuZnVuY3Rpb24gb25lKCkge1xuICByZXR1cm4gWzEsIDEsIDFdO1xufVxuZnVuY3Rpb24gYWRkKGEsIGIpIHtcbiAgcmV0dXJuIFthWzBdICsgYlswXSwgYVsxXSArIGJbMV0sIGFbMl0gKyBiWzJdXTtcbn1cbmZ1bmN0aW9uIGFkZFZhbHVlKGEsIG4pIHtcbiAgcmV0dXJuIFthWzBdICsgbiwgYVsxXSArIG4sIGFbMl0gKyBuXTtcbn1cbmZ1bmN0aW9uIHN1YihhLCBiKSB7XG4gIHJldHVybiBbYVswXSAtIGJbMF0sIGFbMV0gLSBiWzFdLCBhWzJdIC0gYlsyXV07XG59XG5mdW5jdGlvbiBzdWJWYWx1ZShhLCBuKSB7XG4gIHJldHVybiBbYVswXSAtIG4sIGFbMV0gLSBuLCBhWzJdIC0gbl07XG59XG5mdW5jdGlvbiBzY2FsZShhLCBuKSB7XG4gIHJldHVybiBbYVswXSAqIG4sIGFbMV0gKiBuLCBhWzJdICogbl07XG59XG5mdW5jdGlvbiBkb3QoYSwgYikge1xuICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdO1xufVxuZnVuY3Rpb24gY3Jvc3MoYSwgYikge1xuICB2YXIgeCA9IGFbMV0gKiBiWzJdIC0gYVsyXSAqIGJbMV07XG4gIHZhciB5ID0gYVsyXSAqIGJbMF0gLSBhWzBdICogYlsyXTtcbiAgdmFyIHogPSBhWzBdICogYlsxXSAtIGFbMV0gKiBiWzBdO1xuICByZXR1cm4gW3gsIHksIHpdO1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjdG9yLlxuICogVXNlIHRoaXMgd2hlbiBjb21wYXJpbmcgdHdvIHZlY3RvcnMgaW5zdGVhZCBvZiBsZW5ndGgsIGFzIGl0J3MgbW9yZSBlZmZpY2llbnQgKG5vIHNxcnQpXG4gKi9cblxuZnVuY3Rpb24gbGVuZ3RoU3FyKGEpIHtcbiAgcmV0dXJuIGFbMF0gKiBhWzBdICsgYVsxXSAqIGFbMV0gKyBhWzJdICogYVsyXTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBsZW5ndGggb2YgYSB2ZWN0b3IuXG4gKiBJZiB5b3Ugb25seSBuZWVkIHRvIGNvbXBhcmUgbGVuZ2h0cywgY29uc2lkZXIgdXNpbmcgdGhlIG1vcmUgZWZmaWNpZW50IGxlbmd0aFNxclxuICovXG5cbmZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoYVswXSAqIGFbMF0gKyBhWzFdICogYVsxXSArIGFbMl0gKiBhWzJdKTtcbn1cbmZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgcmV0dXJuIE1hdGguc3FydCgoYVswXSAtIGJbMF0pICogKGFbMF0gLSBiWzBdKSArIChhWzFdIC0gYlsxXSkgKiAoYVsxXSAtIGJbMV0pICsgKGFbMl0gLSBiWzJdKSAqIChhWzJdIC0gYlsyXSkpO1xufVxuXG52YXIgdmVjdG9yMyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICB6ZXJvOiB6ZXJvLFxuICBvbmU6IG9uZSxcbiAgYWRkOiBhZGQsXG4gIGFkZFZhbHVlOiBhZGRWYWx1ZSxcbiAgc3ViOiBzdWIsXG4gIHN1YlZhbHVlOiBzdWJWYWx1ZSxcbiAgc2NhbGU6IHNjYWxlLFxuICBkb3Q6IGRvdCxcbiAgY3Jvc3M6IGNyb3NzLFxuICBsZW5ndGhTcXI6IGxlbmd0aFNxcixcbiAgbGVuZ3RoOiBsZW5ndGgsXG4gIGRpc3RhbmNlOiBkaXN0YW5jZVxufSk7XG5cbmV4cG9ydCB7IGFkZCBhcyBhLCBhZGRWYWx1ZSBhcyBiLCBzdWJWYWx1ZSBhcyBjLCBzY2FsZSBhcyBkLCBkb3QgYXMgZSwgY3Jvc3MgYXMgZiwgbGVuZ3RoIGFzIGcsIGRpc3RhbmNlIGFzIGgsIGxlbmd0aFNxciBhcyBsLCBvbmUgYXMgbywgc3ViIGFzIHMsIHZlY3RvcjMgYXMgdiwgemVybyBhcyB6IH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@react-three/postprocessing/node_modules/maath/dist/vector3-0a088b7f.esm.js\n");

/***/ })

};
;