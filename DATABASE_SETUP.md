# Database Setup Guide for Parentlytics

## ğŸš¨ **Current Issue**
The application is getting 404 errors because the database tables don't exist in your Supabase project.

## ğŸ”§ **Quick Fix**

### Step 1: Access Your Supabase Dashboard
1. Go to [supabase.com](https://supabase.com)
2. Sign in to your account
3. Open your project: `gdhphdycxxwffasekjjr`

### Step 2: Run the Database Setup Script
1. In your Supabase dashboard, go to **SQL Editor**
2. Click **New Query**
3. Copy and paste the contents of `scripts/setup-database-dev.sql`
4. Click **Run** to execute the script

### Step 3: Verify Setup
After running the script, you should see:
- âœ… `child_profiles` table created
- âœ… `daily_meals` table created
- âœ… Test data inserted
- âœ… Row Level Security disabled for development

## ğŸ“‹ **What the Script Does**

The setup script creates:

### `child_profiles` Table
- Stores child information (name, birthdate, weight, height, etc.)
- Uses `TEXT` for `user_id` to work with mock authentication
- Includes validation for gender and activity level

### `daily_meals` Table
- Stores daily meal plans generated by AI
- Links to child profiles via foreign key
- Uses JSONB for flexible meal plan storage

### Security Settings
- **Development**: RLS disabled for easier testing
- **Production**: RLS enabled with proper policies

## ğŸ§ª **Testing the Setup**

After running the script, test the application:

1. **Visit the test endpoint**: `http://localhost:3000/api/test-db`
2. **Try creating a child profile**: Go through the signup â†’ setup-child flow
3. **Check the database**: In Supabase Table Editor, you should see the new records

## ğŸ” **Troubleshooting**

### If you still get 404 errors:
1. **Check your Supabase URL**: Make sure it matches in `app/supabaseClient.ts`
2. **Verify your API key**: Check `NEXT_PUBLIC_SUPABASE_ANON_KEY` in `.env.local`
3. **Check table names**: Ensure they match exactly: `child_profiles`, `daily_meals`

### If you get permission errors:
1. **RLS is enabled**: Use the development script that disables RLS
2. **API key issues**: Regenerate your anon key in Supabase settings

### Environment Variables
Make sure you have these in your `.env.local`:
```env
NEXT_PUBLIC_SUPABASE_URL=https://gdhphdycxxwffasekjjr.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

## ğŸš€ **Next Steps**

Once the database is set up:
1. The child profile creation should work
2. The diet page will be able to fetch and store meal plans
3. The AI chat will have access to child data
4. All features will work as expected

## ğŸ“ **Need Help?**

If you're still having issues:
1. Check the browser console for detailed error messages
2. Verify the Supabase connection in the dashboard
3. Test with the provided database check script

The application includes fallback mechanisms, so even if the database fails, it will create mock profiles to keep the app functional! ğŸ‰ 